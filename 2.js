webpackJsonp([2],{1420:function(e,t,n){"use strict";function a(e){function t(){l.add(e,"ps-focus")}function n(){l.remove(e,"ps-focus")}var a=this;a.settings=r.clone(c),a.containerWidth=null,a.containerHeight=null,a.contentWidth=null,a.contentHeight=null,a.isRtl="rtl"===u.css(e,"direction"),a.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),a.negativeScrollAdjustment=a.isNegativeScroll?e.scrollWidth-e.clientWidth:0,a.event=new p,a.ownerDocument=e.ownerDocument||document,a.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),e),a.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),a.scrollbarXRail),a.scrollbarX.setAttribute("tabindex",0),a.event.bind(a.scrollbarX,"focus",t),a.event.bind(a.scrollbarX,"blur",n),a.scrollbarXActive=null,a.scrollbarXWidth=null,a.scrollbarXLeft=null,a.scrollbarXBottom=r.toInt(u.css(a.scrollbarXRail,"bottom")),a.isScrollbarXUsingBottom=a.scrollbarXBottom===a.scrollbarXBottom,a.scrollbarXTop=a.isScrollbarXUsingBottom?null:r.toInt(u.css(a.scrollbarXRail,"top")),a.railBorderXWidth=r.toInt(u.css(a.scrollbarXRail,"borderLeftWidth"))+r.toInt(u.css(a.scrollbarXRail,"borderRightWidth")),u.css(a.scrollbarXRail,"display","block"),a.railXMarginWidth=r.toInt(u.css(a.scrollbarXRail,"marginLeft"))+r.toInt(u.css(a.scrollbarXRail,"marginRight")),u.css(a.scrollbarXRail,"display",""),a.railXWidth=null,a.railXRatio=null,a.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),e),a.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),a.scrollbarYRail),a.scrollbarY.setAttribute("tabindex",0),a.event.bind(a.scrollbarY,"focus",t),a.event.bind(a.scrollbarY,"blur",n),a.scrollbarYActive=null,a.scrollbarYHeight=null,a.scrollbarYTop=null,a.scrollbarYRight=r.toInt(u.css(a.scrollbarYRail,"right")),a.isScrollbarYUsingRight=a.scrollbarYRight===a.scrollbarYRight,a.scrollbarYLeft=a.isScrollbarYUsingRight?null:r.toInt(u.css(a.scrollbarYRail,"left")),a.scrollbarYOuterWidth=a.isRtl?r.outerWidth(a.scrollbarY):null,a.railBorderYWidth=r.toInt(u.css(a.scrollbarYRail,"borderTopWidth"))+r.toInt(u.css(a.scrollbarYRail,"borderBottomWidth")),u.css(a.scrollbarYRail,"display","block"),a.railYMarginHeight=r.toInt(u.css(a.scrollbarYRail,"marginTop"))+r.toInt(u.css(a.scrollbarYRail,"marginBottom")),u.css(a.scrollbarYRail,"display",""),a.railYHeight=null,a.railYRatio=null}function i(e){return e.getAttribute("data-ps-id")}function o(e,t){e.setAttribute("data-ps-id",t)}function s(e){e.removeAttribute("data-ps-id")}var r=n(1421),l=n(1425),c=n(1437),u=n(1424),p=n(1438),d=n(1439),h={};t.add=function(e){var t=d();return o(e,t),h[t]=new a(e),h[t]},t.remove=function(e){delete h[i(e)],s(e)},t.get=function(e){return h[i(e)]}},1421:function(e,t,n){"use strict";var a=n(1425),i=n(1424),o=t.toInt=function(e){return parseInt(e,10)||0},s=t.clone=function(e){if(e){if(e.constructor===Array)return e.map(s);if("object"==typeof e){var t={};for(var n in e)t[n]=s(e[n]);return t}return e}return null};t.extend=function(e,t){var n=s(e);for(var a in t)n[a]=s(t[a]);return n},t.isEditable=function(e){return i.matches(e,"input,[contenteditable]")||i.matches(e,"select,[contenteditable]")||i.matches(e,"textarea,[contenteditable]")||i.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=a.list(e),n=0;n<t.length;n++){var i=t[n];0===i.indexOf("ps-")&&a.remove(e,i)}},t.outerWidth=function(e){return o(i.css(e,"width"))+o(i.css(e,"paddingLeft"))+o(i.css(e,"paddingRight"))+o(i.css(e,"borderLeftWidth"))+o(i.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){a.add(e,"ps-in-scrolling"),void 0!==t?a.add(e,"ps-"+t):(a.add(e,"ps-x"),a.add(e,"ps-y"))},t.stopScrolling=function(e,t){a.remove(e,"ps-in-scrolling"),void 0!==t?a.remove(e,"ps-"+t):(a.remove(e,"ps-x"),a.remove(e,"ps-y"))},t.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},1422:function(e,t,n){"use strict";function a(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function i(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,r.css(t.scrollbarXRail,n);var a={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?a.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:a.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?a.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:a.left=t.scrollbarYLeft+e.scrollLeft,r.css(t.scrollbarYRail,a),r.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),r.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var o=n(1421),s=n(1425),r=n(1424),l=n(1420),c=n(1423);e.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=r.queryChildren(e,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(e){r.remove(e)}),r.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=r.queryChildren(e,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(e){r.remove(e)}),r.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=a(t,o.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=o.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=a(t,o.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=o.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),i(e,t),t.scrollbarXActive?s.add(e,"ps-active-x"):(s.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,c(e,"left",0)),t.scrollbarYActive?s.add(e,"ps-active-y"):(s.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,c(e,"top",0))}},1423:function(e,t,n){"use strict";var a,i,o=n(1420),s=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(s("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(s("ps-x-reach-start")));var r=o.get(e);"top"===t&&n>=r.contentHeight-r.containerHeight&&(n=r.contentHeight-r.containerHeight,n-e.scrollTop<=1?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(s("ps-y-reach-end"))),"left"===t&&n>=r.contentWidth-r.containerWidth&&(n=r.contentWidth-r.containerWidth,n-e.scrollLeft<=1?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(s("ps-x-reach-end"))),a||(a=e.scrollTop),i||(i=e.scrollLeft),"top"===t&&n<a&&e.dispatchEvent(s("ps-scroll-up")),"top"===t&&n>a&&e.dispatchEvent(s("ps-scroll-down")),"left"===t&&n<i&&e.dispatchEvent(s("ps-scroll-left")),"left"===t&&n>i&&e.dispatchEvent(s("ps-scroll-right")),"top"===t&&(e.scrollTop=a=n,e.dispatchEvent(s("ps-scroll-y"))),"left"===t&&(e.scrollLeft=i=n,e.dispatchEvent(s("ps-scroll-x")))}},1424:function(e,t,n){"use strict";function a(e,t){return window.getComputedStyle(e)[t]}function i(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function o(e,t){for(var n in t){var a=t[n];"number"==typeof a&&(a=a.toString()+"px"),e.style[n]=a}return e}var s={};s.e=function(e,t){var n=document.createElement(e);return n.className=t,n},s.appendTo=function(e,t){return t.appendChild(e),e},s.css=function(e,t,n){return"object"==typeof t?o(e,t):void 0===n?a(e,t):i(e,t,n)},s.matches=function(e,t){return void 0!==e.matches?e.matches(t):void 0!==e.matchesSelector?e.matchesSelector(t):void 0!==e.webkitMatchesSelector?e.webkitMatchesSelector(t):void 0!==e.mozMatchesSelector?e.mozMatchesSelector(t):void 0!==e.msMatchesSelector?e.msMatchesSelector(t):void 0},s.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},s.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return s.matches(e,t)})},e.exports=s},1425:function(e,t,n){"use strict";function a(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function i(e,t){var n=e.className.split(" "),a=n.indexOf(t);a>=0&&n.splice(a,1),e.className=n.join(" ")}t.add=function(e,t){e.classList?e.classList.add(t):a(e,t)},t.remove=function(e,t){e.classList?e.classList.remove(t):i(e,t)},t.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},1426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},1427:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=i;var o=n(1),s=(a(o),n(25)),r=a(s);t.nameShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,leave:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterActive:r.default.string,leave:r.default.string,leaveActive:r.default.string,appear:r.default.string,appearActive:r.default.string})])},1428:function(e,t,n){"use strict";e.exports=n(1435)},1429:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),r=n.n(s),l=n(81),c=n(36),u=n(37),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"render",value:function(){var e=Number(this.props.balance.get("balance")),t=this.props.balance.get("asset_type");return r.a.createElement(l.a,{amount:e,asset:t,asPercentage:this.props.asPercentage,assetInfo:this.props.assetInfo,replace:this.props.replace,hide_asset:this.props.hide_asset})}}]),t}(r.a.Component);d.propTypes={balance:c.a.ChainObject.isRequired,assetInfo:r.a.PropTypes.node,hide_asset:r.a.PropTypes.bool},d.defaultProps={hide_asset:!1},t.a=Object(u.a)(d,{keep_updating:!0})},1431:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),r=n.n(s),l=n(4),c=n.n(l),u=n(36),p=n(37),d=n(81),h=n(630),m=n(24),_=n.n(m),f=n(13),y=n.n(f),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),v(t,[{key:"render",value:function(){return 0===this.props.assets.length?null:r.a.createElement(h.a,{entries:this.props.assets.map(function(e){return e&&e.get("symbol")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get("symbol")&&(e[t.get("symbol")]=t),e},{}),singleEntry:this.props.assets[0]?r.a.createElement(d.a,{asset:this.props.assets[0].get("id"),amount:0,hide_amount:!0}):null,value:this.props.value,onChange:this.props.onChange})}}]),t}(r.a.Component);g.propTypes={assets:u.a.ChainAssetsList,value:r.a.PropTypes.string,onChange:r.a.PropTypes.func},g=Object(p.a)(g);var b=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),v(t,[{key:"componentDidMount",value:function(){this.onAssetChange(this.props.asset)}},{key:"formatAmount",value:function(e){return e||(e=""),"number"==typeof e&&(e=e.toString()),e.trim().replace(/,/g,"")}},{key:"_onChange",value:function(e){var t=e.target.value;this.props.onChange({amount:t,asset:this.props.asset})}},{key:"onAssetChange",value:function(e){this.props.onChange({amount:this.props.amount,asset:e})}},{key:"render",value:function(){var e=this.props.error?y.a.translate(this.props.error):this.formatAmount(this.props.amount);return r.a.createElement("div",{className:"amount-selector",style:this.props.style},r.a.createElement("label",{className:"right-label"},this.props.display_balance),r.a.createElement(c.a,{className:"left-label",component:"label",content:this.props.label}),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{disabled:this.props.disabled,type:"text",value:e||"",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex}),r.a.createElement("div",{className:"form-label select floating-dropdown"},r.a.createElement(g,{ref:this.props.refCallback,value:this.props.asset.get("symbol"),assets:_.a.List(this.props.assets),onChange:this.onAssetChange.bind(this)}))))}}]),t}(r.a.Component);b.propTypes={label:r.a.PropTypes.string,asset:u.a.ChainAsset.isRequired,assets:r.a.PropTypes.array,amount:r.a.PropTypes.any,placeholder:r.a.PropTypes.string,onChange:r.a.PropTypes.func.isRequired,tabIndex:r.a.PropTypes.number,error:r.a.PropTypes.string},b.defaultProps={disabled:!1},b=Object(p.a)(b),t.a=b},1432:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),r=n.n(s),l=n(1453),c=n.n(l),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return o(t,e),u(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?r.a.createElement(c.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):r.a.createElement(this.props.component)}}]),t}(r.a.Component);p.defaultProps={component:"span",enterTimeout:2e3},t.a=p},1435:function(e,t,n){"use strict";var a=n(1436),i=n(1440),o=n(1448);e.exports={initialize:i,update:o,destroy:a}},1436:function(e,t,n){"use strict";var a=n(1421),i=n(1424),o=n(1420);e.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),a.removePsClasses(e),o.remove(e))}},1437:function(e,t,n){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},1438:function(e,t,n){"use strict";var a=function(e){this.element=e,this.events={}};a.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},a.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter(function(a){return!(!n||a===t)||(this.element.removeEventListener(e,a,!1),!1)},this)},a.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var i=function(){this.eventElements=[]};i.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return void 0===t&&(t=new a(e),this.eventElements.push(t)),t},i.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},i.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},i.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},i.prototype.once=function(e,t,n){var a=this.eventElement(e),i=function(e){a.unbind(t,i),n(e)};a.bind(t,i)},e.exports=i},1439:function(e,t,n){"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},1440:function(e,t,n){"use strict";var a=n(1421),i=n(1425),o=n(1420),s=n(1422),r={"click-rail":n(1441),"drag-scrollbar":n(1442),keyboard:n(1443),wheel:n(1444),touch:n(1445),selection:n(1446)},l=n(1447);e.exports=function(e,t){t="object"==typeof t?t:{},i.add(e,"ps-container");var n=o.add(e);n.settings=a.extend(n.settings,t),i.add(e,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(t){r[t](e)}),l(e),s(e)}},1441:function(e,t,n){"use strict";function a(e,t){function n(e){return e.getBoundingClientRect()}var a=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",a),t.event.bind(t.scrollbarYRail,"click",function(a){var i=a.pageY-window.pageYOffset-n(t.scrollbarYRail).top,r=i>t.scrollbarYTop?1:-1;s(e,"top",e.scrollTop+r*t.containerHeight),o(e),a.stopPropagation()}),t.event.bind(t.scrollbarX,"click",a),t.event.bind(t.scrollbarXRail,"click",function(a){var i=a.pageX-window.pageXOffset-n(t.scrollbarXRail).left,r=i>t.scrollbarXLeft?1:-1;s(e,"left",e.scrollLeft+r*t.containerWidth),o(e),a.stopPropagation()})}var i=n(1420),o=n(1422),s=n(1423);e.exports=function(e){a(e,i.get(e))}},1442:function(e,t,n){"use strict";function a(e,t){function n(n){var i=a+n*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=i<0?0:i>s?s:i;var r=o.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;c(e,"left",r)}var a=null,i=null,r=function(t){n(t.pageX-i),l(e),t.stopPropagation(),t.preventDefault()},u=function(){o.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",r)};t.event.bind(t.scrollbarX,"mousedown",function(n){i=n.pageX,a=o.toInt(s.css(t.scrollbarX,"left"))*t.railXRatio,o.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",r),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function i(e,t){function n(n){var i=a+n*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=i<0?0:i>s?s:i;var r=o.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));c(e,"top",r)}var a=null,i=null,r=function(t){n(t.pageY-i),l(e),t.stopPropagation(),t.preventDefault()},u=function(){o.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",r)};t.event.bind(t.scrollbarY,"mousedown",function(n){i=n.pageY,a=o.toInt(s.css(t.scrollbarY,"top"))*t.railYRatio,o.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",r),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var o=n(1421),s=n(1424),r=n(1420),l=n(1422),c=n(1423);e.exports=function(e){var t=r.get(e);a(e,t),i(e,t)}},1443:function(e,t,n){"use strict";function a(e,t){function n(n,a){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&a>0||i>=t.contentHeight-t.containerHeight&&a<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===a){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var a=!1;t.event.bind(e,"mouseenter",function(){a=!0}),t.event.bind(e,"mouseleave",function(){a=!1});var s=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var u=o.matches(t.scrollbarX,":focus")||o.matches(t.scrollbarY,":focus");if(a||u){var p=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(p){if("IFRAME"===p.tagName)p=p.contentDocument.activeElement;else for(;p.shadowRoot;)p=p.shadowRoot.activeElement;if(i.isEditable(p))return}var d=0,h=0;switch(c.which){case 37:d=c.metaKey?-t.contentWidth:c.altKey?-t.containerWidth:-30;break;case 38:h=c.metaKey?t.contentHeight:c.altKey?t.containerHeight:30;break;case 39:d=c.metaKey?t.contentWidth:c.altKey?t.containerWidth:30;break;case 40:h=c.metaKey?-t.contentHeight:c.altKey?-t.containerHeight:-30;break;case 33:h=90;break;case 32:h=c.shiftKey?90:-90;break;case 34:h=-90;break;case 35:h=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:h=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-h),l(e,"left",e.scrollLeft+d),r(e),s=n(d,h),s&&c.preventDefault()}}})}var i=n(1421),o=n(1424),s=n(1420),r=n(1422),l=n(1423);e.exports=function(e){a(e,s.get(e))}},1444:function(e,t,n){"use strict";function a(e,t){function n(n,a){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&a>0||i>=t.contentHeight-t.containerHeight&&a<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===a){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function a(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}function i(t,n){var a=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(a){if(a.className.match(/ps-must-propagate/))return!0;if(!window.getComputedStyle(a).overflow.match(/(scroll|auto)/))return!1;var i=a.scrollHeight-a.clientHeight;if(i>0&&!(0===a.scrollTop&&n>0||a.scrollTop===i&&n<0))return!0;var o=a.scrollLeft-a.clientWidth;if(o>0&&!(0===a.scrollLeft&&t<0||a.scrollLeft===o&&t>0))return!0}return!1}function r(r){var c=a(r),u=c[0],p=c[1];i(u,p)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(p?s(e,"top",e.scrollTop-p*t.settings.wheelSpeed):s(e,"top",e.scrollTop+u*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?s(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):s(e,"left",e.scrollLeft-p*t.settings.wheelSpeed),l=!0):(s(e,"top",e.scrollTop-p*t.settings.wheelSpeed),s(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),o(e),(l=l||n(u,p))&&(r.stopPropagation(),r.preventDefault()))}var l=!1;void 0!==window.onwheel?t.event.bind(e,"wheel",r):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",r)}var i=n(1420),o=n(1422),s=n(1423);e.exports=function(e){a(e,i.get(e))}},1445:function(e,t,n){"use strict";function a(e,t,n,a){function i(n,a){var i=e.scrollTop,o=e.scrollLeft,s=Math.abs(n),r=Math.abs(a);if(r>s){if(a<0&&i===t.contentHeight-t.containerHeight||a>0&&0===i)return!t.settings.swipePropagation}else if(s>r&&(n<0&&o===t.contentWidth-t.containerWidth||n>0&&0===o))return!t.settings.swipePropagation;return!0}function l(t,n){r(e,"top",e.scrollTop-n),r(e,"left",e.scrollLeft-t),s(e)}function c(){b=!0}function u(){b=!1}function p(e){return e.targetTouches?e.targetTouches[0]:e}function d(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function h(e){if(d(e)){w=!0;var t=p(e);f.pageX=t.pageX,f.pageY=t.pageY,y=(new Date).getTime(),null!==g&&clearInterval(g),e.stopPropagation()}}function m(e){if(!w&&t.settings.swipePropagation&&h(e),!b&&w&&d(e)){var n=p(e),a={pageX:n.pageX,pageY:n.pageY},o=a.pageX-f.pageX,s=a.pageY-f.pageY;l(o,s),f=a;var r=(new Date).getTime(),c=r-y;c>0&&(v.x=o/c,v.y=s/c,y=r),i(o,s)&&(e.stopPropagation(),e.preventDefault())}}function _(){!b&&w&&(w=!1,clearInterval(g),g=setInterval(function(){return o.get(e)&&(v.x||v.y)?Math.abs(v.x)<.01&&Math.abs(v.y)<.01?void clearInterval(g):(l(30*v.x,30*v.y),v.x*=.8,void(v.y*=.8)):void clearInterval(g)},10))}var f={},y=0,v={},g=null,b=!1,w=!1;n?(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",h),t.event.bind(e,"touchmove",m),t.event.bind(e,"touchend",_)):a&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",h),t.event.bind(e,"pointermove",m),t.event.bind(e,"pointerup",_)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",h),t.event.bind(e,"MSPointerMove",m),t.event.bind(e,"MSPointerUp",_)))}var i=n(1421),o=n(1420),s=n(1422),r=n(1423);e.exports=function(e){if(i.env.supportsTouch||i.env.supportsIePointer){a(e,o.get(e),i.env.supportsTouch,i.env.supportsIePointer)}}},1446:function(e,t,n){"use strict";function a(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function a(){c||(c=setInterval(function(){if(!o.get(e))return void clearInterval(c);r(e,"top",e.scrollTop+u.top),r(e,"left",e.scrollLeft+u.left),s(e)},50))}function l(){c&&(clearInterval(c),c=null),i.stopScrolling(e)}var c=null,u={top:0,left:0},p=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?p=!0:(p=!1,l())}),t.event.bind(window,"mouseup",function(){p&&(p=!1,l())}),t.event.bind(window,"keyup",function(){p&&(p=!1,l())}),t.event.bind(window,"mousemove",function(t){if(p){var n={x:t.pageX,y:t.pageY},o={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<o.left+3?(u.left=-5,i.startScrolling(e,"x")):n.x>o.right-3?(u.left=5,i.startScrolling(e,"x")):u.left=0,n.y<o.top+3?(u.top=o.top+3-n.y<5?-5:-20,i.startScrolling(e,"y")):n.y>o.bottom-3?(u.top=n.y-o.bottom+3<5?5:20,i.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?l():a()}})}var i=n(1421),o=n(1420),s=n(1422),r=n(1423);e.exports=function(e){a(e,o.get(e))}},1447:function(e,t,n){"use strict";function a(e,t){t.event.bind(e,"scroll",function(){o(e)})}var i=n(1420),o=n(1422);e.exports=function(e){a(e,i.get(e))}},1448:function(e,t,n){"use strict";var a=n(1421),i=n(1424),o=n(1420),s=n(1422),r=n(1423);e.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=a.toInt(i.css(t.scrollbarXRail,"marginLeft"))+a.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=a.toInt(i.css(t.scrollbarYRail,"marginTop"))+a.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),s(e),r(e,"top",e.scrollTop),r(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},1453:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=n(1),c=a(l),u=n(25),p=a(u),d=n(1454),h=a(d),m=n(1457),_=a(m),f=n(1427),y=(f.nameShape.isRequired,p.default.bool,p.default.bool,p.default.bool,(0,f.transitionTimeout)("Appear"),(0,f.transitionTimeout)("Enter"),(0,f.transitionTimeout)("Leave"),{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}),v=function(e){function t(){var n,a,s;i(this,t);for(var r=arguments.length,l=Array(r),u=0;u<r;u++)l[u]=arguments[u];return n=a=o(this,e.call.apply(e,[this].concat(l))),a._wrapChild=function(e){return c.default.createElement(_.default,{name:a.props.transitionName,appear:a.props.transitionAppear,enter:a.props.transitionEnter,leave:a.props.transitionLeave,appearTimeout:a.props.transitionAppearTimeout,enterTimeout:a.props.transitionEnterTimeout,leaveTimeout:a.props.transitionLeaveTimeout},e)},s=n,o(a,s)}return s(t,e),t.prototype.render=function(){return c.default.createElement(h.default,r({},this.props,{childFactory:this._wrapChild}))},t}(c.default.Component);v.displayName="CSSTransitionGroup",v.propTypes={},v.defaultProps=y,t.default=v,e.exports=t.default},1454:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=n(1455),c=a(l),u=n(1),p=a(u),d=n(25),h=a(d),m=n(74),_=(a(m),n(1456)),f=(h.default.any,h.default.func,h.default.node,{component:"span",childFactory:function(e){return e}}),y=function(e){function t(n,a){i(this,t);var s=o(this,e.call(this,n,a));return s.performAppear=function(e,t){s.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(s._handleDoneAppearing.bind(s,e,t)):s._handleDoneAppearing(e,t)},s._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete s.currentlyTransitioningKeys[e];var n=(0,_.getChildMapping)(s.props.children);n&&n.hasOwnProperty(e)||s.performLeave(e,t)},s.performEnter=function(e,t){s.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(s._handleDoneEntering.bind(s,e,t)):s._handleDoneEntering(e,t)},s._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete s.currentlyTransitioningKeys[e];var n=(0,_.getChildMapping)(s.props.children);n&&n.hasOwnProperty(e)||s.performLeave(e,t)},s.performLeave=function(e,t){s.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(s._handleDoneLeaving.bind(s,e,t)):s._handleDoneLeaving(e,t)},s._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete s.currentlyTransitioningKeys[e];var n=(0,_.getChildMapping)(s.props.children);n&&n.hasOwnProperty(e)?s.keysToEnter.push(e):s.setState(function(t){var n=r({},t.children);return delete n[e],{children:n}})},s.childRefs=Object.create(null),s.state={children:(0,_.getChildMapping)(n.children)},s}return s(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,_.getChildMapping)(e.children),n=this.state.children;this.setState({children:(0,_.mergeChildMappings)(n,t)});for(var a in t){var i=n&&n.hasOwnProperty(a);!t[a]||i||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(var o in n){var s=t&&t.hasOwnProperty(o);!n[o]||s||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[];for(var n in this.state.children)!function(n){var a=e.state.children[n];if(a){var i="string"!=typeof a.ref,o=e.props.childFactory(a),s=function(t){e.childRefs[n]=t};o===a&&i&&(s=(0,c.default)(a.ref,s)),t.push(p.default.cloneElement(o,{key:n,ref:s}))}}(n);var a=r({},this.props);return delete a.transitionLeave,delete a.transitionName,delete a.transitionAppear,delete a.transitionEnter,delete a.childFactory,delete a.transitionLeaveTimeout,delete a.transitionEnterTimeout,delete a.transitionAppearTimeout,delete a.component,p.default.createElement(this.props.component,a,t)},t}(p.default.Component);y.displayName="TransitionGroup",y.propTypes={},y.defaultProps=f,t.default=y,e.exports=t.default},1455:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(e){return null!=e}),0!==t.length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},1456:function(e,t,n){"use strict";function a(e){if(!e)return e;var t={};return o.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t}function i(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var a={},i=[];for(var o in e)t.hasOwnProperty(o)?i.length&&(a[o]=i,i=[]):i.push(o);var s=void 0,r={};for(var l in t){if(a.hasOwnProperty(l))for(s=0;s<a[l].length;s++){var c=a[l][s];r[a[l][s]]=n(c)}r[l]=n(l)}for(s=0;s<i.length;s++)r[i[s]]=n(i[s]);return r}t.__esModule=!0,t.getChildMapping=a,t.mergeChildMappings=i;var o=n(1)},1457:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){return E.length?E.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){E.length&&E.forEach(function(n){return e.removeEventListener(n,t,!1)})}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=n(1458),u=a(c),p=n(1460),d=a(p),h=n(1461),m=a(h),_=n(1462),f=n(1),y=a(f),v=n(25),g=a(v),b=n(83),w=n(1427),E=[];_.transitionEnd&&E.push(_.transitionEnd),_.animationEnd&&E.push(_.animationEnd);var k=(g.default.node,w.nameShape.isRequired,g.default.bool,g.default.bool,g.default.bool,g.default.number,g.default.number,g.default.number,function(e){function t(){var n,a,s;i(this,t);for(var r=arguments.length,l=Array(r),c=0;c<r;c++)l[c]=arguments[c];return n=a=o(this,e.call.apply(e,[this].concat(l))),a.componentWillAppear=function(e){a.props.appear?a.transition("appear",e,a.props.appearTimeout):e()},a.componentWillEnter=function(e){a.props.enter?a.transition("enter",e,a.props.enterTimeout):e()},a.componentWillLeave=function(e){a.props.leave?a.transition("leave",e,a.props.leaveTimeout):e()},s=n,o(a,s)}return s(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var a=(0,b.findDOMNode)(this);if(!a)return void(t&&t());var i=this.props.name[e]||this.props.name+"-"+e,o=this.props.name[e+"Active"]||i+"-active",s=null,l=void 0;(0,u.default)(a,i),this.queueClassAndNode(o,a);var c=function(e){e&&e.target!==a||(clearTimeout(s),l&&l(),(0,d.default)(a,i),(0,d.default)(a,o),l&&l(),t&&t())};n?(s=setTimeout(c,n),this.transitionTimeouts.push(s)):_.transitionEnd&&(l=r(a,c))},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,m.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,u.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=l({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,y.default.cloneElement(y.default.Children.only(this.props.children),e)},t}(y.default.Component));k.displayName="CSSTransitionGroupChild",k.propTypes={},t.default=k,e.exports=t.default},1458:function(e,t,n){"use strict";function a(e,t){e.classList?e.classList.add(t):(0,o.default)(e)||(e.className=e.className+" "+t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=n(1459),o=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=t.default},1459:function(e,t,n){"use strict";function a(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+e.className+" ").indexOf(" "+t+" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,e.exports=t.default},1460:function(e,t,n){"use strict";e.exports=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}},1461:function(e,t,n){"use strict";function a(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-p)),a=setTimeout(e,n);return p=t,a}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1426),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=["","webkit","moz","o","ms"],r="clearTimeout",l=a,c=void 0,u=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o.default&&s.some(function(e){var t=u(e,"request");if(t in window)return r=u(e,"cancel"),l=function(e){return window[t](e)}});var p=(new Date).getTime();c=function(e){return l(e)},c.cancel=function(e){window[r]&&"function"==typeof window[r]&&window[r](e)},t.default=c,e.exports=t.default},1462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var a=n(1426),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o="transform",s=void 0,r=void 0,l=void 0,c=void 0,u=void 0,p=void 0,d=void 0,h=void 0,m=void 0,_=void 0,f=void 0;if(i.default){var y=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),a=void 0,i=void 0,o="",s=0;s<n.length;s++){var r=n[s];if(r+"TransitionProperty"in e){o="-"+r.toLowerCase(),a=t[r]("TransitionEnd"),i=t[r]("AnimationEnd");break}}return!a&&"transitionProperty"in e&&(a="transitionend"),!i&&"animationName"in e&&(i="animationend"),e=null,{animationEnd:i,transitionEnd:a,prefix:o}}();s=y.prefix,t.transitionEnd=r=y.transitionEnd,t.animationEnd=l=y.animationEnd,t.transform=o=s+"-"+o,t.transitionProperty=c=s+"-transition-property",t.transitionDuration=u=s+"-transition-duration",t.transitionDelay=d=s+"-transition-delay",t.transitionTiming=p=s+"-transition-timing-function",t.animationName=h=s+"-animation-name",t.animationDuration=m=s+"-animation-duration",t.animationTiming=_=s+"-animation-delay",t.animationDelay=f=s+"-animation-timing-function"}t.transform=o,t.transitionProperty=c,t.transitionTiming=p,t.transitionDelay=d,t.transitionDuration=u,t.transitionEnd=r,t.animationName=h,t.animationDuration=m,t.animationTiming=_,t.animationDelay=f,t.animationEnd=l,t.default={transform:o,end:r,property:c,timing:p,delay:d,duration:u}},1464:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.a.BASE_OL+f.a.COINS_LIST;return fetch(e).then(function(e){return e.json().then(function(e){return e})}).catch(function(t){console.log("error fetching simple list of coins",t,e)})}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.a.BASE+f.a.DEPOSIT_LIMIT;return fetch(n+"?inputCoinType="+encodeURIComponent(e)+"&outputCoinType="+encodeURIComponent(t),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(n){console.log("error fetching deposit limit of",e,t,n)})}function o(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.a.BASE+f.a.ESTIMATE_OUTPUT;return fetch(a+"?inputAmount="+encodeURIComponent(e)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(e){console.log("error fetching deposit limit of",t,n,e)})}function s(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.a.BASE+f.a.ESTIMATE_INPUT;return fetch(a+"?outputAmount="+encodeURIComponent(e)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(e){console.log("error fetching deposit limit of",t,n,e)})}function r(e){var t=e.inputCoinType,n=e.outputCoinType,a=e.outputAddress,i=e.url,o=void 0===i?f.a.BASE_OL:i,s=e.stateCallback,r={inputCoinType:t,outputCoinType:n,outputAddress:a},l=JSON.stringify(r);v[l]||(v[l]=!0,fetch(o+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:l}).then(function(e){e.json().then(function(e){delete v[l];var t={address:e.inputAddress||"unknown",memo:e.inputMemo,error:e.error||null};s&&s(t)},function(e){delete v[l],s&&s(null)})},function(e){delete v[l],s&&s(null)}).catch(function(e){console.log("fetch error:",e),delete v[l]}))}function l(e){var t=e.url,n=void 0===t?f.a.BASE:t,a=e.walletType,i=e.newAddress;return i?fetch(n+"/wallets/"+a+"/address-validator?address="+encodeURIComponent(i),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e.isValid})}).catch(function(e){console.log("validate error:",e)}):new Promise(function(e){return e()})}function c(e){var t=e.input_coin_type,n=e.output_coin_type,a=e.url,i=e.account_name;if(!t||!n)return Promise.reject();var o=JSON.stringify({inputCoinType:t,outputCoinType:n,outputAddress:i,inputMemo:"blocktrades conversion: "+t+"to"+n}),s=a+t+n+i;return new Promise(function(e,t){if(g[s])return e(g[s]);fetch(a+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:o}).then(function(n){n.json().then(function(t){g[s]=t,e(t)},t).catch(t)}).catch(t)})}function u(e){return y.has("history_address_"+e)}function p(e){var t=e.wallet,n=e.addresses;y.set("history_address_"+t,n)}function d(e){return y.get("history_address_"+e,[])}function h(e){var t=e.wallet,n=e.address;y.set("history_address_last_"+t,n)}function m(e){return y.get("history_address_last_"+e,"")}t.d=a,t.f=i,t.c=o,t.b=s,t.g=r,t.h=l,t.e=c,n.d(t,"a",function(){return b});var _=n(98),f=n(255),y=new _.a(""),v={},g={},b={has:u,set:p,get:d,setLast:h,getLast:m}},1472:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function r(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}n.d(t,"a",function(){return O}),n.d(t,"b",function(){return N});var l=n(1),c=n.n(l),u=n(4),p=n.n(u),d=n(261),h=(n.n(d),n(635)),m=n(36),_=n(37),f=n(17),y=n(2),v=n(1432),g=n(1428),b=n.n(g),w=n(13),E=n.n(w),k=n(82),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),T=y.c.operations,S={textAlign:"left"},A={textAlign:"right"},O=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={limit:e.limit||20,csvExport:!1,headerHeight:85,filter:"all"},n}return o(t,e),C(t,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;b.a.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!f.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!f.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!f.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var n=0;n<e.accountsList.length;++n){var a=e.accountsList[n],i=this.props.accountsList[n];if(a&&i&&a.get("history")!==i.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container"),t=e.childNodes,n="",a=!0,i=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value,u=c.childNodes;""!==n&&(n+="\n"),n+=[r(u[0]),r(u[1]),r(u[2]),r(u[3])].join(",")}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}var p=new Blob([n],{type:"text/csv;charset=utf-8"}),h=new Date;Object(d.saveAs)(p,"btshist-"+h.getFullYear()+"-"+("0"+(h.getMonth()+1)).slice(-2)+"-"+("0"+h.getDate()).slice(-2)+"-"+("0"+h.getHours()).slice(-2)+("0"+h.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var m=this.refs.transactions;b.a.update(m),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,n){var a=[],i=new Set,o=!0,s=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(u){var p=u.get("history");p&&(a=a.concat(p.toJS().filter(function(e){return!i.has(e.id)&&i.add(e.id)})))}}}catch(e){s=!0,r=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw r}}return t&&(a=a.filter(function(e){return e.op[0]===T[t]})),n&&(a=a.filter(function(e){return n.fields.reduce(function(t,a){switch(a){case"asset_id":return t&&e.op[1].amount[a]===n.values[a];default:return t&&e.op[1][a]===n.values[a]}},!0)})),a}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.accountsList,n=e.compactView,a=e.filter,i=e.customFilter,o=e.style,r=e.maxHeight,l=this.state,u=l.limit,d=l.headerHeight,m=1===t.length&&t[0]?t[0].get("id"):null,_=this._getHistory(t,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:a,i).sort(s),f=_.length;o=o||{},o.width="100%",o.height="100%";var y=null;y=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"].map(function(e){return c.a.createElement("option",{value:e,key:e},E.a.translate("transaction.trxTypes."+e))});var g=_.length?_.slice(0,u).map(function(e){return c.a.createElement(h.a,{style:S,key:e.id,op:e.op,result:e.result,block:e.block_num,current:m,hideFee:!0,inverted:!1,hideOpLabel:n})}):[c.a.createElement("tr",{key:"no_recent"},c.a.createElement("td",{colSpan:n?"2":"3"},c.a.createElement(p.a,{content:"operation.no_recent"})))];return g.push(c.a.createElement("tr",{className:"total-value",key:"total_value"},c.a.createElement("td",{className:"column-hide-tiny"}),c.a.createElement("td",{style:A},f>0?c.a.createElement("span",null,c.a.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":E.a.translate("transaction.csv_tip"),"data-place":"bottom"},c.a.createElement(k.a,{name:"excel",className:"icon-14px"}))):null),c.a.createElement("td",{style:{textAlign:"center"}},"",this.props.showMore&&f>this.props.limit||u<f?c.a.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},c.a.createElement(k.a,{name:"chevron-down",className:"icon-14px"})):null))),c.a.createElement("div",{className:"recent-transactions no-overflow",style:o},c.a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard?null:c.a.createElement("div",{ref:"header"},c.a.createElement("div",{className:"block-content-header"},c.a.createElement("span",null,this.props.title?this.props.title:c.a.createElement(p.a,{content:"account.recent"})))),c.a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:r-d},ref:"transactions"},c.a.createElement("table",{className:"table"+(n?" compact":"")+(this.props.dashboard?" dashboard-table":"")},c.a.createElement("thead",null,c.a.createElement("tr",null,n?null:c.a.createElement("th",{style:S,className:"column-hide-tiny"},this.props.showFilters?c.a.createElement("select",{"data-place":"left","data-tip":E.a.translate("tooltip.filter_ops"),style:{paddingTop:5,width:"auto"},className:"bts-select no-margin",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},y):null),c.a.createElement("th",{style:S},c.a.createElement(p.a,{content:"account.votes.info"})),c.a.createElement("th",null))),c.a.createElement(v.a,{component:"tbody",transitionName:"newrow"},g))),f>0&&this.state.csvExport&&c.a.createElement("div",{id:"csv_export_container",style:{display:"none"}},c.a.createElement("div",null,c.a.createElement("div",null,"DATE"),c.a.createElement("div",null,"OPERATION"),c.a.createElement("div",null,"MEMO"),c.a.createElement("div",null,"AMOUNT")),_.map(function(e){return c.a.createElement(h.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}(c.a.Component);O.propTypes={accountsList:m.a.ChainAccountsList.isRequired,compactView:c.a.PropTypes.bool,limit:c.a.PropTypes.number,maxHeight:c.a.PropTypes.number,fullHeight:c.a.PropTypes.bool,showFilters:c.a.PropTypes.bool},O.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},O=Object(_.a)(O,{keep_updating:!0});var N=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),C(t,[{key:"render",value:function(){return c.a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}(c.a.Component);N.propTypes={asset:m.a.ChainAsset.isRequired,to:m.a.ChainAccount.isRequired,fromAccount:m.a.ChainAccount.isRequired},N.defaultProps={asset:"1.3.0"},N=Object(_.a)(N)},1474:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(7),o=n(1464),s=(n(255),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),r={},l=function(e,t){e({down:t})},c=function(){function e(){a(this,e)}return s(e,[{key:"fetchCoins",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.backer,e.url;return{}}},{key:"fetchCoinsSimple",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.backer,n=void 0===t?"RUDEX":t,a=e.url,i=void 0===a?void 0:a;return r["fetchCoinsSimple_"+n]?{}:(r["fetchCoinsSimple_"+n]=!0,function(e){Object(o.d)(i).then(function(t){delete r["fetchCoinsSimple_"+n],e({coins:t,backer:n})})})}},{key:"fetchCoinsSimple",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.backer,n=void 0===t?"RUDEX":t,a=e.url,i=void 0===a?void 0:a;return r["fetchCoinsSimple_"+n]?{}:(r["fetchCoinsSimple_"+n]=!0,function(e){var t=setTimeout(l.bind(null,e,n),1e4);Object(o.d)(i).then(function(a){clearTimeout(t),delete r["fetchCoinsSimple_"+n],e({coins:a,backer:n})})})}},{key:"fetchBridgeCoins",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{}}}]),e}();t.a=i.a.createActions(c)},1477:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(22),o=n(98),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=new o.a("__bts__"),l=function(){function e(){a(this,e),this.current_blocktrades_address_cache_version_string="2"}return s(e,[{key:"getIndexForDepositKeyInExchange",value:function(e,t,n){return[this.current_blocktrades_address_cache_version_string,e,t,n].reduce(function(e,t){return e.concat("[",t,"]")},"")}},{key:"getCachedInputAddress",value:function(e,t,n,a){var o=i.a.getWallet();o=null;var s=this.getIndexForDepositKeyInExchange(t,n,a);if(o){o.deposit_keys=o.deposit_keys||{},o.deposit_keys[e]=o.deposit_keys[e]||{},o.deposit_keys[e][s]=o.deposit_keys[e][s]||[];var l=o.deposit_keys[e][s].length;return l?o.deposit_keys[e][s][l-1]:null}var c=r.get("deposit_keys",{});c[e]=c[e]||{},c[e][s]=c[e][s]||[];var u=c[e][s].length;return u?c[e][s][u-1]:null}},{key:"cacheInputAddress",value:function(e,t,n,a,o,s){if(o){var l=i.a.getWallet();l=null;var c=this.getIndexForDepositKeyInExchange(t,n,a);if(l)l.deposit_keys=l.deposit_keys||{},l.deposit_keys[e]=l.deposit_keys[e]||{},l.deposit_keys[e][c]=l.deposit_keys[e][c]||[],l.deposit_keys[e][c].push({address:o,memo:s}),i.a._updateWallet();else{var u=r.get("deposit_keys",{});u[e]=u[e]||{},u[e][c]=u[e][c]||[],u[e][c].push({address:o,memo:s}),r.set("deposit_keys",u)}}}}]),e}();t.a=l},1479:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(24),o=n.n(i),s=n(7),r=n(1474),l=n(98),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=new l.a("__graphene__"),p=function(){function e(){a(this,e),this.backedCoins=o.a.Map(u.get("backedCoins",{})),this.bridgeCoins=o.a.Map(o.a.fromJS(u.get("bridgeCoins",{}))),this.bridgeInputs=["btc","dash","eth","steem"],this.down=o.a.Map({}),this.bindListeners({onFetchCoins:r.a.fetchCoins,onFetchCoinsSimple:r.a.fetchCoinsSimple,onFetchBridgeCoins:r.a.fetchBridgeCoins})}return c(e,[{key:"onFetchCoins",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.backer,n=e.coins,a=e.backedCoins,i=e.down;t&&n&&(this.backedCoins=this.backedCoins.set(t,a),u.set("backedCoins",this.backedCoins.toJS()),this.down=this.down.set(t,!1)),i&&(this.down=this.down.set(i,!0))}},{key:"onFetchCoinsSimple",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.backer,n=e.coins,a=e.down;t&&n&&(this.backedCoins=this.backedCoins.set(t,n),u.set("backedCoins",this.backedCoins.toJS()),this.down=this.down.set(t,!1)),a&&(this.down=this.down.set(a,!0))}},{key:"onFetchBridgeCoins",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.coins,a=t.bridgeCoins,i=t.wallets,s=t.down;if(n&&a){var r={};n.forEach(function(e){return r[e.coinType]=e}),a=a.filter(function(t){return t&&r[t.outputCoinType]&&"bitshares2"===r[t.outputCoinType].walletType&&-1!==e.bridgeInputs.indexOf(t.inputCoinType)}).forEach(function(t){t.isAvailable=-1!==i.indexOf(r[t.outputCoinType].walletType),e.bridgeCoins=e.bridgeCoins.setIn([r[t.outputCoinType].walletSymbol,t.inputCoinType],o.a.fromJS(t))}),u.set("bridgeCoins",this.bridgeCoins.toJS())}s&&(this.down=this.down.set(s,!0))}}]),e}();t.a=s.a.createStore(p,"GatewayStore")},1490:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),r=n.n(s),l=n(112),c=n(36),u=n(37),p=n(1429),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),h=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),d(t,[{key:"render",value:function(){var e=this.props.asset.get("id"),t=this.props.account.getIn(["balances",e]);return t?r.a.createElement(p.a,{balance:t,replace:this.props.replace}):r.a.createElement("span",null,"0",r.a.createElement(l.a,{name:this.props.asset.get("symbol"),replace:this.props.replace}))}}]),t}(r.a.Component);h.propTypes={account:c.a.ChainAccount.isRequired,asset:c.a.ChainAsset.isRequired},h.defaultProps={autosubscribe:!1},t.a=Object(u.a)(h,{keep_updating:!0})},1508:function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),r=n.n(s),l=n(116),c=n.n(l),u=n(4),p=n.n(u),d=n(36),h=n(37),m=n(17),_=n(1429),f=n(13),y=n.n(f),v=n(1431),g=n(113),b=n(42),w=n.n(b),E=n(1464),k=n(2),C=n(639),T=n.n(C),S=n(632),A=n(173),O=n(133),N=(n.n(O),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),P=function(t){function n(e){a(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={withdraw_amount:t.props.amount_to_withdraw,withdraw_address:E.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:E.a.getLast(e.output_wallet_type),memo:"",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:"1.3.0",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._updateFee=Object(O.debounce)(t._updateFee.bind(t),250),t}return o(n,t),N(n,[{key:"componentWillMount",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:"1.3.0",feeAmount:new A.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.fee_asset_id,a=t.from_account,i=this._getAvailableAssets(t),o=i.fee_asset_types;if(1===o.length&&o[0]!==n&&(n=o[0]),!a)return null;Object(S.b)({accountID:a.get("id"),feeID:n,options:["price_per_kbyte"],data:{type:"memo",content:this.props.output_coin_type+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}).then(function(t){var n=t.fee,a=t.hasBalance,i=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:n,hasBalance:a,hasPoolBalance:i,error:!a||!i},e._checkBalance)})}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.from_account;if(n){var a=this._getAvailableAssets(t),i=a.fee_asset_types,o={},s=[];i.forEach(function(a){s.push(Object(S.b)({accountID:n.get("id"),feeID:a,options:["price_per_kbyte"],data:{type:"memo",content:e.props.output_coin_type+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}))}),Promise.all(s).then(function(n){i.forEach(function(e,t){o[e]=n[t]}),m.a.are_equal_shallow(t.feeStatus,o)||e.setState({feeStatus:o}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},this._checkBalance)}},{key:"onSelectChanged",value:function(e){var t=E.a.get(this.props.output_wallet_type)[e];E.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"onWithdrawAddressChanged",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"_validateAddress",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(E.h)({url:n.url,walletType:n.output_wallet_type,newAddress:e}).then(function(n){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:n})})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,n=e.withdraw_amount,a=this.props,i=a.asset,o=a.balance;if(o&&t){var s=Object(S.a)(n,i,t,o);if(null!==s)return this.setState({balanceError:!s}),s}}},{key:"onSubmit",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(E.a.has(this.props.output_wallet_type)){var t=E.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),E.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var n=[];n.push(this.state.withdraw_address),E.a.set({wallet:this.props.output_wallet_type,addresses:n})}E.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,i=this.state.feeAmount,o=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,"")),s=parseFloat(String.prototype.replace.call(this.props.gateFee,/,/g,"")),r=new A.a({asset_id:a.get("id"),precision:a.get("precision"),real:o}),l=r.clone(this.props.balance.get("balance")),c=new A.a({asset_id:a.get("id"),precision:a.get("precision"),real:s});r.plus(c),l.lt(r)&&(r=l),g.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),r.getAmount(),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,i?i.asset_id:"1.3.0"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else w.a.publish(this.getWithdrawModalId(),"open")}},{key:"onSubmitConfirmation",value:function(){if(w.a.publish(this.getWithdrawModalId(),"close"),E.a.has(this.props.output_wallet_type)){var t=E.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),E.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var n=[];n.push(this.state.withdraw_address),E.a.set({wallet:this.props.output_wallet_type,addresses:n})}E.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,i=m.a.get_asset_precision(a.get("precision")),o=String.prototype.replace.call(this.state.withdraw_amount,/,/g,""),s=this.state.feeAmount;g.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),parseInt(o*i,10),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,s?s.asset_id:"1.3.0")}},{key:"onDropDownList",value:function(){E.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:"getWithdrawModalId",value:function(){return"confirmation"}},{key:"onAccountBalance",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))){var t=new A.a({amount:this.props.balance.get("balance"),asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:"setNestedRef",value:function(e){this.nestedRef=e}},{key:"onFeeChanged",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get("id")},this._updateFee)}},{key:"_getAvailableAssets",value:function(){function e(e){return void 0===i[e]||i[e]&&i[e].hasPoolBalance}function t(e){return void 0===i[e]||i[e]&&i[e].hasBalance}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=n.from_account,i=n.feeStatus,o=[];if(!a||!a.get("balances"))return{fee_asset_types:o};var s=n.from_account.get("balances").toJS();o=Object.keys(s).sort(m.a.sortID);for(var r in s){var l=k.b.getObject(r),c=k.b.getObject(s[r]);c&&0===c.get("balance")&&-1!==o.indexOf(r)&&o.splice(o.indexOf(r),1),l&&("1.3.0"===l.get("id")||m.a.isValidPrice(l.getIn(["options","core_exchange_rate"]))||o.splice(o.indexOf(r),1))}return o=o.filter(function(n){return e(n)&&t(n)}),{fee_asset_types:o}}},{key:"render",value:function(){var e=this.state,t=e.withdraw_address_selected,n=e.memo,a=E.a.get(this.props.output_wallet_type),i=null,o=this.props.account.get("balances").toJS(),s=Object.keys(o),l=this.getWithdrawModalId(),u=null,d=null,h=null;this.state.options_is_valid&&(d=r.a.createElement("div",{className:a.length?"blocktrades-options":"blocktrades-disabled-options"},a.map(function(e,t){return r.a.createElement("a",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(u=r.a.createElement("div",{className:"has-error",style:{paddingTop:10}},r.a.createElement(p.a,{content:"gateway.valid_address",coin_type:this.props.output_coin_type})),h=r.a.createElement(T.a,{id:l,overlay:!0},r.a.createElement(c.a,{close:l},r.a.createElement("a",{href:"#",className:"close-button"},"")),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement(p.a,{content:"modal.confirmation.title"})),r.a.createElement("br",null),r.a.createElement("div",{className:"content-block"},r.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitConfirmation.bind(this),value:y.a.translate("modal.confirmation.accept")}),r.a.createElement(c.a,{close:l},r.a.createElement("a",{href:!0,className:"secondary button"},r.a.createElement(p.a,{content:"modal.confirmation.cancel"})))))));var m=1,f=null;this.props.output_supports_memos&&(f=r.a.createElement("div",{className:"content-block"},r.a.createElement("label",null,r.a.createElement(p.a,{component:"span",content:"transfer.memo"})),r.a.createElement("textarea",{rows:"1",value:n,tabIndex:m++,onChange:this.onMemoChanged.bind(this)})));var g=this._getAvailableAssets(),b=g.fee_asset_types;if(s.length>0){var w=this.props.asset.get("id");if(w){var k=o[w];i=r.a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"}},r.a.createElement(p.a,{component:"span",content:"transfer.available"}),":",r.a.createElement("span",{className:"set-cursor",onClick:this.onAccountBalance.bind(this)},k?r.a.createElement(_.a,{balance:o[w]}):0))}else i="No funds"}else i="No funds";var C=this.state.error||this.state.balanceError||!this.state.withdraw_amount;return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"content-block"},r.a.createElement("h3",null,r.a.createElement(p.a,{content:"gateway.withdraw_coin",coin:this.props.output_coin_name,symbol:this.props.output_coin_symbol}))),r.a.createElement("div",{className:"content-block"},r.a.createElement(v.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.asset.get("id"),assets:[this.props.asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:i}),this.state.empty_withdraw_value?r.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.a.createElement(p.a,{content:"transfer.errors.valid"})):null,this.state.balanceError?r.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.a.createElement(p.a,{content:"transfer.errors.insufficient"})):null),this.state.feeAmount?r.a.createElement("div",{className:"content-block gate_fee"},r.a.createElement(v.a,{refCallback:this.setNestedRef.bind(this),label:"transfer.fee",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:b,tabIndex:m++}),this.state.hasBalance?null:r.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.a.createElement(p.a,{content:"transfer.errors.noFeeBalance"})),this.state.hasPoolBalance?null:r.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.a.createElement(p.a,{content:"transfer.errors.noPoolBalance"}))):null,this.props.gateFee?r.a.createElement("div",{className:"amount-selector right-selector",style:{paddingBottom:20}},r.a.createElement("label",{className:"left-label"},r.a.createElement(p.a,{content:"gateway.fee"})),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{type:"text",disabled:!0,value:this.props.gateFee}),r.a.createElement("div",{className:"form-label select floating-dropdown"},r.a.createElement("div",{className:"dropdown-wrapper inactive"},r.a.createElement("div",null,this.props.output_coin_symbol))))):null,r.a.createElement("div",{className:"content-block"},r.a.createElement("label",{className:"left-label"},r.a.createElement(p.a,{component:"span",content:"modal.withdraw.address"})),r.a.createElement("div",{className:"blocktrades-select-dropdown"},r.a.createElement("div",{className:"inline-label"},r.a.createElement("input",{type:"text",value:t,tabIndex:"4",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:"off"}),r.a.createElement("span",{onClick:this.onDropDownList.bind(this)},""))),r.a.createElement("div",{className:"blocktrades-position-options"},d),u),f,r.a.createElement("div",{className:"button-group"},r.a.createElement("div",{onClick:this.onSubmit.bind(this),className:"button"+(C?" disabled":"")},r.a.createElement(p.a,{content:"modal.withdraw.submit"})),r.a.createElement(c.a,{close:this.props.modal_id},r.a.createElement("div",{className:"button"},r.a.createElement(p.a,{content:"account.perm.cancel"})))),h))}}]),n}(r.a.Component);P.propTypes={account:d.a.ChainAccount.isRequired,issuer:d.a.ChainAccount.isRequired,asset:d.a.ChainAsset.isRequired,output_coin_name:r.a.PropTypes.string.isRequired,output_coin_symbol:r.a.PropTypes.string.isRequired,output_coin_type:r.a.PropTypes.string.isRequired,url:r.a.PropTypes.string,output_wallet_type:r.a.PropTypes.string,output_supports_memos:r.a.PropTypes.bool.isRequired,amount_to_withdraw:r.a.PropTypes.string,balance:d.a.ChainObject},t.a=Object(h.a)(P,{keep_updating:!0})}).call(t,n(9).Buffer)},1509:function(e,t,n){"use strict";function a(e){var t=e.url,n=void 0===t?u.b.BASE:t,a=e.walletType,i=e.newAddress;return i?fetch(n+"/wallets/"+a+"/check-address",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({address:i})}).then(function(e){return e.json().then(function(e){return e.isValid})}).catch(function(e){console.log("validate error:",e)}):new Promise(function(e){return e()})}function i(e){return p.has("history_address_"+e)}function o(e){var t=e.wallet,n=e.addresses;p.set("history_address_"+t,n)}function s(e){return p.get("history_address_"+e,[])}function r(e){var t=e.wallet,n=e.address;p.set("history_address_last_"+t,n)}function l(e){return p.get("history_address_last_"+e,"")}t.b=a,n.d(t,"a",function(){return d});var c=n(98),u=n(255),p=new c.a(""),d={has:i,set:o,get:s,setLast:r,getLast:l}},1525:function(e,t,n){"use strict";(function(e){function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),l=n.n(r),c=n(4),u=n.n(c),p=n(36),d=n(37),h=n(134),m=n(42),_=n.n(m),f=n(1490),y=n(1508),v=n(1477),g=n(17),b=n(113),w=n(636),E=n(255),k=n(133),C=(n.n(k),n(632)),T=n(173),S=(n(2),n(1464)),A=function(){function e(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),N=function(t){function n(e){i(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={error:null,conversion_memo:null,feeStatus:{}},t._updateFee=Object(k.debounce)(t._updateFee.bind(t),150),t._checkFeeStatus=t._checkFeeStatus.bind(t),t._checkBalance=t._checkBalance.bind(t),t}return s(n,t),O(n,[{key:"_getFeeID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this._getCurrentBalance(e);return e.account.get("balances").has("1.3.0")?"1.3.0":t?t.get("asset_type"):"1.3.0"}},{key:"componentWillMount",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"componentWillReceiveProps",value:function(e){e.amount.equals(this.props.amount)&&e.account_id===this.props.account_id||this._updateFee()}},{key:"_updateFee",value:function(){var e=this,t=this._getFeeID();Object(S.e)(this.props).then(function(n){Object(C.b)({accountID:e.props.account_id,feeID:t,options:["price_per_kbyte"],data:{type:"memo",content:n.inputMemo}}).then(function(t){var n=t.fee,a=t.hasBalance,i=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:n,hasBalance:a,hasPoolBalance:i,error:!a||!i},e._checkFeeStatus)})})}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.account;if(t){var n=Object.keys(this.props.account.get("balances").toJS());n.length||(n=["1.3.0"]);var a={},i=[];Object(S.e)(this.props).then(function(o){n.forEach(function(e){i.push(Object(C.b)({accountID:t.get("id"),feeID:e,options:["price_per_kbyte"],data:{type:"memo",content:o.inputMemo}}))}),Promise.all(i).then(function(t){e.unMounted||(n.forEach(function(e,n){a[e]=t[n]}),g.a.are_equal_shallow(e.state.feeStatus,a)||e.setState({feeStatus:a}),e._checkBalance())}).catch(function(e){console.error(e)})})}}},{key:"_getCurrentBalance",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).balance}},{key:"_checkBalance",value:function(){var e=this.state.feeAmount,t=this.props,n=t.asset,a=t.amount,i=this._getCurrentBalance();if(i&&e){var o=Object(C.a)(a.getAmount({real:!0}),n,e,i);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:"onTrxIncluded",value:function(e){e.included&&e.broadcasted_transaction?(w.a.unlisten(this.onTrxIncluded),w.a.reset()):e.closed&&(w.a.unlisten(this.onTrxIncluded),w.a.reset())}},{key:"onConvert",value:function(){var t=this,n=this.props,a=n.input_coin_type,i=n.output_coin_type,o=n.amount,s=this.state.balanceError;Object(S.e)(this.props).then(function(n){if(n.inputCoinType!=a||n.outputCoinType!=i)throw new Error("unexpected reply from initiate-trade");a!=n.inputCoinType||i!=n.outputCoinType||s||(t.setState({conversion_memo:n.inputMemo}),t.setState({error:null}),b.a.transfer(t.props.account_id,"1.2.32567",o.getAmount(),t.props.asset.get("id"),n.inputMemo?new e(n.inputMemo,"utf-8"):"",null,t._getFeeID()).then(function(){w.a.unlisten(t.onTrxIncluded),w.a.listen(t.onTrxIncluded)}).catch(function(e){var n=e.message?e.message.split("\n")[1]:null;console.log("error: ",e,n),t.setState({error:n})}))}).catch(function(){t.setState({conversion_memo:null})})}},{key:"render",value:function(){var e="button disabled";return Object.keys(this.props.account_balances.toJS()).includes(this.props.asset.get("id"))&&!this.state.balanceError&&this.state.hasBalance&&this.props.amount.getAmount()>0&&(e="button"),l.a.createElement("span",null,l.a.createElement("button",{className:e,onClick:this.onConvert.bind(this)},l.a.createElement(u.a,{content:""}),l.a.createElement(u.a,{content:"gateway.convert_now"})),this.state.balanceError?l.a.createElement("div",{style:{paddingTop:15},className:"has-error"},l.a.createElement(u.a,{content:"transfer.errors.insufficient"})):null)}}]),n}(l.a.Component);N.propTypes={balance:p.a.ChainObject,input_coin_type:l.a.PropTypes.string.isRequired,output_coin_type:l.a.PropTypes.string.isRequired,account_name:l.a.PropTypes.string.isRequired,account_id:l.a.PropTypes.string.isRequired,url:l.a.PropTypes.string.isRequired},N=Object(d.a)(N);var P=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),O(t,[{key:"render",value:function(){var e=l.a.createElement(N,{asset:this.props.asset,account:this.props.account,input_coin_type:this.props.input_coin_type,output_coin_type:this.props.output_coin_type,account_name:this.props.account_name,amount:new T.a({real:this.props.amount,asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")}),account_id:this.props.account_id,account_balances:this.props.account_balances,url:this.props.url,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]});return l.a.createElement("span",null,e)}}]),t}(l.a.Component);P.propTypes={asset:p.a.ChainAsset.isRequired,input_coin_type:l.a.PropTypes.string.isRequired,output_coin_type:l.a.PropTypes.string.isRequired,account_name:l.a.PropTypes.string.isRequired,account_id:l.a.PropTypes.string.isRequired,url:l.a.PropTypes.string.isRequired},P=Object(d.a)(P);var j=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),O(t,[{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.gateway+"_bridge"}},{key:"onWithdraw",value:function(){_.a.publish(this.getWithdrawModalId(),"open")}},{key:"render",value:function(){var e=this.getWithdrawModalId(),t="button disabled";return Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))&&!(this.props.amount_to_withdraw.indexOf(" ")>=0)&&!isNaN(this.props.amount_to_withdraw)&&this.props.amount_to_withdraw>0&&this.props.amount_to_withdraw<=this.props.balance.toJS().balance/g.a.get_asset_precision(this.props.asset.get("precision"))&&(t="button"),l.a.createElement("span",null,l.a.createElement("span",null,l.a.createElement("button",{className:t,onClick:this.onWithdraw.bind(this)},l.a.createElement(u.a,{content:""}),l.a.createElement(u.a,{content:"gateway.withdraw_now"})," ")),l.a.createElement(h.a,{id:e,overlay:!0},l.a.createElement("br",null),l.a.createElement("div",{className:"grid-block vertical"},l.a.createElement(y.a,{key:""+this.props.key,account:this.props.account.get("name"),issuer:this.props.issuer,asset:this.props.asset.get("id"),output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,modal_id:e,url:this.props.url,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]}))))}}]),t}(l.a.Component);j.propTypes={balance:p.a.ChainObject,url:l.a.PropTypes.string.isRequired},j=Object(d.a)(j);var x=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),O(t,[{key:"render",value:function(){var e=l.a.createElement(j,{key:this.props.key,account:this.props.account,issuer:this.props.issuer,asset:this.props.asset,output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,url:this.props.url,gateway:this.props.gateway,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]});return l.a.createElement("span",null,e)}}]),t}(l.a.Component);x.propTypes={account:p.a.ChainAccount.isRequired,asset:p.a.ChainAsset.isRequired,output_coin_type:l.a.PropTypes.string.isRequired,url:l.a.PropTypes.string.isRequired},x=Object(d.a)(x);var R=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refresh_interval=12e4,n.deposit_address_cache=new v.a,n.coin_info_request_states={request_in_progress:0,request_complete:1,request_failed:2},n.estimation_directions={output_from_input:0,input_from_output:1},n.state={coin_symbol:"btc",key_for_withdrawal_dialog:"btc",supports_output_memos:"",url:E.a.BASE,error:null,deposit_input_coin_type:null,deposit_output_coin_type:null,input_address_and_memo:null,deposit_estimated_input_amount:n.props.initial_deposit_estimated_input_amount||"1.0",deposit_estimated_output_amount:null,deposit_limit:null,deposit_error:null,failed_calculate_deposit:null,withdraw_input_coin_type:null,withdraw_output_coin_type:null,withdraw_estimated_input_amount:n.props.initial_withdraw_estimated_input_amount||"1.0",withdraw_estimated_output_amount:null,withdraw_limit:null,withdraw_error:null,failed_calculate_withdraw:null,conversion_input_coin_type:null,conversion_output_coin_type:null,conversion_estimated_input_amount:n.props.initial_conversion_estimated_input_amount||"1.0",conversion_estimated_output_amount:null,conversion_limit:null,conversion_error:null,failed_calculate_conversion:null,coin_info_request_state:n.coin_info_request_states.request_in_progress,input_address_requests_in_progress:{},deposit_estimate_direction:n.estimation_directions.output_from_input,deposit_limit_cache:{},deposit_limit_requests_in_progress:{},coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null,conversion_memo:null},n}return s(t,e),O(t,[{key:"urlConnection",value:function(e,t){var n=this;this.setState({url:e});var a=e+"/coins",i=fetch(a,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),o=e+"/wallets",s=fetch(o,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),r=e+"/trading-pairs",l=fetch(r,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),c=e+"/active-wallets",u=fetch(c,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});Promise.all([i,s,l,u]).then(function(e){var t=A(e,4),a=t[0],i=(t[1],t[2]),o=t[3],s={};a.forEach(function(e){return s[e.coinType]=e});var r={},l={},c={};i.forEach(function(e){var t=s[e.inputCoinType],n=s[e.outputCoinType];t.backingCoinType!=e.outputCoinType&&n.backingCoinType!=e.inputCoinType&&0==t.restricted&&0==n.restricted&&-1!=o.indexOf(t.walletType)&&-1!=o.indexOf(n.walletType)&&("bitshares2"!=t.walletType&&"bitshares2"==n.walletType?(r[e.inputCoinType]=r[e.inputCoinType]||[],r[e.inputCoinType].push(e.outputCoinType)):"bitshares2"==t.walletType&&"bitshares2"!=n.walletType?(l[e.inputCoinType]=l[e.inputCoinType]||[],l[e.inputCoinType].push(e.outputCoinType)):"bitshares2"==t.walletType&&"bitshares2"==n.walletType&&(c[e.inputCoinType]=c[e.inputCoinType]||[],c[e.inputCoinType].push(e.outputCoinType)))});var u=null,p=null,d=Object.keys(r);if(d.forEach(function(e){r[e].sort()}),d.length){u=n.props.initial_deposit_input_coin_type&&n.props.initial_deposit_input_coin_type in r?n.props.initial_deposit_input_coin_type:d[0];var h=r[u];p=n.props.initial_deposit_output_coin_type&&-1!=h.indexOf(n.props.initial_deposit_output_coin_type)?n.props.initial_deposit_output_coin_type:h[0]}var m=null,_=null,f=null,y=null,v=Object.keys(l);if(v.forEach(function(e){l[e].sort()}),v.length){m=n.props.initial_withdraw_input_coin_type&&n.props.initial_withdraw_input_coin_type in l?n.props.initial_withdraw_input_coin_type:v[0];var g=l[m];_=n.props.initial_withdraw_output_coin_type&&-1!=g.indexOf(n.props.initial_withdraw_output_coin_type)?n.props.initial_withdraw_output_coin_type:g[0]}var b=Object.keys(c);if(b.forEach(function(e){c[e].sort()}),b.length){f=n.props.initial_conversion_input_coin_type&&n.props.initial_conversion_input_coin_type in c?n.props.initial_conversion_input_coin_type:b[0];var w=c[f];y=n.props.initial_conversion_output_coin_type&&-1!=w.indexOf(n.props.initial_conversion_output_coin_type)?n.props.initial_conversion_output_coin_type:w[0]}var E=n.getCachedOrGeneratedInputAddress(u,p),k=n.getCachedOrFreshDepositLimit("deposit",u,p),C=n.getAndUpdateOutputEstimate("deposit",u,p,n.state.deposit_estimated_input_amount),T=n.getAndUpdateOutputEstimate("withdraw",m,_,n.state.withdraw_estimated_input_amount),S=n.getCachedOrFreshDepositLimit("withdraw",m,_),O=n.getAndUpdateOutputEstimate("conversion",f,y,n.state.conversion_estimated_input_amount),N=n.getCachedOrFreshDepositLimit("conversion",f,y);n.unMounted||n.setState({coin_info_request_state:n.coin_info_request_states.request_complete,coins_by_type:s,allowed_mappings_for_deposit:r,allowed_mappings_for_withdraw:l,allowed_mappings_for_conversion:c,deposit_input_coin_type:u,deposit_output_coin_type:p,input_address_and_memo:E,deposit_limit:k,deposit_estimated_output_amount:C,deposit_estimate_direction:n.estimation_directions.output_from_input,withdraw_input_coin_type:m,withdraw_output_coin_type:_,withdraw_limit:S,withdraw_estimated_output_amount:T,conversion_input_coin_type:f,conversion_output_coin_type:y,conversion_limit:N,conversion_estimated_output_amount:O,withdraw_estimate_direction:n.estimation_directions.output_from_input,conversion_estimate_direction:n.estimation_directions.output_from_input,supports_output_memos:s.btc.supportsOutputMemos})}).catch(function(e){n.setState({coin_info_request_state:t,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:"updateEstimates",value:function(){if(this.state.deposit_input_coin_type&&this.state.deposit_output_coin_type){var e=this.getCachedOrGeneratedInputAddress(this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),t=this.getCachedOrFreshDepositLimit("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),n=this.state.deposit_estimated_input_amount,a=this.state.deposit_estimated_output_amount;this.state.deposit_estimate_direction==this.estimation_directions.output_from_input?a=this.getAndUpdateOutputEstimate("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,n):n=this.getAndUpdateInputEstimate("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,a);var i=this.getCachedOrFreshDepositLimit("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type),o=this.state.withdraw_estimated_input_amount,s=this.state.withdraw_estimated_output_amount;this.state.withdraw_estimate_direction==this.estimation_directions.output_from_input?s=this.getAndUpdateOutputEstimate("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,o):o=this.getAndUpdateinputEstimate("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,s);var r=this.getCachedOrFreshDepositLimit("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type),l=this.state.conversion_estimated_input_amount,c=this.state.conversion_estimated_output_amount;this.state.conversion_estimate_direction==this.estimation_directions.output_from_input?c=this.getAndUpdateOutputEstimate("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,l):l=this.getAndUpdateinputEstimate("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,c),this.setState({input_address_and_memo:e,deposit_limit:t,deposit_estimated_input_amount:n,deposit_estimated_output_amount:a,withdraw_limit:i,withdraw_estimated_input_amount:o,withdraw_estimated_output_amount:s,conversion_limit:r,conversion_estimated_input_amount:l,conversion_estimated_output_amount:c,key_for_withdrawal_dialog:o})}}},{key:"componentWillMount",value:function(){var e=this,t=this.state.url;this.urlConnection(t,0);var n=fetch(t+"/coins",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),a=fetch(t+"/trading-pairs",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),i=fetch(t+"/active-wallets",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});Promise.all([n,a,i]).then(function(e){var t=A(e,3),n=t[0],a=t[1],i=t[2],o={};n.forEach(function(e){return o[e.coinType]=e}),a.forEach(function(e){var t=o[e.inputCoinType],n=o[e.outputCoinType];t.backingCoinType!=e.outputCoinType&&n.backingCoinType!=e.inputCoinType&&-1!=i.indexOf(t.walletType)&&i.indexOf(n.walletType)})}).catch(function(t){e.urlConnection("https://api.blocktrades.info/v2",2),e.setState({coin_info_request_state:0,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:"componentDidMount",value:function(){this.update_timer=setInterval(this.updateEstimates.bind(this),this.refresh_interval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.update_timer),this.unMounted=!0}},{key:"getCachedInputAddress",value:function(e,t,n){var a=this.props.account.get("name");return this.deposit_address_cache.getCachedInputAddress(this.props.gateway,a,e,t)}},{key:"cacheInputAddress",value:function(e,t,n,a){var i=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,i,e,t,n,a)}},{key:"getCachedOrGeneratedInputAddress",value:function(e,t){var n=this,a=this.getCachedInputAddress(e,t);if(a)return a;if(this.state.input_address_requests_in_progress[e]=this.state.input_address_requests_in_progress[e]||{},this.state.input_address_requests_in_progress[e][t])return null;var i=JSON.stringify({inputCoinType:e,outputCoinType:t,outputAddress:this.props.account.get("name")});return this.state.input_address_requests_in_progress[e][t]=!0,fetch(this.state.url+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:i}).then(function(a){a.json().then(function(a){if(console.assert(a.inputCoinType==e,"unexpected reply from initiate-trade"),console.assert(a.outputCoinType==t,"unexpected reply from initiate-trade"),a.inputCoinType!=e||a.outputCoinType!=t)throw Error("unexpected reply from initiate-trade");n.cacheInputAddress(a.inputCoinType,a.outputCoinType,a.inputAddress,a.inputMemo),delete n.state.input_address_requests_in_progress[e][t],n.state.deposit_input_coin_type==a.inputCoinType&&n.state.deposit_output_coin_type==a.outputCoinType&&n.setState({input_address_and_memo:{address:a.inputAddress,memo:a.inputMemo}})},function(a){delete n.state.input_address_requests_in_progress[e][t],n.state.deposit_input_coin_type==e&&n.state.deposit_output_coin_type==t&&n.setState({input_address_and_memo:{address:"error generating address",memo:null}})})},function(a){delete n.state.input_address_requests_in_progress[e][t],n.state.deposit_input_coin_type==e&&n.state.deposit_output_coin_type==t&&n.setState({input_address_and_memo:{address:"error generating address",memo:null}})}),null}},{key:"getCachedDepositLimit",value:function(e,t){if(this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]){var n=this.state.deposit_limit_cache[e][t];if(new Date-n.timestamp<this.refresh_interval)return n;delete this.state.deposit_limit_cache[e][t]}return null}},{key:"cacheDepositLimit",value:function(e,t,n){n.timestamp=new Date,this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]=n}},{key:"getCachedOrFreshDepositLimit",value:function(e,t,n){var i=this,o=this.getCachedDepositLimit(t,n);if(o)return o;this.state.deposit_limit_requests_in_progress[t]=this.state.input_address_requests_in_progress[t]||{},this.state.deposit_limit_requests_in_progress[t][n]=!0;var s=this.state.url+"/deposit-limits?inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n);return fetch(s,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}).then(function(o){if(!i.unMounted){if(console.assert(o.inputCoinType==t&&o.outputCoinType==n,"unexpected reply from deposit-limits"),o.inputCoinType!=t||o.outputCoinType!=n)throw Error("unexpected reply from deposit-limits");var s={timestamp:new Date,limit:o.depositLimit};i.cacheDepositLimit(t,n,s),delete i.state.deposit_limit_requests_in_progress[t][n],i.state[e+"_input_coin_type"]==t&&i.state[e+"_output_coin_type"]==n&&i.setState(a({},e+"_limit",s))}},function(e){delete i.state.deposit_limit_requests_in_progress[t][n]}),null}},{key:"getAndUpdateOutputEstimate",value:function(e,t,n,i){var o=this;if(!this.unMounted){"deposit"==e&&this.setState({failed_calculate_deposit:null}),"withdraw"==e&&this.setState({failed_calculate_withdraw:null}),"conversion"==e&&this.setState({failed_calculate_conversion:null});var s=this.state.url+"/estimate-output-amount?inputAmount="+encodeURIComponent(i)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n);return fetch(s,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}).then(function(s){if(!o.unMounted)if(s.error){if(o.state[e+"_input_coin_type"]==t&&o.state[e+"_output_coin_type"]==n&&o.state[e+"_estimated_input_amount"]==i&&o.state[e+"_estimate_direction"]==o.estimation_directions.output_from_input){var r=s.error.message;"deposit"==e&&o.setState({failed_calculate_deposit:"Failed to calculate"}),"withdraw"==e&&o.setState({failed_calculate_withdraw:"Failed to calculate"}),"conversion"==e&&o.setState({failed_calculate_conversion:"Failed to calculate"});r.startsWith("Internal Server Error: ")&&(r=r.substr("Internal Server Error: ".length)),o.setState(a({},e+"_error",r))}}else{var l;if(console.assert(s.inputCoinType==t&&s.outputCoinType==n&&s.inputAmount==i,"unexpected reply from estimate-output-amount"),s.inputCoinType!=t||s.outputCoinType!=n||s.inputAmount!=i)throw Error("unexpected reply from estimate-output-amount");o.state[e+"_input_coin_type"]==t&&o.state[e+"_output_coin_type"]==n&&o.state[e+"_estimated_input_amount"]==i&&o.state[e+"_estimate_direction"]==o.estimation_directions.output_from_input&&o.setState((l={},a(l,e+"_estimated_output_amount",s.outputAmount),a(l,e+"_error",null),l))}},function(e){}),null}}},{key:"getAndUpdateInputEstimate",value:function(e,t,n,i){var o=this;if(!this.unMounted){"deposit"==e&&this.setState({failed_calculate_deposit:null}),"withdraw"==e&&this.setState({failed_calculate_withdraw:null}),"conversion"==e&&this.setState({failed_calculate_conversion:null});var s=this.state.url+"/estimate-input-amount?outputAmount="+encodeURIComponent(i)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n);return fetch(s,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}).then(function(s){var r;o.unMounted||(console.assert(s.inputCoinType==t&&s.outputCoinType==n&&s.outputAmount==i,"unexpected reply from estimate-input-amount"),s.inputCoinType==t&&s.outputCoinType==n&&s.outputAmount==i||("deposit"==e&&o.setState({failed_calculate_deposit:"Failed to calculate"}),"withdraw"==e&&o.setState({failed_calculate_withdraw:"Failed to calculate"}),"conversion"==e&&o.setState({failed_calculate_conversion:"Failed to calculate"})),o.state[e+"_input_coin_type"]==t&&o.state[e+"_output_coin_type"]==n&&o.state[e+"_estimated_output_amount"]==i&&o.state[e+"_estimate_direction"]==o.estimation_directions.input_from_output&&o.setState((r={},a(r,e+"_estimated_input_amount",s.inputAmount),a(r,"key_for_withdrawal_dialog",s.inputAmount),r)))},function(e){}),null}}},{key:"onInputAmountChanged",value:function(e,t){var n,i=t.target.value;""==i&&(i="0");var o=this.getAndUpdateOutputEstimate(e,this.state[e+"_input_coin_type"],this.state[e+"_output_coin_type"],i);this.setState((n={},a(n,e+"_estimated_input_amount",i),a(n,e+"_estimated_output_amount",o),a(n,e+"_estimate_direction",this.estimation_directions.output_from_input),a(n,"key_for_withdrawal_dialog",i),n))}},{key:"onOutputAmountChanged",value:function(e,t){var n,i=t.target.value;""==i&&(i="0");var o=this.getAndUpdateInputEstimate(e,this.state[e+"_input_coin_type"],this.state[e+"_output_coin_type"],i);this.setState((n={},a(n,e+"_estimated_output_amount",i),a(n,e+"_estimated_input_amount",o),a(n,e+"_estimate_direction",this.estimation_directions.input_from_output),n))}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.gateway+"_bridge"}},{key:"onWithdraw",value:function(){_.a.publish(this.getWithdrawModalId(),"open")}},{key:"onInputCoinTypeChanged",value:function(e,t){var n,i=this,o=null,s="_estimated_output_amount",r=t.target.value,l=this.state["allowed_mappings_for_"+e][r],c=l[0];-1!=l.indexOf(this.state[e+"_output_coin_type"])&&(c=this.state[e+"_output_coin_type"]);var u=this.state.input_address_and_memo;"deposit"==e&&(u=this.getCachedOrGeneratedInputAddress(r,c));var p=this.getCachedOrFreshDepositLimit(e,r,c);this.state[e+"_estimated_input_amount"]?o=this.getAndUpdateOutputEstimate(e,r,c,this.state[e+"_estimated_input_amount"]):(o=this.getAndUpdateInputEstimate(e,r,c,this.state[e+"_estimated_output_amount"]),s="_estimated_input_amount"),"withdraw"==e&&l.forEach(function(e){c===e&&i.setState({coin_symbol:r+"input",supports_output_memos:i.state.coins_by_type[e].supportsOutputMemos})}),this.setState((n={},a(n,e+"_input_coin_type",r),a(n,e+"_output_coin_type",c),a(n,"input_address_and_memo",u),a(n,e+"_limit",p),a(n,e+s,o),a(n,e+"_estimate_direction",this.estimation_directions.output_from_input),n))}},{key:"onOutputCoinTypeChanged",value:function(e,t){var n,i=this,o=null,s="_estimated_output_amount",r=t.target.value,l=this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type];"withdraw"==e&&l.forEach(function(e){r===e&&i.setState({coin_symbol:r+"output",supports_output_memos:i.state.coins_by_type[e].supportsOutputMemos,key_for_withdrawal_dialog:r})});var c=this.state.input_address_and_memo;"deposit"==e&&(c=this.getCachedOrGeneratedInputAddress(this.state[e+"_input_coin_type"],r));var u=this.getCachedOrFreshDepositLimit(e,this.state[e+"_input_coin_type"],r);this.state[e+"_estimated_input_amount"]?o=this.getAndUpdateOutputEstimate(e,this.state[e+"_input_coin_type"],r,this.state[e+"_estimated_input_amount"]):(o=this.getAndUpdateInputEstimate(e,this.state[e+"_input_coin_type"],r,this.state[e+"_estimated_output_amount"]),s="_estimated_input_amount"),this.setState((n={},a(n,e+"_output_coin_type",r),a(n,"input_address_and_memo",c),a(n,e+"_limit",u),a(n,e+s,o),a(n,e+"_estimate_direction",this.estimation_directions.output_from_input),n))}},{key:"render",value:function(){var e=this;if(!this.props.account||!this.props.issuer_account||!this.props.gateway)return l.a.createElement("div",null);var t=void 0,n=void 0,a=void 0,i=void 0,o=void 0,s=void 0;if(this.state.coin_info_request_state==this.coin_info_request_states.request_failed)return l.a.createElement("div",null,l.a.createElement("p",null,"Error connecting to blocktrades.us, please try again later"));if(this.state.coin_info_request_state==this.coin_info_request_states.never_requested||this.state.coin_info_request_state==this.coin_info_request_states.request_in_progress)return l.a.createElement("div",null,l.a.createElement("p",null,"Retrieving current trade data from blocktrades.us"));var r=null,c=l.a.createElement(u.a,{content:"gateway.calc"});null!=this.state.failed_calculate_deposit&&(c=this.state.failed_calculate_deposit);var p=l.a.createElement(u.a,{content:"gateway.calc"});null!=this.state.failed_calculate_withdraw&&(p=this.state.failed_calculate_withdraw);var d=l.a.createElement(u.a,{content:"gateway.calc"});if(null!=this.state.failed_calculate_conversion&&(d=this.state.failed_calculate_conversion),Object.getOwnPropertyNames(this.state.allowed_mappings_for_deposit).length>0){var h=[];Object.keys(this.state.allowed_mappings_for_deposit).sort().forEach(function(t){h.push(l.a.createElement("option",{key:t,value:t||""},e.state.coins_by_type[t].symbol))});var m=l.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.deposit_input_coin_type||"",onChange:this.onInputCoinTypeChanged.bind(this,"deposit")},h),_=[];this.state.allowed_mappings_for_deposit[this.state.deposit_input_coin_type].forEach(function(t){_.push(l.a.createElement("option",{key:t,value:t||""},e.state.coins_by_type[t].walletSymbol))});var y=l.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.deposit_output_coin_type||"",onChange:this.onOutputCoinTypeChanged.bind(this,"deposit")},_),v=this.state.input_address_and_memo?this.state.input_address_and_memo:{address:"unknown",memo:null},b=this.state.deposit_estimated_input_amount,w=this.state.deposit_estimated_output_amount,E=b?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:b||"",onChange:this.onInputAmountChanged.bind(this,"deposit")}):c,k=w?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:w||"",onChange:this.onOutputAmountChanged.bind(this,"deposit")}):c,C=l.a.createElement("span",null,"updating");this.state.deposit_limit&&(C=this.state.deposit_limit.limit?l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},l.a.createElement(u.a,{content:"gateway.limit",amount:g.a.format_number(this.state.deposit_limit.limit,8),symbol:this.state.coins_by_type[this.state.deposit_input_coin_type].walletSymbol}))):null);var T=null;this.state.deposit_error&&(T=l.a.createElement("div",null,this.state.deposit_error)),n=l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.deposit"})),l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.balance"})),l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.deposit_to"}))));var S=null;S=v.memo?l.a.createElement(u.a,{unsafe:!0,content:"gateway.address_with_memo",address:v.address,memo:v.memo}):l.a.createElement("span",null,v.address),t=l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,m),l.a.createElement("div",null,E)),"",l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,y),l.a.createElement("div",null,k)),l.a.createElement("div",null,T))),l.a.createElement("td",null,l.a.createElement(f.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.deposit_output_coin_type].walletSymbol})),l.a.createElement("td",null,S,l.a.createElement("br",null),C)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_withdraw).length>0){this.getWithdrawModalId();this.state.coins_by_type[this.state.withdraw_input_coin_type].symbol;r=this.state.withdraw_estimated_input_amount;var A=[];Object.keys(this.state.allowed_mappings_for_withdraw).sort().forEach(function(t){A.push(l.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var O=l.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.withdraw_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,"withdraw")},A),N=[];this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type].forEach(function(t){N.push(l.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].symbol))});var j=l.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.withdraw_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,"withdraw")},N),R=this.state.withdraw_estimated_input_amount,I=R?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:R||"",onChange:this.onInputAmountChanged.bind(this,"withdraw")}):p,W=this.state.withdraw_estimated_output_amount,D=W?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:W||"",onChange:this.onOutputAmountChanged.bind(this,"withdraw")}):p,L=l.a.createElement(x,{key:this.state.key_for_withdrawal_dialog,account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol,output_coin_name:this.state.coins_by_type[this.state.withdraw_output_coin_type].name,output_coin_symbol:this.state.coins_by_type[this.state.withdraw_output_coin_type].symbol,output_coin_type:this.state.withdraw_output_coin_type,output_supports_memos:this.state.supports_output_memos,amount_to_withdraw:r,url:this.state.url,gateway:this.props.gateway,output_wallet_type:this.state.coins_by_type[this.state.withdraw_output_coin_type].walletType}),M=null;this.state.withdraw_error&&(M=l.a.createElement("div",null,this.state.withdraw_error));var F=l.a.createElement("span",null,"...");this.state.withdraw_limit&&(F=this.state.withdraw_limit.limit?l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},l.a.createElement(u.a,{content:"gateway.limit",amount:g.a.format_number(this.state.withdraw_limit.limit,8),symbol:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol}))):l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},"no limit"))),i=l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.withdraw"})),l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.balance"})),l.a.createElement("th",null))),a=l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,O),l.a.createElement("div",null,I)),"",l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,j),l.a.createElement("div",null,D)),l.a.createElement("div",null,M))),l.a.createElement("td",null,l.a.createElement(f.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol})),l.a.createElement("td",null,L,l.a.createElement("br",null),F)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_conversion).length>0){var H=[];Object.keys(this.state.allowed_mappings_for_conversion).sort().forEach(function(t){H.push(l.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var B=l.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.conversion_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,"conversion")},H),Y=[];this.state.allowed_mappings_for_conversion[this.state.conversion_input_coin_type].forEach(function(t){Y.push(l.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].symbol))});var X=l.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.conversion_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,"conversion")},Y),q=this.state.conversion_estimated_input_amount,U=q?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:q||"",onChange:this.onInputAmountChanged.bind(this,"conversion")}):d,K=this.state.conversion_estimated_output_amount,J=K?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:K||"",onChange:this.onOutputAmountChanged.bind(this,"conversion")}):d,V=l.a.createElement(P,{asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol,account:this.props.account,input_coin_type:this.state.conversion_input_coin_type,output_coin_type:this.state.conversion_output_coin_type,account_name:this.props.account.get("name"),amount:this.state.conversion_estimated_input_amount,account_id:this.props.account.get("id"),account_balances:this.props.account.get("balances"),url:this.state.url}),z=null;this.state.conversion_error&&(z=l.a.createElement("div",null,this.state.conversion_error));var G=l.a.createElement("span",null,"...");this.state.conversion_limit&&(G=this.state.conversion_limit.limit?l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},l.a.createElement(u.a,{content:"gateway.limit",amount:g.a.format_number(this.state.conversion_limit.limit,8),symbol:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol}))):l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},"no limit"))),s=l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.convert"})),l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.balance"})),l.a.createElement("th",null))),o=l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,B),l.a.createElement("div",null,U)),"",l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,X),l.a.createElement("div",null,J)),l.a.createElement("div",null,z))),l.a.createElement("td",null,l.a.createElement(f.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol})),l.a.createElement("td",null,V,l.a.createElement("br",null),G)))}return l.a.createElement("div",null,l.a.createElement("div",{style:{paddingBottom:15}},l.a.createElement(u.a,{component:"h5",content:"gateway.bridge_text"})),l.a.createElement("table",{className:"table"},n,t,i,a,s,o))}}]),t}(l.a.Component);R.propTypes={url:l.a.PropTypes.string,gateway:l.a.PropTypes.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,initial_deposit_input_coin_type:l.a.PropTypes.string,initial_deposit_output_coin_type:l.a.PropTypes.string,initial_deposit_estimated_input_amount:l.a.PropTypes.string,initial_withdraw_input_coin_type:l.a.PropTypes.string,initial_withdraw_output_coin_type:l.a.PropTypes.string,initial_withdraw_estimated_input_amount:l.a.PropTypes.string,initial_conversion_input_coin_type:l.a.PropTypes.string,initial_conversion_output_coin_type:l.a.PropTypes.string,initial_conversion_estimated_input_amount:l.a.PropTypes.string},t.a=Object(d.a)(R,{keep_updating:!0})}).call(t,n(9).Buffer)},1526:function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),r=n.n(s),l=n(36),c=n(37),u=n(4),p=n.n(u),d=n(23),h=n.n(d),m=n(636),_=n(113),f=n(30),y=n(1490),v=n(17),g=(n(32),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),b=function(t){function n(e){a(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.state={action:e.viewSettings.get("bktAction","deposit"),min:50,max:1e5},t}return o(n,t),g(n,[{key:"_renderDeposits",value:function(){}},{key:"_renderWithdrawals",value:function(){return r.a.createElement("form",{onSubmit:this._onSubmit.bind(this)},r.a.createElement("div",{style:{padding:"20px 0"}},r.a.createElement(p.a,{content:"gateway.balance"}),": ",r.a.createElement("span",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},r.a.createElement(y.a,{account:this.props.account.get("name"),asset:this.props.asset.get("symbol")}))),r.a.createElement("label",null,r.a.createElement(p.a,{content:"exchange.quantity"}),r.a.createElement("input",{ref:"amount",required:!0,id:"amount",type:"number",min:this.state.min,max:this.state.max})),r.a.createElement("label",null,r.a.createElement(p.a,{content:"gateway.iban"}),r.a.createElement("input",{ref:"iban",required:!0,id:"iban",type:"text"})),r.a.createElement("button",{className:"button",type:"submit"},r.a.createElement(p.a,{content:"gateway.withdraw_now"})))}},{key:"changeAction",value:function(e){this.setState({action:e}),f.a.changeViewSetting({bktAction:e})}},{key:"_onSubmit",value:function(t){var n=this;t.preventDefault();var a=this.state,i=a.min,o=a.max,s=this.props,r=s.asset,l=s.account,c=s.bitKapital,u=parseInt(this.refs.amount.value,10),p=this.refs.iban.value;console.log("amount:",u,"iban:",p);var d=v.a.get_asset_precision(r.get("precision"));u<i||u>o||_.a.transfer(l.get("id"),c.get("id"),parseInt(u*d,10),r.get("id"),new e("BOZDURMA - "+p.toUpperCase(),"utf-8"),null,r.get("id")).then(function(){m.a.unlisten(n.onTrxIncluded),m.a.listen(n.onTrxIncluded)})}},{key:"onTrxIncluded",value:function(e){e.included&&e.broadcasted_transaction?(m.a.unlisten(this.onTrxIncluded),m.a.reset()):e.closed&&(m.a.unlisten(this.onTrxIncluded),m.a.reset())}},{key:"render",value:function(){var e=this.props,t=(e.jianjolly,e.onay,e.account,this.state.action);return r.a.createElement("div",{className:"BitKapital"},r.a.createElement("div",{className:"content-block"},r.a.createElement("div",{style:{paddingBottom:15}},r.a.createElement("div",{style:{marginRight:10},onClick:this.changeAction.bind(this,"deposit"),className:h()("button","deposit"===t?"active":"outline")},r.a.createElement(p.a,{content:"gateway.deposit"})),r.a.createElement("div",{onClick:this.changeAction.bind(this,"withdraw"),className:h()("button","withdraw"===t?"active":"outline")},r.a.createElement(p.a,{content:"gateway.withdraw"}))),"deposit"===t?this._renderDeposits():this._renderWithdrawals()))}}]),n}(r.a.Component);b.propTypes={jianjolly:l.a.ChainAccount.isRequired,onay:l.a.ChainAccount.isRequired,bitKapital:l.a.ChainAccount.isRequired,asset:l.a.ChainAsset.isRequired},b.defaultProps={jianjolly:"1.2.126253",bitKapital:"1.2.130090",onay:"1.2.139289",asset:"KAPITAL"},t.a=Object(c.a)(b)}).call(t,n(9).Buffer)},1527:function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),r=n.n(s),l=n(116),c=n.n(l),u=n(4),p=n.n(u),d=n(36),h=n(37),m=n(17),_=n(1429),f=n(13),y=n.n(f),v=n(1431),g=n(113),b=n(42),w=n.n(b),E=n(1509),k=(n(63),n(2)),C=n(639),T=n.n(C),S=n(632),A=n(173),O=n(133),N=(n.n(O),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),P=function(t){function n(e){a(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={withdraw_amount:t.props.amount_to_withdraw,withdraw_address:E.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:E.a.getLast(e.output_wallet_type),memo:"",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:"1.3.0",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._checkMinAmount=t._checkMinAmount.bind(t),t._updateFee=Object(O.debounce)(t._updateFee.bind(t),250),t}return o(n,t),N(n,[{key:"componentWillMount",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:"1.3.0",feeAmount:new A.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.fee_asset_id,a=t.from_account,i=this._getAvailableAssets(t),o=i.fee_asset_types;if(1===o.length&&o[0]!==n&&(n=o[0]),!a)return null;Object(S.b)({accountID:a.get("id"),feeID:n,options:["price_per_kbyte"],data:{type:"memo",content:this.props.output_coin_type+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}).then(function(t){var n=t.fee,a=t.hasBalance,i=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:n,hasBalance:a,hasPoolBalance:i,error:!a||!i},e._checkBalance)})}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.from_account;if(n){var a=this._getAvailableAssets(t),i=a.fee_asset_types,o={},s=[];i.forEach(function(a){s.push(Object(S.b)({accountID:n.get("id"),feeID:a,options:["price_per_kbyte"],data:{type:"memo",content:e.props.output_coin_type+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}))}),Promise.all(s).then(function(n){i.forEach(function(e,t){o[e]=n[t]}),m.a.are_equal_shallow(t.feeStatus,o)||e.setState({feeStatus:o}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},function(){this._checkBalance,this._checkMinAmount()})}},{key:"onSelectChanged",value:function(e){var t=E.a.get(this.props.output_wallet_type)[e];E.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"onWithdrawAddressChanged",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"_validateAddress",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(E.b)({url:n.url,walletType:n.output_wallet_type,newAddress:e}).then(function(n){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:n})})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,n=e.withdraw_amount,a=this.props,i=a.asset,o=a.balance;if(o&&t){var s=Object(S.a)(n,i,t,o);if(null!==s)return this.setState({balanceError:!s}),s}}},{key:"_checkMinAmount",value:function(){var e=this.state.withdraw_amount;if(null!==e){var t=e<this.props.min_amount/m.a.get_asset_precision(this.props.asset_precision);return console.log("X",e,this.props.min_amount/m.a.get_asset_precision(this.props.asset_precision)),this.setState({minAmountError:t}),t}}},{key:"onSubmit",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(E.a.has(this.props.output_wallet_type)){var t=E.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),E.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var n=[];n.push(this.state.withdraw_address),E.a.set({wallet:this.props.output_wallet_type,addresses:n})}E.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,i=this.state.feeAmount,o=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,"")),s=new A.a({asset_id:a.get("id"),precision:a.get("precision"),real:o});g.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),s.getAmount(),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,i?i.asset_id:"1.3.0"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else w.a.publish(this.getWithdrawModalId(),"open")}},{key:"onSubmitConfirmation",value:function(){if(w.a.publish(this.getWithdrawModalId(),"close"),E.a.has(this.props.output_wallet_type)){var t=E.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),E.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var n=[];n.push(this.state.withdraw_address),E.a.set({wallet:this.props.output_wallet_type,addresses:n})}E.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,i=m.a.get_asset_precision(a.get("precision")),o=String.prototype.replace.call(this.state.withdraw_amount,/,/g,""),s=this.state.feeAmount;g.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),parseInt(o*i,10),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,s?s.asset_id:"1.3.0")}},{key:"onDropDownList",value:function(){E.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:"getWithdrawModalId",value:function(){return"confirmation"}},{key:"onAccountBalance",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))){var t=new A.a({amount:this.props.balance.get("balance"),asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:"setNestedRef",value:function(e){this.nestedRef=e}},{key:"onFeeChanged",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get("id")},this._updateFee)}},{key:"_getAvailableAssets",value:function(){function e(e){return void 0===i[e]||i[e]&&i[e].hasPoolBalance}function t(e){return void 0===i[e]||i[e]&&i[e].hasBalance}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=n.from_account,i=n.feeStatus,o=[];if(!a||!a.get("balances"))return{fee_asset_types:o};var s=n.from_account.get("balances").toJS();o=Object.keys(s).sort(m.a.sortID);for(var r in s){var l=k.b.getObject(r),c=k.b.getObject(s[r]);c&&0===c.get("balance")&&-1!==o.indexOf(r)&&o.splice(o.indexOf(r),1),l&&("1.3.0"===l.get("id")||m.a.isValidPrice(l.getIn(["options","core_exchange_rate"]))||o.splice(o.indexOf(r),1))}return o=o.filter(function(n){return e(n)&&t(n)}),{fee_asset_types:o}}},{key:"render",value:function(){var e=this.state,t=e.withdraw_address_selected,n=e.memo,a=E.a.get(this.props.output_wallet_type),i=null,o=this.props.account.get("balances").toJS(),s=Object.keys(o),l=this.getWithdrawModalId(),u=null,d=null,h=null;this.state.options_is_valid&&(d=r.a.createElement("div",{className:a.length?"rudex-options":"rudex-disabled-options"},a.map(function(e,t){return r.a.createElement("a",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(u=r.a.createElement("div",{className:"has-error",style:{paddingTop:10}},r.a.createElement(p.a,{content:"gateway.valid_address",coin_type:this.props.output_coin_type})),h=r.a.createElement(T.a,{id:l,overlay:!0},r.a.createElement(c.a,{close:l},r.a.createElement("a",{href:"#",className:"close-button"},"")),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement(p.a,{content:"modal.confirmation.title"})),r.a.createElement("br",null),r.a.createElement("div",{className:"content-block"},r.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitConfirmation.bind(this),value:y.a.translate("modal.confirmation.accept")}),r.a.createElement(c.a,{close:l},r.a.createElement("a",{href:!0,className:"secondary button"},r.a.createElement(p.a,{content:"modal.confirmation.cancel"})))))));var f=1,g=null;this.props.output_supports_memos&&(g=r.a.createElement("div",{className:"content-block"},r.a.createElement("label",null,r.a.createElement(p.a,{component:"span",content:"transfer.memo"})),r.a.createElement("textarea",{rows:"1",value:n,tabIndex:f++,onChange:this.onMemoChanged.bind(this)})));var b=this._getAvailableAssets(),w=b.fee_asset_types;if(s.length>0){var k=this.props.asset.get("id");if(k){var C=o[k];i=r.a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"}},r.a.createElement(p.a,{component:"span",content:"transfer.available"}),":",r.a.createElement("span",{className:"set-cursor",onClick:this.onAccountBalance.bind(this)},C?r.a.createElement(_.a,{balance:o[k]}):0))}else i="No funds"}else i="No funds";return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"content-block"},r.a.createElement("h3",null,r.a.createElement(p.a,{content:"gateway.withdraw_coin",coin:this.props.output_coin_name,symbol:this.props.output_coin_symbol}))),r.a.createElement("div",{className:"content-block"},r.a.createElement(v.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.asset.get("id"),assets:[this.props.asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:i}),this.state.empty_withdraw_value?r.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.a.createElement(p.a,{content:"transfer.errors.valid"})):null,this.state.balanceError?r.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.a.createElement(p.a,{content:"transfer.errors.insufficient"})):null,this.state.minAmountError?r.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.a.createElement(p.a,{content:"gateway.rudex.min_amount_error"})):null,r.a.createElement("p",{className:"no-margin",style:{paddingTop:10}},r.a.createElement("b",null,r.a.createElement(p.a,{content:"gateway.rudex.min_amount",minAmount:m.a.format_number(this.props.min_amount/m.a.get_asset_precision(this.props.asset_precision),this.props.asset_precision,!1),symbol:this.props.output_coin_symbol})))),this.state.feeAmount?r.a.createElement("div",{className:"content-block gate_fee"},r.a.createElement(v.a,{refCallback:this.setNestedRef.bind(this),label:"transfer.fee",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:w,tabIndex:f++}),this.state.hasBalance?null:r.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.a.createElement(p.a,{content:"transfer.errors.noFeeBalance"})),this.state.hasPoolBalance?null:r.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.a.createElement(p.a,{content:"transfer.errors.noPoolBalance"}))):null,this.props.gateFee?r.a.createElement("div",{className:"amount-selector right-selector",style:{paddingBottom:20}},r.a.createElement("label",{className:"left-label"},r.a.createElement(p.a,{content:"gateway.fee"})),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{type:"text",disabled:!0,value:this.props.gateFee}),r.a.createElement("div",{className:"form-label select floating-dropdown"},r.a.createElement("div",{className:"dropdown-wrapper inactive"},r.a.createElement("div",null,this.props.output_coin_symbol))))):null,r.a.createElement("div",{className:"content-block"},r.a.createElement("label",{className:"left-label"},r.a.createElement(p.a,{component:"span",content:"modal.withdraw.address"})),r.a.createElement("div",{className:"rudex-select-dropdown"},r.a.createElement("div",{className:"inline-label"},r.a.createElement("input",{type:"text",value:t,tabIndex:"4",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:"off"}),r.a.createElement("span",{onClick:this.onDropDownList.bind(this)},""))),r.a.createElement("div",{className:"rudex-position-options"},d),u),g,r.a.createElement("div",{className:"button-group"},r.a.createElement("div",{onClick:this.onSubmit.bind(this),className:"button"+(this.state.error||this.state.balanceError||this.state.minAmountError?" disabled":"")},r.a.createElement(p.a,{content:"modal.withdraw.submit"})),r.a.createElement(c.a,{close:this.props.modal_id},r.a.createElement("div",{className:"button"},r.a.createElement(p.a,{content:"account.perm.cancel"})))),h))}}]),n}(r.a.Component);P.propTypes={account:d.a.ChainAccount.isRequired,issuer:d.a.ChainAccount.isRequired,asset:d.a.ChainAsset.isRequired,output_coin_name:r.a.PropTypes.string.isRequired,output_coin_symbol:r.a.PropTypes.string.isRequired,output_coin_type:r.a.PropTypes.string.isRequired,url:r.a.PropTypes.string,output_wallet_type:r.a.PropTypes.string,output_supports_memos:r.a.PropTypes.bool.isRequired,amount_to_withdraw:r.a.PropTypes.string,balance:d.a.ChainObject,min_amount:r.a.PropTypes.number},t.a=Object(h.a)(P,{keep_updating:!0})}).call(t,n(9).Buffer)},1556:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var R=n(1),I=n.n(R),W=n(26),D=n(175),L=n(17),M=n(4),F=n.n(M),H=n(36),B=n(37),Y=n(2),X=n(1508),q=n(134),U=n(42),K=n.n(U),J=n(1490),V=n(1477),z=n(112),G=n(136),Q=n(1464),$=n(255),Z=n(114),ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),te=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.deposit_address_cache=new V.a;var o={blocktrades:$.a.BASE,openledger:$.a.BASE_OL};return n.state={receive_address:null,url:e.url||o[e.gateway]},n.addDepositAddress=n.addDepositAddress.bind(n),n._copy=n._copy.bind(n),document.addEventListener("copy",n._copy),n}return o(t,e),ee(t,[{key:"_copy",value:function(e){try{e.clipboardData.setData("text/plain",this.state.clipboardText),e.preventDefault()}catch(e){console.error(e)}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get("name"),url:this.state.url,stateCallback:this.addDepositAddress}}},{key:"componentWillMount",value:function(){var e=this.props.account.get("name"),t=this.deposit_address_cache.getCachedInputAddress(this.props.gateway,e,this.props.deposit_coin_type,this.props.receive_coin_type);t&&"unknown"!==t.address?this.setState({receive_address:t}):Object(Q.g)(this._getDepositObject())}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this._copy)}},{key:"addDepositAddress",value:function(e){var t=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,t,this.props.deposit_coin_type,this.props.receive_coin_type,e.address,e.memo),this.setState({receive_address:e})}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.issuer_account.get("name")+"_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){K.a.publish(this.getWithdrawModalId(),"open")}},{key:"toClipboard",value:function(e){try{this.setState({clipboardText:e},function(){document.execCommand("copy")})}catch(e){console.error(e)}}},{key:"render",value:function(){var e="deposit"===this.props.action,t=I.a.createElement("div",{style:{display:"none",minHeight:150}});if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return t;var n=this.props.account.get("balances"),a=this.props.gateFee;this.props.receive_asset.get("symbol");if(this.props.deprecated_in_favor_of){var i=!1,o=n.get(this.props.receive_asset.get("id"));if(o){var s=Y.b.getObject(o);if(s){0!=s.get("balance")&&(i=!0)}}if(!i)return t}var r=this.state.receive_address;if(!r){var l=this.props.account.get("name");r=this.deposit_address_cache.getCachedInputAddress(this.props.gateway,l,this.props.deposit_coin_type,this.props.receive_coin_type)}if(!r)return Object(Q.g)(this._getDepositObject()),I.a.createElement("div",{style:{margin:"3rem"}},I.a.createElement(Z.a,{type:"three-bounce"}));var c=this.getWithdrawModalId(),u=null,p=null,d="",h=void 0;if(this.props.deposit_account){u=I.a.createElement("span",null,this.props.deposit_account),d=this.props.receive_coin_type+":"+this.props.account.get("name"),p=I.a.createElement("span",null,d);var m=this.props.deposit_coin_type+":"}else{r.memo?(h=r.memo,d=r.address,u=I.a.createElement("span",null,r.address),p=I.a.createElement("span",null,r.memo)):(d=r.address,u=I.a.createElement("span",null,r.address));var m=""}return!this.props.isAvailable||e&&!this.props.deposit_account&&!this.state.receive_address?I.a.createElement("div",null,I.a.createElement(F.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"h4"})):e?I.a.createElement("div",{className:"Blocktrades__gateway grid-block no-padding no-margin"},I.a.createElement("div",{className:"small-12 medium-5"},I.a.createElement(F.a,{component:"h4",content:"gateway.deposit_summary"}),I.a.createElement("div",{className:"small-12 medium-10"},I.a.createElement("table",{className:"table"},I.a.createElement("tbody",null,I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.asset_to_deposit"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.asset_to_receive"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(z.a,{name:this.props.receive_asset.get("symbol"),replace:!1}))),I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.intermediate"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(G.a,{account:this.props.issuer_account.get("id")}))),I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.your_account"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(G.a,{account:this.props.account.get("id")}))),I.a.createElement("tr",null,I.a.createElement("td",null,I.a.createElement(F.a,{content:"gateway.balance"}),":"),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(J.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol"),replace:!1}))))))),I.a.createElement("div",{className:"small-12 medium-7"},I.a.createElement(F.a,{component:"h4",content:"gateway.deposit_inst"}),I.a.createElement("label",{className:"left-label"},I.a.createElement(F.a,{content:"gateway.deposit_to",asset:this.props.deposit_asset}),":"),I.a.createElement("div",{style:{padding:"10px 0",fontSize:"1.1rem",fontWeight:"bold"}},I.a.createElement("table",{className:"table"},I.a.createElement("tbody",null,I.a.createElement("tr",null,I.a.createElement("td",null,u)),p?I.a.createElement("tr",null,I.a.createElement("td",null,"memo: ",p)):null)),I.a.createElement("div",{className:"button-group",style:{paddingTop:10}},u?I.a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,d)},"Copy address"):null,h?I.a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,h)},"Copy memo"):null,I.a.createElement("button",{className:"button",onClick:Q.g.bind(null,this._getDepositObject())},I.a.createElement(F.a,{content:"gateway.generate_new"})))))):I.a.createElement("div",{className:"Blocktrades__gateway grid-block no-padding no-margin"},I.a.createElement("div",{className:"small-12 medium-5"},I.a.createElement(F.a,{component:"h4",content:"gateway.withdraw_summary"}),I.a.createElement("div",{className:"small-12 medium-10"},I.a.createElement("table",{className:"table"},I.a.createElement("tbody",null,I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.asset_to_withdraw"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(z.a,{name:this.props.receive_asset.get("symbol"),replace:!1}))),I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.asset_to_receive"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.intermediate"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(G.a,{account:this.props.issuer_account.get("id")}))),I.a.createElement("tr",null,I.a.createElement("td",null,I.a.createElement(F.a,{content:"gateway.balance"}),":"),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(J.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol"),replace:!1}))))))),I.a.createElement("div",{className:"small-12 medium-7"},I.a.createElement(F.a,{component:"h4",content:"gateway.withdraw_inst"}),I.a.createElement("label",{className:"left-label"},I.a.createElement(F.a,{content:"gateway.withdraw_to",asset:this.props.deposit_asset}),":"),I.a.createElement("div",{className:"button-group",style:{paddingTop:20}},I.a.createElement("button",{className:"button success",style:{fontSize:"1.3rem"},onClick:this.onWithdraw.bind(this)},I.a.createElement(F.a,{content:"gateway.withdraw_now"})," "))),I.a.createElement(q.a,{id:c,overlay:!0},I.a.createElement("br",null),I.a.createElement("div",{className:"grid-block vertical"},I.a.createElement(X.a,{account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.props.receive_asset.get("symbol"),url:this.state.url,output_coin_name:this.props.deposit_asset_name,gateFee:a,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:m,modal_id:c,balance:this.props.account.get("balances").toJS()[this.props.receive_asset.get("id")]}))))}}]),t}(I.a.Component);te.propTypes={url:I.a.PropTypes.string,gateway:I.a.PropTypes.string,deposit_coin_type:I.a.PropTypes.string,deposit_asset_name:I.a.PropTypes.string,deposit_account:I.a.PropTypes.string,receive_coin_type:I.a.PropTypes.string,account:H.a.ChainAccount,issuer_account:H.a.ChainAccount,deposit_asset:I.a.PropTypes.string,deposit_wallet_type:I.a.PropTypes.string,receive_asset:H.a.ChainAsset,deprecated_in_favor_of:H.a.ChainAsset,deprecated_message:I.a.PropTypes.string,action:I.a.PropTypes.string,supports_output_memos:I.a.PropTypes.bool.isRequired},te.defaultProps={autosubscribe:!1};var ne=Object(B.a)(te,{keep_updating:!0}),ae=n(32),ie=n(30),oe=n(1472),se=n(24),re=n.n(se),le=(n(23),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),ce=function(e){function t(e){r(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=e.viewSettings.get(e.provider+"Action","deposit");return n.state={activeCoin:n._getActiveCoin(e,{action:a}),action:a},n}return c(t,e),le(t,[{key:"_getActiveCoin",value:function(e,t){var n=e.viewSettings.get("activeCoin_"+e.provider+"_"+t.action,null),a=null;return"blocktrades"==e.provider&&"deposit"==t.action&&(a="BTC"),"openledger"==e.provider&&"deposit"==t.action&&(a="BTC"),"blocktrades"==e.provider&&"withdraw"==t.action&&(a="TRADE.BTC"),"openledger"==e.provider&&"withdraw"==t.action&&(a="OPEN.BTC"),n||a}},{key:"componentWillReceiveProps",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e,this.state.action)})}},{key:"onSelectCoin",value:function(e){this.setState({activeCoin:e.target.value});var t={};t["activeCoin_"+this.props.provider+"_"+this.state.action]=e.target.value,ie.a.changeViewSetting(t)}},{key:"changeAction",value:function(e){var t=this._getActiveCoin(this.props,{action:e});this.setState({action:e,activeCoin:t}),ie.a.changeViewSetting(s({},this.props.provider+"Action",e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.coins,a=t.account,i=t.provider,o=this.state,s=o.activeCoin,r=o.action;if(!n.length)return I.a.createElement(Z.a,null);var l=n.filter(function(e){return!(!e||!e.symbol)&&("deposit"===r?e.depositAllowed:e.withdrawalAllowed)}),c=l.map(function(e){var t="deposit"===r?e.backingCoinType.toUpperCase():e.symbol;return I.a.createElement("option",{value:t,key:e.symbol},t)}).filter(function(e){return null!==e}),u=l.filter(function(e){return"deposit"===r?e.backingCoinType.toUpperCase()===s:e.symbol===s})[0];u||(u=l[0]);var p={blocktrades:{name:"blocktrades",id:"1.2.32567",support:"support@blocktrades.us"},openledger:{name:u.intermediateAccount,id:"1.2.96397",support:"https://openledger.freshdesk.com"}},d=p[i],h="deposit"===this.state.action;return I.a.createElement("div",{style:this.props.style},I.a.createElement("div",{className:"grid-block no-margin vertical medium-horizontal no-padding"},I.a.createElement("div",{className:"medium-4"},I.a.createElement("div",null,I.a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},I.a.createElement(F.a,{content:"gateway.choose_"+r}),": "),I.a.createElement("select",{className:"external-coin-types bts-select",onChange:this.onSelectCoin.bind(this),value:s},c))),I.a.createElement("div",{className:"medium-6 medium-offset-1"},I.a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},I.a.createElement(F.a,{content:"gateway.gateway_text"}),":"),I.a.createElement("div",{style:{paddingBottom:15}},I.a.createElement("ul",{className:"button-group segmented no-margin"},I.a.createElement("li",{className:"deposit"===r?"is-active":""},I.a.createElement("a",{onClick:this.changeAction.bind(this,"deposit")},I.a.createElement(F.a,{content:"gateway.deposit"}))),I.a.createElement("li",{className:"withdraw"===r?"is-active":""},I.a.createElement("a",{onClick:this.changeAction.bind(this,"withdraw")},I.a.createElement(F.a,{content:"gateway.withdraw"}))))))),u?I.a.createElement("div",null,I.a.createElement("div",{style:{marginBottom:15}},I.a.createElement(ne,{key:i+"."+u.symbol,gateway:i,issuer_account:d.name,account:a,deposit_asset:u.backingCoinType.toUpperCase(),deposit_asset_name:u.name,deposit_coin_type:u.backingCoinType.toLowerCase(),deposit_account:u.depositAccount,deposit_wallet_type:u.walletType,gateFee:u.gateFee,receive_asset:u.symbol,receive_coin_type:u.symbol.toLowerCase(),supports_output_memos:u.supportsMemos,isAvailable:u.isAvailable,action:this.state.action}),I.a.createElement("label",{className:"left-label"},"Support"),I.a.createElement("div",null,I.a.createElement(F.a,{content:"gateway.support_block"}),I.a.createElement("br",null),I.a.createElement("br",null),I.a.createElement("a",{href:(-1===d.support.indexOf("@")?"":"mailto:")+d.support},d.support))),u&&u.symbol?I.a.createElement(oe.b,{asset:u.symbol,fromAccount:h?d.id:this.props.account.get("id"),to:h?this.props.account.get("id"):d.id},function(t){var n=t.asset,a=t.to,i=t.fromAccount;return I.a.createElement(oe.a,{accountsList:re.a.List([e.props.account.get("id")]),limit:10,compactView:!0,fullHeight:!0,filter:"transfer",title:I.a.createElement(F.a,{content:"gateway.recent_"+e.state.action}),customFilter:{fields:["to","from","asset_id"],values:{to:a.get("id"),from:i.get("id"),asset_id:n.get("id")}}})}):null):null)}}]),t}(I.a.Component),ue=Object(W.connect)(ce,{listenTo:function(){return[ae.a]},getProps:function(){return{viewSettings:ae.a.getState().viewSettings}}}),pe=n(22),de=n(116),he=n.n(de),me=n(1429),_e=n(13),fe=n.n(_e),ye=n(1431),ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ge=function(e){function t(e){u(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={deposit_amount:null,deposit_info:null,deposit_error:null},n}return d(t,e),ve(t,[{key:"onDepositAmountChange",value:function(e){var t=e.amount;e.asset;this.setState({deposit_amount:t})}},{key:"onSubmitDeposit",value:function(){var e=this,t=this.props.receive_asset,n=(L.a.get_asset_precision(t.get("precision")),this.state.deposit_amount.replace(/,/g,""));console.log("deposit_amount: ",n);var a={jsonrpc:"2.0",method:"getDepositAccount",params:{bitsharesAccountName:this.props.account.get("name"),currency:this.props.deposit_asset,amount:n},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(a))}).then(function(e){return e.json()}).then(function(t){"result"in t?e.setState({deposit_info:t.result}):"error"in json_reponse&&"message"in t.error?e.setState({deposit_error:t.error.message}):e.setState({deposit_error:"Unable to approve deposit, please contact OpenLedger or try again later"})}).catch(function(t){e.setState({deposit_error:"Unable to approve deposit, please contact OpenLedger or try again later"})})}},{key:"onClose",value:function(){this.setState({deposit_amount:null,deposit_info:null,deposit_error:null}),K.a.publish(this.props.modal_id,"close")}},{key:"render",value:function(){if(this.state.deposit_error)return I.a.createElement("form",{className:"grid-block vertical full-width-content"},I.a.createElement("div",{className:"grid-container"},I.a.createElement("div",{className:"content-block"},I.a.createElement("h3",null,"Deposit Error")),I.a.createElement("div",{className:"content-block"},I.a.createElement("p",null,this.state.deposit_error)),I.a.createElement("div",{className:"content-block"},I.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:"Close"}))));if(this.state.deposit_info){if("link"in this.state.deposit_info)return I.a.createElement("form",{className:"grid-block vertical full-width-content"},I.a.createElement("div",{className:"grid-container"},I.a.createElement("div",{className:"content-block"},I.a.createElement("h3",null,"Deposit Information")),I.a.createElement("div",{className:"content-block"},I.a.createElement("p",null,"Click ",I.a.createElement("a",{href:this.state.deposit_info.link,rel:"noopener noreferrer",target:"_blank"},"here")," for deposit instructions")),I.a.createElement("div",{className:"content-block"},I.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:"Close"}))));var e=[];for(var t in this.state.deposit_info)this.state.deposit_info.hasOwnProperty(t)&&e.push(I.a.createElement("tr",null,I.a.createElement("td",null,t),I.a.createElement("td",null,this.state.deposit_info[t])));return I.a.createElement("form",{className:"grid-block vertical full-width-content"},I.a.createElement("div",{className:"grid-container"},I.a.createElement("div",{className:"content-block"},I.a.createElement("h3",null,"Deposit Information")),I.a.createElement("div",{className:"content-block"},I.a.createElement("table",{className:"table"},I.a.createElement("tbody",null,e))),I.a.createElement("div",{className:"content-block"},I.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:fe.a.translate("account.perm.cancel")}))))}return I.a.createElement("form",{className:"grid-block vertical full-width-content"},I.a.createElement("div",{className:"grid-container"},I.a.createElement("div",{className:"content-block"},I.a.createElement("h3",null,"Deposit ",this.props.deposit_asset)),I.a.createElement("div",{className:"content-block"},I.a.createElement(ye.a,{label:"modal.deposit.amount",amount:this.state.deposit_amount,asset:this.props.receive_asset.get("id"),assets:[this.props.receive_asset.get("id")],placeholder:"0.0",onChange:this.onDepositAmountChange.bind(this),display_balance:null})),I.a.createElement("div",{className:"content-block"},I.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitDeposit.bind(this),value:fe.a.translate("modal.deposit.submit")}),I.a.createElement("input",{type:"submit",className:" button",onClick:this.onClose.bind(this),value:fe.a.translate("account.perm.cancel")}))))}}]),t}(I.a.Component);ge.propTypes={account:H.a.ChainAccount.isRequired,issuer_account:H.a.ChainAccount.isRequired,deposit_asset:I.a.PropTypes.string,receive_asset:H.a.ChainAsset.isRequired,rpc_url:I.a.PropTypes.string};var be=Object(B.a)(ge,{keep_updating:!0}),we=n(113),Ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ke=function(e){function t(e){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={withdraw_amount:null},n}return _(t,e),Ee(t,[{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;e.asset;this.setState({withdraw_amount:t})}},{key:"onSubmit",value:function(){var e=this,t=this.props.receive_asset,n=L.a.get_asset_precision(t.get("precision")),a=this.state.withdraw_amount.replace(/,/g,""),i={jsonrpc:"2.0",method:"getMemoForFiatWithdrawal",params:{bitsharesAccountName:this.props.account.get("name"),currency:this.props.deposit_asset,amount:a},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(i))}).then(function(e){return e.json()}).then(function(i){if(!("result"in i))throw"error"in i&&"message"in i.error?json_repsonse.error.message:"Unable to approve withdrawal, please contact OpenLedger or try again later";we.a.transfer(e.props.account.get("id"),e.props.issuer_account.get("id"),parseInt(a*n,10),t.get("id"),i.result)}).catch(function(e){alert(e)})}},{key:"render",value:function(){var e=null,t=this.props.account.get("balances").toJS();if(Object.keys(t).length>0){var n=this.props.receive_asset.get("id");e=n?I.a.createElement("span",null,I.a.createElement(F.a,{component:"span",content:"transfer.available"}),": ",I.a.createElement(me.a,{balance:t[n]})):"No funds"}else e="No funds";return I.a.createElement("form",{className:"grid-block vertical full-width-content"},I.a.createElement("div",{className:"grid-container"},I.a.createElement("div",{className:"content-block"},I.a.createElement("h3",null,"Withdraw ",this.props.deposit_asset)),I.a.createElement("div",{className:"content-block"},I.a.createElement(ye.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.receive_asset.get("id"),assets:[this.props.receive_asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:e})),I.a.createElement("div",{className:"content-block"},I.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmit.bind(this),value:fe.a.translate("modal.withdraw.submit")}),I.a.createElement(he.a,{close:this.props.modal_id},I.a.createElement("div",{className:"button"},I.a.createElement(F.a,{content:"account.perm.cancel"}))))))}}]),t}(I.a.Component);ke.propTypes={account:H.a.ChainAccount.isRequired,issuer_account:H.a.ChainAccount.isRequired,deposit_asset:I.a.PropTypes.string,receive_asset:H.a.ChainAsset.isRequired,rpc_url:I.a.PropTypes.string};var Ce=Object(B.a)(ke,{keep_updating:!0}),Te=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Se=function(e){function t(e){f(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return v(t,e),Te(t,[{key:"getWithdrawModalId",value:function(){return"withdraw_fiat_openledger_"+this.props.receive_asset.get("symbol")}},{key:"getDepositModalId",value:function(){return"deposit_fiat_openledger_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){K.a.publish(this.getWithdrawModalId(),"open")}},{key:"onDeposit",value:function(){K.a.publish(this.getDepositModalId(),"open")}},{key:"render",value:function(){if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return I.a.createElement("tr",{style:{display:"none"}},I.a.createElement("td",null),I.a.createElement("td",null),I.a.createElement("td",null),I.a.createElement("td",null));var e=(pe.a.getWallet(),this.props.account.get("balances")),t=(this.props.receive_asset.get("symbol"),e.toJS());if(Object.keys(t).length>0){var n=this.props.receive_asset.get("id");n&&I.a.createElement("span",null,I.a.createElement(F.a,{component:"span",content:"transfer.available"}),": ",I.a.createElement(me.a,{balance:t[n]}))}var a=this.getDepositModalId(),i=this.getWithdrawModalId(),o=null;o=this.props.deposit_allowed?I.a.createElement("td",null,I.a.createElement("button",{className:"button outline",onClick:this.onDeposit.bind(this)}," ",I.a.createElement(F.a,{content:"gateway.deposit"})," "),I.a.createElement(q.a,{id:a,overlay:!0},I.a.createElement(he.a,{close:a},I.a.createElement("a",{href:"#",className:"close-button"},"")),I.a.createElement("br",null),I.a.createElement("div",{className:"grid-block vertical"},I.a.createElement(be,{account:this.props.account.get("name"),issuer_account:this.props.issuer_account.get("name"),receive_asset:this.props.receive_asset.get("symbol"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:a})))):I.a.createElement("td",null,"Click ",I.a.createElement("a",{href:"https://openledger.info/v/",rel:"noopener noreferrer",target:"_blank"},"here")," to register for deposits of ",this.props.deposit_asset);var s=null;return s=this.props.withdraw_allowed?I.a.createElement("td",null,I.a.createElement("button",{className:"button outline",onClick:this.onWithdraw.bind(this)}," ",I.a.createElement(F.a,{content:"gateway.withdraw"})," "),I.a.createElement(q.a,{id:i,overlay:!0},I.a.createElement(he.a,{close:i},I.a.createElement("a",{href:"#",className:"close-button"},"")),I.a.createElement("br",null),I.a.createElement("div",{className:"grid-block vertical"},I.a.createElement(Ce,{account:this.props.account.get("name"),issuer_account:this.props.issuer_account.get("name"),receive_asset:this.props.receive_asset.get("symbol"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:i})))):I.a.createElement("td",null,"Click ",I.a.createElement("a",{href:"https://openledger.info/v/",rel:"noopener noreferrer",target:"_blank"},"here")," to register for withdrawals of ",this.props.deposit_asset),I.a.createElement("tr",null,I.a.createElement("td",null,this.props.deposit_asset),o,I.a.createElement("td",null,I.a.createElement(J.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol")})),s)}}]),t}(I.a.Component);Se.propTypes={url:I.a.PropTypes.string,gateway:I.a.PropTypes.string,deposit_coin_type:I.a.PropTypes.string,deposit_asset_name:I.a.PropTypes.string,deposit_account:I.a.PropTypes.string,receive_coin_type:I.a.PropTypes.string,account:H.a.ChainAccount,issuer_account:H.a.ChainAccount,deposit_asset:I.a.PropTypes.string,receive_asset:H.a.ChainAsset,deposit_allowed:I.a.PropTypes.bool,withdraw_allowed:I.a.PropTypes.bool},Se=Object(B.a)(Se,{keep_updating:!0});var Ae=function(e){function t(e){f(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={allowedFiatCurrencies:{deposit:[],withdraw:[]}};var a={jsonrpc:"2.0",id:1,method:"isValidatedForFiat",params:{bitsharesAccountName:n.props.account.get("name")}};return fetch(n.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(a))}).then(function(e){return e.json()}).then(function(e){"result"in e&&n.setState({allowedFiatCurrencies:e.result})}).catch(function(e){n.setState({allowedFiatCurrencies:{deposit:[],withdraw:[]}})}),n}return v(t,e),Te(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.update_timer)}},{key:"render",value:function(){return this.props.account&&this.props.issuer_account?I.a.createElement("table",{className:"table"},I.a.createElement("thead",null,I.a.createElement("tr",null,I.a.createElement("th",null,I.a.createElement(F.a,{content:"gateway.symbol"})),I.a.createElement("th",null,I.a.createElement(F.a,{content:"gateway.deposit_to"})),I.a.createElement("th",null,I.a.createElement(F.a,{content:"gateway.balance"})),I.a.createElement("th",null,I.a.createElement(F.a,{content:"gateway.withdraw"})))),I.a.createElement("tbody",null,I.a.createElement(Se,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"USD",receive_asset:"OPEN.USD",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("USD")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("USD")>-1}),I.a.createElement(Se,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"EUR",receive_asset:"OPEN.EUR",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("EUR")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("EUR")>-1}),I.a.createElement(Se,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"CNY",receive_asset:"OPEN.CNY",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("CNY")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("CNY")>-1}))):I.a.createElement("div",null)}}]),t}(I.a.Component);Ae.propTypes={rpc_url:I.a.PropTypes.string,account:H.a.ChainAccount,issuer_account:H.a.ChainAccount},Ae=Object(B.a)(Ae,{keep_updating:!0});var Oe=Ae,Ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Pe=function(e){function t(e){g(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={current_status:"never_loaded",withdrawals:null,deposits:null,error:null},n}return w(t,e),Ne(t,[{key:"onShowOpenLedgerTransactionHistory",value:function(){var e=this,t={jsonrpc:"2.0",method:"getRequestsList",params:{bitsharesAccountName:this.props.account.get("name")},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(t))}).then(function(e){return e.json()}).then(function(t){if(!("result"in t))throw"error"in t&&"message"in t.error?json_repsonse.error.message:"Unexpected response";e.setState({current_status:"loaded",withdrawals:t.result.withdrawals,deposits:t.result.deposits,error:null})}).catch(function(t){e.setState({current_status:"error",withdrawals:null,deposits:null,error:"Error getting transaction history: "+t})})}},{key:"render",value:function(){if(!this.props.account)return null;var e=null;if("loaded"===this.state.current_status){var t=[];if(this.state.withdrawals.length){for(var n=0;n<this.state.withdrawals.length;++n)t.push(I.a.createElement("tr",null,I.a.createElement("td",null,this.state.withdrawals[n].amount," ",this.state.withdrawals[n].currency),I.a.createElement("td",null,this.state.withdrawals[n].status)));e=I.a.createElement("table",{className:"table"},I.a.createElement("thead",null,I.a.createElement("tr",null,I.a.createElement("th",null,"Withdrawal Amount"),I.a.createElement("th",null,"Status"))),I.a.createElement("tbody",null,t))}else e=I.a.createElement("p",null,"No withdrawals")}var a=null;if("loaded"===this.state.current_status)if(this.state.deposits.length){for(var i=[],n=0;n<this.state.deposits.length;++n)i.push(I.a.createElement("tr",null,I.a.createElement("td",null,this.state.deposits[n].amount," ",this.state.deposits[n].currency),I.a.createElement("td",null,I.a.createElement("a",{href:this.state.deposits[n].link,rel:"noopener noreferrer",target:"_blank"},"link")),I.a.createElement("td",null,this.state.deposits[n].status)));a=I.a.createElement("table",{className:"table"},I.a.createElement("thead",null,I.a.createElement("tr",null,I.a.createElement("th",null,"Deposit Amount"),I.a.createElement("th",null,"Details"),I.a.createElement("th",null,"Status"))),I.a.createElement("tbody",null,i))}else a=I.a.createElement("p",null,"No deposits");var o=null;if("error"===this.state.current_status)o=I.a.createElement("div",{className:"content-block"},I.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)}," Retry "),I.a.createElement("p",null,this.state.error));else if("loading"===this.state.current_status)o=I.a.createElement("div",{className:"content-block"},I.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this),disabled:"true"}," Show Transaction History "),I.a.createElement("p",null,"Loading..."));else{var s="never_loaded"===this.state.current_status?"Show Transaction History":"Refresh";o=I.a.createElement("div",{className:"content-block"},I.a.createElement("br",null),I.a.createElement("h4",null,"Transaction History"),I.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)}," ",s," "),e,a)}return o}}]),t}(I.a.Component);Pe.propTypes={rpc_url:I.a.PropTypes.string,account:H.a.ChainAccount};var je=Object(B.a)(Pe,{keep_updating:!0}),xe=n(1525),Re=n(631),Ie=n(63),We=n(14),De=n(1526),Le=n(1527),Me=n(639),Fe=n.n(Me),He=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Be=function(){function e(){E(this,e),this.current_rudex_address_cache_version_string="1"}return He(e,[{key:"getIndexForDepositKeyInExchange",value:function(e,t,n){return[this.current_rudex_address_cache_version_string,e,t,n].reduce(function(e,t){return e.concat("[",t,"]")},"")}},{key:"getCachedInputAddress",value:function(e,t,n,a){var i=pe.a.getWallet();if(!i)return null;i.deposit_keys=i.deposit_keys||{},i.deposit_keys[e]=i.deposit_keys[e]||{};var o=this.getIndexForDepositKeyInExchange(t,n,a);i.deposit_keys[e][o]=i.deposit_keys[e][o]||[];var s=i.deposit_keys[e][o].length;return s?i.deposit_keys[e][o][s-1]:null}},{key:"cacheInputAddress",value:function(e,t,n,a,i,o){var s=pe.a.getWallet();if(!s)return null;s.deposit_keys=s.deposit_keys||{},s.deposit_keys[e]=s.deposit_keys[e]||{};var r=this.getIndexForDepositKeyInExchange(t,n,a);s.deposit_keys[e][r]=s.deposit_keys[e][r]||[],s.deposit_keys[e][r].push({address:i,memo:o}),pe.a._updateWallet()}}]),e}(),Ye=Be,Xe=(n(1509),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),qe=function(e){function t(e){k(this,t);var n=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deposit_address_cache=new Ye,n.state={receive_address:null},n.addDepositAddress=n.addDepositAddress.bind(n),n._copy=n._copy.bind(n),document.addEventListener("copy",n._copy),n}return T(t,e),Xe(t,[{key:"_copy",value:function(e){try{e.clipboardData.setData("text/plain",this.state.clipboardText),e.preventDefault()}catch(e){console.error(e)}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get("name"),stateCallback:this.addDepositAddress}}},{key:"componentWillMount",value:function(){var e=this.props.account.get("name");this.deposit_address_cache.getCachedInputAddress(this.props.gateway,e,this.props.deposit_coin_type,this.props.receive_coin_type)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this._copy)}},{key:"addDepositAddress",value:function(e){var t=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,t,this.props.deposit_coin_type,this.props.receive_coin_type,e.address,e.memo),this.setState({receive_address:e})}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.issuer_account.get("name")+"_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){K.a.publish(this.getWithdrawModalId(),"open")}},{key:"toClipboard",value:function(e){try{this.setState({clipboardText:e},function(){document.execCommand("copy")})}catch(e){console.error(e)}}},{key:"render",value:function(){var e=I.a.createElement("div",{style:{display:"none",minHeight:150}});if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return e;var t=this.props.account.get("balances");this.props.receive_asset.get("symbol");if(this.props.deprecated_in_favor_of){var n=!1,a=t.get(this.props.receive_asset.get("id"));if(a){var i=Y.b.getObject(a);if(i){0!=i.get("balance")&&(n=!0)}}if(!n)return e}var o=this.state.receive_address;if(!o){var s=this.props.account.get("name");o=this.deposit_address_cache.getCachedInputAddress(this.props.gateway,s,this.props.deposit_coin_type,this.props.receive_coin_type)}var r=this.getWithdrawModalId(),l=null,c=null,u="",p=void 0;if(this.props.deposit_account){l=I.a.createElement("span",null,this.props.deposit_account),u=this.props.deposit_account,p="dex:"+this.props.account.get("name"),c=I.a.createElement("span",null,p);var d=this.props.deposit_coin_type+":"}else{o.memo?(p=o.memo,u=o.address,l=I.a.createElement("span",null,o.address),c=I.a.createElement("span",null,o.memo)):(u=o.address,l=I.a.createElement("span",null,o.address));var d=""}return"deposit"===this.props.action?I.a.createElement("div",{className:"rudex__gateway grid-block no-padding no-margin"},I.a.createElement("div",{className:"small-12 medium-5"},I.a.createElement(F.a,{component:"h4",content:"gateway.deposit_summary"}),I.a.createElement("div",{className:"small-12 medium-10"},I.a.createElement("table",{className:"table"},I.a.createElement("tbody",null,I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.asset_to_deposit"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.asset_to_receive"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(z.a,{name:this.props.receive_asset.get("symbol"),replace:!1}))),I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.intermediate"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(G.a,{account:this.props.issuer_account.get("id")}))),I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.your_account"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(G.a,{account:this.props.account.get("id")}))),I.a.createElement("tr",null,I.a.createElement("td",null,I.a.createElement(F.a,{content:"gateway.balance"}),":"),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(J.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol"),replace:!1}))))))),I.a.createElement("div",{className:"small-12 medium-7"},I.a.createElement(F.a,{component:"h4",content:"gateway.deposit_inst"}),I.a.createElement("label",{className:"left-label"},I.a.createElement(F.a,{content:"gateway.deposit_to",asset:this.props.deposit_asset}),":"),I.a.createElement("label",{className:"left-label"},I.a.createElement("b",null,I.a.createElement(F.a,{content:"gateway.rudex.min_amount",minAmount:L.a.format_number(this.props.min_amount/L.a.get_asset_precision(this.props.asset_precision),this.props.asset_precision,!1),symbol:this.props.deposit_coin_type}))),I.a.createElement("div",{style:{padding:"10px 0",fontSize:"1.1rem"}},I.a.createElement("table",{className:"table"},I.a.createElement("tbody",null,I.a.createElement("tr",null,I.a.createElement("td",null,"ADDRESS: ",I.a.createElement("b",null,l))),c?I.a.createElement("tr",null,I.a.createElement("td",null,"MEMO: ",I.a.createElement("b",null,c))):null)),I.a.createElement("div",{className:"button-group",style:{paddingTop:10}},l?I.a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,u)},"Copy address"):null,p?I.a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,p)},"Copy memo"):null)))):I.a.createElement("div",{className:"rudex__gateway grid-block no-padding no-margin"},I.a.createElement("div",{className:"small-12 medium-5"},I.a.createElement(F.a,{component:"h4",content:"gateway.withdraw_summary"}),I.a.createElement("div",{className:"small-12 medium-10"},I.a.createElement("table",{className:"table"},I.a.createElement("tbody",null,I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.asset_to_withdraw"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(z.a,{name:this.props.receive_asset.get("symbol"),replace:!1}))),I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.asset_to_receive"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),I.a.createElement("tr",null,I.a.createElement(F.a,{component:"td",content:"gateway.intermediate"}),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(G.a,{account:this.props.issuer_account.get("id")}))),I.a.createElement("tr",null,I.a.createElement("td",null,I.a.createElement(F.a,{content:"gateway.balance"}),":"),I.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},I.a.createElement(J.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol"),replace:!1}))))))),I.a.createElement("div",{className:"small-12 medium-7"},I.a.createElement(F.a,{component:"h4",content:"gateway.withdraw_inst"}),I.a.createElement("label",{className:"left-label"},I.a.createElement(F.a,{content:"gateway.withdraw_to",asset:this.props.deposit_asset}),":"),I.a.createElement("div",{className:"button-group",style:{paddingTop:20}},I.a.createElement("button",{className:"button success",style:{fontSize:"1.3rem"},onClick:this.onWithdraw.bind(this)},I.a.createElement(F.a,{content:"gateway.withdraw_now"})," "))),I.a.createElement(Fe.a,{id:r,overlay:!0},I.a.createElement(he.a,{close:r},I.a.createElement("a",{href:"#",className:"close-button"},"")),I.a.createElement("br",null),I.a.createElement("div",{className:"grid-block vertical"},I.a.createElement(Le.a,{account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.props.receive_asset.get("symbol"),output_coin_name:this.props.deposit_asset_name,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:d,modal_id:r,min_amount:this.props.min_amount,asset_precision:this.props.asset_precision,balance:this.props.account.get("balances").toJS()[this.props.receive_asset.get("id")]}))))}}]),t}(I.a.Component);qe.propTypes={gateway:I.a.PropTypes.string,deposit_coin_type:I.a.PropTypes.string,deposit_asset_name:I.a.PropTypes.string,deposit_account:I.a.PropTypes.string,receive_coin_type:I.a.PropTypes.string,account:H.a.ChainAccount,issuer_account:H.a.ChainAccount,deposit_asset:I.a.PropTypes.string,deposit_wallet_type:I.a.PropTypes.string,receive_asset:H.a.ChainAsset,deprecated_in_favor_of:H.a.ChainAsset,deprecated_message:I.a.PropTypes.string,action:I.a.PropTypes.string,supports_output_memos:I.a.PropTypes.bool.isRequired,min_amount:I.a.PropTypes.number,asset_precision:I.a.PropTypes.number};var Ue=Object(B.a)(qe,{keep_updating:!0}),Ke=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Je=function(e){function t(e){A(this,t);var n=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={activeCoin:n._getActiveCoin(e,{action:"deposit"}),action:e.viewSettings.get("rudexAction","deposit")},n}return N(t,e),Ke(t,[{key:"_getActiveCoin",value:function(e,t){var n=e.viewSettings.get("activeCoin_rudex_"+t.action,null),a=null;return"deposit"==t.action&&(a="PPY"),"withdraw"==t.action&&(a="PPY"),n||a}},{key:"componentWillReceiveProps",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e,this.state.action)})}},{key:"onSelectCoin",value:function(e){this.setState({activeCoin:e.target.value});var t={};t["activeCoin_rudex_"+this.state.action]=e.target.value,ie.a.changeViewSetting(t)}},{key:"changeAction",value:function(e){var t=this._getActiveCoin(this.props,{action:e});this.setState({action:e,activeCoin:t}),ie.a.changeViewSetting(S({},"rudexAction",e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.coins,a=t.account,i=this.state,o=i.activeCoin,s=i.action;if(!n.length)return I.a.createElement(Z.a,null);var r=n.filter(function(e){return!(!e||!e.symbol)&&("deposit"===s?e.depositAllowed:e.withdrawalAllowed)}),l=r.map(function(e){var t="deposit"===s?e.backingCoin.toUpperCase():e.symbol;return I.a.createElement("option",{value:t,key:e.symbol},t)}).filter(function(e){return null!==e}),c=r.filter(function(e){return"deposit"===s?e.backingCoin.toUpperCase()===o:e.symbol===o})[0];c||(c=r[0]);var u="deposit"===this.state.action;return I.a.createElement("div",{style:this.props.style},I.a.createElement("div",{className:"grid-block no-margin vertical medium-horizontal no-padding"},I.a.createElement("div",{className:"medium-4"},I.a.createElement("div",null,I.a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},I.a.createElement(F.a,{content:"gateway.choose_"+s}),": "),I.a.createElement("select",{className:"external-coin-types bts-select",onChange:this.onSelectCoin.bind(this),value:o},l))),I.a.createElement("div",{className:"medium-6 medium-offset-1"},I.a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},I.a.createElement(F.a,{content:"gateway.gateway_text"}),":"),I.a.createElement("div",{style:{paddingBottom:15}},I.a.createElement("ul",{className:"button-group segmented no-margin"},I.a.createElement("li",{className:"deposit"===s?"is-active":""},I.a.createElement("a",{onClick:this.changeAction.bind(this,"deposit")},I.a.createElement(F.a,{content:"gateway.deposit"}))),I.a.createElement("li",{className:"withdraw"===s?"is-active":""},I.a.createElement("a",{onClick:this.changeAction.bind(this,"withdraw")},I.a.createElement(F.a,{content:"gateway.withdraw"}))))))),c?I.a.createElement("div",null,I.a.createElement("div",{style:{marginBottom:15}},I.a.createElement(Ue,{key:""+c.symbol,gateway:c.gatewayWallet,issuer_account:c.issuer,account:a,deposit_asset:c.backingCoin.toUpperCase(),deposit_asset_name:c.name,deposit_coin_type:c.backingCoin.toLowerCase(),deposit_account:c.gatewayWallet,deposit_wallet_type:c.walletType,receive_asset:c.symbol,receive_coin_type:c.symbol.toLowerCase(),supports_output_memos:c.memoSupport,min_amount:c.minAmount,asset_precision:c.precision,action:this.state.action}),I.a.createElement("label",{className:"left-label"},"Support"),I.a.createElement("div",null,I.a.createElement(F.a,{content:"gateway.rudex.support_block"}),I.a.createElement("br",null),I.a.createElement("br",null),I.a.createElement("a",{href:"https://rudex.freshdesk.com"},"https://rudex.freshdesk.com"))),c&&c.symbol?I.a.createElement(oe.b,{asset:c.symbol,fromAccount:u?c.issuerId:this.props.account.get("id"),to:u?this.props.account.get("id"):c.issuerId},function(t){var n=t.asset,a=t.to,i=t.fromAccount;return I.a.createElement(oe.a,{accountsList:re.a.List([e.props.account.get("id")]),limit:10,compactView:!0,fullHeight:!0,filter:"transfer",title:I.a.createElement(F.a,{content:"gateway.recent_"+e.state.action}),customFilter:{fields:["to","from","asset_id"],values:{to:a.get("id"),from:i.get("id"),asset_id:n.get("id")}}})}):null):null)}}]),t}(I.a.Component),Ve=Object(W.connect)(Je,{listenTo:function(){return[ae.a]},getProps:function(){return{viewSettings:ae.a.getState().viewSettings}}}),ze=n(1479),Ge=n(1474),Qe=n(260),$e=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Ze=function(e){function t(e){P(this,t);var n=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={olService:e.viewSettings.get("olService","gateway"),rudexService:e.viewSettings.get("rudexService","gateway"),btService:e.viewSettings.get("btService","bridge"),metaService:e.viewSettings.get("metaService","bridge"),activeService:e.viewSettings.get("activeService",0)},n}return x(t,e),$e(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.account!==this.props.account||e.servicesDown!==this.props.servicesDown||!L.a.are_equal_shallow(e.blockTradesBackedCoins,this.props.blockTradesBackedCoins)||!L.a.are_equal_shallow(e.openLedgerBackedCoins,this.props.openLedgerBackedCoins)||t.olService!==this.state.olService||t.rudexService!==this.state.rudexService||t.btService!==this.state.btService||t.metaService!==this.state.metaService||t.activeService!==this.state.activeService}},{key:"componentWillMount",value:function(){D.a.getFinalFeeAsset(this.props.account,"transfer")}},{key:"toggleOLService",value:function(e){this.setState({olService:e}),ie.a.changeViewSetting({olService:e})}},{key:"toggleRuDEXService",value:function(e){this.setState({rudexService:e}),ie.a.changeViewSetting({rudexService:e})}},{key:"toggleBTService",value:function(e){this.setState({btService:e}),ie.a.changeViewSetting({btService:e})}},{key:"toggleMetaService",value:function(e){this.setState({metaService:e}),ie.a.changeViewSetting({metaService:e})}},{key:"onSetService",value:function(e){this.setState({activeService:parseInt(e.target.value)}),ie.a.changeViewSetting({activeService:parseInt(e.target.value)})}},{key:"renderServices",value:function(e,t){var n=[],a=this.props.account,i=this.state,o=i.olService,s=i.btService,r=i.rudexService;return n.push({name:"Openledger (OPEN.X)",template:I.a.createElement("div",{className:"content-block"},I.a.createElement("div",{className:"service-selector"},I.a.createElement("ul",{className:"button-group segmented no-margin"},I.a.createElement("li",{onClick:this.toggleOLService.bind(this,"gateway"),className:"gateway"===o?"is-active":""},I.a.createElement("a",null,I.a.createElement(F.a,{content:"gateway.gateway"}))),I.a.createElement("li",{onClick:this.toggleOLService.bind(this,"fiat"),className:"fiat"===o?"is-active":""},I.a.createElement("a",null,"Fiat")))),"gateway"===o&&e.length?I.a.createElement(ue,{account:a,coins:e,provider:"openledger"}):null,"fiat"===o?I.a.createElement("div",null,I.a.createElement("div",{style:{paddingBottom:15}},I.a.createElement(F.a,{component:"h5",content:"gateway.fiat_text"})),I.a.createElement(Oe,{rpc_url:$.c.RPC_URL,account:a,issuer_account:"openledger-fiat"}),I.a.createElement(je,{rpc_url:$.c.RPC_URL,account:a})):null)}),n.push({name:"RuDEX (RUDEX.X)",template:I.a.createElement("div",{className:"content-block"},I.a.createElement("div",{className:"service-selector"},I.a.createElement("ul",{className:"button-group segmented no-margin"},I.a.createElement("li",{onClick:this.toggleRuDEXService.bind(this,"gateway"),className:"gateway"===r?"is-active":""},I.a.createElement("a",null,I.a.createElement(F.a,{content:"gateway.gateway"}))),I.a.createElement("li",{onClick:this.toggleRuDEXService.bind(this,"fiat"),className:"fiat"===r?"is-active":""},I.a.createElement("a",null,"Fiat")))),"gateway"===r&&t.length?I.a.createElement(Ve,{account:a,coins:t}):null,"fiat"===r?I.a.createElement("div",null,I.a.createElement(F.a,{content:"gateway.rudex.coming_soon"})):null)}),n.push({name:"BlockTrades",template:I.a.createElement("div",null,I.a.createElement("div",{className:"content-block"},I.a.createElement("div",{className:"service-selector"},I.a.createElement("ul",{className:"button-group segmented no-margin"},I.a.createElement("li",{onClick:this.toggleBTService.bind(this,"bridge"),className:"bridge"===s?"is-active":""},I.a.createElement("a",null,I.a.createElement(F.a,{content:"gateway.bridge"}))))),I.a.createElement(xe.a,{gateway:"blocktrades",issuer_account:"blocktrades",account:a,initial_deposit_input_coin_type:"btc",initial_deposit_output_coin_type:"bts",initial_deposit_estimated_input_amount:"1.0",initial_withdraw_input_coin_type:"bts",initial_withdraw_output_coin_type:"btc",initial_withdraw_estimated_input_amount:"100000",initial_conversion_input_coin_type:"bts",initial_conversion_output_coin_type:"bitbtc",initial_conversion_estimated_input_amount:"1000"})),I.a.createElement("div",{className:"content-block"}))}),n.push({name:"BitKapital",template:I.a.createElement(De.a,{viewSettings:this.props.viewSettings,account:a})}),n}},{key:"render",value:function(){var e=this.props,t=e.account,n=e.servicesDown,a=this.state.activeService,i=this.props.openLedgerBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),o=this.props.rudexBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),s=this.renderServices(i,o),r=s.map(function(e,t){return I.a.createElement("option",{key:t,value:t},e.name)}),l=["OPEN","RUDEX","TRADE","BITKAPITAL"],c=l[a],u=n.get(c);return I.a.createElement("div",{className:this.props.contained?"grid-content":"grid-container"},I.a.createElement("div",{className:this.props.contained?"":"grid-content",style:{paddingTop:"2rem"}},I.a.createElement(F.a,{content:"gateway.title",component:"h2"}),I.a.createElement("div",{className:"grid-block vertical medium-horizontal no-margin no-padding"},I.a.createElement("div",{className:"medium-6 show-for-medium"},I.a.createElement(Re.a,{path:"components/DepositWithdraw",section:"deposit-short"})),I.a.createElement("div",{className:"medium-5 medium-offset-1"},I.a.createElement(Re.a,{account:t.get("name"),path:"components/DepositWithdraw",section:"receive"}))),I.a.createElement("div",null,I.a.createElement("div",{className:"grid-block vertical medium-horizontal no-margin no-padding"},I.a.createElement("div",{className:"medium-6 small-order-2 medium-order-1"},I.a.createElement(F.a,{component:"label",className:"left-label",content:"gateway.service"}),I.a.createElement("select",{onChange:this.onSetService.bind(this),className:"bts-select",value:a},r),u?I.a.createElement(F.a,{style:{color:"red",marginBottom:"1em",display:"block"},content:"gateway.unavailable_"+c}):null),I.a.createElement("div",{className:"medium-5 medium-offset-1 small-order-1 medium-order-2",style:{paddingBottom:20}},I.a.createElement(F.a,{component:"label",className:"left-label",content:"gateway.your_account"}),I.a.createElement("div",{className:"inline-label"},I.a.createElement(Qe.a,{size:{height:40,width:40},account:t.get("name"),custom_image:null}),I.a.createElement("input",{type:"text",value:t.get("name"),placeholder:null,disabled:!0,onChange:function(){},onKeyDown:function(){},tabIndex:1}))))),I.a.createElement("div",{className:"grid-content no-padding",style:{paddingTop:15}},u?null:a&&s[a]?s[a].template:s[0].template)))}}]),t}(I.a.Component);Ze.propTypes={account:H.a.ChainAccount.isRequired,contained:I.a.PropTypes.bool},Ze.defaultProps={contained:!1},Ze=Object(B.a)(Ze);var et=function(e){function t(){return P(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return x(t,e),$e(t,[{key:"componentWillMount",value:function(){"4018d784"===We.Apis.instance().chain_id.substr(0,8)&&(Ge.a.fetchCoins.defer(),Ge.a.fetchCoinsSimple.defer({backer:"RUDEX",url:$.b.BASE+$.b.COINS_LIST}),Ge.a.fetchCoins.defer({backer:"TRADE"}))}},{key:"render",value:function(){return I.a.createElement(Ze,this.props)}}]),t}(I.a.Component);t.default=Object(W.connect)(et,{listenTo:function(){return[Ie.a,ae.a,ze.a]},getProps:function(){return{account:Ie.a.getState().currentAccount,viewSettings:ae.a.getState().viewSettings,openLedgerBackedCoins:ze.a.getState().backedCoins.get("OPEN",[]),rudexBackedCoins:ze.a.getState().backedCoins.get("RUDEX",[]),blockTradesBackedCoins:ze.a.getState().backedCoins.get("TRADE",[]),servicesDown:ze.a.getState().down||{}}}})}});
//# sourceMappingURL=2.js.map