(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1772:function(e,t,a){"use strict";a.d(t,"b",function(){return y}),a.d(t,"a",function(){return v});var n=a(0),s=a.n(n),r=a(1),o=a.n(r),i=a(7),l=a.n(i),c=a(33),u=a(21),p=a(20),m=a(16),d=a.n(m),h=a(210),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return b(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,s.a.Component),f(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,a=e.index,n=e.changeTab,r=e.title,o=e.className,i=e.updatedTab,c=e.disabled,u=e.subText,p=l()({"is-active":t},o);return"string"==typeof r&&r.indexOf(".")>0&&(r=d.a.translate(r)),this.props.collapsed?("string"==typeof u&&(u=u.trim()),s.a.createElement("option",{value:a,"data-is-link-to":this.props.isLinkTo},s.a.createElement("span",{className:"tab-title"},r,i?"*":"",u&&" (",u&&u,u&&")"))):s.a.createElement("li",{className:p,onClick:c?null:n.bind(this,a,this.props.isLinkTo)},s.a.createElement("a",null,s.a.createElement("span",{className:"tab-title"},r,i?"*":""),u&&s.a.createElement("div",{className:"tab-subtext"},u)))}}]),t}();v.propTypes={changeTab:o.a.func,isActive:o.a.bool.isRequired,index:o.a.number.isRequired,className:o.a.string,isLinkTo:o.a.string,subText:o.a.oneOfType([o.a.object,o.a.string])},v.defaultProps={isActive:!1,index:0,className:"",isLinkTo:"",subText:null};var y=function(e){function t(e){b(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},a._setDimensions=a._setDimensions.bind(a),a}return _(t,s.a.Component),f(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions)}},{key:"_setDimensions",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:"_changeTab",value:function(e,t){e!==this.state.activeTab&&(""!==t&&this.props.history.push(t),this.props.setting&&u.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.contentClass,r=t.tabsClass,o=t.style,i=t.segmented,c=this.state.width<900&&s.a.Children.count(a)>2,u=null,p=s.a.Children.map(a,function(t,a){if(!t)return null;if(c&&t.props.disabled)return null;var n=a===e.state.activeTab;return n&&(u=t.props.children),s.a.cloneElement(t,{collapsed:c,isActive:n,changeTab:e._changeTab.bind(e),index:a})}).filter(function(e){return null!==e});return u||(u=p[0].props.children),s.a.createElement("div",{className:l()(this.props.actionButtons?"with-buttons":"",this.props.className)},s.a.createElement("div",{className:"service-selector"},s.a.createElement("ul",{style:o,className:l()("button-group no-margin",r,{segmented:i})},c?s.a.createElement("li",{style:{paddingLeft:10,paddingRight:10,minWidth:"15rem"}},s.a.createElement("select",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:"bts-select",onChange:function(t){var a=parseInt(t.target.value,10);e._changeTab(a,t.target[a].attributes["data-is-link-to"].value)}},p)):p,this.props.actionButtons?s.a.createElement("li",{className:"tabs-action-buttons"},this.props.actionButtons):null)),s.a.createElement("div",{className:l()("tab-content",n)},u))}}]),t}();y.propTypes={setting:o.a.string,defaultActiveTab:o.a.number,segmented:o.a.bool},y.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:"",style:{}},y=Object(c.connect)(y,{listenTo:function(){return[p.a]},getProps:function(){return{viewSettings:p.a.getState().viewSettings}}}),y=Object(h.a)(y)},1781:function(e,t,a){"use strict";a.d(t,"a",function(){return I}),a.d(t,"b",function(){return T});var n=a(0),s=a.n(n),r=a(3),o=a.n(r),i=a(285),l=a(473),c=a(36),u=a(41),p=a(15),m=a(9),d=a(1774),h=a(1778),f=a.n(h),b=a(16),g=a.n(b),_=a(18),v=a(7),y=a.n(v),E=a(1),w=a.n(E),k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=m.c.operations,N={textAlign:"left"},S={textAlign:"right"};function P(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function j(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}var I=function(e){function t(e){x(this,t);var a=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={limit:e.limit||20,csvExport:!1,headerHeight:85,filter:"all"},a}return O(t,s.a.Component),k(t,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;f.a.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!p.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!p.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!p.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var a=0;a<e.accountsList.length;++a){var n=e.accountsList[a],s=this.props.accountsList[a];if(n&&s&&n.get("history")!==s.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container").childNodes,t="",a=!0,n=!1,s=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var l=r.value.childNodes;""!==t&&(t+="\n"),t+=[j(l[0]),j(l[1]),j(l[2]),j(l[3])].join(",")}}catch(e){n=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw s}}var c=new Blob([t],{type:"text/csv;charset=utf-8"}),u=new Date;Object(i.saveAs)(c,"btshist-"+u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2)+"-"+("0"+u.getHours()).slice(-2)+("0"+u.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var p=this.refs.transactions;f.a.update(p),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,a){var n=[],s=new Set,r=!0,o=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if(u){var p=u.get("history");p&&(n=n.concat(p.toJS().filter(function(e){return!s.has(e.id)&&s.add(e.id)})))}}}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return t&&(n=n.filter(function(e){return e.op[0]===C[t]})),a&&(n=n.filter(function(e){return a.fields.reduce(function(t,n){switch(n){case"asset_id":return t&&e.op[1].amount[n]===a.values[n];default:return t&&e.op[1][n]===a.values[n]}},!0)})),n}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.accountsList,a=e.compactView,n=e.filter,r=e.customFilter,i=e.style,c=e.maxHeight,u=this.state,p=u.limit,m=u.headerHeight,h=1===t.length&&t[0]?t[0].get("id"):null,f=this._getHistory(t,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:n,r).sort(P),b=f.length;i=i||{width:"100%",height:"100%"};var v=null;v=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"].map(function(e){return s.a.createElement("option",{value:e,key:e},g.a.translate("transaction.trxTypes."+e))});var E=f.length?f.slice(0,p).map(function(e){return s.a.createElement(l.a,{includeOperationId:!0,operationId:e.id,style:N,key:e.id,op:e.op,result:e.result,txIndex:e.trx_in_block,block:e.block_num,current:h,hideFee:!0,inverted:!1,hideOpLabel:a,fullDate:!0})}):[s.a.createElement("tr",{key:"no_recent"},s.a.createElement("td",{colSpan:a?"2":"3"},s.a.createElement(o.a,{content:"operation.no_recent"})))];return E.push(s.a.createElement("tr",{className:"total-value",key:"total_value"},s.a.createElement("td",{className:"column-hide-tiny"}),s.a.createElement("td",{style:S},b>0?s.a.createElement("span",null,s.a.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":g.a.translate("transaction.csv_tip"),"data-place":"bottom"},s.a.createElement(_.a,{name:"excel",title:"icons.excel",className:"icon-14px"}))):null),s.a.createElement("td",{style:{textAlign:"center"}}," ",this.props.showMore&&b>this.props.limit||p<b?s.a.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},s.a.createElement(_.a,{name:"chevron-down",title:"icons.chevron_down.transactions",className:"icon-14px"})):null))),s.a.createElement("div",{className:"recent-transactions no-overflow",style:i},s.a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard?null:s.a.createElement("div",{ref:"header"},s.a.createElement("div",{className:"block-content-header"},s.a.createElement("span",null,this.props.title?this.props.title:s.a.createElement(o.a,{content:"account.recent"})))),s.a.createElement("div",{className:"header-selector"},s.a.createElement("div",{className:"selector"},s.a.createElement("div",{className:y()("inline-block")},this.props.showFilters?s.a.createElement("select",{"data-place":"left","data-tip":g.a.translate("tooltip.filter_ops"),style:{paddingTop:5,width:"auto"},className:"bts-select no-margin",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},v):null))),s.a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:c-m},ref:"transactions"},s.a.createElement("table",{className:"table table-striped "+(a?"compact":"")+(this.props.dashboard?" dashboard-table table-hover":"")},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"column-hide-tiny",style:N},s.a.createElement(o.a,{content:"account.transactions.id"})),s.a.createElement("th",{className:"column-hide-tiny",style:N},s.a.createElement(o.a,{content:"account.transactions.type"})),s.a.createElement("th",{style:N},s.a.createElement(o.a,{content:"account.transactions.info"})),s.a.createElement("th",{style:N},s.a.createElement(o.a,{content:"account.transactions.time"})))),s.a.createElement(d.a,{component:"tbody",transitionName:"newrow"},E))),b>0&&this.state.csvExport&&s.a.createElement("div",{id:"csv_export_container",style:{display:"none"}},s.a.createElement("div",null,s.a.createElement("div",null,"DATE"),s.a.createElement("div",null,"OPERATION"),s.a.createElement("div",null,"MEMO"),s.a.createElement("div",null,"AMOUNT")),f.map(function(e){return s.a.createElement(l.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}();I.propTypes={accountsList:c.a.ChainAccountsList.isRequired,compactView:w.a.bool,limit:w.a.number,maxHeight:w.a.number,fullHeight:w.a.bool,showFilters:w.a.bool},I.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},I=Object(u.a)(I);var T=function(e){function t(){return x(this,t),A(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,s.a.Component),k(t,[{key:"render",value:function(){return s.a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}();T.propTypes={asset:c.a.ChainAsset.isRequired,to:c.a.ChainAccount.isRequired,fromAccount:c.a.ChainAccount.isRequired},T.defaultProps={asset:"1.3.0"},T=Object(u.a)(T)},1803:function(e,t,a){"use strict";var n=a(0),s=a.n(n),r=a(1),o=a.n(r),i=a(31),l=a(36),c=a(41),u=a(125),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),p(t,[{key:"getFee",value:function(){return Object(u.c)(this.props.opType,this.props.options,this.props.globalObject)}},{key:"render",value:function(){var e=this.props,t=e.opType,a=e.options,n=e.globalObject;if(!t||!a||!n)return null;var r=Object(u.c)(t,a,n);return s.a.createElement(i.a,{amount:r,asset:"1.3.0"})}}]),t}();m.propTypes={globalObject:l.a.ChainObject.isRequired,opType:o.a.string,options:o.a.array},m.defaultProps={globalObject:"2.0.0",options:[]},t.a=Object(c.a)(m)},1817:function(e,t,a){"use strict";var n=a(0),s=a.n(n),r=a(7),o=a.n(r),i=a(3),l=a.n(i),c=a(215),u=a(248),p=a(31),m=a(1803),d=a(355),h=a(102),f=a(9);var b=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(n){return e.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},t,a(n)))}},g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return _.call(a),a.state=a.initialState(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),t}(),_=function(){var e,t=this;this.onAccountNameChanged=b(this,"funderAccountName"),this.onAccountChanged=b(this,"newFunderAccount"),this.onPoolInput=b(this,"fundPoolAmount",(e="amount",function(t){return t[e]})),this.onFundPool=function(){return d.a.fundPool(t.state.newFunderAccount?t.state.newFunderAccount.get("id"):null,t.props.core,t.props.asset,t.state.fundPoolAmount.replace(/,/g,""))},this.reset=function(){t.setState(t.initialState())},this.initialState=function(){return{funderAccountName:t.props.funderAccountName,fundPoolAmount:0}},this.render=function(){var e=t.props,a=t.state,n=t.onPoolInput,r=t.onFundPool,i=t.reset,d=t.onAccountNameChanged,h=t.onAccountChanged,b=e.asset,g=e.core,_=e.hideBalance,v=e.getDynamicObject,y=a.funderAccountName,E=a.fundPoolAmount,w=a.newFunderAccount,k=null;_||(k=v(b.get("dynamic_asset_data_id")));var x=g.get("id")||"1.3.0",A=0;if(w){var O=w.getIn(["balances",x]);if(O){var C=f.b.getObject(O);C&&(A=C.get("balance"))}}var N=s.a.createElement("span",null,s.a.createElement(l.a,{component:"span",content:"transfer.available"}),": ",s.a.createElement(p.a,{amount:A,asset:x}));return s.a.createElement("div",null,s.a.createElement(l.a,{component:"p",content:"explorer.asset.fee_pool.fund_text",asset:b.get("symbol"),core:g.get("symbol")}),_||s.a.createElement("div",{style:{paddingBottom:"1.5rem"}},s.a.createElement(l.a,{content:"explorer.asset.fee_pool.pool_balance"}),s.a.createElement("span",null,": "),k?s.a.createElement(p.a,{amount:k.get("fee_pool"),asset:x}):null),s.a.createElement(c.a,{label:"transaction.funding_account",accountName:y,onChange:d,onAccountChanged:h,account:y,error:null,tabIndex:1}),s.a.createElement(u.a,{label:"transfer.amount",display_balance:N,amount:E,onChange:n,asset:x,assets:[x],placeholder:"0.0",tabIndex:2,style:{width:"100%",paddingTop:16}}),s.a.createElement("div",{style:{paddingTop:"1rem"}},s.a.createElement("button",{className:o()("button",{disabled:E<=0}),onClick:r},s.a.createElement(l.a,{content:"transaction.trxTypes.asset_fund_fee_pool"})),s.a.createElement("button",{className:"button outline",onClick:i},s.a.createElement(l.a,{content:"account.perm.reset"})),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("p",null,s.a.createElement(l.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",s.a.createElement(m.a,{opType:"asset_fund_fee_pool"})),s.a.createElement("hr",null)))}};g=Object(h.a)(g,{propNames:["asset","core"],defaultProps:{core:"1.3.0"},withDynamic:!0}),t.a=g},1989:function(e,t){var a;a=function(e){!function(e){var t,a=e.addEvent,n=e.Axis,s=e.Chart,r=e.color,o=e.each,i=e.extend,l=e.isNumber,c=e.Legend,u=e.LegendSymbolMixin,p=e.noop,m=e.merge,d=e.pick;e.ColorAxis||(t=e.ColorAxis=function(){this.init.apply(this,arguments)},i(t.prototype,n.prototype),i(t.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0},keepProps:["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"].concat(n.prototype.keepProps),init:function(e,t){var a,s="vertical"!==e.options.legend.layout;this.coll="colorAxis",a=m(this.defaultColorAxisOptions,{side:s?2:1,reversed:!s},t,{opposite:!s,showEmpty:!1,title:null,visible:e.options.legend.enabled}),n.prototype.init.call(this,e,a),t.dataClasses&&this.initDataClasses(t),this.initStops(),this.horiz=s,this.zoomEnabled=!1,this.defaultLegendLength=200},initDataClasses:function(e){var t,a=this.chart,n=0,s=a.options.chart.colorCount,i=this.options,l=e.dataClasses.length;this.dataClasses=t=[],this.legendItems=[],o(e.dataClasses,function(e,o){e=m(e),t.push(e),e.color||("category"===i.dataClassColor?(o=a.options.colors,s=o.length,e.color=o[n],e.colorIndex=n,++n===s&&(n=0)):e.color=r(i.minColor).tweenTo(r(i.maxColor),2>l?.5:o/(l-1)))})},setTickPositions:function(){if(!this.dataClasses)return n.prototype.setTickPositions.call(this)},initStops:function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]],o(this.stops,function(e){e.color=r(e[1])})},setOptions:function(e){n.prototype.setOptions.call(this,e),this.options.crosshair=this.options.marker},setAxisSize:function(){var e,t,a=this.legendSymbol,n=this.chart,s=n.options.legend||{};a?(this.left=s=a.attr("x"),this.top=e=a.attr("y"),this.width=t=a.attr("width"),this.height=a=a.attr("height"),this.right=n.chartWidth-s-t,this.bottom=n.chartHeight-e-a,this.len=this.horiz?t:a,this.pos=this.horiz?s:e):this.len=(this.horiz?s.symbolWidth:s.symbolHeight)||this.defaultLegendLength},normalizedValue:function(e){return this.isLog&&(e=this.val2lin(e)),1-(this.max-e)/(this.max-this.min||1)},toColor:function(e,t){var a,n,s,r,o=this.stops,i=this.dataClasses;if(i){for(r=i.length;r--;)if(a=(s=i[r]).from,o=s.to,(void 0===a||e>=a)&&(void 0===o||e<=o)){n=s.color,t&&(t.dataClass=r,t.colorIndex=s.colorIndex);break}}else{for(e=this.normalizedValue(e),r=o.length;r--&&!(e>o[r][0]););a=o[r]||o[r+1],e=1-((o=o[r+1]||a)[0]-e)/(o[0]-a[0]||1),n=a.color.tweenTo(o.color,e)}return n},getOffset:function(){var e=this.legendGroup,t=this.chart.axisOffset[this.side];e&&(this.axisParent=e,n.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=t)},setLegendColor:function(){var e,t=this.reversed;e=t?1:0,t=t?0:1,e=this.horiz?[e,0,t,0]:[0,t,0,e],this.legendColor={linearGradient:{x1:e[0],y1:e[1],x2:e[2],y2:e[3]},stops:this.stops}},drawLegendSymbol:function(e,t){var a=e.padding,n=e.options,s=this.horiz,r=d(n.symbolWidth,s?this.defaultLegendLength:12),o=d(n.symbolHeight,s?12:this.defaultLegendLength),i=d(n.labelPadding,s?16:30);n=d(n.itemDistance,10);this.setLegendColor(),t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,r,o).attr({zIndex:1}).add(t.legendGroup),this.legendItemWidth=r+a+(s?n:i),this.legendItemHeight=o+a+(s?i:0)},setState:function(e){o(this.series,function(t){t.setState(e)})},visible:!0,setVisible:p,getSeriesExtremes:function(){var e=this.series,t=e.length;for(this.dataMin=1/0,this.dataMax=-1/0;t--;)void 0!==e[t].valueMin&&(this.dataMin=Math.min(this.dataMin,e[t].valueMin),this.dataMax=Math.max(this.dataMax,e[t].valueMax))},drawCrosshair:function(e,t){var a,s=t&&t.plotX,r=t&&t.plotY,o=this.pos,i=this.len;t&&((a=this.toPixels(t[t.series.colorKey]))<o?a=o-2:a>o+i&&(a=o+i+2),t.plotX=a,t.plotY=this.len-a,n.prototype.drawCrosshair.call(this,e,t),t.plotX=s,t.plotY=r,this.cross&&!this.cross.addedToColorAxis&&this.legendGroup&&(this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup),this.cross.addedToColorAxis=!0,this.cross.attr({fill:this.crosshair.color})))},getPlotLinePath:function(e,t,a,s,r){return l(r)?this.horiz?["M",r-4,this.top-6,"L",r+4,this.top-6,r,this.top,"Z"]:["M",this.left,r,"L",this.left-6,r+6,this.left-6,r-6,"Z"]:n.prototype.getPlotLinePath.call(this,e,t,a,s)},update:function(e,t){var a=this.chart,s=a.legend;o(this.series,function(e){e.isDirtyData=!0}),e.dataClasses&&s.allItems&&(o(s.allItems,function(e){e.isDataClass&&e.legendGroup&&e.legendGroup.destroy()}),a.isDirtyLegend=!0),a.options[this.coll]=m(this.userOptions,e),n.prototype.update.call(this,e,t),this.legendItem&&(this.setLegendColor(),s.colorizeItem(this,!0))},remove:function(){this.legendItem&&this.chart.legend.destroyItem(this),n.prototype.remove.call(this)},getDataClassLegendSymbols:function(){var t,a=this,n=this.chart,s=this.legendItems,r=n.options.legend,l=r.valueDecimals,c=r.valueSuffix||"";return s.length||o(this.dataClasses,function(r,m){var d=!0,h=r.from,f=r.to;t="",void 0===h?t="< ":void 0===f&&(t="> "),void 0!==h&&(t+=e.numberFormat(h,l)+c),void 0!==h&&void 0!==f&&(t+=" - "),void 0!==f&&(t+=e.numberFormat(f,l)+c),s.push(i({chart:n,name:t,options:{},drawLegendSymbol:u.drawRectangle,visible:!0,setState:p,isDataClass:!0,setVisible:function(){d=this.visible=!d,o(a.series,function(e){o(e.points,function(e){e.dataClass===m&&e.setVisible(d)})}),n.legend.colorizeItem(this,d)}},r))}),s},name:""}),o(["fill","stroke"],function(t){e.Fx.prototype[t+"Setter"]=function(){this.elem.attr(t,r(this.start).tweenTo(r(this.end),this.pos),null,!0)}}),a(s,"afterGetAxes",function(){var e=this.options.colorAxis;this.colorAxis=[],e&&new t(this,e)}),a(c,"afterGetAllItems",function(t){var a=[],n=this.chart.colorAxis[0];for(n&&n.options&&(n.options.showInLegend&&(n.options.dataClasses?a=n.getDataClassLegendSymbols():a.push(n)),o(n.series,function(a){e.erase(t.allItems,a)}));a.length;)t.allItems.unshift(a.pop())}),a(c,"afterColorizeItem",function(e){e.visible&&e.item.legendColor&&e.item.legendSymbol.attr({fill:e.item.legendColor})}),a(c,"afterUpdate",function(e,t,a){this.chart.colorAxis[0]&&this.chart.colorAxis[0].update({},a)}))}(e),function(e){var t=e.defined,a=e.each,n=e.noop,s=e.seriesTypes;e.colorPointMixin={isValid:function(){return null!==this.value&&1/0!==this.value&&-1/0!==this.value},setVisible:function(e){var t=this,n=e?"show":"hide";a(["graphic","dataLabel"],function(e){t[e]&&t[e][n]()})},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:"hover"===t?1:0})}},e.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:n,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:s.column.prototype.pointAttribs,translateColors:function(){var e=this,t=this.options.nullColor,n=this.colorAxis,s=this.colorKey;a(this.data,function(a){var r=a[s];(r=a.options.color||(a.isNull?t:n&&void 0!==r?n.toColor(r,a):a.color||e.color))&&(a.color=r)})},colorAttribs:function(e){var a={};return t(e.color)&&(a[this.colorProp||"fill"]=e.color),a}}}(e),function(e){var t=e.colorPointMixin,a=e.each,n=e.merge,s=e.noop,r=e.pick,o=e.Series,i=e.seriesType,l=e.seriesTypes;i("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}},n(e.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var e;l.scatter.prototype.init.apply(this,arguments),(e=this.options).pointRange=r(e.pointRange,e.colsize||1),this.yAxis.axisPointRange=e.rowsize||1},translate:function(){var e=this.options,t=this.xAxis,n=this.yAxis,s=e.pointPadding||0,o=function(e,t,a){return Math.min(Math.max(t,e),a)};this.generatePoints(),a(this.points,function(a){var i=(e.colsize||1)/2,l=(e.rowsize||1)/2,c=o(Math.round(t.len-t.translate(a.x-i,0,1,0,1)),-t.len,2*t.len),u=(i=o(Math.round(t.len-t.translate(a.x+i,0,1,0,1)),-t.len,2*t.len),o(Math.round(n.translate(a.y-l,0,1,0,1)),-n.len,2*n.len)),p=(l=o(Math.round(n.translate(a.y+l,0,1,0,1)),-n.len,2*n.len),r(a.pointPadding,s));a.plotX=a.clientX=(c+i)/2,a.plotY=(u+l)/2,a.shapeType="rect",a.shapeArgs={x:Math.min(c,i)+p,y:Math.min(u,l)+p,width:Math.abs(i-c)-2*p,height:Math.abs(l-u)-2*p}}),this.translateColors()},drawPoints:function(){l.column.prototype.drawPoints.call(this),a(this.points,function(e){e.graphic.attr(this.colorAttribs(e))},this)},animate:s,getBox:s,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,alignDataLabel:l.column.prototype.alignDataLabel,getExtremes:function(){o.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,o.prototype.getExtremes.call(this)}}),e.extend({haloPath:function(e){if(!e)return[];var t=this.shapeArgs;return["M",t.x-e,t.y-e,"L",t.x-e,t.y+t.height+e,t.x+t.width+e,t.y+t.height+e,t.x+t.width+e,t.y-e,"Z"]}},t))}(e)},"object"==typeof e&&e.exports?e.exports=a:a(Highcharts)},1990:function(e,t){var a;a=function(e){!function(e,t){var a=e.seriesType,n=e.seriesTypes,s=e.map,r=e.merge,o=e.extend,i=e.noop,l=e.each,c=t.getColor,u=t.getLevelOptions,p=e.grep,m=e.isNumber,d=e.isObject,h=e.isString,f=e.pick,b=e.Series,g=e.stableSort,_=e.Color,v=e.reduce,y=function(e,t,a){a=a||this,!1!==(e=t.call(a,e))&&y(e,t,a)},E=t.updateRootId;a("treemap","scatter",{showInLegend:!1,marker:!1,colorByPoint:!1,dataLabels:{enabled:!0,defer:!1,verticalAlign:"middle",formatter:function(){return this.point.name||this.point.id},inside:!0},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,drillUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,opacity:.15,states:{hover:{borderColor:"#999999",brightness:n.heatmap?0:.1,halo:!1,opacity:.75,shadow:!1}}},{pointArrayMap:["value"],axisTypes:n.heatmap?["xAxis","yAxis","colorAxis"]:["xAxis","yAxis"],directTouch:!0,optionalAxis:"colorAxis",getSymbol:i,parallelArrays:["x","y","value","colorValue"],colorKey:"colorValue",translateColors:n.heatmap&&n.heatmap.prototype.translateColors,colorAttribs:n.heatmap&&n.heatmap.prototype.colorAttribs,trackerGroups:["group","dataLabelsGroup"],getListOfParents:function(t,a){return function(t,a,n){n=n||this,e.objectEach(t,function(e,s){a.call(n,e,s,t)})}(t=v(t||[],function(e,t,a){return void 0===e[t=f(t.parent,"")]&&(e[t]=[]),e[t].push(a),e},{}),function(t,n,s){""!==n&&-1===e.inArray(n,a)&&(l(t,function(e){s[""].push(e)}),delete s[n])}),t},getTree:function(){var e=s(this.data,function(e){return e.id});e=this.getListOfParents(this.data,e);return this.nodeMap=[],this.buildNode("",-1,0,e,null)},init:function(t,a){b.prototype.init.call(this,t,a),this.options.allowDrillToNode&&e.addEvent(this,"click",this.onClickDrillToNode)},buildNode:function(e,t,a,n,s){var r,o=this,i=[],c=o.points[t],u=0;return l(n[e]||[],function(t){r=o.buildNode(o.points[t].id,t,a+1,n,e),u=Math.max(r.height+1,u),i.push(r)}),t={id:e,i:t,children:i,height:u,level:a,parent:s,visible:!1},o.nodeMap[t.id]=t,c&&(c.node=t),t},setTreeValues:function(e){var t,a=this,n=a.options,s=a.nodeMap[a.rootNode],r=(n="boolean"!=typeof n.levelIsConstant||n.levelIsConstant,0),i=[],c=a.points[e.i];return l(e.children,function(e){e=a.setTreeValues(e),i.push(e),e.ignore||(r+=e.val)}),g(i,function(e,t){return e.sortIndex-t.sortIndex}),t=f(c&&c.options.value,r),c&&(c.value=t),o(e,{children:i,childrenTotal:r,ignore:!(f(c&&c.visible,!0)&&0<t),isLeaf:e.visible&&!r,levelDynamic:e.level-(n?0:s.level),name:f(c&&c.name,""),sortIndex:f(c&&c.sortIndex,-t),val:t}),e},calculateChildrenAreas:function(e,t){var a,n=this,s=n.options,o=n.mapOptionsToLevel[e.level+1],i=f(n[o&&o.layoutAlgorithm]&&o.layoutAlgorithm,s.layoutAlgorithm),c=s.alternateStartingDirection;e=p(e.children,function(e){return!e.ignore}),o&&o.layoutStartingDirection&&(t.direction="vertical"===o.layoutStartingDirection?0:1),a=n[i](t,e),l(e,function(e,s){s=a[s],e.values=r(s,{val:e.childrenTotal,direction:c?1-t.direction:t.direction}),e.pointValues=r(s,{x:s.x/n.axisRatio,width:s.width/n.axisRatio}),e.children.length&&n.calculateChildrenAreas(e,e.values)})},setPointValues:function(){var e=this,t=e.xAxis,a=e.yAxis;l(e.points,function(n){var s,r,o,i=n.node,l=i.pointValues;o=(e.pointAttribs(n)["stroke-width"]||0)%2/2,l&&i.visible?(i=Math.round(t.translate(l.x,0,0,0,1))-o,s=Math.round(t.translate(l.x+l.width,0,0,0,1))-o,r=Math.round(a.translate(l.y,0,0,0,1))-o,l=Math.round(a.translate(l.y+l.height,0,0,0,1))-o,n.shapeType="rect",n.shapeArgs={x:Math.min(i,s),y:Math.min(r,l),width:Math.abs(s-i),height:Math.abs(l-r)},n.plotX=n.shapeArgs.x+n.shapeArgs.width/2,n.plotY=n.shapeArgs.y+n.shapeArgs.height/2):(delete n.plotX,delete n.plotY)})},setColorRecursive:function(e,t,a,n,s){var r,o=this,i=(i=o&&o.chart)&&i.options&&i.options.colors;e&&(r=c(e,{colors:i,index:n,mapOptionsToLevel:o.mapOptionsToLevel,parentColor:t,parentColorIndex:a,series:o,siblings:s}),(t=o.points[e.i])&&(t.color=r.color,t.colorIndex=r.colorIndex),l(e.children||[],function(t,a){o.setColorRecursive(t,r.color,r.colorIndex,a,e.children.length)}))},algorithmGroup:function(e,t,a,n){this.height=e,this.width=t,this.plot=n,this.startDirection=this.direction=a,this.lH=this.nH=this.lW=this.nW=this.total=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(e,t){return Math.max(e/t,t/e)}},this.addElement=function(e){this.lP.total=this.elArr[this.elArr.length-1],this.total+=e,0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(e)},this.reset=function(){this.lW=this.nW=0,this.elArr=[],this.total=0}},algorithmCalcPoints:function(e,t,a,n){var s,r,o,i,c,u=a.lW,p=a.lH,m=a.plot,d=0,h=a.elArr.length-1;t?(u=a.nW,p=a.nH):c=a.elArr[a.elArr.length-1],l(a.elArr,function(e){(t||d<h)&&(0===a.direction?(s=m.x,r=m.y,i=e/(o=u)):(s=m.x,r=m.y,o=e/(i=p)),n.push({x:s,y:r,width:o,height:i}),0===a.direction?m.y+=i:m.x+=o),d+=1}),a.reset(),0===a.direction?a.width-=u:a.height-=p,m.y=m.parent.y+(m.parent.height-a.height),m.x=m.parent.x+(m.parent.width-a.width),e&&(a.direction=1-a.direction),t||a.addElement(c)},algorithmLowAspectRatio:function(e,t,a){var n,s=[],r=this,o={x:t.x,y:t.y,parent:t},i=0,c=a.length-1,u=new this.algorithmGroup(t.height,t.width,t.direction,o);return l(a,function(a){n=a.val/t.val*t.height*t.width,u.addElement(n),u.lP.nR>u.lP.lR&&r.algorithmCalcPoints(e,!1,u,s,o),i===c&&r.algorithmCalcPoints(e,!0,u,s,o),i+=1}),s},algorithmFill:function(e,t,a){var n,s,r,o,i,c=[],u=t.direction,p=t.x,m=t.y,d=t.width,h=t.height;return l(a,function(a){n=a.val/t.val*t.height*t.width,s=p,r=m,0===u?(d-=o=n/(i=h),p+=o):(h-=i=n/(o=d),m+=i),c.push({x:s,y:r,width:o,height:i}),e&&(u=1-u)}),c},strip:function(e,t){return this.algorithmLowAspectRatio(!1,e,t)},squarified:function(e,t){return this.algorithmLowAspectRatio(!0,e,t)},sliceAndDice:function(e,t){return this.algorithmFill(!0,e,t)},stripes:function(e,t){return this.algorithmFill(!1,e,t)},translate:function(){var e,t,a=this,n=a.options,s=E(a);b.prototype.translate.call(a),t=a.tree=a.getTree(),e=a.nodeMap[s],a.mapOptionsToLevel=u({from:e.level+1,levels:n.levels,to:t.height,defaults:{levelIsConstant:a.options.levelIsConstant,colorByPoint:n.colorByPoint}}),""===s||e&&e.children.length||(a.drillToNode("",!1),s=a.rootNode,e=a.nodeMap[s]),y(a.nodeMap[a.rootNode],function(e){var t=!1,n=e.parent;return e.visible=!0,(n||""===n)&&(t=a.nodeMap[n]),t}),y(a.nodeMap[a.rootNode].children,function(e){var t=!1;return l(e,function(e){e.visible=!0,e.children.length&&(t=(t||[]).concat(e.children))}),t}),a.setTreeValues(t),a.axisRatio=a.xAxis.len/a.yAxis.len,a.nodeMap[""].pointValues=s={x:0,y:0,width:100,height:100},a.nodeMap[""].values=s=r(s,{width:s.width*a.axisRatio,direction:"vertical"===n.layoutStartingDirection?0:1,val:t.val}),a.calculateChildrenAreas(t,s),a.colorAxis?a.translateColors():n.colorByPoint||a.setColorRecursive(a.tree),n.allowDrillToNode&&(n=e.pointValues,a.xAxis.setExtremes(n.x,n.x+n.width,!1),a.yAxis.setExtremes(n.y,n.y+n.height,!1),a.xAxis.setScale(),a.yAxis.setScale()),a.setPointValues()},drawDataLabels:function(){var e,t,a=this,n=a.mapOptionsToLevel,s=p(a.points,function(e){return e.node.visible});l(s,function(s){t=n[s.node.level],e={style:{}},s.node.isLeaf||(e.enabled=!1),t&&t.dataLabels&&(e=r(e,t.dataLabels),a._hasPointLabels=!0),s.shapeArgs&&(e.style.width=s.shapeArgs.width,s.dataLabel&&s.dataLabel.css({width:s.shapeArgs.width+"px"})),s.dlOptions=r(e,s.options.dataLabels)}),b.prototype.drawDataLabels.call(this)},alignDataLabel:function(e){n.column.prototype.alignDataLabel.apply(this,arguments),e.dataLabel&&e.dataLabel.attr({zIndex:(e.node.zIndex||0)+1})},pointAttribs:function(e,t){var a=d(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},n=e&&a[e.node.level]||{},s=(a=this.options,t&&a.states[t]||{}),r=e&&e.getClassName()||"";return e={stroke:e&&e.borderColor||n.borderColor||s.borderColor||a.borderColor,"stroke-width":f(e&&e.borderWidth,n.borderWidth,s.borderWidth,a.borderWidth),dashstyle:e&&e.borderDashStyle||n.borderDashStyle||s.borderDashStyle||a.borderDashStyle,fill:e&&e.color||this.color},-1!==r.indexOf("highcharts-above-level")?(e.fill="none",e["stroke-width"]=0):-1!==r.indexOf("highcharts-internal-node-interactive")?(t=f(s.opacity,a.opacity),e.fill=_(e.fill).setOpacity(t).get(),e.cursor="pointer"):-1!==r.indexOf("highcharts-internal-node")?e.fill="none":t&&(e.fill=_(e.fill).brighten(s.brightness).get()),e},drawPoints:function(){var e=this,t=p(e.points,function(e){return e.node.visible});l(t,function(t){var a="level-group-"+t.node.levelDynamic;e[a]||(e[a]=e.chart.renderer.g(a).attr({zIndex:1e3-t.node.levelDynamic}).add(e.group)),t.group=e[a]}),n.column.prototype.drawPoints.call(this),e.options.allowDrillToNode&&l(t,function(t){t.graphic&&(t.drillId=e.options.interactByLeaf?e.drillToByLeaf(t):e.drillToByGroup(t))})},onClickDrillToNode:function(e){var t=(e=e.point)&&e.drillId;h(t)&&(e.setState(""),this.drillToNode(t))},drillToByGroup:function(e){var t=!1;return 1!=e.node.level-this.nodeMap[this.rootNode].level||e.node.isLeaf||(t=e.id),t},drillToByLeaf:function(e){var t=!1;if(e.node.parent!==this.rootNode&&e.node.isLeaf)for(e=e.node;!t;)(e=this.nodeMap[e.parent]).parent===this.rootNode&&(t=e.id);return t},drillUp:function(){var e=this.nodeMap[this.rootNode];e&&h(e.parent)&&this.drillToNode(e.parent)},drillToNode:function(e,t){var a=this.nodeMap[e];this.idPreviousRoot=this.rootNode,this.rootNode=e,""===e?this.drillUpButton=this.drillUpButton.destroy():this.showDrillUpButton(a&&a.name||e),this.isDirty=!0,f(t,!0)&&this.chart.redraw()},showDrillUpButton:function(e){var t=this;e=e||"< Back";var a,n,s=t.options.drillUpButton;s.text&&(e=s.text),this.drillUpButton?(this.drillUpButton.placed=!1,this.drillUpButton.attr({text:e}).align()):(n=(a=s.theme)&&a.states,this.drillUpButton=this.chart.renderer.button(e,null,null,function(){t.drillUp()},a,n&&n.hover,n&&n.select).addClass("highcharts-drillup-button").attr({align:s.position.align,zIndex:7}).add().align(s.position,!1,s.relativeTo||"plotBox"))},buildKDTree:i,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,getExtremes:function(){b.prototype.getExtremes.call(this,this.colorValueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,b.prototype.getExtremes.call(this)},getExtremesFromAll:!0,bindAxes:function(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,dataMin:0,minPadding:0,max:100,dataMax:100,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};b.prototype.bindAxes.call(this),e.extend(this.yAxis.options,t),e.extend(this.xAxis.options,t)},utils:{recursive:y,reduce:v}},{getClassName:function(){var t=e.Point.prototype.getClassName.call(this),a=this.series,n=a.options;return this.node.level<=a.nodeMap[a.rootNode].level?t+=" highcharts-above-level":this.node.isLeaf||f(n.interactByLeaf,!n.allowDrillToNode)?this.node.isLeaf||(t+=" highcharts-internal-node"):t+=" highcharts-internal-node-interactive",t},isValid:function(){return this.id||m(this.value)},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:"hover"===t?1:0})},setVisible:n.pie.prototype.pointClass.prototype.setVisible})}(e,function(e){var t=e.each,a=e.extend,n=e.isArray,s=e.isObject,r=e.isNumber,o=e.merge,i=e.pick,l=e.reduce;return{getColor:function(t,a){var n,s,r,o,l=a.index,c=a.mapOptionsToLevel,u=a.parentColor,p=a.parentColorIndex,m=a.series,d=a.colors,h=a.siblings,f=m.points;return t&&(f=f[t.i],t=c[t.level]||{},(n=f&&t.colorByPoint)&&(r=f.index%(d?d.length:m.chart.options.chart.colorCount),s=d&&d[r]),d=f&&f.options.color,n=t&&t.color,(c=u)&&(c=(c=t&&t.colorVariation)&&"brightness"===c.key?e.color(u).brighten(l/h*c.to).get():u),n=i(d,n,s,c,m.color),o=i(f&&f.options.colorIndex,t&&t.colorIndex,r,p,a.colorIndex)),{color:n,colorIndex:o}},getLevelOptions:function(e){var t,i,c,u,p=null;if(s(e))for(p={},c=r(e.from)?e.from:1,u=e.levels,i={},t=s(e.defaults)?e.defaults:{},n(u)&&(i=l(u,function(e,n){var i,l;return s(n)&&r(n.level)&&(i="boolean"==typeof(l=o({},n)).levelIsConstant?l.levelIsConstant:t.levelIsConstant,delete l.levelIsConstant,delete l.level,n=n.level+(i?0:c-1),s(e[n])?a(e[n],l):e[n]=l),e},{})),u=r(e.to)?e.to:1,e=0;e<=u;e++)p[e]=o({},t,s(i[e])?i[e]:{});return p},setTreeValues:function e(n,s){var r=s.before,o=s.idRoot,l=s.mapIdToNode[o],c=s.points[n.i],u=c&&c.options||{},p=0,m=[];return a(n,{levelDynamic:n.level-("boolean"!=typeof s.levelIsConstant||s.levelIsConstant?0:l.level),name:i(c&&c.name,""),visible:o===n.id||"boolean"==typeof s.visible&&s.visible}),"function"==typeof r&&(n=r(n,s)),t(n.children,function(t,r){var o=a({},s);a(o,{index:r,siblings:n.children.length,visible:n.visible}),t=e(t,o),m.push(t),t.visible&&(p+=t.val)}),n.visible=0<p||n.visible,r=i(u.value,p),a(n,{children:m,childrenTotal:p,isLeaf:n.visible&&!p,val:r}),n},updateRootId:function(e){var t;return s(e)&&(t=s(e.options)?e.options:{},t=i(e.rootNode,t.rootId,""),s(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}}}(e))},"object"==typeof e&&e.exports?e.exports=a:a(Highcharts)},1991:function(e,t){e.exports="data:image/png;base64,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"},1992:function(e,t,a){"use strict";(function(e){var n=a(0),s=a.n(n),r=a(3),o=a.n(r),i=a(36),l=a(41),c=a(15),u=a(16),p=a.n(u),m=a(355),d=a(215),h=a(248),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var b=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={amount:e.amount,to:e.to,to_id:null,memo:""},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.a.Component),f(a,[{key:"onAmountChanged",value:function(e){var t=e.amount;this.setState({amount:t})}},{key:"onToAccountChanged",value:function(e){var t=e?{to:e.get("name"),to_id:e.get("id")}:{to_id:null};this.setState(t)}},{key:"onToChanged",value:function(e){this.setState({to:e,to_id:null})}},{key:"onSubmit",value:function(){var t=this.props.asset_to_issue,a=c.a.get_asset_precision(t.get("precision")),n=this.state.amount.toString().replace(/,/g,"");n*=a,m.a.issueAsset(this.state.to_id,t.get("issuer"),t.get("id"),n,this.state.memo?new e(this.state.memo,"utf-8"):this.state.memo),this.setState({amount:0,to:"",to_id:null,memo:""})}},{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value})}},{key:"render",value:function(){var e=this.props.asset_to_issue.get("id"),t=1;return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},s.a.createElement("div",{className:"content-block"},s.a.createElement(d.a,{label:"modal.issue.to",accountName:this.state.to,onAccountChanged:this.onToAccountChanged.bind(this),onChange:this.onToChanged.bind(this),account:this.state.to,tabIndex:t++})),s.a.createElement("div",{className:"content-block"},s.a.createElement(h.a,{label:"modal.issue.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:e,assets:[e],tabIndex:t++})),s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(o.a,{component:"span",content:"transfer.memo"})," ","(",s.a.createElement(o.a,{content:"transfer.optional"}),")"),s.a.createElement("textarea",{rows:"3",value:this.state.memo,tabIndex:t++,onChange:this.onMemoChanged.bind(this)})),s.a.createElement("div",{className:"content-block button-group"},s.a.createElement("button",{type:"submit",className:"button primary",onClick:this.onSubmit.bind(this,this.state.to,this.state.amount),disabled:!this.state.to_id||!this.state.amount,tabIndex:t++},p.a.translate("modal.issue.submit")),s.a.createElement("button",{className:"button primary hollow",onClick:this.props.onClose,tabIndex:t++},p.a.translate("cancel")))))}}]),a}();b.propTypes={asset_to_issue:i.a.ChainAsset.isRequired},t.a=Object(l.a)(b)}).call(this,a(101).Buffer)},1998:function(e,t,a){"use strict";var n=a(97).a.isFinite;t.a=function(e){return"number"==typeof e&&n(e)}},2069:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(43),o=a(26),i=a(20),l=a(96),c=a(154),u=a(36),p=a(41),m=a(33),d=a(108),h=a(11),f=a.n(h),b=a(479),g=a(65),_=a(1),v=a.n(_),y=a(111),E=a.n(y),w=a(82),k=a.n(w),x=a(328),A=a(615),O=a.n(A),C={},N=0,S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===e?e:function(e){var t=e,a=C[t]||(C[t]={});if(a[e])return a[e];var n=O.a.compile(e);return N<1e4&&(a[e]=n,N++),n}(e)(t,{pretty:!0})},P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){k()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(x.b)(e.to),a=Object(x.b)(this.props.to);Object(x.c)(t,a)?E()(!1,"You tried to redirect to the same route you're currently on: \""+a.pathname+a.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,a=e.to;return t?"string"==typeof a?S(a,t.params):P({},a,{pathname:S(a.pathname,t.params)}):a},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,a=this.computeTo(this.props);t?e.push(a):e.replace(a)},t.prototype.render=function(){return null},t}(s.a.Component);j.propTypes={computedMatch:v.a.object,push:v.a.bool,from:v.a.string,to:v.a.oneOfType([v.a.string,v.a.object]).isRequired},j.defaultProps={push:!1},j.contextTypes={router:v.a.shape({history:v.a.shape({push:v.a.func.isRequired,replace:v.a.func.isRequired}).isRequired,staticContext:v.a.object}).isRequired};var I=j,T=a(1757),M=a(451),R=a(46),B=a(3),D=a.n(B),L=a(355),q=a(474),F=a(88),V=a(31),W=a(39),U=a.n(W),z=a(60),J=a(15),G=a(54),K=a(1992),H=a(282),Z=a(16),Q=a.n(Z),Y=a(248),X=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var $=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={amount:0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),X(t,[{key:"onAmountChanged",value:function(e){var t=e.amount,a=e.asset;this.setState({amount:t,asset:a})}},{key:"onSubmit",value:function(){var e=J.a.get_asset_precision(this.state.asset.get("precision")),t=this.state.amount.replace(/,/g,"");t*=e,L.a.reserveAsset(t,this.props.assetId,this.props.account.get("id")),this.props.onClose()}},{key:"render",value:function(){var e=this.props.assetId;return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement(D.a,{component:"h3",content:"modal.reserve.title"}),s.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},s.a.createElement("div",{className:"content-block"},s.a.createElement(Y.a,{label:"modal.reserve.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:e,assets:[e],display_balance:s.a.createElement(H.a,{balance:this.props.account.getIn(["balances",e])}),tabIndex:1})),s.a.createElement("div",{className:"content-block button-group"},s.a.createElement("input",{type:"submit",className:"button success",onClick:this.onSubmit.bind(this),value:Q.a.translate("modal.reserve.submit"),tabIndex:2}),s.a.createElement("div",{className:"button",onClick:this.props.onClose,tabIndex:3},Q.a.translate("cancel")))))}}]),t}(),ee=a(283),te=a(102),ae=a(1772),ne=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var se=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={create:{symbol:"",name:"",description:"",max_supply:1e15,precision:4},issue:{amount:0,to:"",to_id:"",asset_id:"",symbol:""},errors:{symbol:null},isValid:!1,searchTerm:""},a._searchAccounts=Object(M.a)(a._searchAccounts,150),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ne(t,[{key:"_checkAssets",value:function(e,t){if(!this.props.account.get("assets").size){var a=e.sort(function(e,t){return e.symbol>t.symbol?1:e.symbol<t.symbol?-1:0}).last();0===e.size||t?(L.a.getAssetList.defer("A",100),this.setState({assetsFetched:100})):e.size>=this.state.assetsFetched&&(L.a.getAssetList.defer(a.symbol,100),this.setState({assetsFetched:this.state.assetsFetched+99}))}}},{key:"componentWillReceiveProps",value:function(e){this._checkAssets(e.assets)}},{key:"componentWillMount",value:function(){this._checkAssets(this.props.assets,!0)}},{key:"_onIssueInput",value:function(e,t){var a=t.target.id,n=this.state.issue;if("to"===a){this._searchAccounts(t.target.value),n.to=t.target.value;var s=this.props.searchAccounts.findEntry(function(e){return e===t.target.value});n.to_id=s?s[0]:null}else n[e]=t.target.value;this.setState({issue:n})}},{key:"_searchAccounts",value:function(e){r.a.accountSearch(e)}},{key:"_issueAsset",value:function(e,t){var a=this;t.preventDefault(),U.a.publish("issue_asset","close");var n=this.state.issue,s=this.props.assets.get(n.asset_id);n.amount*=J.a.get_asset_precision(s.precision),L.a.issueAsset(e,n).then(function(e){e?(z.a.addNotification({message:"Successfully issued "+J.a.format_asset(n.amount,a.props.assets.get(n.asset_id)),level:"success",autoDismiss:10}),ChainStore.getAsset(n.asset_id)):z.a.addNotification({message:"Failed to issue asset",level:"error",autoDismiss:10})})}},{key:"_reserveButtonClick",value:function(e,t){t.preventDefault(),this.setState({reserve:e}),U.a.publish("reserve_asset","open")}},{key:"_reserveAsset",value:function(e,t){t.preventDefault(),U.a.publish("reserve_asset","close");var a=this.state.issue,n=this.props.assets.get(a.asset_id);a.amount*=J.a.get_asset_precision(n.precision),L.a.issueAsset(e,a)}},{key:"_issueButtonClick",value:function(e,t,a){a.preventDefault();var n=this.state.issue;n.asset_id=e,n.symbol=t,this.setState({issue:n}),U.a.publish("issue_asset","open")}},{key:"_editButtonClick",value:function(e,t,a){a.preventDefault(),this.props.history.push("/account/"+t+"/update-asset/"+e)}},{key:"_onAccountSelect",value:function(e){var t=this.state.issue;t.to=e,t.to_id=this.props.account_name_to_id[e],this.setState({issue:t})}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.account_name,r=t.assets,o=t.assetsList,i=!0;if(!a)return s.a.createElement(G.a,{type:"circle"});if(a.notFound&&(i=!1),!i)return s.a.createElement("div",{className:"grid-block"},s.a.createElement("h5",null,s.a.createElement(D.a,{component:"h5",content:"account.errors.not_found",name:n})));o.length&&(r=r.clear(),o.forEach(function(e){e&&(r=r.set(e.get("id"),e.toJS()))}));var l=r.filter(function(e){return e.issuer===a.get("id")}).sort(function(e,t){return parseInt(e.id.substring(4,e.id.length),10)-parseInt(t.id.substring(4,t.id.length),10)}).map(function(t){var a=ee.a.parseDescription(t.options.description),r=a.short_name?a.short_name:a.main;r.length>100&&(r=r.substr(0,100)+"...");var o=e.props.getDynamicObject(t.dynamic_asset_data_id);return s.a.createElement("tr",{key:t.symbol},s.a.createElement("td",null,s.a.createElement(R.a,{to:"/asset/"+t.symbol},t.symbol)),s.a.createElement("td",{style:{maxWidth:"250px"}},r),s.a.createElement("td",null,o?s.a.createElement(V.a,{amount:parseInt(o.get("current_supply"),10),asset:t.id}):null),s.a.createElement("td",null,s.a.createElement(V.a,{amount:parseInt(t.options.max_supply,10),asset:t.id})),s.a.createElement("td",null,t.bitasset_data_id?null:s.a.createElement("button",{onClick:e._issueButtonClick.bind(e,t.id,t.symbol),className:"button"},s.a.createElement(D.a,{content:"transaction.trxTypes.asset_issue"}))),s.a.createElement("td",null,t.bitasset_data_id?null:s.a.createElement("button",{onClick:e._reserveButtonClick.bind(e,t.id),className:"button"},s.a.createElement(D.a,{content:"transaction.trxTypes.asset_reserve"}))),s.a.createElement("td",null,s.a.createElement("button",{onClick:e._editButtonClick.bind(e,t.symbol,n),className:"button"},s.a.createElement(D.a,{content:"transaction.trxTypes.asset_update"}))))}).toArray();return s.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},s.a.createElement("div",{className:"content-block small-12"},s.a.createElement("div",{className:"tabs-container generic-bordered-box"},s.a.createElement(ae.b,{segmented:!1,setting:"issuedAssetsTab",className:"account-tabs",tabsClass:"account-overview bordered-header content-block",contentClass:"padding"},s.a.createElement(ae.a,{title:"account.user_issued_assets.issued_assets"},s.a.createElement("div",{className:"content-block"},s.a.createElement("table",{className:"table dashboard-table table-hover"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(D.a,{content:"account.user_issued_assets.symbol"})),s.a.createElement("th",{style:{maxWidth:"200px"}},s.a.createElement(D.a,{content:"account.user_issued_assets.description"})),s.a.createElement(D.a,{component:"th",content:"markets.supply"}),s.a.createElement("th",null,s.a.createElement(D.a,{content:"account.user_issued_assets.max_supply"})),s.a.createElement("th",{style:{textAlign:"center"},colSpan:"3"},s.a.createElement(D.a,{content:"account.perm.action"})))),s.a.createElement("tbody",null,l))),s.a.createElement("div",{className:"content-block"},s.a.createElement(R.a,{to:"/account/"+n+"/create-asset/"},s.a.createElement("button",{className:"button"},s.a.createElement(D.a,{content:"transaction.trxTypes.asset_create"}))))))),s.a.createElement(F.a,{id:"issue_asset",overlay:!0},s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(K.a,{asset_to_issue:this.state.issue.asset_id,onClose:function(){U.a.publish("issue_asset","close")}}))),s.a.createElement(F.a,{id:"reserve_asset",overlay:!0},s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement($,{assetId:this.state.reserve,account:a,onClose:function(){U.a.publish("reserve_asset","close")}})))))}}]),t}();se.defaultProps={symbol:"",name:"",description:"",max_supply:0,precision:0},se.propTypes={symbol:v.a.string.isRequired},se=Object(te.a)(se,{propNames:["assetsList"],asList:!0,withDynamic:!0});var re=Object(m.connect)(se,{listenTo:function(){return[q.a]},getProps:function(e){var t=Object(h.Map)(),a=Object(h.List)();return e.account.get("assets",[]).size?e.account.get("assets",[]).forEach(function(e){a=a.push(e)}):t=q.a.getState().assets,{assets:t,assetsList:a}}}),oe=a(7),ie=a.n(oe),le=a(472),ce=a(9),ue=a(1789),pe=a(161),me=a.n(pe),de=a(147),he=a.n(de),fe=a(125),be=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ye=new me.a(he.a.GRAPHENE_MAX_SHARE_SUPPLY),Ee=function(e){function t(e){ge(this,t);var a=_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={backingAsset:e.backingAsset.get("symbol"),error:null},a}return ve(t,s.a.Component),be(t,[{key:"_onInputBackingAsset",value:function(e){this.setState({backingAsset:e.toUpperCase(),error:null})}},{key:"_onFoundBackingAsset",value:function(e){e&&("1.3.0"===e.get("id")||e.get("bitasset_data_id")&&!e.getIn(["bitasset","is_prediction_market"])?this.props.isPredictionMarket&&e.get("precision")!==parseInt(this.props.assetPrecision,10)?this.setState({error:Q.a.translate("account.user_issued_assets.error_precision",{asset:this.props.assetSymbol})}):this.props.onUpdate("short_backing_asset",e.get("id")):this.setState({error:Q.a.translate("account.user_issued_assets.error_invalid")}))}},{key:"render",value:function(){var e=this.props.bitasset_opts,t=this.state.error;return s.a.createElement("div",{className:"small-12 grid-content"},s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.feed_lifetime_sec"}),s.a.createElement("input",{type:"number",value:e.feed_lifetime_sec/60,onChange:this.props.onUpdate.bind(this,"feed_lifetime_sec")})),s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.minimum_feeds"}),s.a.createElement("input",{type:"number",value:e.minimum_feeds,onChange:this.props.onUpdate.bind(this,"minimum_feeds")})),s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.force_settlement_delay_sec"}),s.a.createElement("input",{type:"number",value:e.force_settlement_delay_sec/60,onChange:this.props.onUpdate.bind(this,"force_settlement_delay_sec")})),s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.force_settlement_offset_percent"}),s.a.createElement("input",{type:"number",value:e.force_settlement_offset_percent/he.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,"force_settlement_offset_percent")})),s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.maximum_force_settlement_volume"}),s.a.createElement("input",{type:"number",value:e.maximum_force_settlement_volume/he.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,"maximum_force_settlement_volume")})),s.a.createElement("div",{className:"grid-block no-margin small-12"},s.a.createElement(ue.a,{label:"account.user_issued_assets.backing",onChange:this._onInputBackingAsset.bind(this),asset:this.state.backingAsset,assetInput:this.state.backingAsset,tabIndex:1,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundBackingAsset.bind(this)}),t?s.a.createElement("div",{className:"content-block has-error"},t):null))}}]),t}();Ee.propTypes={backingAsset:u.a.ChainAsset.isRequired,isUpdate:v.a.bool},Ee.defaultProps={isUpdate:!1},Ee=Object(p.a)(Ee);var we=function(e){function t(e){ge(this,t);var a=_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.resetState(e),a}return ve(t,s.a.Component),be(t,[{key:"resetState",value:function(e){J.a.get_asset_precision(4),J.a.get_asset_precision(e.core.get("precision"));var t=this._getPermissions({isBitAsset:!1}),a=t.flagBooleans,n=t.permissionBooleans;ce.b.getAsset("1.3.0").get("symbol");return{update:{symbol:"",precision:4,max_supply:1e5,max_market_fee:0,market_fee_percent:0,description:{main:""}},errors:{max_supply:null},isValid:!0,flagBooleans:a,permissionBooleans:n,isBitAsset:!1,is_prediction_market:!1,core_exchange_rate:{quote:{asset_id:null,amount:1},base:{asset_id:"1.3.0",amount:1}},bitasset_opts:{feed_lifetime_sec:86400,minimum_feeds:7,force_settlement_delay_sec:86400,force_settlement_offset_percent:1*he.a.GRAPHENE_1_PERCENT,maximum_force_settlement_volume:20*he.a.GRAPHENE_1_PERCENT,short_backing_asset:"1.3.0"},marketInput:""}}},{key:"_getPermissions",value:function(e){return{flagBooleans:ee.a.getFlagBooleans(0,e.isBitAsset),permissionBooleans:ee.a.getFlagBooleans("all",e.isBitAsset)}}},{key:"_createAsset",value:function(e){e.preventDefault();var t=this.state,a=t.update,n=t.flagBooleans,s=t.permissionBooleans,r=t.core_exchange_rate,o=t.isBitAsset,i=t.is_prediction_market,l=t.bitasset_opts,c=this.props.account,u=ee.a.getFlags(n,o),p=ee.a.getPermissions(s,o);this.state.marketInput!==a.description.market&&(a.description.market="");var m=JSON.stringify(a.description);L.a.createAsset(c.get("id"),a,u,p,r,o,i,l,m).then(function(e){console.log("... AssetActions.createAsset(account_id, update)",c.get("id"),a,u,p)})}},{key:"_hasChanged",value:function(){return!J.a.are_equal_shallow(this.state,this.resetState(this.props))}},{key:"_reset",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:"_forcePositive",value:function(e){return parseFloat(e)<0?"0":e}},{key:"_onUpdateDescription",value:function(e,t){var a=this.state.update,n=!0;switch(e){case"condition":if(t.target.value.length>60)return void(n=!1);a.description[e]=t.target.value;break;case"short_name":if(t.target.value.length>32)return void(n=!1);a.description[e]=t.target.value;break;case"market":a.description[e]=t;break;case"visible":a.description[e]=!a.description[e];break;default:a.description[e]=t.target.value}n&&(this.forceUpdate(),this._validateEditFields(a))}},{key:"onChangeBitAssetOpts",value:function(e,t){var a=this.state.bitasset_opts;switch(e){case"force_settlement_offset_percent":case"maximum_force_settlement_volume":a[e]=parseFloat(t.target.value)*he.a.GRAPHENE_1_PERCENT;break;case"minimum_feeds":a[e]=parseInt(t.target.value,10);break;case"feed_lifetime_sec":case"force_settlement_delay_sec":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),a[e]=parseInt(60*parseFloat(t.target.value),10);break;case"short_backing_asset":a[e]=t;break;default:a[e]=t.target.value}this.forceUpdate()}},{key:"_onUpdateInput",value:function(e,t){var a=this.state,n=a.update,s=a.errors,r=!1,o=J.a.get_asset_precision(this.state.update.precision),i=t.target,l=i.selectionStart,c=i.value;switch(e){case"market_fee_percent":n[e]=this._forcePositive(i.value);break;case"max_market_fee":if(new me.a(c).times(o).gt(ye))return s.max_market_fee="The number you tried to enter is too large",this.setState({errors:s});i.value=J.a.limitByPrecision(i.value,this.state.update.precision),n[e]=i.value;break;case"precision":n[e]=this._forcePositive(i.value);break;case"max_supply":r=!0,new RegExp(/[[:digit:]]/).test(i.value)||(i.value=i.value.replace(/[^0-9.]/g,"")),"."==i.value.charAt(0)&&(i.value="0."),i.value.charAt(i.value.length)!=i.value.search(".")&&i.value.substr(1),i.value=J.a.limitByPrecision(i.value,this.state.update.precision),n[e]=i.value;break;case"symbol":r=!0;var u=i.value.toUpperCase(),p=new RegExp("^[.A-Z0-9]+$");if(""!==u&&!p.test(u))break;ce.b.getAsset(u),n[e]=this._forcePositive(u);break;default:n[e]=i.value}this.setState({update:n},function(){if(r){var t=l-(c.length-n[e].length);i.setSelectionRange(t,t)}}),this._validateEditFields(n)}},{key:"_validateEditFields",value:function(e){var t={max_supply:null};t.symbol=ce.d.is_valid_symbol_error(e.symbol),ce.b.getAsset(e.symbol)&&(t.symbol=Q.a.translate("account.user_issued_assets.exists"));try{t.max_supply=e.max_supply<=0?Q.a.translate("account.user_issued_assets.max_positive"):new me.a(e.max_supply).times(Math.pow(10,e.precision)).gt(ye)?Q.a.translate("account.user_issued_assets.too_large"):null}catch(e){console.log("err:",e),t.max_supply=Q.a.translate("account.user_issued_assets.too_large")}var a=!t.symbol&&!t.max_supply;this.setState({isValid:a,errors:t})}},{key:"_onFlagChange",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t})}},{key:"_onPermissionChange",value:function(e){var t=this.state.permissionBooleans;t[e]=!t[e],this.setState({permissionBooleans:t})}},{key:"_onInputCoreAsset",value:function(e,t){"quote"===e?this.setState({quoteAssetInput:t}):"base"===e&&this.setState({baseAssetInput:t})}},{key:"_onFoundCoreAsset",value:function(e,t){if(t){var a=this.state.core_exchange_rate;a[e].asset_id=t.get("id"),this.setState({core_exchange_rate:a}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:a})}}},{key:"_onInputMarket",value:function(e){this.setState({marketInput:e})}},{key:"_onFoundMarketAsset",value:function(e){e&&this._onUpdateDescription("market",e.get("symbol"))}},{key:"_onCoreRateChange",value:function(e,t){var a=void 0,n=void 0;if("quote"===e)a=J.a.limitByPrecision(t.target.value,this.state.update.precision),n=null;else{if(!(t&&"amount"in t))return;a=""==t.amount?"0":J.a.limitByPrecision(t.amount.toString().replace(/,/g,""),this.props.core.get("precision")),n=t.asset.get("id")}this.state.core_exchange_rate[e]={amount:a,asset_id:n},this.forceUpdate()}},{key:"_onToggleBitAsset",value:function(){this.state.update;this.state.isBitAsset=!this.state.isBitAsset,this.state.isBitAsset||(this.state.is_prediction_market=!1);var e=this._getPermissions(this.state),t=e.flagBooleans,a=e.permissionBooleans;this.state.flagBooleans=t,this.state.permissionBooleans=a,this.forceUpdate()}},{key:"_onTogglePM",value:function(){this.state.is_prediction_market=!this.state.is_prediction_market,this.state.update.precision=this.props.core.get("precision"),this.state.core_exchange_rate.base.asset_id=this.props.core.get("id"),this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.globalObject,a=e.core,n=this.state,r=n.errors,o=n.isValid,i=n.update,l=n.flagBooleans,c=n.permissionBooleans,u=n.core_exchange_rate,p=n.is_prediction_market,m=n.isBitAsset,d=n.bitasset_opts,h=i.symbol.length,f="N/A";3===h?f=s.a.createElement(V.a,{amount:Object(fe.c)("asset_create",["symbol3"],t),asset:"1.3.0"}):4===h?f=s.a.createElement(V.a,{amount:Object(fe.c)("asset_create",["symbol4"],t),asset:"1.3.0"}):h>4&&(f=s.a.createElement(V.a,{amount:Object(fe.c)("asset_create",["long_symbol"],t),asset:"1.3.0"}));var b=[],g=function(e,t,a){return s.a.createElement("table",{key:"table_"+e,className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{style:{border:"none",width:"80%"}},s.a.createElement(D.a,{content:"account.user_issued_assets."+e}),":"),s.a.createElement("td",{style:{border:"none"}},s.a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:t},s.a.createElement("input",{type:"checkbox",checked:a}),s.a.createElement("label",null))))))};for(var _ in c)c[_]&&"charge_market_fee"!==_&&b.push(g(_,this._onFlagChange.bind(this,_),l[_]));b.push(g("visible",this._onUpdateDescription.bind(this,"visible"),!i.description.visible&&!1===i.description.visible));var v=[];for(var y in c)v.push(s.a.createElement("table",{key:"table_"+y,className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{style:{border:"none",width:"80%"}},s.a.createElement(D.a,{content:"account.user_issued_assets."+y}),":"),s.a.createElement("td",{style:{border:"none"}},s.a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onPermissionChange.bind(this,y)},s.a.createElement("input",{type:"checkbox",checked:c[y],onChange:function(){}}),s.a.createElement("label",null)))))));var E=s.a.createElement("div",null,s.a.createElement("button",{className:"button",onClick:this._reset.bind(this),value:Q.a.translate("account.perm.reset")},s.a.createElement(D.a,{content:"account.perm.reset"})),s.a.createElement("button",{className:ie()("button",{disabled:!o}),onClick:this._createAsset.bind(this)},s.a.createElement(D.a,{content:"header.create_asset"})));return s.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},s.a.createElement("div",{className:"content-block small-12"},s.a.createElement("div",{className:"tabs-container generic-bordered-box"},s.a.createElement("div",{className:"tabs-header"},s.a.createElement("h3",null,s.a.createElement(D.a,{content:"header.create_asset"}))),s.a.createElement(ae.b,{setting:"createAssetTab",className:"account-tabs",tabsClass:"account-overview no-padding bordered-header content-block",contentClass:"grid-block shrink small-vertical medium-horizontal padding",segmented:!1,actionButtons:E},s.a.createElement(ae.a,{title:"account.user_issued_assets.primary"},s.a.createElement("div",{className:"small-12 grid-content"},s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.symbol"}),s.a.createElement("input",{type:"text",value:i.symbol,onChange:this._onUpdateInput.bind(this,"symbol")})),r.symbol?s.a.createElement("p",{className:"grid-content has-error"},r.symbol):null,s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.max_supply"})," ",i.symbol?s.a.createElement("span",null,"(",i.symbol,")"):null,s.a.createElement("input",{type:"text",value:i.max_supply,onChange:this._onUpdateInput.bind(this,"max_supply")})),r.max_supply?s.a.createElement("p",{className:"grid-content has-error"},r.max_supply):null,s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.decimals"}),s.a.createElement("input",{min:"0",max:"8",step:"1",type:"range",value:i.precision,onChange:this._onUpdateInput.bind(this,"precision")})),s.a.createElement("p",null,i.precision),s.a.createElement("div",{style:{marginBottom:10},className:"txtlabel cancel"},s.a.createElement(D.a,{content:"account.user_issued_assets.precision_warning"})),s.a.createElement("table",{className:"table",style:{width:"inherit"}},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{style:{border:"none"}},s.a.createElement(D.a,{content:"account.user_issued_assets.mpa"}),":"),s.a.createElement("td",{style:{border:"none"}},s.a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onToggleBitAsset.bind(this)},s.a.createElement("input",{type:"checkbox",checked:m}),s.a.createElement("label",null)))))),m?s.a.createElement("table",{className:"table",style:{width:"inherit"}},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{style:{border:"none"}},s.a.createElement(D.a,{content:"account.user_issued_assets.pm"}),":"),s.a.createElement("td",{style:{border:"none"}},s.a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onTogglePM.bind(this)},s.a.createElement("input",{type:"checkbox",checked:p}),s.a.createElement("label",null)))))):null,s.a.createElement(D.a,{component:"h3",content:"account.user_issued_assets.core_exchange_rate"}),s.a.createElement("label",null,s.a.createElement("div",{className:"grid-block no-margin"},r.quote_asset?s.a.createElement("p",{className:"grid-content has-error"},r.quote_asset):null,r.base_asset?s.a.createElement("p",{className:"grid-content has-error"},r.base_asset):null,s.a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},s.a.createElement("div",{className:"amount-selector",style:{width:"100%",paddingRight:"10px"}},s.a.createElement(D.a,{component:"label",content:"account.user_issued_assets.quote"}),s.a.createElement("div",{className:"inline-label"},s.a.createElement("input",{type:"text",placeholder:"0.0",onChange:this._onCoreRateChange.bind(this,"quote"),value:u.quote.amount})))),s.a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},s.a.createElement(Y.a,{label:"account.user_issued_assets.base",amount:u.base.amount,onChange:this._onCoreRateChange.bind(this,"base"),asset:u.base.asset_id,assets:[u.base.asset_id],placeholder:"0.0",tabIndex:1,style:{width:"100%",paddingLeft:"10px"}}))),s.a.createElement("div",null,s.a.createElement("h5",null,s.a.createElement(D.a,{content:"exchange.price"}),s.a.createElement("span",null,":"," ",J.a.format_number(J.a.get_asset_price(u.quote.amount*J.a.get_asset_precision(i.precision),{precision:i.precision},u.base.amount*J.a.get_asset_precision(a),a),2+(parseInt(i.precision,10)||8))),s.a.createElement("span",null," ",i.symbol,"/",a.get("symbol"))))),s.a.createElement("div",null,s.a.createElement(D.a,{content:"account.user_issued_assets.cer_warning_1",component:"label",className:"has-error"}),s.a.createElement(D.a,{content:"account.user_issued_assets.cer_warning_2",component:"p"})),s.a.createElement("p",null,s.a.createElement(D.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",f))),s.a.createElement(ae.a,{title:"account.user_issued_assets.description"},s.a.createElement("div",{className:"small-12 grid-content"},s.a.createElement(D.a,{component:"label",content:"account.user_issued_assets.description"}),s.a.createElement("label",null,s.a.createElement("textarea",{style:{height:"7rem"},rows:"1",value:i.description.main,onChange:this._onUpdateDescription.bind(this,"main")})),s.a.createElement(D.a,{component:"label",content:"account.user_issued_assets.short"}),s.a.createElement("label",null,s.a.createElement("input",{type:"text",rows:"1",value:i.description.short_name,onChange:this._onUpdateDescription.bind(this,"short_name")})),s.a.createElement(D.a,{component:"label",content:"account.user_issued_assets.market"}),s.a.createElement(ue.a,{label:"account.user_issued_assets.name",onChange:this._onInputMarket.bind(this),asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundMarketAsset.bind(this)}),p?s.a.createElement("div",null,s.a.createElement(D.a,{component:"h3",content:"account.user_issued_assets.condition"}),s.a.createElement("label",null,s.a.createElement("input",{type:"text",rows:"1",value:i.description.condition,onChange:this._onUpdateDescription.bind(this,"condition")})),s.a.createElement(D.a,{component:"h3",content:"account.user_issued_assets.expiry"}),s.a.createElement("label",null,s.a.createElement("input",{type:"date",value:i.description.expiry,onChange:this._onUpdateDescription.bind(this,"expiry")}))):null)),m?s.a.createElement(ae.a,{title:"account.user_issued_assets.bitasset_opts"},s.a.createElement(Ee,{bitasset_opts:d,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:d.short_backing_asset,assetPrecision:i.precision,assetSymbol:i.symbol,isPredictionMarket:p})):null,s.a.createElement(ae.a,{title:"account.permissions"},s.a.createElement("div",{className:"small-12 grid-content"},s.a.createElement("div",{style:{maxWidth:800}},s.a.createElement(le.a,{path:"components/AccountAssetCreate",section:"permissions"})),v)),s.a.createElement(ae.a,{title:"account.user_issued_assets.flags"},s.a.createElement("div",{className:"small-12 grid-content"},s.a.createElement("div",{style:{maxWidth:800}},s.a.createElement(le.a,{path:"components/AccountAssetCreate",section:"flags"})),c.charge_market_fee?s.a.createElement("div",null,s.a.createElement(D.a,{component:"h3",content:"account.user_issued_assets.market_fee"}),s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{style:{border:"none",width:"80%"}},s.a.createElement(D.a,{content:"account.user_issued_assets.charge_market_fee"}),":"),s.a.createElement("td",{style:{border:"none"}},s.a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onFlagChange.bind(this,"charge_market_fee")},s.a.createElement("input",{type:"checkbox",checked:l.charge_market_fee}),s.a.createElement("label",null)))))),s.a.createElement("div",{className:ie()({disabled:!l.charge_market_fee})},s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.market_fee"})," ","(%)",s.a.createElement("input",{type:"number",value:i.market_fee_percent,onChange:this._onUpdateInput.bind(this,"market_fee_percent")})),s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.max_market_fee"})," ","(",i.symbol,")",s.a.createElement("input",{type:"number",value:i.max_market_fee,onChange:this._onUpdateInput.bind(this,"max_market_fee")})),r.max_market_fee?s.a.createElement("p",{className:"grid-content has-error"},r.max_market_fee):null)):null,s.a.createElement("h3",null,s.a.createElement(D.a,{content:"account.user_issued_assets.flags"})),b))))))}}]),t}();we.propTypes={core:u.a.ChainAsset.isRequired,globalObject:u.a.ChainObject.isRequired},we.defaultProps={globalObject:"2.0.0",core:"1.3.0"},we=Object(p.a)(we);var ke=a(1803),xe=a(134),Ae=a(215),Oe=a(124),Ce=a(146),Ne=a(18),Se=a(21),Pe=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var je=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={listType:e.assetWhiteListType,accountTable:-1===e.assetWhiteListType.indexOf("market"),listTypes:["whitelist_authorities","blacklist_authorities","whitelist_markets","blacklist_markets"],assetInput:null,asset_id:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Pe(t,[{key:"renderAccountTables",value:function(){var e=this,t=this.state.listType;return this.props.whiteListEnabled?s.a.createElement("div",null,s.a.createElement("table",{className:"table dashboard-table table-hover"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(D.a,{content:"explorer.account.title"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"account.perm.remove_text"})))),s.a.createElement("tbody",null,this.props[t].map(function(a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,s.a.createElement(Oe.a,{account:a})),s.a.createElement("td",{className:"clickable",onClick:e.props.onChangeList.bind(e,t,"remove",a)},s.a.createElement(Ne.a,{name:"cross-circle",title:"icons.cross_circle.remove",className:"icon-14px"})))}))),s.a.createElement("div",{style:{paddingTop:"2rem"}},s.a.createElement(Ae.a,{label:"account.whitelist."+t,accountName:this.props.authority_name,account:this.props.authority_name,onChange:this.props.onAccountNameChanged.bind(this,"authority_name"),onAccountChanged:this.props.onAccountChanged.bind(this,"new_authority_id"),error:null,tabIndex:1,action_label:"account.perm.confirm_add",onAction:this.props.onChangeList.bind(this,t,"add",this.props.new_authority_id)}))):s.a.createElement("div",null,s.a.createElement(D.a,{className:"txtlabel cancel",component:"p",content:"explorer.asset.whitelist.enable_flag"}))}},{key:"_onAssetChange",value:function(e){this.setState({assetInput:e})}},{key:"_onAssetFound",value:function(e){this.setState({asset_id:e?e.get("id"):null})}},{key:"renderMarketTable",value:function(){var e=this,t=this.state.listType;return s.a.createElement("div",null,s.a.createElement("table",{className:"table dashboard-table table-hover"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(D.a,{content:"explorer.asset.title"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"account.perm.remove_text"})))),s.a.createElement("tbody",null,this.props[t].map(function(a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,s.a.createElement(Ce.a,{asset:a})),s.a.createElement("td",{className:"clickable",onClick:e.props.onChangeList.bind(e,t,"remove",a)},s.a.createElement(Ne.a,{name:"cross-circle",title:"icons.cross_circle.remove",className:"icon-14px"})))}))),s.a.createElement("div",{style:{paddingTop:"2rem"}},s.a.createElement(ue.a,{label:"explorer.asset.whitelist."+t,onChange:this._onAssetChange.bind(this),asset:this.state.assetInput,assetInput:this.state.assetInput,tabIndex:1,style:{width:"100%"},onFound:this._onAssetFound.bind(this),action_label:"account.perm.confirm_add",onAction:this.props.onChangeList.bind(this,t,"add",this.state.asset_id)})))}},{key:"_onSwitchType",value:function(e){this.setState({listType:e,accountTable:-1===e.indexOf("market")}),Se.a.changeViewSetting({assetWhiteListType:e})}},{key:"render",value:function(){var e=this,t=this.state.accountTable,a=this.state.listTypes.indexOf(this.state.listType);return s.a.createElement("div",{className:"small-12 large-8 large-offset-2 grid-content"},s.a.createElement("div",null,s.a.createElement("div",{className:"header-selector",style:{paddingBottom:"2rem"}},s.a.createElement("div",{className:"selector"},this.state.listTypes.map(function(t,n){return s.a.createElement("div",{key:t,className:ie()("inline-block",{inactive:a!==n}),onClick:e._onSwitchType.bind(e,t)},s.a.createElement(D.a,{content:"explorer.asset.whitelist."+t}))}))),t?this.renderAccountTables():this.renderMarketTable(),this.props.children))}}]),t}(),Ie=Object(m.connect)(je,{listenTo:function(){return[i.a]},getProps:function(){return{assetWhiteListType:i.a.getState().viewSettings.get("assetWhiteListType","whitelist_authorities")}}}),Te=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Me=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={producer_name:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Te(t,[{key:"onAccountChanged",value:function(e){this.setState({new_producer_id:e?e.get("id"):null})}},{key:"onAccountNameChanged",value:function(e){this.setState({producer_name:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.witnessFed,n=t.committeeFed;return a||n?s.a.createElement("div",{className:"grid-content small-12 large-8 large-offset-2"},s.a.createElement(D.a,{component:"p",content:"account.user_issued_assets.feed_not_allowed_1",className:"has-error"}),s.a.createElement(D.a,{component:"p",content:"account.user_issued_assets.feed_not_allowed_2"})):s.a.createElement("div",{className:"grid-content small-12 large-8 large-offset-2"},s.a.createElement("table",{className:"table dashboard-table table-hover"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),s.a.createElement("th",{style:{textAlign:"left"}},s.a.createElement(D.a,{content:"explorer.account.title"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"account.perm.remove_text"})))),s.a.createElement("tbody",null,this.props.producers.map(function(t,a){return s.a.createElement("tr",{key:t},s.a.createElement("td",{style:{textAlign:"left"}},"#",a+1),s.a.createElement("td",{style:{textAlign:"left"}},s.a.createElement(Oe.a,{account:t})),s.a.createElement("td",{className:"clickable",onClick:e.props.onChangeList.bind(e,"remove",t)},s.a.createElement(Ne.a,{name:"cross-circle",title:"icons.cross_circle.remove",className:"icon-14px"})))}))),s.a.createElement("div",{style:{paddingTop:"2rem"}},s.a.createElement(Ae.a,{label:"account.user_issued_assets.add_feed",accountName:this.state.producer_name,account:this.state.producer_name,onChange:this.onAccountNameChanged.bind(this),onAccountChanged:this.onAccountChanged.bind(this),error:null,tabIndex:1,action_label:"account.perm.confirm_add",onAction:this.props.onChangeList.bind(this,"add",this.state.new_producer_id)})))}}]),t}(),Re=a(1817),Be=a(210),De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Le=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function qe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function We(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ue=new me.a(he.a.GRAPHENE_MAX_SHARE_SUPPLY),ze=function(e){function t(e){Fe(this,t);var a=Ve(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.resetState(e),a}return We(t,s.a.Component),Le(t,[{key:"_openConfirm",value:function(){this.refs.confirm_modal.show()}},{key:"_cancelConfirm",value:function(){this.refs.confirm_modal.onClose()}},{key:"resetState",value:function(e){var t=e.asset.toJS(),a=void 0!==t.bitasset_data_id,n=J.a.get_asset_precision(t.precision),s=J.a.get_asset_precision(e.core.get("precision")),r=new me.a(t.options.max_market_fee).div(n).toString(),o=new me.a(t.options.max_supply).div(n).toString(),i=t.options.core_exchange_rate;i.quote.amount=i.quote.asset_id===t.id?new me.a(i.quote.amount).div(n).toString():new me.a(i.quote.amount).div(s).toString(),i.base.amount=i.base.asset_id===t.id?new me.a(i.base.amount).div(n).toString():new me.a(i.base.amount).div(s).toString();var l=ee.a.getFlagBooleans(t.options.flags,a),c=ee.a.getFlagBooleans(t.options.issuer_permissions,a);t.options.market_fee_percent/=100;var u=ce.b.getAsset(i.quote.asset_id).get("symbol"),p=ce.b.getAsset(i.base.asset_id).get("symbol");return{update:{max_supply:o,max_market_fee:r,market_fee_percent:t.options.market_fee_percent,description:ee.a.parseDescription(t.options.description)},core_exchange_rate:i,issuer:t.issuer,new_issuer_account_id:null,issuer_account_name:null,new_funder_account:e.account.get("id"),asset_to_update:t.id,errors:{max_supply:null},new_authority_id:null,authority_name:null,isValid:!0,flagBooleans:l,permissionBooleans:c,isBitAsset:a,coreRateQuoteAssetName:u,quoteAssetInput:u,coreRateBaseAssetName:p,baseAssetInput:p,claimFeesAmount:0,bitasset_opts:a?t.bitasset.options:null,original_bitasset_opts:a?e.asset.getIn(["bitasset","options"]).toJS():null,marketInput:"",whitelist_authorities:e.asset.getIn(["options","whitelist_authorities"]),blacklist_authorities:e.asset.getIn(["options","blacklist_authorities"]),whitelist_markets:e.asset.getIn(["options","whitelist_markets"]),blacklist_markets:e.asset.getIn(["options","blacklist_markets"]),maxFeedProducers:e.globalObject.getIn(["parameters","maximum_asset_feed_publishers"]),feedProducers:a?e.asset.getIn(["bitasset","feeds"],[]).map(function(e){return e.first()}):null,originalFeedProducers:a?e.asset.getIn(["bitasset","feeds"],[]).map(function(e){return e.first()}):null}}},{key:"assetChanged",value:function(){var e=this.state,t=this.resetState(this.props);return JSON.stringify(e.update)!==JSON.stringify(t.update)||JSON.stringify(e.core_exchange_rate)!==JSON.stringify(t.core_exchange_rate)||null!==e.new_issuer_account_id&&e.new_issuer_account_id!==e.issuer||JSON.stringify(e.flagBooleans)!==JSON.stringify(t.flagBooleans)||JSON.stringify(e.permissionBooleans)!==JSON.stringify(t.permissionBooleans)||JSON.stringify(e.whitelist_authorities)!==JSON.stringify(t.whitelist_authorities)||JSON.stringify(e.blacklist_authorities)!==JSON.stringify(t.blacklist_authorities)||JSON.stringify(e.whitelist_markets)!==JSON.stringify(t.whitelist_markets)||JSON.stringify(e.blacklist_markets)!==JSON.stringify(t.blacklist_markets)}},{key:"tabChanged",value:function(e){var t=this.tabsChanged();return!!t[e]&&t[e]}},{key:"tabsChanged",value:function(){var e=this.state,t=this.resetState(this.props),a=[];return e.update.max_supply===t.update.max_supply&&e.core_exchange_rate.base.amount===t.core_exchange_rate.base.amount&&e.core_exchange_rate.quote.amount===t.core_exchange_rate.quote.amount||(a[0]=!0),JSON.stringify(e.whitelist_authorities)===JSON.stringify(t.whitelist_authorities)&&JSON.stringify(e.blacklist_authorities)===JSON.stringify(t.blacklist_authorities)&&JSON.stringify(e.whitelist_markets)===JSON.stringify(t.whitelist_markets)&&JSON.stringify(e.blacklist_markets)===JSON.stringify(t.blacklist_markets)||(a[1]=!0),e.update.description.main===t.update.description.main&&e.update.description.short_name===t.update.description.short_name&&e.update.description.market===t.update.description.market||(a[2]=!0),JSON.stringify(e.bitasset_opts)!==JSON.stringify(t.original_bitasset_opts)&&(a[3]=!0),null!==e.new_issuer_account_id&&e.new_issuer_account_id!==e.issuer&&(a[4]=!0),JSON.stringify(e.permissionBooleans)!==JSON.stringify(t.permissionBooleans)&&(a[5]=!0),JSON.stringify(e.flagBooleans)===JSON.stringify(t.flagBooleans)&&e.update.market_fee_percent===t.update.market_fee_percent&&e.update.max_market_fee===t.update.max_market_fee||(a[6]=!0),JSON.stringify(e.feedProducers)!==JSON.stringify(t.originalFeedProducers)&&(a[8]=!0),a}},{key:"pageChanged",value:function(){var e=this.state,t=e.isBitAsset,a=e.bitasset_opts,n=e.original_bitasset_opts,s=e.feedProducers,r=e.originalFeedProducers;return this.assetChanged()||t&&(JSON.stringify(a)!==JSON.stringify(n)||!J.a.are_equal_shallow(s.toJS(),r.toJS()))}},{key:"_updateAsset",value:function(e){var t=this;e.preventDefault(),this.refs.confirm_modal.onClose();var a=this.state,n=a.update,s=a.issuer,r=a.new_issuer_account_id,o=a.core_exchange_rate,i=a.flagBooleans,l=a.permissionBooleans,c=a.isBitAsset,u=a.bitasset_opts,p=a.original_bitasset_opts,m=a.feedProducers,d=a.originalFeedProducers,h=ee.a.getFlags(i);128&this.props.asset.getIn(["options","flags"])&&!(128&this.props.asset.getIn(["options","issuer_permissions"]))&&(h+=128);var f=ee.a.getPermissions(l,c);this.state.marketInput!==n.description.market&&(n.description.market="");var b=JSON.stringify(n.description),g={whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets},_=c?m.toJS():null,v=c?d.toJS():null;L.a.updateAsset(s,r,n,o,this.props.asset,h,f,c,u,p,b,g,_,v,this.assetChanged()).then(function(){console.log("... AssetActions.updateAsset(account_id, update)",s,r,t.props.asset.get("id"),n),setTimeout(function(){ce.b.getAsset(t.props.asset.get("id")),t.setState(t.resetState(t.props))},3e3)})}},{key:"_reset",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:"_forcePositive",value:function(e){return parseFloat(e)<0?"0":e}},{key:"_onUpdateDescription",value:function(e,t){var a=this.state.update,n=!0;switch(e){case"condition":if(t.target.value.length>60)return void(n=!1);a.description[e]=t.target.value;break;case"short_name":if(t.target.value.length>32)return void(n=!1);a.description[e]=t.target.value;break;case"market":a.description[e]=t;break;case"visible":a.description[e]=!a.description[e];break;default:a.description[e]=t.target.value}n&&(this.forceUpdate(),this._validateEditFields(a))}},{key:"onChangeBitAssetOpts",value:function(e,t){var a=this.state.bitasset_opts;switch(e){case"force_settlement_offset_percent":case"maximum_force_settlement_volume":a[e]=parseFloat(t.target.value)*he.a.GRAPHENE_1_PERCENT;break;case"feed_lifetime_sec":case"force_settlement_delay_sec":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),a[e]=parseInt(60*parseFloat(t.target.value),10);break;case"short_backing_asset":a[e]=t;break;default:a[e]=parseInt(t.target.value,10)}this.forceUpdate()}},{key:"_onUpdateInput",value:function(e,t){var a=this.state.update,n=!0,s=J.a.get_asset_precision(this.props.asset.get("precision"));switch(e){case"market_fee_percent":a[e]=this._forcePositive(t.target.value);break;case"max_market_fee":var r=t.amount.replace(/,/g,"");if(new me.a(r).times(s).gt(Ue))return n=!1,this.setState({errors:{max_market_fee:"The number you tried to enter is too large"}});a[e]=J.a.limitByPrecision(r,this.props.asset.get("precision"));break;case"max_supply":var o=t.amount.replace(/,/g,"");a[e]=J.a.limitByPrecision(o,this.props.asset.get("precision"));break;default:a[e]=t.target.value}n&&(this.setState({update:a}),this._validateEditFields(a))}},{key:"_validateEditFields",value:function(e){var t=e.core_exchange_rate,a=e.feedProducers?e.feedProducers:this.state.feedProducers,n=this.state.flagBooleans,s=this.props,r=s.asset,o=s.core,i={max_supply:null,quote_asset:null,base_asset:null,max_feed_producer:null,conflict_producer:null,invalid_market_pair:null},l=this.props.asset.get("precision");try{i.max_supply=e.max_supply<=0?Q.a.translate("account.user_issued_assets.max_positive"):new me.a(parseInt(e.max_supply,10)).times(Math.pow(10,l)).gt(Ue)?Q.a.translate("account.user_issued_assets.too_large"):null}catch(e){console.log("err:",e),i.max_supply=Q.a.translate("account.user_issued_assets.too_large")}t&&(t.quote.asset_id!==r.get("id")&&t.base.asset_id!==r.get("id")&&(i.quote_asset=Q.a.translate("account.user_issued_assets.need_asset",{name:r.get("symbol")})),t.quote.asset_id!==o.get("id")&&t.base.asset_id!==o.get("id")&&(i.base_asset=Q.a.translate("account.user_issued_assets.need_asset",{name:o.get("symbol")}))),a&&a.size>this.state.maxFeedProducers&&(i.max_feed_producer=Q.a.translate("account.user_issued_assets.too_many_feed",{max:this.state.maxFeedProducers})),n.committee_fed_asset&&n.witness_fed_asset&&(i.conflict_producer=Q.a.translate("account.user_issued_assets.conflict_feed")),this.state.marketInput==this.props.asset.get("symbol")&&(i.invalid_market_pair=Q.a.translate("account.user_issued_assets.invalid_market_pair"));var c=!(i.invalid_market_pair||i.max_supply||i.base_asset||i.quote_asset||i.max_feed_producer||i.conflict_producer);this.setState({isValid:c,errors:i})}},{key:"_onCoreRateChange",value:function(e,t){t.amount=""==t.amount?"0":t.amount.replace(/,/g,""),t.amount=J.a.limitByPrecision(t.amount,t.asset.get("precision")),this.state.core_exchange_rate[e]={amount:t.amount,asset_id:t.asset.get("id")},this.forceUpdate()}},{key:"onAccountChanged",value:function(e,t){this.setState(qe({},e,t?t.get("id"):null))}},{key:"onAccountNameChanged",value:function(e,t){this.setState(qe({},e,t))}},{key:"_onInputCoreAsset",value:function(e,t){"quote"===e?this.setState({quoteAssetInput:t}):"base"===e&&this.setState({baseAssetInput:t})}},{key:"_onFoundCoreAsset",value:function(e,t){if(t){var a=this.state.core_exchange_rate;a[e].asset_id=t.get("id"),this.setState({core_exchange_rate:a}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:a})}}},{key:"_onInputMarket",value:function(e){this.setState({marketInput:e})}},{key:"_onFoundMarketAsset",value:function(e){e&&this._onUpdateDescription("market",e.get("symbol"))}},{key:"_onFlagChange",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t}),this._validateEditFields({})}},{key:"_onPermissionChange",value:function(e){var t=this.state.permissionBooleans;t[e]=!t[e],this.setState({permissionBooleans:t})}},{key:"_onClaimInput",value:function(e){this.setState({claimFeesAmount:e.amount})}},{key:"_onClaimFees",value:function(){L.a.claimPoolFees(this.props.account.get("id"),this.props.asset,this.state.claimFeesAmount.replace(/,/g,""))}},{key:"onChangeList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",a=arguments[2],n=this.state[e];"add"!==t||n.includes(a)?"remove"===t&&n.includes(a)&&(n=n.remove(n.indexOf(a))):n=n.push(a),this.setState(qe({},e,n))}},{key:"onChangeFeedProducerList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",t=arguments[1],a=this.state.feedProducers;"add"!==e||a.includes(t)?"remove"===e&&a.includes(t)&&(a=a.remove(a.indexOf(t))):a=a.push(t),this.setState({feedProducers:a}),this._validateEditFields({feedProducers:a})}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.account,r=a.asset,o=(a.core,this.state),i=o.errors,l=o.isValid,c=o.update,u=o.core_exchange_rate,p=o.flagBooleans,m=o.permissionBooleans,d=o.claimFeesAmount,h=o.isBitAsset,f=o.bitasset_opts,b=r.get("symbol");e=s.a.createElement(ke.a,{opType:"asset_update"});var g=ce.b.getAsset(u.quote.asset_id),_=J.a.get_asset_precision(g.get("precision")),v=ce.b.getAsset(u.base.asset_id),y=J.a.get_asset_precision(v.get("precision")),E=parseFloat(u.quote.amount)*_,w=parseFloat(u.base.amount)*y,k=ee.a.getFlagBooleans(r.getIn(["options","issuer_permissions"]),void 0!==r.get("bitasset")),x=[],A=function(e,t,a){return s.a.createElement("table",{key:"table_"+e,className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{style:{border:"none",width:"80%"}},s.a.createElement(D.a,{content:"account.user_issued_assets."+e}),":"),s.a.createElement("td",{style:{border:"none"}},s.a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:t},s.a.createElement("input",{type:"checkbox",checked:a}),s.a.createElement("label",null))))))};for(var O in k)k[O]&&"charge_market_fee"!==O&&x.push(A(O,this._onFlagChange.bind(this,O),p[O]));x.push(A("visible",this._onUpdateDescription.bind(this,"visible"),!c.description.visible&&!1===c.description.visible));var C=[];for(var N in k)C.push(s.a.createElement("table",{key:"table_"+N,className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{style:{border:"none",width:"80%"}},s.a.createElement(D.a,{content:"account.user_issued_assets."+N}),":"),s.a.createElement("td",{style:{border:"none"}},s.a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onPermissionChange.bind(this,N)},s.a.createElement("input",{type:"checkbox",checked:m[N],onChange:function(){}}),s.a.createElement("label",null)))))));var S=0;this.tabsChanged().forEach(function(){S++});var P=s.a.createElement("div",null,s.a.createElement("button",{className:ie()("button",{disabled:!l||!this.pageChanged()}),style:{width:"9rem"},onClick:S>1?this._openConfirm.bind(this):this._updateAsset.bind(this)},S>1?s.a.createElement(D.a,{content:"account.perm.save_all"}):s.a.createElement(D.a,{content:"account.perm.save"})),s.a.createElement("button",{className:ie()("button primary hollow",{disabled:!this.pageChanged()}),onClick:this._reset.bind(this)},s.a.createElement(D.a,{content:"account.perm.reset"}))),j=this.props.getDynamicObject(r.get("dynamic_asset_data_id")),I=j?j.get("accumulated_fees"):0,T=d>0&&J.a.get_asset_precision(r.get("precision"))*d<=I,M=s.a.createElement("span",null,s.a.createElement(D.a,{component:"span",content:"transfer.available"}),": ",s.a.createElement(V.a,{amount:I,asset:r.get("id")})),R=!1;"1.3.0"!==g.get("id")&&"1.3.0"!==v.get("id")||g.get("id")!==r.get("id")&&v.get("id")!==r.get("id")||(R=!0);var B=r.getIn(["bitasset","is_prediction_market"]),L=ee.a.parseDescription(this.props.asset.toJS().options.description);return s.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},s.a.createElement("div",{className:"content-block small-12"},s.a.createElement("div",{className:"tabs-container generic-bordered-box"},s.a.createElement("div",{className:"tabs-header"},s.a.createElement("h3",null,s.a.createElement(D.a,{content:"header.update_asset"}),":"," ",b)),s.a.createElement(ae.b,{setting:"updateAssetTab",className:"account-tabs",tabsClass:"account-overview bordered-header content-block",contentClass:"grid-block padding-top shrink small-vertical medium-horizontal",segmented:!1,actionButtons:P,onChangeTab:function(e){t.setState({activeTab:e})}},s.a.createElement(ae.a,{title:"account.user_issued_assets.primary",updatedTab:this.tabChanged(0)},s.a.createElement("div",{className:"small-12 large-8 large-offset-2 grid-content"},s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.precision"}),s.a.createElement("span",null,": ",r.get("precision"))),s.a.createElement("br",null),s.a.createElement("label",null,s.a.createElement(Y.a,{label:"account.user_issued_assets.max_supply",amount:c.max_supply,onChange:this._onUpdateInput.bind(this,"max_supply"),asset:r.get("id"),assets:[r.get("id")],placeholder:"0.0",tabIndex:1})),i.max_supply?s.a.createElement("p",{className:"grid-content has-error"},i.max_supply):null,s.a.createElement(D.a,{component:"h3",content:"account.user_issued_assets.core_exchange_rate"}),s.a.createElement("label",null,s.a.createElement("div",{className:"grid-block no-margin"},R?null:s.a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},s.a.createElement(ue.a,{label:"account.user_issued_assets.quote_name",onChange:this._onInputCoreAsset.bind(this,"quote"),asset:this.state.quoteAssetInput,assetInput:this.state.quoteAssetInput,tabIndex:1,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundCoreAsset.bind(this,"quote")})),R?null:s.a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},s.a.createElement(ue.a,{label:"account.user_issued_assets.base_name",onChange:this._onInputCoreAsset.bind(this,"base"),asset:this.state.baseAssetInput,assetInput:this.state.baseAssetInput,tabIndex:1,style:{width:"100%",paddingLeft:"10px"},onFound:this._onFoundCoreAsset.bind(this,"base")})),i.quote_asset?s.a.createElement("p",{className:"grid-content has-error"},i.quote_asset):null,i.base_asset?s.a.createElement("p",{className:"grid-content has-error"},i.base_asset):null,s.a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},s.a.createElement(Y.a,{label:"account.user_issued_assets.quote",amount:u.quote.amount,onChange:this._onCoreRateChange.bind(this,"quote"),asset:u.quote.asset_id,assets:[u.quote.asset_id],placeholder:"0.0",tabIndex:1,style:{width:"100%",paddingRight:"10px"}})),s.a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},s.a.createElement(Y.a,{label:"account.user_issued_assets.base",amount:u.base.amount,onChange:this._onCoreRateChange.bind(this,"base"),asset:u.base.asset_id,assets:[u.base.asset_id],placeholder:"0.0",tabIndex:1,style:{width:"100%",paddingLeft:"10px"}}))),s.a.createElement("div",null,s.a.createElement("h5",null,s.a.createElement(D.a,{content:"exchange.price"}),":"," ",s.a.createElement(xe.a,{style:{fontWeight:"bold"},quote_amount:E,quote_asset:u.quote.asset_id,base_asset:u.base.asset_id,base_amount:w})))),s.a.createElement("div",null,s.a.createElement(D.a,{content:"account.user_issued_assets.cer_warning_1",component:"label",className:"has-error"}),s.a.createElement(D.a,{content:"account.user_issued_assets.cer_warning_2",component:"p"})),s.a.createElement("p",null,s.a.createElement(D.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",e))),s.a.createElement(ae.a,{title:"account.whitelist.title",updatedTab:this.tabChanged(1)},s.a.createElement(Ie,{whiteListEnabled:p.white_list,whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets,new_authority_id:this.state.new_authority_id,authority_name:this.state.authority_name,onAccountNameChanged:this.onAccountNameChanged.bind(this),onAccountChanged:this.onAccountChanged.bind(this),onChangeList:this.onChangeList.bind(this)},s.a.createElement("p",null,s.a.createElement(D.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",e))),s.a.createElement(ae.a,{title:"account.user_issued_assets.description",updatedTab:this.tabChanged(2)},s.a.createElement("div",{className:"small-12 large-8 large-offset-2 grid-content"},s.a.createElement("label",null,s.a.createElement("textarea",{style:{height:"7rem"},rows:"1",value:c.description.main||"",onChange:this._onUpdateDescription.bind(this,"main")})),s.a.createElement(D.a,{component:"h3",content:"account.user_issued_assets.short"}),s.a.createElement("label",null,s.a.createElement("input",{type:"text",rows:"1",value:c.description.short_name||"",onChange:this._onUpdateDescription.bind(this,"short_name")})),s.a.createElement(D.a,{component:"h3",content:"account.user_issued_assets.market"}),s.a.createElement(ue.a,{label:"account.user_issued_assets.name",onChange:this._onInputMarket.bind(this),placeholder:L.market,asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:"100%",paddingRight:"10px",paddingBottom:"20px"},onFound:this._onFoundMarketAsset.bind(this)}),i.invalid_market_pair?s.a.createElement("p",{className:"grid-content has-error"},i.invalid_market_pair):null,B?s.a.createElement("div",null,s.a.createElement(D.a,{component:"h3",content:"account.user_issued_assets.condition"}),s.a.createElement("label",null,s.a.createElement("input",{type:"text",rows:"1",value:c.description.condition,onChange:this._onUpdateDescription.bind(this,"condition")})),s.a.createElement(D.a,{component:"h3",content:"account.user_issued_assets.expiry"}),s.a.createElement("label",null,s.a.createElement("input",{type:"date",value:c.description.expiry,onChange:this._onUpdateDescription.bind(this,"expiry")}))):null,s.a.createElement("p",null,s.a.createElement(D.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",e))),h?s.a.createElement(ae.a,{title:"account.user_issued_assets.bitasset_opts",updatedTab:this.tabChanged(3)},s.a.createElement("div",{className:"small-12 large-8 large-offset-2 grid-content"},s.a.createElement(Ee,{bitasset_opts:f,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:f.short_backing_asset,assetPrecision:r.get("precision"),assetSymbol:r.get("symbol")}),s.a.createElement("p",null,s.a.createElement(D.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",e))):null,s.a.createElement(ae.a,{title:"account.user_issued_assets.update_owner",updatedTab:this.tabChanged(4)},s.a.createElement("div",{className:"small-12 large-8 large-offset-2 grid-content"},s.a.createElement("div",{style:{paddingBottom:"1rem"}},s.a.createElement(Ae.a,{label:"account.user_issued_assets.current_issuer",accountName:n.get("name"),account:n.get("name"),error:null,tabIndex:1,disabled:!0})),s.a.createElement(Ae.a,{label:"account.user_issued_assets.new_issuer",accountName:this.state.issuer_account_name,onChange:this.onAccountNameChanged.bind(this,"issuer_account_name"),onAccountChanged:this.onAccountChanged.bind(this,"new_issuer_account_id"),account:this.state.issuer_account_name,error:null,tabIndex:1,typeahead:!0}),s.a.createElement("p",null,s.a.createElement(D.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",e))),s.a.createElement(ae.a,{title:"account.permissions",updatedTab:this.tabChanged(5)},s.a.createElement("div",{className:"small-12 large-8 large-offset-2 grid-content"},s.a.createElement(le.a,{path:"components/AccountAssetCreate",section:"permissions"}),s.a.createElement("p",{className:"grid-content has-error"},s.a.createElement(D.a,{content:"account.user_issued_assets.perm_warning"})),C,s.a.createElement("p",null,s.a.createElement(D.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",e))),s.a.createElement(ae.a,{title:"account.user_issued_assets.flags",updatedTab:this.tabChanged(6)},s.a.createElement("div",{className:"small-12 large-8 large-offset-2 grid-content"},s.a.createElement(le.a,{path:"components/AccountAssetCreate",section:"flags"}),k.charge_market_fee?s.a.createElement("div",null,s.a.createElement(D.a,{component:"h3",content:"account.user_issued_assets.market_fee"}),s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{style:{border:"none",width:"80%"}},s.a.createElement(D.a,{content:"account.user_issued_assets.charge_market_fee"}),":"),s.a.createElement("td",{style:{border:"none"}},s.a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onFlagChange.bind(this,"charge_market_fee")},s.a.createElement("input",{type:"checkbox",onChange:function(){},checked:p.charge_market_fee}),s.a.createElement("label",null)))))),s.a.createElement("div",{className:ie()({disabled:!p.charge_market_fee})},s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.user_issued_assets.market_fee"})," ","(%)",s.a.createElement("input",{type:"number",value:c.market_fee_percent,onChange:this._onUpdateInput.bind(this,"market_fee_percent")})),s.a.createElement("label",null,s.a.createElement(Y.a,{label:"account.user_issued_assets.max_market_fee",amount:c.max_market_fee,onChange:this._onUpdateInput.bind(this,"max_market_fee"),asset:r.get("id"),assets:[r.get("id")],placeholder:"0.0",tabIndex:1})),i.max_market_fee?s.a.createElement("p",{className:"grid-content has-error"},i.max_market_fee):null)):null,s.a.createElement("h3",null,s.a.createElement(D.a,{content:"account.user_issued_assets.flags"})),x,s.a.createElement("p",null,s.a.createElement(D.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",e),i.conflict_producer?s.a.createElement("p",{className:"grid-content has-error"},i.conflict_producer):null)),s.a.createElement(ae.a,{title:"explorer.asset.fee_pool.title"},s.a.createElement("div",{className:"small-12 large-8 large-offset-2 grid-content"},s.a.createElement(Re.a,{asset:r.get("symbol"),funderAccountName:this.props.account.get("name")}),s.a.createElement(D.a,{component:"h3",content:"transaction.trxTypes.asset_claim_fees"}),s.a.createElement(D.a,{component:"p",content:"explorer.asset.fee_pool.claim_text",asset:r.get("symbol")}),s.a.createElement("div",{style:{paddingBottom:"1rem"}},s.a.createElement(D.a,{content:"explorer.asset.fee_pool.unclaimed_issuer_income"}),": ",j?s.a.createElement(V.a,{amount:j.get("accumulated_fees"),asset:r.get("id")}):null),s.a.createElement(Y.a,{label:"transfer.amount",display_balance:M,amount:d,onChange:this._onClaimInput.bind(this),asset:r.get("id"),assets:[r.get("id")],placeholder:"0.0",tabIndex:1,style:{width:"100%",paddingTop:16}}),s.a.createElement("div",{style:{paddingTop:"1rem"}},s.a.createElement("button",{className:ie()("button",{disabled:!T}),onClick:this._onClaimFees.bind(this)},s.a.createElement(D.a,{content:"explorer.asset.fee_pool.claim_fees"})),s.a.createElement("button",{className:"button outline",onClick:this._reset.bind(this)},s.a.createElement(D.a,{content:"account.perm.reset"}))))),h?s.a.createElement(ae.a,{title:"account.user_issued_assets.feed_producers",updatedTab:this.tabChanged(8)},s.a.createElement(Me,{asset:this.props.asset,account:this.props.account,witnessFed:p.witness_fed_asset,committeeFed:p.committee_fed_asset,producers:this.state.feedProducers,onChangeList:this.onChangeFeedProducerList.bind(this)}),i.max_feed_producer?s.a.createElement("p",{className:"grid-content has-error large-8 large-offset-2",style:{marginTop:"20px"}},i.max_feed_producer):null):null))),s.a.createElement(Je,De({modalId:"asset_update_modal",ref:"confirm_modal",tabsChanged:this.tabsChanged(),_cancelConfirm:this._cancelConfirm.bind(this),_updateAsset:this._updateAsset.bind(this)},this.props)))}}]),t}();ze.propTypes={globalObject:u.a.ChainObject.isRequired},ze.defaultProps={globalObject:"2.0.0"},ze=Object(p.a)(ze),ze=Object(te.a)(ze,{propNames:["asset","core"],defaultProps:{core:"1.3.0"},withDynamic:!0});var Je=function(e){function t(){Fe(this,t);var e=Ve(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return We(t,s.a.Component),Le(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){U.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this.props.tabsChanged;return this.state.open?s.a.createElement(F.a,{id:this.props.modalId,overlay:!0,modalHeader:"account.confirm_asset_modal.header",noLogo:!0},s.a.createElement(D.a,{content:"account.confirm_asset_modal.are_you_sure",component:"div",style:{paddingBottom:"1rem"}}),s.a.createElement("div",null,s.a.createElement("ul",null,e[0]?s.a.createElement("li",null,s.a.createElement(D.a,{content:"account.user_issued_assets.primary"})):null,e[1]?s.a.createElement("li",null,s.a.createElement(D.a,{content:"account.whitelist.title"})):null,e[2]?s.a.createElement("li",null,s.a.createElement(D.a,{content:"account.user_issued_assets.description"})):null,e[3]?s.a.createElement("li",null,s.a.createElement(D.a,{content:"account.user_issued_assets.bitasset_opts"})):null,e[4]?s.a.createElement("li",null,s.a.createElement(D.a,{content:"account.user_issued_assets.update_owner"})):null,e[5]?s.a.createElement("li",null,s.a.createElement(D.a,{content:"account.permissions"})):null,e[6]?s.a.createElement("li",null,s.a.createElement(D.a,{content:"account.user_issued_assets.flags"})):null,e[8]?s.a.createElement("li",null,s.a.createElement(D.a,{content:"account.user_issued_assets.feed_producers"})):null)),s.a.createElement("div",null,s.a.createElement("button",{className:"button primary",onClick:this.props._updateAsset.bind(this)},s.a.createElement(D.a,{content:"global.confirm"})),s.a.createElement("button",{className:"button primary hollow",onClick:this.props._cancelConfirm.bind(this)},s.a.createElement(D.a,{content:"global.cancel"})))):null}}]),t}(),Ge=function(e){function t(){return Fe(this,t),Ve(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return We(t,s.a.Component),Le(t,[{key:"render",value:function(){var e=this.props.match.params.asset;return s.a.createElement(ze,De({asset:e},this.props))}}]),t}(),Ke=Object(Be.a)(Ge),He=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ze=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),He(t,[{key:"render",value:function(){var e=this.props.stat_object.toJS();return s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.fees_paid"})," "),s.a.createElement("td",null,s.a.createElement(V.a,{amount:parseFloat(e.lifetime_fees_paid),asset:"1.3.0"}))))}}]),t}();Ze.propTypes={stat_object:u.a.ChainObject.isRequired};var Qe=Object(p.a)(Ze),Ye=a(477),Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},$e=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function at(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var nt=function(e){function t(){return et(this,t),tt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return at(t,s.a.Component),$e(t,[{key:"render",value:function(){var e=this.props.dprops;return s.a.createElement(le.a,Xe({},this.props,{path:"components/AccountMembership",section:"fee-division",nextMaintenanceTime:{time:e.get("next_maintenance_time")}}))}}]),t}();nt.propTypes={dprops:u.a.ChainObject.isRequired},nt.defaultProps={dprops:"2.1.0"},nt=Object(p.a)(nt);var st=function(e){function t(){return et(this,t),tt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return at(t,s.a.Component),$e(t,[{key:"upgradeAccount",value:function(e,t,a){a.preventDefault(),r.a.upgradeAccount(e,t)}},{key:"componentWillMount",value:function(){d.a.getFinalFeeAsset(this.props.account,"account_upgrade")}},{key:"render",value:function(){var e=this.props,t=e.gprops,a=e.core_asset,n=this.props.account.toJS(),r=ce.b.getAccount(n.lifetime_referrer,!1);r&&(n.lifetime_referrer_name=r.get("name"));var o=ce.b.getAccount(n.referrer,!1);o&&(n.referrer_name=o.get("name"));var i=ce.b.getAccount(n.registrar,!1);i&&(n.registrar_name=i.get("name"));var l=n.name,c=n.network_fee_percentage/100,u=n.lifetime_referrer_fee_percentage/100,p=100-c-u,m=p*n.referrer_rewards_percentage/1e4,d=100-m-u-c,h=t.getIn(["parameters","current_fees","parameters",8,1,"membership_lifetime_fee"])*t.getIn(["parameters","current_fees","scale"])/1e4,f=ce.b.getAccountMemberStatus(this.props.account),b="account.member."+f,g=null;"annual"===f&&(g=s.a.createElement("span",null,"(",s.a.createElement(D.a,{content:"account.member.expires"})," ",s.a.createElement(Ye.a,{time:n.membership_expiration_date}),")"));var _=n.membership_expiration_date;return"1969-12-31T23:59:59"===_?_="Never":"1970-01-01T00:00:00"===_&&(_="N/A"),s.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},s.a.createElement("div",{className:"content-block small-12"},s.a.createElement("div",{className:"tabs-container generic-bordered-box"},s.a.createElement(ae.b,{segmented:!1,setting:"membershipTab",className:"account-tabs",tabsClass:"account-overview bordered-header content-block",contentClass:"padding"},s.a.createElement(ae.a,{title:"account.member.membership"},s.a.createElement("h3",null,s.a.createElement(D.a,{content:b})," ",g),"lifetime"===f?null:s.a.createElement("div",null,s.a.createElement("div",{className:"large-6 medium-8"},s.a.createElement(le.a,{path:"components/AccountMembership",section:"lifetime",feesCashback:100-c,price:{amount:h,asset:a}}),s.a.createElement("div",{className:"button no-margin",onClick:this.upgradeAccount.bind(this,n.id,!0)},s.a.createElement(D.a,{content:"account.member.upgrade_lifetime"}))," ","   ",null),s.a.createElement("br",null),s.a.createElement("hr",null)),s.a.createElement("div",{className:"content-block no-margin"},s.a.createElement("div",{className:"no-margin grid-block vertical large-horizontal"},s.a.createElement("div",{className:"no-margin grid-block large-5"},s.a.createElement("div",{className:"grid-content"},"lifetime"===f?s.a.createElement("div",null,s.a.createElement("h4",null,s.a.createElement(D.a,{content:"account.member.referral_link"})),s.a.createElement(D.a,{content:"account.member.referral_text"}),":",s.a.createElement("h5",null,"https://wallet.bitshares.eu/?r="+n.name)):null,s.a.createElement("h4",null,s.a.createElement(D.a,{content:"account.member.fee_allocation"})),s.a.createElement("table",{className:"table key-value-table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.network_percentage"})),s.a.createElement("td",null,c,"%")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.lifetime_referrer"})," ","  (",s.a.createElement(R.a,{to:"account/"+n.lifetime_referrer_name},n.lifetime_referrer_name),")"),s.a.createElement("td",null,u,"%")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.registrar"})," ","  (",s.a.createElement(R.a,{to:"account/"+n.registrar_name},n.registrar_name),")"),s.a.createElement("td",null,d,"%")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.referrer"})," ","  (",s.a.createElement(R.a,{to:"account/"+n.referrer_name},n.referrer_name),")"),s.a.createElement("td",null,m,"%")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.membership_expiration"})," "),s.a.createElement("td",null,_)))),s.a.createElement("h4",{style:{paddingTop:"1rem"}},s.a.createElement(D.a,{content:"account.member.fees_cashback"})),s.a.createElement("table",{className:"table key-value-table"},s.a.createElement(Qe,{stat_object:n.statistics})))),s.a.createElement("div",{className:"grid-block large-7"},s.a.createElement("div",{className:"grid-content"},s.a.createElement(nt,{account:l,networkFee:c,referrerFee:m,registrarFee:d,lifetimeFee:u,referrerTotalFee:p,maintenanceInterval:t.getIn(["parameters","maintenance_interval"]),vestingThreshold:{amount:t.getIn(["parameters","cashback_vesting_threshold"]),asset:a},vestingPeriod:t.getIn(["parameters","cashback_vesting_period_seconds"])/60/60/24}))))))))))}}]),t}();st.propTypes={account:u.a.ChainAccount.isRequired,gprops:u.a.ChainObject.isRequired,core_asset:u.a.ChainAsset.isRequired},st.defaultProps={gprops:"2.0.0",core_asset:"1.3.0"};var rt=st=Object(p.a)(st),ot=a(62),it=a(13),lt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function pt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var mt=function(e){function t(){return ct(this,t),ut(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return pt(t,s.a.Component),lt(t,[{key:"_onClaim",value:function(e,t){var a=this;t.preventDefault(),ot.a.claimVestingBalance(this.props.account.id,this.props.vb,e).then(function(){"function"==typeof a.props.handleChanged&&a.props.handleChanged()})}},{key:"render",value:function(){var e=this.props.vb;if(!this.props.vb)return null;var t=void 0,a=void 0,n=void 0,r=void 0,o=void 0;return e&&(o=e.balance.amount,t=ce.b.getAsset(e.balance.asset_id),n=e.policy[1].coin_seconds_earned,r=0===(a=e.policy[1].vesting_seconds)?1:n/(a*o)),t&&o?s.a.createElement("div",null,s.a.createElement(D.a,{component:"h5",content:"account.vesting.balance_number",id:e.id}),s.a.createElement("table",{className:"table key-value-table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.cashback"})),s.a.createElement("td",null,s.a.createElement(V.a,{amount:e.balance.amount,asset:e.balance.asset_id}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.earned"})),s.a.createElement("td",null,J.a.format_number(J.a.get_asset_amount(n/86400,t),0)," ",s.a.createElement(D.a,{content:"account.member.coindays"}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.required"})),s.a.createElement("td",null,J.a.format_number(J.a.get_asset_amount(e.balance.amount*a/86400,t),0)," ",s.a.createElement(D.a,{content:"account.member.coindays"}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.remaining"})),s.a.createElement("td",null,J.a.format_number(a*(1-r)/86400||0,2)," days")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.member.available"})),s.a.createElement("td",null,J.a.format_number(100*r,2),"% /"," ",s.a.createElement(V.a,{amount:r*e.balance.amount,asset:t.get("id")}))),s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"2",style:{textAlign:"right"}},s.a.createElement("button",{onClick:this._onClaim.bind(this,!1),className:"button"},s.a.createElement(D.a,{content:"account.member.claim"}))))))):null}}]),t}(),dt=function(e){function t(){ct(this,t);var e=ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={vbs:null},e}return pt(t,s.a.Component),lt(t,[{key:"componentWillMount",value:function(){this.retrieveVestingBalances.call(this,this.props.account.get("id"))}},{key:"componentWillUpdate",value:function(e){var t=e.account.get("id");t!==this.props.account.get("id")&&this.retrieveVestingBalances.call(this,t)}},{key:"retrieveVestingBalances",value:function(e){var t=this;e=e||this.props.account.get("id"),it.Apis.instance().db_api().exec("get_vesting_balances",[e]).then(function(e){t.setState({vbs:e})}).catch(function(e){console.log("error:",e)})}},{key:"render",value:function(){var e=this,t=this.state.vbs;if(!t||!this.props.account||!this.props.account.get("vesting_balances"))return null;var a=this.props.account.toJS(),n=t.map(function(t){if(t.balance.amount)return s.a.createElement(mt,{key:t.id,vb:t,account:a,handleChanged:e.retrieveVestingBalances.bind(e)})}).filter(function(e){return!!e});return s.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},s.a.createElement("div",{className:"content-block small-12"},s.a.createElement("div",{className:"tabs-container generic-bordered-box"},s.a.createElement(ae.b,{segmented:!1,setting:"vestingTab",className:"account-tabs",tabsClass:"account-overview bordered-header content-block",contentClass:"padding"},s.a.createElement(ae.a,{title:"account.vesting.title"},s.a.createElement(D.a,{content:"account.vesting.explain",component:"p"}),n.length?n:s.a.createElement("h4",{style:{paddingTop:"1rem"}},s.a.createElement(D.a,{content:"account.vesting.no_balances"})))))))}}]),t}();dt.VestingBalance=mt;var ht=dt,ft=a(156),bt=a(284),gt=a(55),_t=a(17),vt=a(85),yt=a(478),Et=a.n(yt),wt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var kt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a._getInitialState(),a.onPasswordEnter=a.onPasswordEnter.bind(a),a.onKeyDown=a.onKeyDown.bind(a),a.onCancel=a.onCancel.bind(a),a.onClose=a.onClose.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),wt(t,[{key:"_getInitialState",value:function(){return{isShowQrcode:!1,keyString:null}}},{key:"show",value:function(){U.a.publish(this.props.modalId,"open")}},{key:"onCancel",value:function(){U.a.publish(this.props.modalId,"close"),this.onClose()}},{key:"onClose",value:function(){this.refs.password_input&&(this.refs.password_input.value=""),this.setState(this._getInitialState())}},{key:"onPasswordEnter",value:function(e){e.preventDefault();var t=this.refs.password_input.value,a=this.props.keyValue;if(null!=t&&""!=t){if(void 0!==a&&null!=a&&""!=a){var n=ce.a.fromSeed(t).encryptToHex(a);this.setState({isShowQrcode:!0,keyString:n})}}else this.setState({isShowQrcode:!0,keyString:a})}},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.onPasswordEnter(e)}},{key:"render",value:function(){var e=this,t=null;return this.state.isShowQrcode&&(t={textAlign:"center"}),s.a.createElement(F.a,{onClose:this.onClose,id:this.props.modalId,ref:"modal",overlay:!0,overlayClose:!1},s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{style:{margin:"1.5rem 0"}},s.a.createElement(D.a,{component:"h4",content:"modal.qrcode.title"})),s.a.createElement("form",{className:"full-width",style:{margin:"0 3.5rem"},onSubmit:this.onPasswordEnter,noValidate:!0},s.a.createElement("div",{className:"form-group"},this.state.isShowQrcode?s.a.createElement("section",{style:t},s.a.createElement("span",{style:{background:"#fff",padding:".75rem",display:"inline-block"}},s.a.createElement(Et.a,{size:256,value:this.state.keyString}))):s.a.createElement("section",null,s.a.createElement("label",{className:"left-label"},s.a.createElement(D.a,{unsafe:!0,content:"modal.qrcode.input_message"})),s.a.createElement("input",{name:"password",type:"text",onFocus:function(){e.refs.password_input.setAttribute("type","password")},ref:"password_input",autoComplete:"off",onKeyDown:this.onKeyDown}))),s.a.createElement("div",{style:t},s.a.createElement("div",{className:"button-group"},0==this.state.isShowQrcode?s.a.createElement("button",{className:"button","data-place":"bottom","data-html":!0,onClick:this.onPasswordEnter},s.a.createElement(D.a,{content:"modal.ok"})):null,s.a.createElement("button",{className:"button primary hollow","data-place":"bottom","data-html":!0,onClick:this.onCancel},s.a.createElement(D.a,{content:"cancel"})))))))}}]),t}();kt.propTypes={modalId:v.a.string.isRequired,keyValue:v.a.string},kt.defaultProps={modalId:"qr_code_password_modal"};var xt=kt,At=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ot=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),At(t,[{key:"_getInitialState",value:function(){return{wif:null}}},{key:"reset",value:function(){this.setState(this._getInitialState())}},{key:"componentDidMount",value:function(){var e=this,t="key_view_modal"+this.props.pubkey;U.a.subscribe(t,function(a,n){a===t&&"close"===n&&e.reset()})}},{key:"render",value:function(){var e="key_view_modal"+this.props.pubkey,t=vt.a.getState().keys;if(!t.has(this.props.pubkey))return s.a.createElement("span",null,this.props.children);var n=t.get(this.props.pubkey);return s.a.createElement("span",null,s.a.createElement("a",{onClick:this.onOpen.bind(this)},this.props.children),s.a.createElement(F.a,{ref:e,id:e,overlay:!0,overlayClose:!1},s.a.createElement("h3",null,s.a.createElement(D.a,{content:"account.perm.key_viewer"})),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement("div",{className:"content-block"},s.a.createElement("div",{className:"grid-content"},s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.perm.public"})),this.props.pubkey),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block grid-content"},s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.perm.private"})),s.a.createElement("div",null,this.state.wif?s.a.createElement("span",null,s.a.createElement("p",{style:{fontWeight:600}},this.state.wif),s.a.createElement("div",{className:"button-group"},s.a.createElement("div",{className:"button",onClick:this.onHide.bind(this)},"hide"),s.a.createElement("div",{className:"clickable",onClick:this.showQrCode.bind(this)},s.a.createElement("img",{style:{height:50},src:a(1991)})))):s.a.createElement("span",null,s.a.createElement("div",{className:"button",onClick:this.onShow.bind(this)},s.a.createElement(D.a,{content:"account.perm.show"}))))),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block grid-content"},s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.perm.brain"})),null==n.brainkey_sequence?"Non-deterministic":n.brainkey_sequence),s.a.createElement("br",null),n.import_account_names&&n.import_account_names.length?s.a.createElement("div",{className:"grid-block grid-content"},s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.perm.from"})),n.import_account_names.join(", "),s.a.createElement("br",null)):null)),s.a.createElement("div",{className:"button-group"},s.a.createElement("div",{onClick:this.onClose.bind(this),className:" button"},s.a.createElement(D.a,{content:"transfer.close"})))),s.a.createElement(xt,{ref:"qrmodal",keyValue:this.state.wif}))}},{key:"onOpen",value:function(){var e="key_view_modal"+this.props.pubkey;U.a.publish(e,"open")}},{key:"onClose",value:function(){this.reset();var e="key_view_modal"+this.props.pubkey;U.a.publish(e,"close")}},{key:"onShow",value:function(){var e=this;gt.a.unlock().then(function(){var t=_t.a.getPrivateKey(e.props.pubkey);e.setState({wif:t.toWif()})}).catch(function(){})}},{key:"onHide",value:function(){this.setState({wif:null})}},{key:"showQrCode",value:function(){this.refs.qrmodal.show()}}]),t}();Ot.propTypes={pubkey:v.a.string.isRequired};var Ct=Ot,Nt=a(175),St=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function It(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Tt=function(e){function t(){return Pt(this,t),jt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return It(t,s.a.Component),St(t,[{key:"shouldComponentUpdate",value:function(e){return!J.a.are_equal_shallow(e,this.props)}},{key:"_lookUpPubKeyForAddress",value:function(e){return Nt.a.getState().addresses.get(e)}},{key:"render",value:function(){var e=void 0,t=void 0,a=void 0,n="_accounts",r=this.props.pubkey,o=vt.a.getState().keys,i=!1;return this.props.account?(e=this.props.account.get("name"),t=this.props.account.get("id"),a=s.a.createElement(R.a,{to:"/account/"+e+"/permissions"},e)):r?(e=t=r,a=s.a.createElement(Ct,{pubkey:r},r),n="_keys",i=o.has(r)):this.props.address&&(r=this._lookUpPubKeyForAddress(this.props.address),t=this.props.address,a=r?s.a.createElement(Ct,{pubkey:r},r):this.props.address,n="_addresses",i=o.has(r)),s.a.createElement("tr",{key:e},s.a.createElement("td",null,this.props.account?s.a.createElement(bt.a,{size:{height:30,width:30},account:e}):r?s.a.createElement("div",{className:"account-image"},s.a.createElement(Ct,{pubkey:r},s.a.createElement(Ne.a,{name:"key",title:"icons.key",size:"4x"}))):null),s.a.createElement("td",{className:(i?"my-key":"")+" pub-key"},a),s.a.createElement("td",null,this.props.weights[t]),s.a.createElement("td",null,s.a.createElement("button",{className:"button",onClick:this.props.onRemoveItem.bind(this,t,n)},s.a.createElement(D.a,{content:"account.votes.remove_witness"}))))}}]),t}();Tt.propTypes={account:v.a.object,pubkey:v.a.string,address:v.a.string,onRemoveItem:v.a.func.isRequired,weights:v.a.object};var Mt=function(e){function t(e){Pt(this,t);var a=jt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected_item:null,item_name_input:"",weight_input:"",error:null},a.onItemChange=a.onItemChange.bind(a),a.onItemAccountChange=a.onItemAccountChange.bind(a),a.onAddItem=a.onAddItem.bind(a),a}return It(t,s.a.Component),St(t,[{key:"onItemChange",value:function(e){this.setState({item_name_input:e})}},{key:"onItemAccountChange",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var a=this.props.validateAccount(e);if(null===a)return;"string"==typeof a?this.setState({error:a}):a.then(function(e){return t.setState({error:e})})}}},{key:"onWeightChanged",value:function(e){var t=e.target.value.trim();this.setState({weight_input:parseInt(t)})}},{key:"onAddItem",value:function(e){if(e){this.setState({selected_item:null,item_name_input:"",weight_input:"",error:null});var t="string"==typeof e?e:e.get("id");this.props.onAddItem(t,this.state.weight_input)}}},{key:"onWeightKeyDown",value:function(e){13===e.keyCode&&this.state.weight_input&&this.state.selected_item&&this.onAddItem(this.state.selected_item)}},{key:"render",value:function(){var e=this,t=0,a=this.props.accounts.filter(function(e){return!!e}).sort(function(e,t){return e.get("name")>t.get("name")?1:e.get("name")<t.get("name")?-1:0}).map(function(a){return s.a.createElement(Tt,{key:t++,account:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),n=this.props.keys.map(function(a){return s.a.createElement(Tt,{key:t++,pubkey:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),r=this.props.addresses.map(function(a){return s.a.createElement(Tt,{key:t++,address:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),o=this.state.error;!o&&this.state.selected_item&&-1!==this.props.accounts.indexOf(this.state.selected_item)&&(o=Q.a.translate("account.perm.warning3")),!o&&this.state.item_name_input&&-1!==this.props.keys.indexOf(this.state.item_name_input)&&(o=Q.a.translate("account.perm.warning4"));var i=["10%","70%","30%","10%"];return s.a.createElement("div",null,s.a.createElement(Ae.a,{label:this.props.label,error:o,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:"account.votes.add_witness",tabIndex:this.props.tabIndex,allowPubKey:!0,disableActionButton:!this.state.weight_input,allowUppercase:!0},s.a.createElement("input",{value:this.state.weight_input,onChange:this.onWeightChanged.bind(this),className:"weight-input",type:"number",autoComplete:"off",placeholder:Q.a.translate("account.perm.weight"),onKeyDown:this.onWeightKeyDown.bind(this),tabIndex:this.props.tabIndex+1})),s.a.createElement("div",{style:{paddingTop:"2rem"}},s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{style:{width:i[0]}}),s.a.createElement("th",{style:{width:i[1]}},s.a.createElement(D.a,{content:"account.perm.acct_or_key"})),s.a.createElement("th",{style:{width:i[2]}},s.a.createElement(D.a,{content:"account.perm.weight"})),s.a.createElement("th",{style:{width:i[3]}},s.a.createElement(D.a,{content:"account.perm.action"})))),s.a.createElement("tbody",null,a,n,r))))}}]),t}();Mt.propTypes={accounts:u.a.ChainObjectsList,onAddItem:v.a.func.isRequired,onRemoveItem:v.a.func.isRequired,validateAccount:v.a.func,label:v.a.string.isRequired,placeholder:v.a.string,tabIndex:v.a.number,weights:v.a.object};var Rt=Object(p.a)(Mt,{autosubscribe:!1}),Bt=a(329),Dt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Lt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={validPassword:!1,pass:null,generatedPassword:"P"+ce.o.get_random_key().toWif().toString()},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Dt(t,[{key:"onSubmit",value:function(){}},{key:"onPasswordChange",value:function(e){var t=e.valid,a=this.props.account.get("name"),n=t?_t.a.generateKeyFromPassword(a,"active",e.value).pubKey:null,s=t?_t.a.generateKeyFromPassword(a,"owner",e.value).pubKey:null,r=t?_t.a.generateKeyFromPassword(a,"memo",e.value).pubKey:null;this.setState({validPassword:e.valid,pass:e.value}),this.props.onSetPasswordKeys({active:n,owner:s,memo:r})}},{key:"checkKeyUse",value:function(e,t){return!!e&&("memo"===t?e===this.props.memoKey:this.props[t+"Keys"].reduce(function(t,a){return a===e||t},!1))}},{key:"_onUseKey",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])this.props["active"===e?"onRemoveActive":"onRemoveOwner"](this.props[e],"_keys");else if(this.props[e]){var t={active:this.props.account.getIn(["active","weight_threshold"]),owner:this.props.account.getIn(["owner","weight_threshold"])};console.log("key",this.props[e],"weights",t,"weight of role:",t[e]),this.props["active"===e?"onAddActive":"owner"===e?"onAddOwner":"onSetMemo"](this.props[e],t[e])}}},{key:"render",value:function(){var e=this.checkKeyUse(this.props.active&&this.props.active,"active"),t=this.checkKeyUse(this.props.owner&&this.props.owner,"owner"),a=this.checkKeyUse(this.props.memo&&this.props.memo,"memo"),n=Q.a.translate("account.perm.use_text"),r=Q.a.translate("account.perm.remove_text");return s.a.createElement("div",null,s.a.createElement("p",{style:{maxWidth:"800px"}},s.a.createElement(D.a,{content:"account.perm.password_model_1"})),s.a.createElement("p",{style:{maxWidth:"800px"}},s.a.createElement(D.a,{content:"wallet.password_model_1"})),s.a.createElement("p",{style:{maxWidth:"800px"}},s.a.createElement(D.a,{unsafe:!0,content:"wallet.password_model_2"})),s.a.createElement("div",{className:"divider"}),s.a.createElement("form",{style:{maxWidth:"40rem"},onSubmit:this.onSubmit.bind(this),noValidate:!0},s.a.createElement("label",{className:"left-label"},s.a.createElement(D.a,{content:"wallet.generated"})),s.a.createElement("p",null,this.state.generatedPassword),s.a.createElement("p",{style:{fontWeight:"bold"}},s.a.createElement(D.a,{content:"account.perm.password_model_2"})),s.a.createElement(Bt.a,{ref:"password",confirmation:!0,onChange:this.onPasswordChange.bind(this),noLabel:!0,passwordLength:12,checkStrength:!0})),s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:e?"in-use":""},s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.perm.new_active"}),":"),s.a.createElement("td",null,this.props.active),s.a.createElement("td",{className:"text-right"},s.a.createElement("div",{className:"button",onClick:this._onUseKey.bind(this,"active",e)},e?r:n))),s.a.createElement("tr",{className:t?"in-use":""},s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.perm.new_owner"}),":"),s.a.createElement("td",null,this.props.owner),s.a.createElement("td",{className:"text-right"},s.a.createElement("div",{className:"button",onClick:this._onUseKey.bind(this,"owner",t)},t?r:n))),s.a.createElement("tr",{className:a?"in-use":""},s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.perm.new_memo"}),":"),s.a.createElement("td",null,this.props.memo),s.a.createElement("td",{className:"text-right"},s.a.createElement("div",{className:"button",style:{visibility:a?"hidden":""},onClick:this._onUseKey.bind(this,"memo",a)},n))))),a?s.a.createElement("p",{style:{maxWidth:"800px",paddingTop:10},className:"has-error"},s.a.createElement(D.a,{content:"account.perm.memo_warning"})):null)}}]),t}(),qt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ft=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),qt(t,[{key:"isValidPubKey",value:function(e){return!!ce.i.fromPublicKeyString(e)}},{key:"onInputChanged",value:function(e){var t=e.target.value.trim();this.props.onChange(t)}},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.onAction(e)}},{key:"onAction",value:function(e){e.preventDefault(),this.props.onAction&&this.state.valid&&!this.props.disableActionButton&&this.props.onAction(e)}},{key:"render",value:function(){var e=this.props.error;e||!this.props.value||this.isValidPubKey(this.props.value)||(e="Not a valid public key");var t=ie()("button",{disabled:e||this.props.disableActionButton}),a=vt.a.getState().keys,n=this.isValidPubKey(this.props.value)&&a.has(this.props.value);return s.a.createElement("div",{className:"pubkey-input no-overflow"},s.a.createElement("div",{className:"content-area"},s.a.createElement("div",{className:"header-area"},!e&&this.props.value&&this.isValidPubKey(this.props.value)?s.a.createElement("label",{className:"right-label"},s.a.createElement(D.a,{content:"account.perm.valid_pub"})):null,s.a.createElement(D.a,{className:"left-label",component:"label",content:this.props.label})),s.a.createElement("div",{className:"input-area"},s.a.createElement("span",{className:"inline-label"},s.a.createElement("div",{className:"account-image"},s.a.createElement(Ct,{pubkey:this.props.value},s.a.createElement(Ne.a,{name:"key",title:"icons.key",size:"4x"}))),s.a.createElement("input",{type:"text",className:n?"my-key":"",value:this.props.value,placeholder:this.props.placeholder||counterpart.translate("account.public_key"),ref:"user_input",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),this.props.onAction?s.a.createElement("button",{className:t,onClick:this.onAction.bind(this)},s.a.createElement(D.a,{content:this.props.action_label})):null)),s.a.createElement("div",{className:"error-area has-error"},s.a.createElement("span",null,e))))}}]),t}();Ft.propTypes={label:v.a.string.isRequired,value:v.a.string,error:v.a.string,placeholder:v.a.string,onChange:v.a.func,onAction:v.a.func,tabIndex:v.a.number,disableActionButton:v.a.bool};var Vt=Ft,Wt=a(1781),Ut=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var zt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.onPublish=a.onPublish.bind(a),a.onReset=a.onReset.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ut(t,[{key:"componentWillMount",value:function(){this.updateAccountData(this.props.account),d.a.getFinalFeeAsset(this.props.account,"account_update")}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&this.updateAccountData(e.account)}},{key:"permissionsFromImmutableObj",value:function(e){var t=e.get("weight_threshold"),a=e.get("account_auths"),n=e.get("key_auths"),s=e.get("address_auths"),r=a.map(function(e){return e.get(0)}),o=n.map(function(e){return e.get(0)}),i=s.map(function(e){return e.get(0)}),l=a.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},{});return l=n.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},l),{threshold:t,accounts:r,keys:o,addresses:i,weights:l=s.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},l)}}},{key:"permissionsToJson",value:function(e,t,a,n,s){var r={weight_threshold:e};return r.account_auths=t.sort(J.a.sortID).map(function(e){return[e,s[e]]}).toJS(),r.key_auths=a.sort(J.a.sortID).map(function(e){return[e,s[e]]}).toJS(),r.address_auths=n.sort(J.a.sortID).map(function(e){return[e,s[e]]}).toJS(),r}},{key:"updateAccountData",value:function(e){var t=this.permissionsFromImmutableObj(e.get("active")),a=this.permissionsFromImmutableObj(e.get("owner")),n=e.get("options").get("memo_key"),s={active_accounts:t.accounts,active_keys:t.keys,active_addresses:t.addresses,owner_accounts:a.accounts,owner_keys:a.keys,owner_addresses:a.addresses,active_weights:t.weights,owner_weights:a.weights,active_threshold:t.threshold,owner_threshold:a.threshold,memo_key:n,prev_active_accounts:t.accounts,prev_active_keys:t.keys,prev_active_addresses:t.addresses,prev_owner_accounts:a.accounts,prev_owner_keys:a.keys,prev_owner_addresses:a.addresses,prev_active_weights:t.weights,prev_owner_weights:a.weights,prev_active_threshold:t.threshold,prev_owner_threshold:a.threshold,prev_memo_key:n};this.setState(s)}},{key:"isChanged",value:function(){var e=this.state;return e.active_accounts!==e.prev_active_accounts||e.active_keys!==e.prev_active_keys||e.active_addresses!==e.prev_active_addresses||e.owner_accounts!==e.prev_owner_accounts||e.owner_keys!==e.prev_owner_keys||e.owner_addresses!==e.prev_owner_addresses||e.active_threshold!==e.prev_active_threshold||e.owner_threshold!==e.prev_owner_threshold||e.memo_key!==e.prev_memo_key}},{key:"didChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;if("memo"===e)return t.memo_key!==t.prev_memo_key;var a=!1;return["_keys","_active_addresses","_accounts","_threshold"].forEach(function(n){var s=e+n;t[s]!==t["prev_"+s]&&(a=!0)}),a}},{key:"onPublish",value:function(){var e=this.state,t=this.props.account.toJS();t.fee={amount:0,asset_id:d.a.getFinalFeeAsset(t.id,"account_update")};var a={account:t.id};if(this.didChange("active")&&(a.active=this.permissionsToJson(e.active_threshold,e.active_accounts,e.active_keys,e.active_addresses,e.active_weights)),this.didChange("owner")&&(a.owner=this.permissionsToJson(e.owner_threshold,e.owner_accounts,e.owner_keys,e.owner_addresses,e.owner_weights)),this.didChange("owner")&&0===e.owner_keys.size&&0===e.owner_addresses.size&&1===e.owner_accounts.size&&e.owner_accounts.first()===t.id)return z.a.addNotification({message:"Setting your owner permissions like this will render your account permanently unusable. Please make sure you know what you're doing before modifying account authorities!",level:"error",autoDismiss:10});e.memo_key&&this.didChange("memo")&&this.isValidPubKey(e.memo_key)&&(a.new_options=this.props.account.get("options").toJS(),a.new_options.memo_key=e.memo_key),ft.a.updateAccount(a)}},{key:"isValidPubKey",value:function(e){return!!ce.i.fromPublicKeyString(e)}},{key:"onReset",value:function(){var e=this.state;this.setState({active_accounts:e.prev_active_accounts,active_keys:e.prev_active_keys,active_addresses:e.prev_active_addresses,owner_accounts:e.prev_owner_accounts,owner_keys:e.prev_owner_keys,owner_addresses:e.prev_owner_addresses,active_weights:e.prev_active_weights,owner_weights:e.prev_owner_weights,active_threshold:e.prev_active_threshold,owner_threshold:e.prev_owner_threshold,memo_key:e.prev_memo_key})}},{key:"onAddItem",value:function(e,t,a){var n={},s=e+(J.a.is_object_id(t)?"_accounts":"_keys");n[s]=this.state[s].push(t),this.state[e+"_weights"][t]=a,this.setState(n)}},{key:"onRemoveItem",value:function(e,t,a){console.log("onRemoveItem",e,t,a);var n={},s=e+a;n[s]=this.state[s].filter(function(e){return e!==t}),this.setState(n)}},{key:"onThresholdChanged",value:function(e,t){var a=parseInt(t.target.value.trim()),n={};n[e]=a,this.setState(n)}},{key:"validateAccount",value:function(e,t){return null}},{key:"sumUpWeights",value:function(e,t,a,n){var s=e.reduce(function(e,t){return e+n[t]},0);return s=t.reduce(function(e,t){return e+n[t]},s),a.reduce(function(e,t){return e+n[t]},s)}},{key:"onMemoKeyChanged",value:function(e){this.setState({memo_key:e})}},{key:"onSetPasswordKeys",value:function(e){var t={};(arguments.length>1&&void 0!==arguments[1]?arguments[1]:["active","owner","memo"]).forEach(function(a){t["password_"+a]=e[a]}),this.setState(t)}},{key:"render",value:function(){var e=void 0,t=void 0,a=this.state,n=a.active_accounts,r=a.active_keys,o=a.active_addresses,i=a.active_weights,l=this.state,c=l.owner_accounts,u=l.owner_keys,p=l.owner_addresses,m=l.owner_weights,d=this.state.active_threshold>0?this.state.active_threshold:0,h=this.sumUpWeights(n,r,o,i);this.didChange("active")&&h<d&&(e=Q.a.translate("account.perm.warning1",{weights_total:h,threshold:d})),d=this.state.owner_threshold>0?this.state.owner_threshold:0,h=this.sumUpWeights(c,u,p,m),this.didChange("owner")&&h<d&&(t=Q.a.translate("account.perm.warning2",{weights_total:h,threshold:d}));var b="button"+(!e&&!t&&this.isChanged()&&this.isValidPubKey(this.state.memo_key)?"":" disabled"),g="button"+(this.isChanged()?"":" disabled"),_=f.a.Set();return _=_.add(this.props.account.get("id")),s.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},s.a.createElement("div",{className:"content-block small-12"},s.a.createElement("div",{className:"tabs-container generic-bordered-box"},s.a.createElement(ae.b,{defaultActiveTab:1,segmented:!1,setting:"permissionsTab",className:"account-tabs",tabsClass:"account-overview bordered-header content-block",contentClass:"padding",actionButtons:s.a.createElement("div",{className:"action-buttons"},s.a.createElement("button",{className:g,onClick:this.onReset,tabIndex:8},s.a.createElement(D.a,{content:"account.perm.reset"})),s.a.createElement("button",{className:b,onClick:this.onPublish,tabIndex:9},s.a.createElement(D.a,{content:"account.perm.publish"})))},s.a.createElement(ae.a,{title:"account.perm.active"},s.a.createElement(le.a,{path:"components/AccountPermActive"}),s.a.createElement("form",{className:"threshold"},s.a.createElement("label",{className:"horizontal"},s.a.createElement(D.a,{content:"account.perm.threshold"})," ","   ",s.a.createElement("input",{type:"number",placeholder:"0",size:"5",value:this.state.active_threshold,onChange:this.onThresholdChanged.bind(this,"active_threshold"),autoComplete:"off",tabIndex:1}))),s.a.createElement(Rt,{label:"account.perm.add_permission_label",accounts:n,keys:r,weights:i,addresses:o,validateAccount:this.validateAccount.bind(this,"active"),onAddItem:this.onAddItem.bind(this,"active"),onRemoveItem:this.onRemoveItem.bind(this,"active"),placeholder:Q.a.translate("account.perm.account_name_or_key"),tabIndex:2}),s.a.createElement("br",null),e?s.a.createElement("div",{className:"content-block has-error"},e):null),s.a.createElement(ae.a,{title:"account.perm.owner"},s.a.createElement(le.a,{path:"components/AccountPermOwner"}),s.a.createElement("form",{className:"threshold"},s.a.createElement("label",{className:"horizontal"},s.a.createElement(D.a,{content:"account.perm.threshold"})," ","   ",s.a.createElement("input",{type:"number",placeholder:"0",size:"5",value:this.state.owner_threshold,onChange:this.onThresholdChanged.bind(this,"owner_threshold"),autoComplete:"off",tabIndex:4}))),s.a.createElement(Rt,{label:"account.perm.add_permission_label",accounts:c,keys:u,weights:m,addresses:p,validateAccount:this.validateAccount.bind(this,"owner"),onAddItem:this.onAddItem.bind(this,"owner"),onRemoveItem:this.onRemoveItem.bind(this,"owner"),placeholder:Q.a.translate("account.perm.account_name_or_key"),tabIndex:5}),s.a.createElement("br",null),t?s.a.createElement("div",{className:"content-block has-error"},t):null),s.a.createElement(ae.a,{title:"account.perm.memo_key"},s.a.createElement(le.a,{style:{maxWidth:"800px"},path:"components/AccountPermMemo"}),s.a.createElement(Vt,{ref:"memo_key",value:this.state.memo_key,label:"account.perm.memo_public_key",placeholder:"Public Key",onChange:this.onMemoKeyChanged.bind(this),tabIndex:7})),s.a.createElement(ae.a,{title:"account.perm.password_model"},s.a.createElement(Lt,{active:this.state.password_active,owner:this.state.password_owner,memo:this.state.password_memo,onSetPasswordKeys:this.onSetPasswordKeys.bind(this),account:this.props.account,activeKeys:this.state.active_keys,ownerKeys:this.state.owner_keys,memoKey:this.state.memo_key,onAddActive:this.onAddItem.bind(this,"active"),onRemoveActive:this.onRemoveItem.bind(this,"active"),onAddOwner:this.onAddItem.bind(this,"owner"),onRemoveOwner:this.onRemoveItem.bind(this,"owner"),onSetMemo:this.onMemoKeyChanged.bind(this)}))),s.a.createElement("div",{className:"tab-content",style:{padding:10}},s.a.createElement("div",{className:"divider"}),s.a.createElement(Wt.a,{accountsList:_,limit:25,compactView:!1,filter:"account_update",style:{paddingBottom:"2rem"}})))))}}]),t}(),Jt=a(22),Gt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Kt="-----BEGIN BITSHARES SIGNED MESSAGE-----",Ht="-----END BITSHARES SIGNED MESSAGE-----",Zt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Gt(e,[{key:"parseMessage",value:function(e){var t=void 0,a=void 0,n=void 0,s=void 0;try{t=(a=(t=e.split(Kt)[1]).split("-----BEGIN META-----"))[0].replace(/^\n|\n$/g,""),a=(n=a[1].split("-----BEGIN SIGNATURE-----"))[0].trim(),n=n[1].split(Ht)[0].trim(),s=t+"\n"+a}catch(e){throw new Error(Q.a.translate("account.signedmessages.invalidformat"))}var r=void 0,o=void 0,i=void 0,l=void 0;if(a)try{r=(r=a.split("account="))[1].split("\n")[0].trim(),o=(o=a.split("memokey="))[1].split("\n")[0].trim(),i=(i=a.split("block="))[1].split("\n")[0].trim(),l=(l=a.split("timestamp="))[1].split("\n")[0].trim()}catch(e){throw new Error(Q.a.translate("account.signedmessages.invalidformat"))}return{content:t,meta:{account:r,key:o,block:i,timestamp:l},signed:s,signature:n}}},{key:"verifyMemo",value:function(e){var t=void 0;if(t="string"==typeof e||e instanceof String?this.parseMessage(e):e,null==ce.b.getAccount(t.meta.account))throw new Error(Q.a.translate("account.signedmessages.invaliduser"));var a=!1;try{a=ce.k.fromHex(t.signature).verifyBuffer(t.signed,ce.i.fromPublicKeyString(t.meta.key))}catch(e){throw new Error(Q.a.translate("account.signedmessages.errorverifying"))}if(!a)throw new Error(Q.a.translate("account.signedmessages.invalidsignature"));return t}},{key:"signMessage",value:function(e,t){return new Promise(function(a,n){gt.a.unlock().then(function(){try{var s=e.get("options").get("memo_key");/111111111111111111111/.test(s)&&(s=null);var r=void 0;if(t&&s&&!(r=_t.a.getPrivateKey(s)))throw new Error(Q.a.translate("account.signedmessages.invalidkey"));var o=ce.b.getObject("2.1.0").get("last_irreversible_block_num"),i=new Date,l="account="+e.get("name")+"\nmemokey="+s+"\nblock="+o+"\ntimestamp="+i.toUTCString(),c=t+"\n"+l;setTimeout(function(){try{var e=ce.k.signBuffer(c,r,s),o=Kt+"\n"+t+"\n-----BEGIN META-----\n"+l+"\n-----BEGIN SIGNATURE-----\n"+e.toHex()+"\n"+Ht;a(o)}catch(e){n(e)}},0)}catch(e){n(e)}}).catch(function(e){n(e)})})}}]),e}(),Qt=Jt.a.createActions(Zt),Yt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Xt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={message:a.props.message,messageParsed:null,showRawMessage:!1,noVerification:a.props.noVerification,verified:null,notification:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Yt(t,[{key:"_verifyMessage",value:function(e){var t=this;this.setState({message:e,messageParsed:null,verified:null});var a=null;try{a=Qt.parseMessage(e),this.setState({verified:null,messageParsed:a}),this.state.noVerification||(this.setState({verified:null,notification:Q.a.translate("account.signedmessages.verifying")}),setTimeout(function(){try{Qt.verifyMemo(a),t.setState({verified:!0,notification:""})}catch(e){t._warning(e.message),t.setState({verified:!1})}},0))}catch(e){this._warning(e.message)}}},{key:"componentWillMount",value:function(){this._verifyMessage(this.state.message)}},{key:"componentWillReceiveProps",value:function(e){var t=e.message;void 0!=t&&null!=t&&t==this.state.message||this._verifyMessage(t)}},{key:"_warning",value:function(e){this.setState({notification:e})}},{key:"_toggleRawMessage",value:function(){this.setState({showRawMessage:!this.state.showRawMessage})}},{key:"render",value:function(){var e=void 0,t=void 0;null!=this.state.messageParsed&&(null==this.state.verified?(t="#FFF",e="Unverified message from "+this.state.messageParsed.meta.account):this.state.verified?(t="#FFF",e="Verified message from "+this.state.messageParsed.meta.account):(t="#F00",e="Refuted message, indicated sender "+this.state.messageParsed.meta.account));var a=null!=this.props.message&&""!=this.props.message,n=this.state.notification&&""!=this.state.notification;return s.a.createElement("div",{style:{color:"gray",margin:"10px 10px"}},null!=this.state.messageParsed&&s.a.createElement("fieldset",{style:{borderColor:t}},s.a.createElement("legend",{style:{color:"white",weight:"bold"}},e),s.a.createElement("pre",{style:{position:"relative",width:"100%",display:"table"}},this.state.messageParsed.content,n&&s.a.createElement("div",{style:{textAlign:"center",display:"table-cell",verticalAlign:"middle",position:"absolute",width:"calc(100% - 30px)",height:"calc(100% + 15px)",top:"0px",right:"30px",backgroundColor:"rgba(50,50,50,0.5)"},id:"overlay"},this.state.notification)),s.a.createElement("span",{style:{fontSize:"small",float:"right"}},"Signed on ",this.state.messageParsed.meta.timestamp," "," ",s.a.createElement("button",{className:"button",type:"button",style:{fontSize:"small",float:"right",padding:"0px 0px",background:"#777"},onClick:this._toggleRawMessage.bind(this)},"🔍")),this.state.showRawMessage&&s.a.createElement("br",null),this.state.showRawMessage&&s.a.createElement("br",null),this.state.showRawMessage&&s.a.createElement("div",{style:{overflow:"auto",width:"calc(100%)",maxWidth:"1000px"}},s.a.createElement("pre",null,this.state.message))),a&&null==this.state.messageParsed&&s.a.createElement("fieldset",{style:{borderColor:"#F00"}},s.a.createElement("legend",{style:{color:"red",weight:"bold"},className:"error"},"Error while parsing message, please check syntax from message below"),s.a.createElement("pre",null,this.props.message)))}}]),t}();Xt.defaultProps={noVerification:!1};var $t=Xt,ea=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ta=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={tabsm_memo_key:a.props.account.get("options").get("memo_key"),tabsm_popup:"",tabsm_message_text:"",tabsm_message_signed:"",tabvm_popup:"",tabvm_message_signed:"",tabvm_verified:null,tabvm_message_signed_and_verified:null,tabvm_flag_verifyonchange:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ea(t,[{key:"_tabSMSignAction",value:function(e){var t=this;e.preventDefault();try{var a=this.props.account.get("options").get("memo_key");if(this.state.tabsm_memo_key!==a)throw Error(Q.a.translate("account.signedmessages.keymismatch"));this.state.tabsm_message_text&&(this._tabSMPopMessage(Q.a.translate("account.signedmessages.signing"),0),Qt.signMessage(this.props.account,this.state.tabsm_message_text).then(function(e){t.setState({tabsm_message_signed:e,tabsm_popup:""})}).catch(function(e){t._tabSMPopMessage(e.message),t.setState({tabsm_message_signed:null})}))}catch(e){this._tabSMPopMessage(e.message),this.setState({tabsm_message_signed:null})}}},{key:"_tabSMHandleChange",value:function(e){this.setState({tabsm_message_text:e.target.value})}},{key:"_tabSMHandleChangeKey",value:function(e){this.setState({tabsm_memo_key:e})}},{key:"_tabSMCopyToClipBoard",value:function(e){if(""!==e.target.value){e.target.focus(),e.target.select();try{var t=document.execCommand("copy");this._tabSMPopMessage(t?Q.a.translate("account.signedmessages.copysuccessful"):Q.a.translate("account.signedmessages.copyunsuccessful"))}catch(e){this._tabSMPopMessage(Q.a.translate("account.signedmessages.copyunsuccessful"))}}}},{key:"_tabSMPopMessage",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabsm_popup:e}),""!==e&&a>0&&setTimeout(function(){t.setState({tabsm_popup:""})},a)}},{key:"_tabVMAction",value:function(e){var t=this;e.preventDefault(),this.setState({tabvm_message_signed_and_verified:null,tabvm_verified:!1}),this.state.tabvm_message_signed&&(this._tabVMPopMessage(Q.a.translate("account.signedmessages.verifying"),0),setTimeout(function(){try{var e=Qt.verifyMemo(t.state.tabvm_message_signed);t.setState({tabvm_message_signed_and_verified:e,tabvm_verified:!0,tabvm_popup:""})}catch(e){t._tabVMPopMessage(e.message),t.setState({tabvm_message_signed_and_verified:null,tabvm_verified:!1})}},0))}},{key:"_tabVMHandleChange",value:function(e){this.setState({tabvm_message_signed:e.target.value,tabvm_verified:!1,tabvm_message_signed_and_verified:null}),this.state.tabvm_flag_verifyonchange&&this._tabVMAction(e)}},{key:"_tabVMPopMessage",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabvm_popup:e}),""!==e&&a>0&&setTimeout(function(){t.setState({tabvm_popup:""})},a)}},{key:"_tabVMToggleVerifyOnChange",value:function(){this.setState({tabvm_flag_verifyonchange:!this.state.tabvm_flag_verifyonchange})}},{key:"render",value:function(){return s.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},s.a.createElement("div",{className:"content-block small-12"},s.a.createElement("div",{className:"tabs-container generic-bordered-box"},s.a.createElement(ae.b,{className:"account-tabs",tabsClass:"account-overview no-padding bordered-header content-block",setting:"accountSignedMessagesTab",contentClass:"grid-content shrink small-vertical medium-horizontal padding",segmented:!1},s.a.createElement(ae.a,{title:"account.signedmessages.signmessage"},s.a.createElement("div",{className:"grid-content",style:{overflowX:"hidden"}},s.a.createElement("div",{className:"content-block no-margin"},s.a.createElement("h3",null,s.a.createElement(D.a,{content:"account.signedmessages.signmessage"}))),s.a.createElement(Vt,{ref:"memo_key",value:this.state.tabsm_memo_key,label:"account.perm.memo_public_key",placeholder:"Public Key",tabIndex:7,onChange:this._tabSMHandleChangeKey.bind(this),disableActionButton:!0}),s.a.createElement("br",null),s.a.createElement("textarea",{rows:"10",value:this.state.tabsm_message_text,onChange:this._tabSMHandleChange.bind(this),placeholder:Q.a.translate("account.signedmessages.entermessage")}),s.a.createElement("span",null,s.a.createElement("button",{className:"button",onClick:this._tabSMSignAction.bind(this)},s.a.createElement(D.a,{content:"account.signedmessages.sign"})),s.a.createElement("div",{style:{color:"gray"}},this.state.tabsm_popup)),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("textarea",{rows:"14",value:this.state.tabsm_message_signed,style:{editable:!1},placeholder:Q.a.translate("account.signedmessages.automaticcreation"),onClick:this._tabSMCopyToClipBoard.bind(this)}))),s.a.createElement(ae.a,{title:"account.signedmessages.verifymessage"},s.a.createElement("div",{className:"grid-content",style:{overflowX:"hidden"}},s.a.createElement("div",{className:"content-block no-margin"},s.a.createElement("h3",null,s.a.createElement(D.a,{content:"account.signedmessages.verifymessage"})),s.a.createElement("div",{style:{float:"right",marginTop:"0.1em",marginBottom:"0.5em"}},s.a.createElement("table",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("label",null,s.a.createElement(D.a,{content:"account.signedmessages.verifyonchange"}))),s.a.createElement("td",null,s.a.createElement("div",{className:"switch",onClick:this._tabVMToggleVerifyOnChange.bind(this)},s.a.createElement("input",{type:"checkbox",checked:this.state.tabvm_flag_verifyonchange,value:Q.a.translate("account.signedmessages.verifyonchange")}),s.a.createElement("label",null))))))),s.a.createElement("textarea",{rows:"10",value:this.state.tabvm_message_signed,onChange:this._tabVMHandleChange.bind(this),placeholder:Q.a.translate("account.signedmessages.entermessage")}),s.a.createElement("span",null,s.a.createElement("button",{className:"button",onClick:this._tabVMAction.bind(this)},s.a.createElement(D.a,{content:"account.signedmessages.verify"})),s.a.createElement("text",{style:{color:"gray"}},this.state.tabvm_popup),null!==this.state.tabvm_verified&&s.a.createElement("div",{style:{float:"right"}},"Message is:",s.a.createElement("div",{style:{backgroundColor:this.state.tabvm_verified?"green":"red"}},s.a.createElement("label",null,this.state.tabvm_verified?"verified":"not verified"))),(this.state.tabvm_verified&&null!==this.state.tabvm_message_signed_and_verified||this.state.tabvm_flag_verifyonchange)&&s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement($t,{message:this.state.tabvm_message_signed})))))))))}}]),t}();ta.propTypes={account:u.a.ChainAccount.isRequired};var aa=ta=Object(p.a)(ta),na=a(202),sa=a.n(na),ra=a(95),oa=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ia(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function la(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ca(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ua=function(e){function t(){return ia(this,t),la(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ca(t,s.a.Component),oa(t,[{key:"render",value:function(){var e=this.props,t=e.account,a=e.onRemove;return s.a.createElement("tr",null,s.a.createElement("td",null,this.props.index),s.a.createElement("td",null,t.get("id")),s.a.createElement("td",null,s.a.createElement(Oe.a,{account:t.get("id")})),a?s.a.createElement("td",null,s.a.createElement("button",{onClick:a.bind(this,t.get("id")),className:"button outline"},"Remove")):null)}}]),t}();ua.propTypes={account:u.a.ChainAccount.isRequired},ua.defaultProps={tempComponent:"tr"},ua=Object(p.a)(ua);var pa=function(e){function t(){return ia(this,t),la(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ca(t,s.a.Component),oa(t,[{key:"_onRemove",value:function(e,t,a){if(t){var n=this.props.getCurrentState(t),s=ra.a.new_transaction();s.add_type_operation("account_whitelist",{fee:{amount:0,asset_id:"1.3.0"},authorizing_account:this.props.account.get("id"),account_to_list:t,new_listing:n-sa.a.account_listing[e]}),_t.a.process_transaction(s,null,!0)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.removeButton,n=t.white,r=t.list.map(function(t,r){return s.a.createElement(ua,{key:t,onRemove:a?e._onRemove.bind(e,n?"white_listed":"black_listed"):null,account:t,index:r+1})}).toArray(),o=!0;return r.length||(o=!1,r.push(s.a.createElement("tr",{key:"empty"},s.a.createElement("td",{style:{padding:"1rem 0"},colSpan:a?4:3},s.a.createElement(D.a,{content:this.props.emptyText,account:this.props.account.get("name")}))))),s.a.createElement("table",{className:"table compact dashboard-table"},o?s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"#"),s.a.createElement("th",null,s.a.createElement(D.a,{content:"account.id"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"account.name"})),a?s.a.createElement("th",null):null)):null,s.a.createElement("tbody",null,r))}}]),t}(),ma=function(e){function t(){ia(this,t);var e=la(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={accountName:"",accountToList:null},e}return ca(t,s.a.Component),oa(t,[{key:"_getCurrentState",value:function(e){var t=this.props.account,a=t.get("whitelisted_accounts")||f.a.List(),n=t.get("blacklisted_accounts")||f.a.List(),s=sa.a.account_listing.no_listing;return a.includes(e)&&(s+=sa.a.account_listing.white_listed),n.includes(e)&&(s+=sa.a.account_listing.black_listed),s}},{key:"_onAdd",value:function(e,t){var a=this.state.accountToList,n=this.props.account,s=this._getCurrentState(a);if(a){var r=ra.a.new_transaction();r.add_type_operation("account_whitelist",{fee:{amount:0,asset_id:"1.3.0"},authorizing_account:n.get("id"),account_to_list:a,new_listing:s+sa.a.account_listing[e]}),_t.a.process_transaction(r,null,!0)}}},{key:"_onAccountFound",value:function(e){console.log("accountFound:",e),this.setState({accountName:e?e.get("name"):null,accountToList:e?e.get("id"):null})}},{key:"_onAccountChanged",value:function(e){console.log("account changed:",e),this.setState({accountName:e,accountToList:null})}},{key:"render",value:function(){var e=this.props.account,t=this.state.accountName;return s.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},s.a.createElement("div",{className:"content-block small-12"},s.a.createElement("div",{className:"tabs-container generic-bordered-box"},s.a.createElement(ae.b,{className:"account-tabs",tabsClass:"account-overview no-padding bordered-header content-block",setting:"whitelistTab",contentClass:"grid-content shrink small-vertical medium-horizontal no-padding",segmented:!1},s.a.createElement(ae.a,{title:"account.whitelist.title"},s.a.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},s.a.createElement("div",null,s.a.createElement(pa,{emptyText:"account.whitelist.empty",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get("whitelisted_accounts")||f.a.List(),removeButton:!0,white:!0})),e.get("whitelisted_accounts")?null:s.a.createElement("p",{className:"has-error"},"Please note, whitelisting is not working yet due to unresolved backend issue."),s.a.createElement("div",{style:{padding:"2rem 0"}},s.a.createElement(Ae.a,{label:"account.whitelist.add",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,"white_listed"),action_label:"account.perm.confirm_add",white:!1,typeahead:!0})))),s.a.createElement(ae.a,{title:"account.whitelist.black"},s.a.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},s.a.createElement("div",null,s.a.createElement(pa,{emptyText:"account.whitelist.empty_black",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get("blacklisted_accounts"),removeButton:!0})),s.a.createElement("div",{style:{padding:"2rem 1rem"}},s.a.createElement(Ae.a,{label:"account.whitelist.add_black",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,"black_listed"),action_label:"account.perm.confirm_add",typeahead:!0})))),s.a.createElement(ae.a,{title:"account.whitelist.white_by"},s.a.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},s.a.createElement("div",null,s.a.createElement(pa,{emptyText:"account.whitelist.empty_white_by",account:e,list:e.get("whitelisting_accounts")})))),s.a.createElement(ae.a,{title:"account.whitelist.black_by"},s.a.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},s.a.createElement("div",null,s.a.createElement(pa,{emptyText:"account.whitelist.empty_black_by",account:e,list:e.get("blacklisting_accounts")}))))))))}}]),t}(),da=a(1790),ha=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var fa=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ha(t,[{key:"onApprove",value:function(){var e=[],t=[];this.props.vote_ids.has(this.props.worker.get("vote_against"))&&t.push(this.props.worker.get("vote_against")),this.props.vote_ids.has(this.props.worker.get("vote_for"))||e.push(this.props.worker.get("vote_for")),this.props.onChangeVotes(e,t)}},{key:"onReject",value:function(){var e=[];this.props.vote_ids.has(this.props.worker.get("vote_against"))&&e.push(this.props.worker.get("vote_against")),this.props.vote_ids.has(this.props.worker.get("vote_for"))&&e.push(this.props.worker.get("vote_for")),this.props.onChangeVotes([],e)}},{key:"render",value:function(){var e=this.props.rank,t=this.props.worker.toJS(),a=t.total_votes_for-t.total_votes_against,n=!!this.props.vote_ids.has(t.vote_for)||!this.props.vote_ids.has(t.vote_against)&&null,r=0;t.daily_pay<this.props.rest?r=100:this.props.rest>0&&(r=this.props.rest/t.daily_pay*100);var o=Q.a.localize(new Date(t.work_begin_date+"Z"),{type:"date",format:"short_custom"}),i=Q.a.localize(new Date(t.work_end_date+"Z"),{type:"date",format:"short_custom"}),l=new Date,c=new Date(t.work_end_date+"Z")<=l,u=new Date(t.work_begin_date+"Z")<=l,p=!c&&a<this.props.voteThreshold||!u;return s.a.createElement("tr",{className:n?"":"unsupported"},c?null:s.a.createElement("td",{style:{textAlign:"right",paddingRight:10,paddingLeft:0}},e),s.a.createElement("td",{className:"worker-id",style:{textAlign:"left"}},t.id),s.a.createElement("td",{className:"worker-name",style:{textAlign:"left"}},s.a.createElement("div",{className:"inline-block",style:{paddingRight:5,position:"relative",top:-1}},s.a.createElement("a",{style:{visibility:t.url&&-1!==t.url.indexOf(".")?"visible":"hidden"},href:t.url,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(Ne.a,{name:"share",title:"icons.share"}))),s.a.createElement("div",{"data-tip":t.name,className:"inline-block tooltip"},t.name,s.a.createElement("br",null),s.a.createElement(Oe.a,{account:t.worker_account}))),s.a.createElement("td",{style:{textAlign:"right"},className:"hide-column-small"},s.a.createElement(V.a,{amount:a,asset:"1.3.0",decimalOffset:5,hide_asset:!0})),p?s.a.createElement("td",{style:{textAlign:"right"}},s.a.createElement(V.a,{amount:Math.max(0,this.props.voteThreshold-a),asset:"1.3.0",hide_asset:!0,decimalOffset:5})):null,s.a.createElement("td",null,o," - ",i),c||p?null:s.a.createElement("td",{style:{textAlign:"right"},className:"hide-column-small"},J.a.format_number(r,2),"%"),s.a.createElement("td",{style:{textAlign:"right"},className:"hide-column-small"},s.a.createElement(da.b,{hide_asset:!0,fromAsset:"1.3.0",toAsset:this.props.preferredUnit,amount:t.daily_pay})),c||p?null:s.a.createElement("td",{style:{textAlign:"right"}},this.props.rest<=0?"0.00":s.a.createElement(da.b,{hide_asset:!0,fromAsset:"1.3.0",toAsset:this.props.preferredUnit,amount:this.props.rest})),s.a.createElement("td",{className:"clickable",onClick:this.props.proxy?function(){}:this[n?"onReject":"onApprove"].bind(this)},this.props.proxy?s.a.createElement(Ne.a,{name:"locked",title:"icons.locked.action"}):s.a.createElement(Ne.a,{name:n?"checkmark-circle":"minus-circle",title:n?"icons.checkmark_circle.approved":"icons.minus_circle.disapproved"})))}}]),t}();fa.propTypes={worker:u.a.ChainObject.isRequired,onAddVote:v.a.func,onRemoveVote:v.a.func,vote_ids:v.a.object},fa.defaultProps={tempComponent:"tr"};var ba=Object(p.a)(fa),ga=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function _a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function va(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ya(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ea(e,t){var a="",n=0,s=void 0;return"witness"===e?s=ce.b.getWitnessById(t.get("id")):"committee"===e&&(s=ce.b.getCommitteeMemberById(t.get("id"))),{url:a=s?s.get("url"):a,votes:n=s?s.get("total_votes"):n,id:s.get("id")}}var wa=function(e){function t(){return _a(this,t),va(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ya(t,s.a.Component),ga(t,[{key:"shouldComponentUpdate",value:function(e){return e.account!==this.props.account||e.action!==this.props.action||e.isActive!==this.props.isActive||e.idx!==this.props.idx||e.proxy!==this.props.proxy}},{key:"onAction",value:function(e){this.props.onAction(e)}},{key:"render",value:function(){var e=this.props,t=e.account,a=e.type,n=e.action,r=e.isActive,o=t.get("id"),i=Ea(a,t),l=i.url,c=i.votes,u=l&&l.length>0&&-1===l.indexOf("http")?"http://"+l:l,p="remove"===n;return s.a.createElement("tr",{className:p?"":"unsupported"},s.a.createElement("td",{style:{textAlign:"right"}},this.props.idx+1),s.a.createElement("td",{style:{textAlign:"left"}},s.a.createElement(Oe.a,{account:t.get("id")})),s.a.createElement("td",null,u&&-1!==u.indexOf(".")?s.a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(Ne.a,{name:"share",title:"icons.share"})):null),s.a.createElement("td",null,s.a.createElement(V.a,{amount:c,asset:"1.3.0",decimalOffset:5,hide_asset:!0})),s.a.createElement("td",null,s.a.createElement(D.a,{content:"account.votes."+(r?"active_short":"inactive")})),s.a.createElement("td",{style:{textAlign:"center"}},s.a.createElement(D.a,{content:"settings."+(p?"yes":"no")})),s.a.createElement("td",{className:this.props.proxy?"":"clickable",onClick:this.props.proxy?function(){}:this.onAction.bind(this,o)},this.props.proxy?s.a.createElement(Ne.a,{name:"locked",title:"icons.locked.action"}):s.a.createElement(Ne.a,{name:p?"checkmark-circle":"minus-circle",title:p?"icons.checkmark_circle.yes":"icons.minus_circle.no"})))}}]),t}();wa.propTypes={account:v.a.object.isRequired,onAction:v.a.func.isRequired};var ka=function(e){function t(e){_a(this,t);var a=va(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected_item:null,item_name_input:"",error:null},a.onItemChange=a.onItemChange.bind(a),a.onItemAccountChange=a.onItemAccountChange.bind(a),a.onAddItem=a.onAddItem.bind(a),a}return ya(t,s.a.Component),ga(t,[{key:"onItemChange",value:function(e){this.setState({item_name_input:e})}},{key:"onItemAccountChange",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var a=this.props.validateAccount(e);if(null===a)return;"string"==typeof a?this.setState({error:a}):a.then(function(e){return t.setState({error:e})})}}},{key:"onAddItem",value:function(e){if(e){this.setState({selected_item:null,item_name_input:"",error:null}),this.props.onAddItem(e.get("id"))}}},{key:"render",value:function(){var e=this;if(!this.props.items)return null;var t=this.props.items.filter(function(e){return!!e}).sort(function(t,a){var n=Ea(e.props.type,t).votes,s=Ea(e.props.type,a).votes;return n!==s?parseInt(s,10)-parseInt(n,10):t.get("name")>a.get("name")?1:t.get("name")<a.get("name")?-1:0}).map(function(t,a){var n=e.props.supported&&e.props.supported.includes(t.get("id"))?"remove":"add",r=e.props.active.includes(Ea(e.props.type,t).id);return s.a.createElement(wa,{idx:a,key:t.get("name"),account:t,type:e.props.type,onAction:"add"===n?e.props.onAddItem:e.props.onRemoveItem,isSelected:-1!==e.props.items.indexOf(t),action:n,isActive:r,proxy:e.props.proxy})}),a=this.state.error;!a&&this.state.selected_item&&-1!==this.props.items.indexOf(this.state.selected_item)&&(a=Q.a.translate("account.votes.already"));var n=["10%","20%","40%","20%","10%"];return s.a.createElement("div",null,this.props.withSelector?s.a.createElement(Ae.a,{style:{maxWidth:"600px"},label:this.props.label,error:a,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:"account.votes.add_witness",tabIndex:this.props.tabIndex}):null,this.props.title&&t.length?s.a.createElement("h4",null,this.props.title):null,t.length?s.a.createElement("table",{className:"table dashboard-table table-hover"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{style:{textAlign:"right"}},"#"),s.a.createElement("th",{style:{textAlign:"left",maxWidth:n[1]}},s.a.createElement(D.a,{content:"account.votes.name"})),s.a.createElement("th",{style:{maxWidth:n[2]}},s.a.createElement(D.a,{content:"account.votes.about"})),s.a.createElement("th",{style:{maxWidth:n[3]}},s.a.createElement(D.a,{content:"account.votes.votes"})),s.a.createElement("th",{style:{maxWidth:n[4]}},s.a.createElement(D.a,{content:"account.votes.status.title"})),s.a.createElement("th",{style:{maxWidth:n[0]}},s.a.createElement(D.a,{content:"account.votes.supported"})),s.a.createElement("th",{style:{maxWidth:n[5]}},s.a.createElement(D.a,{content:"account.votes.toggle"})))),s.a.createElement("tbody",null,t)):null)}}]),t}();ka.propTypes={items:u.a.ChainObjectsList,onAddItem:v.a.func.isRequired,onRemoveItem:v.a.func.isRequired,validateAccount:v.a.func,label:v.a.string.isRequired,placeholder:v.a.string,tabIndex:v.a.number,action:v.a.string,withSelector:v.a.bool},ka.defaultProps={action:"remove",withSelector:!0,autosubscribe:!1};var xa=Object(p.a)(ka),Aa=a(123),Oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ca=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(s)throw r}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Na=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Sa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=e.proxy.get("id"),s=e.proxy.get("name");return a.state={proxy_account_id:"1.2.5"===n?"":n,prev_proxy_account_id:"1.2.5"===n?"":n,current_proxy_input:"1.2.5"===n?"":s,witnesses:null,committee:null,vote_ids:f.a.Set(),proxy_vote_ids:f.a.Set(),lastBudgetObject:e.initialBudget.get("id"),workerTableIndex:e.viewSettings.get("workerTableIndex",1),all_witnesses:f.a.List(),all_committee:f.a.List()},a.onProxyAccountFound=a.onProxyAccountFound.bind(a),a.onPublish=a.onPublish.bind(a),a.onReset=a.onReset.bind(a),a._getVoteObjects=a._getVoteObjects.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Na(t,[{key:"componentWillMount",value:function(){d.a.getFinalFeeAsset(this.props.account,"account_update"),ce.b.fetchAllWorkers(),this.getBudgetObject()}},{key:"componentDidMount",value:function(){this.updateAccountData(this.props),this._getVoteObjects(),this._getVoteObjects("committee")}},{key:"componentWillReceiveProps",value:function(e){if(e.account!==this.props.account){var t=e.proxy.get("id"),a={proxy_account_id:"1.2.5"===t?"":t};this.setState({prev_proxy_account_id:a.proxy_account_id}),this.updateAccountData(e,a)}this.getBudgetObject()}},{key:"updateAccountData",value:function(e){var t=this,a=e.account,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state).proxy_account_id,s=ce.b.getAccount(n),r=a.get("options"),o=s?s.get("options"):null,i=s?s.get("name"):"";"1.2.5"===n&&(n="",i="");var l=r.get("votes").toArray(),c=f.a.Set(l);ce.b.getObjectsByVoteIds(l);var u=null,p=f.a.Set([]);if("1.2.5"!==n&&o){var m=o.get("votes").toArray();p=f.a.Set(m),ce.b.getObjectsByVoteIds(m),u=Object(ce.g)(ce.b.getObjectByVoteID,m,1e4)}Promise.all([Object(ce.g)(ce.b.getObjectByVoteID,l,1e4),u]).then(function(e){var a=Ca(e,2),s=a[0],r=a[1];function o(e){var t=new f.a.List,a=new f.a.List,n=new f.a.Set;return e.forEach(function(e){var n=e.get("committee_member_account");n?a=a.push(n):(n=e.get("worker_account"))||(n=e.get("witness_account"))&&(t=t.push(n))}),{witnesses:t,committee:a,workers:n}}var l=o(s),u=l.witnesses,m=l.committee,d=l.workers,h=o(r||[]),b=h.witnesses,g=h.committee,_=h.workers,v={proxy_account_id:n,current_proxy_input:i,witnesses:u,committee:m,workers:d,proxy_witnesses:b,proxy_committee:g,proxy_workers:_,vote_ids:c,proxy_vote_ids:p,prev_witnesses:u,prev_committee:m,prev_workers:d,prev_vote_ids:c};t.setState(v)})}},{key:"isChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return e.proxy_account_id!==e.prev_proxy_account_id||e.witnesses!==e.prev_witnesses||e.committee!==e.prev_committee||!f.a.is(e.vote_ids,e.prev_vote_ids)}},{key:"_getVoteObjects",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"witnesses",a=arguments[1],n=this.state["all_"+t],s="witnesses"===t,r=void 0;if(a)r=parseInt(a[a.length-1].split(".")[2],10);else{a=[];var o=this.props.globalObject.get(s?"active_witnesses":"active_committee_members").sort(function(e,t){return parseInt(e.split(".")[2],10)-parseInt(t.split(".")[2],10)}).last()||"1."+(s?"6":"5")+".1";r=parseInt(o.split(".")[2],10);for(var i=1;i<=r+10;i++)a.push("1."+(s?"6":"5")+"."+i)}Object(ce.g)(ce.b.getObject,a,5e3,{}).then(function(o){if(e.state["all_"+t]=n.concat(f.a.List(o.filter(function(e){return!!e}).map(function(e){return e.get(s?"witness_account":"committee_member_account")}))),o[o.length-1]){a=[];for(var i=r+11;i<=r+20;i++)a.push("1."+(s?"6":"5")+"."+i);return e._getVoteObjects(t,a)}e.forceUpdate()})}},{key:"onPublish",value:function(){var e=this,t=this.props.account.toJS(),a={account:t.id},n={memo_key:t.options.memo_key},s=this.state.proxy_account_id;n.voting_account=s||"1.2.5",n.num_witness=this.state.witnesses.size,n.num_committee=this.state.committee.size,a.new_options=n,a.fee={amount:0,asset_id:d.a.getFinalFeeAsset(t.id,"account_update")};var r=this.state.vote_ids,o=this._getWorkerArray(),i=new Date;function l(e,t){return e.includes(t)&&(e=e.delete(t)),e}o.forEach(function(e){e&&(new Date(e.get("work_end_date"))<=i&&(r=l(r,e.get("vote_for"))),r=l(r,e.get("vote_against")))}),Object(ce.g)(ce.b.getWitnessById,this.state.witnesses.toArray(),4e3).then(function(t){var a=t.map(function(e){return e.get("vote_id")});return Promise.all([Promise.resolve(a),Object(ce.g)(ce.b.getCommitteeMemberById,e.state.committee.toArray(),4e3)])}).then(function(e){a.new_options.votes=e[0].concat(e[1].map(function(e){return e.get("vote_id")})).concat(r.filter(function(e){return"2"===e.split(":")[0]}).toArray()).sort(function(e,t){var a=e.split(":"),n=t.split(":");return parseInt(a[1],10)-parseInt(n[1],10)}),ft.a.updateAccount(a)})}},{key:"onReset",value:function(){var e=this,t=this.state;this.refs.voting_proxy&&this.refs.voting_proxy.refs.bound_component&&this.refs.voting_proxy.refs.bound_component.onResetProxy(),this.setState({proxy_account_id:t.prev_proxy_account_id,current_proxy_input:t.prev_proxy_input,witnesses:t.prev_witnesses,committee:t.prev_committee,workers:t.prev_workers,vote_ids:t.prev_vote_ids},function(){e.updateAccountData(e.props)})}},{key:"onAddItem",value:function(e,t){var a={};a[e]=this.state[e].push(t),this.setState(a)}},{key:"onRemoveItem",value:function(e,t){var a={};a[e]=this.state[e].filter(function(e){return e!==t}),this.setState(a)}},{key:"onChangeVotes",value:function(e,t){var a={};a.vote_ids=this.state.vote_ids,e.length&&e.forEach(function(e){a.vote_ids=a.vote_ids.add(e)}),t&&t.forEach(function(e){a.vote_ids=a.vote_ids.delete(e)}),this.setState(a)}},{key:"validateAccount",value:function(e,t){return t?"witnesses"===e?Object(ce.g)(ce.b.getWitnessById,[t.get("id")],3e3).then(function(e){return e[0]?null:"Not a witness"}):"committee"===e?Object(ce.g)(ce.b.getCommitteeMemberById,[t.get("id")],3e3).then(function(e){return e[0]?null:"Not a committee member"}):null:null}},{key:"onProxyChange",value:function(e){var t=ce.b.getAccount(e);(!t||t&&t.get("id")!==this.state.proxy_account_id)&&this.setState({proxy_account_id:"",proxy_witnesses:f.a.Set(),proxy_committee:f.a.Set(),proxy_workers:f.a.Set()}),this.setState({current_proxy_input:e})}},{key:"onProxyAccountFound",value:function(e){var t=this;this.setState({proxy_account_id:e?e.get("id"):""},function(){t.updateAccountData(t.props)})}},{key:"onClearProxy",value:function(){this.setState({proxy_account_id:""})}},{key:"_getTotalVotes",value:function(e){return parseInt(e.get("total_votes_for"),10)-parseInt(e.get("total_votes_against"),10)}},{key:"getBudgetObject",value:function(){var e=this,t=this.state.lastBudgetObject,a=void 0;a=ce.b.getObject(t);var n=parseInt(t.split(".")[2],10);if(a){var s=a.get("time");/Z$/.test(s)||(s+="Z");var r=new Date,o=n+Math.floor((r-new Date(s).getTime())/1e3/60/60)-1;if(n>=o)return;var l="2.13."+Math.max(n,o),c=parseInt(l.split(".")[2],10);Object(ce.g)(ce.b.getObject,[l],void 0,{}).then(function(t){null===Ca(t,1)[0]?e.setState({lastBudgetObject:"2.13."+(c-1)},e.getBudgetObject):(i.a.setLastBudgetObject(l),e.setState({lastBudgetObject:l}))})}else{var u="2.13."+(n-1);Object(ce.g)(ce.b.getObject,[u],void 0,{}).then(function(t){null===Ca(t,1)[0]?e.setState({lastBudgetObject:"2.13."+(n-2)},e.getBudgetObject):(i.a.setLastBudgetObject(u),e.setState({lastBudgetObject:u}))})}}},{key:"_getWorkerArray",value:function(){var e=[];return ce.b.workers.forEach(function(t){var a=ce.b.getObject(t,!1,!1);a&&e.push(a)}),e}},{key:"_setWorkerTableIndex",value:function(e){this.setState({workerTableIndex:e})}},{key:"render",value:function(){var e=this,t=this.state.workerTableIndex,a=this.props.settings.get("unit")||"1.3.0",n=!!this.state.proxy_account_id,r=ie()("button",{disabled:!this.isChanged()}),o=this.props.globalObject,i=void 0;this.state.lastBudgetObject&&(i=ce.b.getObject(this.state.lastBudgetObject));var l=0,c=o?parseInt(o.getIn(["parameters","worker_budget_per_day"]),10):0;i&&(c=Math.min(24*i.getIn(["record","worker_budget"]),c),l=Math.min(24*i.getIn(["record","worker_budget"]),c));var u=new Date,p=this._getWorkerArray(),m=0,d=p.filter(function(e){return!!e&&(new Date(e.get("work_end_date")+"Z")>u&&new Date(e.get("work_begin_date")+"Z")<=u)}).sort(function(t,a){return e._getTotalVotes(a)-e._getTotalVotes(t)}).map(function(t,r){var o=parseInt(t.get("daily_pay"),10);c-=o;var i=t.get("total_votes_for")-t.get("total_votes_against");return c<=0&&!m&&(m=i),m&&i<m?null:s.a.createElement(ba,{preferredUnit:a,rest:c+o,rank:r+1,key:t.get("id"),worker:t.get("id"),vote_ids:e.state[n?"proxy_vote_ids":"vote_ids"],onChangeVotes:e.onChangeVotes.bind(e),proxy:n,voteThreshold:m})}).filter(function(e){return!!e}),h=p.filter(function(e){if(!e)return!1;var t=e.get("total_votes_for")-e.get("total_votes_against");return new Date(e.get("work_end_date")+"Z")>u&&t<m||new Date(e.get("work_begin_date")+"Z")>u}).sort(function(t,a){return e._getTotalVotes(a)-e._getTotalVotes(t)}).map(function(t,r){return s.a.createElement(ba,{preferredUnit:a,rest:0,rank:r+1,key:t.get("id"),worker:t.get("id"),vote_ids:e.state[n?"proxy_vote_ids":"vote_ids"],onChangeVotes:e.onChangeVotes.bind(e),proxy:n,voteThreshold:m})}),f=p.filter(function(e){return!!e&&new Date(e.get("work_end_date"))<=u}).sort(function(t,a){return e._getTotalVotes(a)-e._getTotalVotes(t)}).map(function(t,r){return s.a.createElement(ba,{preferredUnit:a,rest:0,rank:r+1,key:t.get("id"),worker:t.get("id"),vote_ids:e.state[n?"proxy_vote_ids":"vote_ids"],onChangeVotes:e.onChangeVotes.bind(e),proxy:n,voteThreshold:m})}),b=s.a.createElement("span",null,s.a.createElement("button",{className:ie()(r,{success:this.isChanged()}),onClick:this.onPublish,tabIndex:4},s.a.createElement(D.a,{content:"account.votes.publish"})),s.a.createElement("button",{className:"button "+r,onClick:this.onReset,tabIndex:8},s.a.createElement(D.a,{content:"account.perm.reset"}))),g=s.a.createElement(Ae.a,{style:{width:"50%",maxWidth:250,marginBottom:10},account:this.state.current_proxy_input,accountName:this.state.current_proxy_input,onChange:this.onProxyChange.bind(this),onAccountChanged:this.onProxyAccountFound,tabIndex:1,placeholder:"Proxy not set",hideImage:!0},s.a.createElement("span",{style:{paddingLeft:5,position:"relative",top:-1,display:n?"":"none"}},s.a.createElement(Ne.a,{name:"locked",title:"icons.locked.action",size:"1x"})),s.a.createElement("span",{style:{paddingLeft:5,position:"relative",top:9,display:n?"none":""}},s.a.createElement(R.a,{to:"/help/voting"},s.a.createElement(Ne.a,{name:"question-circle",title:"icons.question_circle",size:"1x"})))),_=2===t,v=s.a.createElement("div",{className:"inline-block",style:{float:"right",visibility:this.isChanged()?"visible":"hidden",color:"red",padding:"0.85rem",fontSize:"0.9rem"}},s.a.createElement(D.a,{content:"account.votes.save_finish"}));return s.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},s.a.createElement("div",{className:"content-block small-12"},s.a.createElement("div",{className:"tabs-container generic-bordered-box"},s.a.createElement(ae.b,{setting:"votingTab",className:"account-tabs",defaultActiveTab:1,segmented:!1,actionButtons:v,tabsClass:"account-overview no-padding bordered-header content-block"},s.a.createElement(ae.a,{title:"explorer.witnesses.title"},s.a.createElement("div",{className:ie()("content-block")},s.a.createElement("div",{className:"header-selector"},g,s.a.createElement("div",{style:{float:"right",marginTop:"-2.5rem"}},b)),s.a.createElement(xa,{type:"witness",label:"account.votes.add_witness_label",items:this.state.all_witnesses,validateAccount:this.validateAccount.bind(this,"witnesses"),onAddItem:this.onAddItem.bind(this,"witnesses"),onRemoveItem:this.onRemoveItem.bind(this,"witnesses"),tabIndex:n?-1:2,supported:this.state[n?"proxy_witnesses":"witnesses"],withSelector:!1,active:o.get("active_witnesses"),proxy:this.state.proxy_account_id}))),s.a.createElement(ae.a,{title:"explorer.committee_members.title"},s.a.createElement("div",{className:ie()("content-block")},s.a.createElement("div",{className:"header-selector"},g,s.a.createElement("div",{style:{float:"right",marginTop:"-2.5rem"}},b)),s.a.createElement(xa,{type:"committee",label:"account.votes.add_committee_label",items:this.state.all_committee,validateAccount:this.validateAccount.bind(this,"committee"),onAddItem:this.onAddItem.bind(this,"committee"),onRemoveItem:this.onRemoveItem.bind(this,"committee"),tabIndex:n?-1:3,supported:this.state[n?"proxy_committee":"committee"],withSelector:!1,active:o.get("active_committee_members"),proxy:this.state.proxy_account_id}))),s.a.createElement(ae.a,{title:"account.votes.workers_short"},s.a.createElement("div",{className:"header-selector"},s.a.createElement("div",{style:{float:"right"}},s.a.createElement(R.a,{to:"/create-worker"},s.a.createElement("div",{className:"button"},s.a.createElement(D.a,{content:"account.votes.create_worker"})))),s.a.createElement("div",{className:"selector"},s.a.createElement("div",{style:{paddingLeft:10},className:ie()("inline-block",{inactive:0!==t}),onClick:this._setWorkerTableIndex.bind(this,0)},Q.a.translate("account.votes.new",{count:h.length})),s.a.createElement("div",{className:ie()("inline-block",{inactive:1!==t}),onClick:this._setWorkerTableIndex.bind(this,1)},Q.a.translate("account.votes.active",{count:d.length})),f.length?s.a.createElement("div",{className:ie()("inline-block",{inactive:!_}),onClick:_?function(){}:this._setWorkerTableIndex.bind(this,2)},s.a.createElement(D.a,{content:"account.votes.expired"})):null),s.a.createElement("div",{style:{marginTop:"2rem"}},g,s.a.createElement("div",{style:{float:"right",marginTop:"-2.5rem"}},b))),s.a.createElement("table",{className:"table dashboard-table table-hover"},2===t?null:0===t?s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),s.a.createElement("th",{colSpan:"3",style:{textAlign:"left"}},s.a.createElement(D.a,{content:"account.votes.threshold"})),s.a.createElement("th",{style:{textAlign:"right"}},s.a.createElement(V.a,{decimalOffset:5,hide_asset:!0,amount:m,asset:"1.3.0"})),s.a.createElement("th",{colSpan:"3"})),s.a.createElement("tr",null,s.a.createElement("th",{style:{border:"none",backgroundColor:"transparent"}}))):s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),s.a.createElement("th",{colSpan:"4",style:{textAlign:"left"}},s.a.createElement(D.a,{content:"account.votes.total_budget"})," ","(",s.a.createElement(Aa.a,{name:a}),")"),s.a.createElement("th",{colSpan:"2",className:"hide-column-small"}),s.a.createElement("th",{style:{textAlign:"right"}},o?s.a.createElement(da.b,{hide_asset:!0,fromAsset:"1.3.0",toAsset:a,amount:l}):null),s.a.createElement("th",{className:"hide-column-small"})),s.a.createElement("tr",null,s.a.createElement("th",{style:{border:"none",backgroundColor:"transparent"}}))),s.a.createElement("thead",null,s.a.createElement("tr",null,2===t?null:s.a.createElement("th",{style:{textAlign:"right"}},s.a.createElement(D.a,{content:"account.votes.line"})),s.a.createElement("th",{style:{textAlign:"center"}},s.a.createElement(D.a,{content:"account.user_issued_assets.id"})),s.a.createElement("th",{style:{textAlign:"left"}},s.a.createElement(D.a,{content:"account.user_issued_assets.description"})),s.a.createElement("th",{style:{textAlign:"right"},className:"hide-column-small"},s.a.createElement(D.a,{content:"account.votes.total_votes"})),0===t?s.a.createElement("th",{style:{textAlign:"right"}},s.a.createElement(D.a,{content:"account.votes.missing"})):null,s.a.createElement("th",null,s.a.createElement(D.a,{content:"explorer.workers.period"})),2===t||0===t?null:s.a.createElement("th",{style:{textAlign:"right"},className:"hide-column-small"},s.a.createElement(D.a,{content:"account.votes.funding"})),s.a.createElement("th",{style:{textAlign:"right"},className:"hide-column-small"},s.a.createElement(D.a,{content:"account.votes.daily_pay"}),s.a.createElement("div",{style:{paddingTop:5,fontSize:"0.8rem"}},"(",s.a.createElement(Aa.a,{name:a}),")")),2===t||0===t?null:s.a.createElement("th",{style:{textAlign:"right"}},s.a.createElement(D.a,{content:"explorer.witnesses.budget"}),s.a.createElement("div",{style:{paddingTop:5,fontSize:"0.8rem"}},"(",s.a.createElement(Aa.a,{name:a}),")")),s.a.createElement("th",null,s.a.createElement(D.a,{content:"account.votes.toggle"})))),s.a.createElement("tbody",null,0===t?h:1===t?d:f)))))))}}]),t}();Sa.propTypes={initialBudget:u.a.ChainObject.isRequired,globalObject:u.a.ChainObject.isRequired,proxy:u.a.ChainAccount.isRequired},Sa.defaultProps={globalObject:"2.0.0"},Sa=Object(p.a)(Sa);var Pa=function(e){return s.a.createElement(Sa,Oa({},e,{initialBudget:i.a.getLastBudgetObject()}))},ja=a(482),Ia=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ma(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ra(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ba=function(e){function t(){Ta(this,t);var e=Ma(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e}return Ra(t,s.a.Component),Ia(t,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onSubmit",value:function(e){e.preventDefault(),U.a.publish("settlement_modal","close");var t=J.a.get_asset_precision(this.props.asset.get("precision")),a=this.state.amount.replace(/,/g,"");a*=t;var n=ra.a.new_transaction();return n.add_type_operation("asset_settle",{fee:{amount:0,asset_id:0},account:this.props.account.get("id"),amount:{amount:a,asset_id:this.props.asset.get("id")}}),_t.a.process_transaction(n,null,!0).then(function(e){return!0}).catch(function(e){return console.error("asset settle error: ",e),!1})}},{key:"render",value:function(){var e=this.props,t=e.asset,a=e.account,n=this.state.amount;if(!t)return null;var r=t.get("id"),o=a.get("balances"),i=null,l=0;o&&o.forEach(function(e){var t=ce.b.getObject(e);if(!t.get("balance"))return null;t.get("asset_type")===r&&(i=e,l=t.get("balance"))});var c=J.a.get_asset_precision(t.get("precision")),u=n?n.replace(/,/g,""):0,p=parseFloat(u)>0&&parseFloat(u)*c<=parseFloat(l)?"button success":"button disabled",m=s.a.createElement("span",null,s.a.createElement(D.a,{content:"exchange.balance"}),": ",i?s.a.createElement(H.a,{balance:i}):"0 "+t.get("symbol"));return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement(D.a,{component:"h3",style:{textAlign:"center"},content:"modal.settle.title",asset:t.get("symbol")}),s.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},s.a.createElement("div",{className:"content-block"},s.a.createElement(Y.a,{label:"modal.settle.amount",amount:n,onChange:this.onAmountChanged.bind(this),display_balance:m,asset:r,assets:[r],tabIndex:1})),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:p,onClick:this.onSubmit.bind(this),value:Q.a.translate("modal.settle.submit")}))))}}]),t}();Ba.propTypes={asset:u.a.ChainAsset.isRequired,account:u.a.ChainAccount.isRequired},Ba=Object(p.a)(Ba);var Da=function(e){function t(){Ta(this,t);var e=Ma(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return Ra(t,s.a.Component),Ia(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){U.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return this.state.open?s.a.createElement(F.a,{id:this.props.modalId,onClose:this.onClose.bind(this),overlay:!0,ref:"settlement_modal"},s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(Ba,this.props))):null}}]),t}(),La=a(90),qa=a(214),Fa=a(93),Va=a.n(Fa),Wa=a(1876),Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},za=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ja(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ga(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ka(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ha=function(e){function t(e){return Ja(this,t),Ga(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return Ka(t,Wa["b"]),za(t,[{key:"componentDidMount",value:function(){Va.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,a);if(void 0===s){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.base!==this.props.base}},{key:"getValue",value:function(){var e=this.props.marketStats;return e&&e.change?e.change:0}},{key:"render",value:function(){var e=this.getValue(),t=0===parseFloat(e)?"":parseFloat(e)<0?"change-down":"change-up",a=s.a.createElement(La.b,{style:"decimal",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return s.a.createElement("span",{className:"value "+t},a,"%")}}]),t}();Ha.defaultProps={fullPrecision:!1,noDecimals:!1,hide_asset:!1},Ha=Object(te.a)(Ha,{propNames:["quote","base"],defaultProps:{quote:"1.3.0"}});var Za=function(e){function t(){return Ja(this,t),Ga(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ka(t,s.a.Component),za(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["refCallback"]);return s.a.createElement(Ha,Ua({},a,{ref:t}))}}]),t}();Za=Object(m.connect)(Za,{listenTo:function(){return[qa.a]},getProps:function(e){return{marketStats:qa.a.getState().allMarketStats.get(e.marketId),allMarketStats:qa.a.getState().allMarketStats}}});var Qa=a(1819),Ya=a(32),Xa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},$a=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function en(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function an(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function nn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var sn={textAlign:"right"},rn={textAlign:"left"},on=function(e){function t(){return tn(this,t),an(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return nn(t,s.a.Component),$a(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.object.getIn(["call_price","quote","asset_id"]);this.refs[t].show()}},{key:"_onClosePosition",value:function(e){e.preventDefault();var t=ra.a.new_transaction();t.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get("borrower"),delta_collateral:{amount:-this.props.object.get("collateral"),asset_id:this.props.object.getIn(["call_price","base","asset_id"])},delta_debt:{amount:-this.props.object.get("debt"),asset_id:this.props.object.getIn(["call_price","quote","asset_id"])}}),_t.a.process_transaction(t,null,!0)}},{key:"_getBalance",value:function(){var e=this.props.account,t=this.props.object.getIn(["call_price","quote","asset_id"]),a=e.get("balances"),n=0;return a&&a.forEach(function(e,a){if(a==t){var s=ce.b.getObject(e);n=s.get("balance")}}),n}},{key:"_getFeedPrice",value:function(){return this.props?1/J.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_getCollateralRatio",value:function(){var e=this.props.object.toJS();return J.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(J.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:"_getMR",value:function(){return this.props.debtAsset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3}},{key:"_getStatusClass",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?"danger":e<t+.5?"warning":""}},{key:"_getCRTip",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&""!==e?"danger"===e?Q.a.translate("tooltip.cr_danger",{mr:t}):"warning"===e?Q.a.translate("tooltip.cr_warning",{mr:t}):null:null}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.object.toJS(),r=this._getCollateralRatio(),o=J.a.get_asset_amount(n.debt,this.props.debtAsset),i=this._getBalance(),l=this._getStatusClass();return s.a.createElement("tr",{className:"margin-row"},s.a.createElement("td",{style:rn},s.a.createElement(R.a,{to:"/asset/"+t.get("symbol")},s.a.createElement(Aa.a,{noTip:!0,name:t.get("symbol")}))),s.a.createElement("td",{style:sn},s.a.createElement(V.a,{amount:i,asset:n.call_price.quote.asset_id,hide_asset:!0})),s.a.createElement("td",{style:sn},s.a.createElement(V.a,{amount:n.debt,asset:n.call_price.quote.asset_id,hide_asset:!0})),s.a.createElement("td",{style:sn,className:"column-hide-medium"},s.a.createElement(V.a,{decimalOffset:5,amount:n.collateral,asset:n.call_price.base.asset_id})),s.a.createElement("td",{"data-place":"bottom","data-tip":this._getCRTip(),className:"center-content "+l},J.a.format_number(r,2)),s.a.createElement("td",{style:sn},s.a.createElement(ja.a,{noTip:!0,balances:Object(h.List)(),debt:en({},t.get("id"),n.debt),collateral:en({},a.get("id"),parseInt(n.collateral,10)),hide_asset:!0})),s.a.createElement("td",{style:sn,className:"column-hide-small"},s.a.createElement(xe.a,{base_amount:n.call_price.base.amount,base_asset:n.call_price.base.asset_id,quote_amount:n.call_price.quote.amount,quote_asset:n.call_price.quote.asset_id,hide_symbols:!0})),s.a.createElement("td",{style:sn,className:"column-hide-small"},s.a.createElement(xe.a,{base_amount:t.getIn(["bitasset","current_feed","settlement_price","base","amount"]),base_asset:n.call_price.quote.asset_id,quote_amount:t.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),quote_asset:n.call_price.base.asset_id,hide_symbols:!0})),s.a.createElement("td",{className:"center-content column-hide-small",style:rn},s.a.createElement(xe.a,{base_amount:n.call_price.base.amount,base_asset:n.call_price.base.asset_id,quote_amount:n.call_price.quote.amount,quote_asset:n.call_price.quote.asset_id,hide_value:!0})),s.a.createElement("td",null,s.a.createElement("div",{"data-place":"left","data-tip":Q.a.translate("tooltip.update_position"),style:{paddingBottom:5}},s.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},s.a.createElement(Ne.a,{name:"adjust",title:"icons.adjust",className:"icon-14px rotate90"})))),s.a.createElement("td",null,s.a.createElement("div",{"data-place":"left","data-tip":Q.a.translate("tooltip.close_position",{amount:o,asset:t.get("symbol")}),style:{paddingBottom:5}},s.a.createElement("a",{onClick:this._onClosePosition.bind(this)},s.a.createElement(Ne.a,{name:"cross-circle",title:"icons.cross_circle.close_position",className:"icon-14px"}))),t?s.a.createElement(Qa.a,{ref:"cp_modal_"+n.call_price.quote.asset_id,modalId:"cp_modal_"+n.call_price.quote.asset_id,quote_asset:n.call_price.quote.asset_id,backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();on.propTypes={debtAsset:u.a.ChainAsset.isRequired,collateralAsset:u.a.ChainAsset.isRequired},on.defaultProps={tempComponent:"tr"},on=Object(p.a)(on);var ln=function(e){function t(){return tn(this,t),an(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return nn(t,s.a.Component),$a(t,[{key:"render",value:function(){var e=this.props,t=e.object,a=e.account,n=t.getIn(["call_price","quote","asset_id"]),r=t.getIn(["call_price","base","asset_id"]);return s.a.createElement(on,Xa({debtAsset:n,collateralAsset:r,account:a},this.props))}}]),t}();ln.propTypes={object:u.a.ChainObject.isRequired},ln=Object(p.a)(ln);var cn=function(e){function t(){return tn(this,t),an(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return nn(t,s.a.Component),$a(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.debtAsset.get("id");this.refs[t].show()}},{key:"_getFeedPrice",value:function(){return this.props?1/J.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.account,r=t.get("id"),o=n.get("balances"),i=0;return o&&o.forEach(function(e,t){if(t==r){var a=ce.b.getObject(e);i=a.get("balance")}}),s.a.createElement("tr",{className:"margin-row"},s.a.createElement("td",{style:rn},s.a.createElement(R.a,{to:"/asset/"+t.get("symbol")},s.a.createElement(Aa.a,{noTip:!0,name:t.get("symbol")}))),s.a.createElement("td",{style:sn},s.a.createElement(V.a,{amount:i,asset:t.get("id"),hide_asset:!0})),s.a.createElement("td",{style:sn},s.a.createElement(V.a,{amount:0,asset:t.get("id"),hide_asset:!0})),s.a.createElement("td",{style:sn,className:"column-hide-medium"},s.a.createElement(V.a,{decimalOffset:5,amount:0,asset:a.get("id")})),s.a.createElement("td",null),s.a.createElement("td",{style:sn}),s.a.createElement("td",{style:sn,className:"column-hide-small"}),s.a.createElement("td",{style:sn,className:"column-hide-small"}),s.a.createElement("td",{className:"center-content column-hide-small",style:rn}),s.a.createElement("td",null,s.a.createElement("div",{"data-place":"left","data-tip":Q.a.translate("tooltip.update_position"),style:{paddingBottom:5}},s.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},s.a.createElement(Ne.a,{name:"adjust",title:"icons.adjust",className:"icon-14px rotate90"})))),s.a.createElement("td",null,t?s.a.createElement(Qa.a,{ref:"cp_modal_"+t.get("id"),modalId:"cp_modal_"+t.get("id"),quote_asset:t.get("id"),backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();cn.propTypes={debtAsset:u.a.ChainAsset.isRequired,collateralAsset:u.a.ChainAsset.isRequired},cn.defaultProps={tempComponent:"tr"},cn=Object(p.a)(cn);var un=function(e){function t(){return tn(this,t),an(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return nn(t,s.a.Component),$a(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.callOrders,r=t.bitAssets;if(n=n.filter(function(e){return!!e}),!(r=r.filter(function(e){return!!e})).length)return null;if(n.forEach(function(e){if(e){var t=r.findIndex(function(t){return t&&t.get("id")===e.getIn(["call_price","quote","asset_id"])});-1!==t&&r.splice(t,1)}}),!r.length)return null;var o=r.map(function(t){return s.a.createElement(cn,Xa({key:t.get("id"),debtAsset:t.get("id"),collateralAsset:t.getIn(["bitasset","options","short_backing_asset"]),account:a},e.props))});return s.a.createElement("tbody",null,o)}}]),t}();un.propTypes={callOrders:u.a.ChainObjectsList},un=Object(p.a)(un),un=Object(te.a)(un,{propNames:["bitAssets"],defaultProps:{bitAssets:["1.3.103","1.3.113","1.3.120","1.3.121","1.3.958","1.3.1325","1.3.1362","1.3.105","1.3.106"]},asList:!0});var pn=function(e){var t=e.callOrders,a=e.account,n=e.className,r=e.children,o=e.preferredUnit;return s.a.createElement("table",{className:"table table-hover "+n},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{style:rn},s.a.createElement(D.a,{content:"explorer.asset.title"})),s.a.createElement("th",{style:sn},s.a.createElement(D.a,{content:"exchange.balance"})),s.a.createElement("th",{style:sn},s.a.createElement(D.a,{content:"transaction.borrow_amount"})),s.a.createElement("th",{style:sn,className:"column-hide-medium"},s.a.createElement(D.a,{content:"transaction.collateral"})),s.a.createElement("th",null,s.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":Q.a.translate("tooltip.coll_ratio")},s.a.createElement(D.a,{content:"borrow.coll_ratio"}))),s.a.createElement("th",null,s.a.createElement(Ya.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:o,arg:"asset"}]})),s.a.createElement("th",{style:sn,className:"column-hide-small"},s.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":Q.a.translate("tooltip.call_price")},s.a.createElement(D.a,{content:"exchange.call"}))),s.a.createElement("th",{style:sn,className:"column-hide-small"},s.a.createElement(D.a,{content:"exchange.price"})),s.a.createElement("th",{className:"column-hide-small",style:rn},s.a.createElement(D.a,{content:"explorer.assets.units"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"borrow.adjust_short"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"transfer.close"})))),s.a.createElement("tbody",null,t.sort(function(e,t){return e.split(".")[2]-t.split(".")[2]}).map(function(e){return s.a.createElement(ln,{key:e,object:e,account:a})})),s.a.createElement(un,{account:a,callOrders:f.a.List(t)}),s.a.createElement("tbody",null,r))},mn=a(330),dn=a(174),hn=a(1767),fn={AccountPermission:function(e,t,a){var n=this;this.id=e.get("id"),this.weight=t,this.threshold=e.getIn([a,"weight_threshold"]),this.accounts=[],this.keys=e.getIn([a,"key_auths"]).map(function(e){return new function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}}(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(n.id):-1!==e.indexOf(n)},this._sumWeights=function(e){if(n.isNested()||n.isMultiSig()){var t=n.accounts.reduce(function(t,a){return t+(a._sumWeights(e)?a.weight:0)},0);return Math.floor(t/n.threshold)}return n.isAvailable(e)?n.weight:0},this.getStatus=function(e,t){if(n.isNested()){var a=n.accounts.reduce(function(t,a){return t+a._sumWeights(e)},0);return n.keys.length&&(a+=n.sumKeys(t)),a}var s=n._sumWeights(e);return n.isMultiSig()&&(s+=n.sumKeys(t)),s},this.sumKeys=function(e){return n.keys.reduce(function(t,a){return t+(a.isAvailable(e)?a.weight:0)},0)},this.isNested=function(){return n.accounts.length>0},this.isMultiSig=function(){return n.keys.reduce(function(e,t){return e||t.weight<n.threshold},!1)},this.getMissingSigs=function(e){var t=[],a=[];return n.isNested()?a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingSigs(e))},[]):n.isAvailable(e)||t.push(n.id),t.concat(a)},this.getMissingKeys=function(e){var t=[],a=[];return n.keys.length&&(n.isNested()||n.isMultiSig())&&n.keys.forEach(function(a){a.isAvailable(e)||t.push(a.id)}),n.isNested()&&(a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingKeys(e))},[])),t.concat(a)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get("id"):e)}),t},unravel:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<3){var s=ce.b.getAccount(e.id);s&&s.getIn([t,"account_auths"]).size&&s.getIn([t,"account_auths"]).forEach(function(s){var r=ce.b.getAccount(s.get(0));r&&e.accounts.push(a.unravel(new a.AccountPermission(r,s.get(1),t),t,n+1))})}return e},unnest:function(e,t){var a=this,n=[];return e.forEach(function(e){var s=ce.b.getAccount(e),r=a.unravel(new a.AccountPermission(s,null,t),t);n.push(r)}),n},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},bn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var gn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),bn(t,[{key:"componentDidMount",value:function(){Va.a.rebuild()}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.children,n=e.dataTip,r=e.content;return s.a.createElement("span",{className:"tooltip "+t,"data-html":!0,"data-tip":n||Q.a.translate(r)},a)}}]),t}(),_n=function(){return s.a.createElement(gn,{className:"error appended",content:"explorer.proposals.authority_depth_warning"},"/!\\")},vn=function(){return s.a.createElement(gn,{className:"error appended",content:"explorer.proposals.children_authority_depth_warning"},"/!\\")},yn=function(){return s.a.createElement(gn,{className:"warning",content:"explorer.proposals.pending_approval"},s.a.createElement(D.a,{content:"explorer.proposals.pending"}))},En=function(){return s.a.createElement(gn,{className:"warning",content:"explorer.proposals.pending_review"},s.a.createElement(D.a,{content:"explorer.proposals.review"}))},wn=function(){return s.a.createElement(gn,{className:"error",content:"explorer.proposals.failed_execute"},s.a.createElement(D.a,{content:"explorer.proposals.failed"}))},kn=function(e){var t=e.onToggle,a=e.expanded;return s.a.createElement("a",{className:"expand-button",onClick:t},"[",a?"-":"+","]")},xn=function(e){return e.approved?s.a.createElement(Ne.a,{name:"checkmark-circle",size:"1x",className:"success",title:"icons.checkmark_circle.operation_succeed"}):s.a.createElement(Ne.a,{name:"cross-circle",size:"1x",className:"error",title:"icons.cross_circle.operation_failed"})},An=function(e){var t=e.available,a=e.permission,n=e.weight,r=e.level;return s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"2"},s.a.createElement(xn,{approved:a.isAvailable(t)}),a.id.substr(0,20-4*r),"..."),s.a.createElement("td",null,n)))},On=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n>t||!(!a.isNested()&&!a.isMultiSig())&&a.accounts.some(function(a){return e(t,a,n+1)})},Cn=function(e,t,a){return e.accounts.reduce(function(e,n){return e+(Nn(n,t,a)?n.weight:0)},0)+e.keys.reduce(function(e,t){return e+(t.isAvailable(a)?t.weight:0)},0)},Nn=function(e,t,a){return e.isNested()||e.isMultiSig()?Cn(e,t,a)>=e.threshold:e.isAvailable(t)},Sn=function(e,t,a){return e&&e.threshold>10?J.a.get_percentage(e.getStatus(t,a),e.threshold)+" / 100%":e.getStatus(t,a)+" / "+e.threshold},Pn=function(e,t){return t&&t>10?J.a.get_percentage(e,t):e},jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},In=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Rn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Bn=function(e){function t(e){Tn(this,t);var a=Mn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){a.setState({expanded:!a.state.expanded})},a.state={expanded:!!e.expanded},a}return Rn(t,s.a.Component),In(t,[{key:"render",value:function(){var e=this.props,t=e.account,a=e.available,n=e.availableKeys,r=e.permission,o=e.threshold,i=e.level,l=e.maxAuthorityDepth,c=e.hideRoot,u=this.state.expanded,p=Nn(r,a,n),m=r.isNested(),d=r.isMultiSig(),h=Pn(r.weight,o)||1,f=Sn(r,a,n),b=i>=l,g=m||d?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"2"},s.a.createElement(xn,{approved:p}),s.a.createElement(Oe.a,{subpage:"permissions",account:t.get("id")})),s.a.createElement("td",null,u?s.a.createElement("span",{className:p?"success-text":""},h):h&&(h&&2===h.length?"  ":"")+h+" ",s.a.createElement(kn,{onToggle:this.handleExpandToggle,expanded:u}),u&&s.a.createElement("span",{className:"appended"},"(",f,")"),b?s.a.createElement(_n,null):On(l,r,i)&&!u&&s.a.createElement(vn,null))):s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"2"},s.a.createElement(xn,{approved:p}),s.a.createElement(Oe.a,{subpage:"permissions",account:t.get("id")})),s.a.createElement("td",null,!m&&h?(h&&2===h.length?"  ":"")+h+" ":null)),_=[];return(m||d)&&u&&(r.accounts.forEach(function(e){_.push(s.a.createElement(Dn,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:a,availableKeys:n,threshold:r.threshold,level:i+1,maxAuthorityDepth:l}))}),r.keys.length&&r.keys.forEach(function(e){return _.push(s.a.createElement(An,{key:e.id,permission:e,available:n,level:i+(c?0:1),weight:Pn(e.weight,o)}))})),_.length>0?s.a.createElement("tbody",null,c||g,s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"3",className:"heading-perm"},s.a.createElement("div",{className:c?"":"table-container"},s.a.createElement("table",null,_)),u&&0===i&&s.a.createElement("div",{className:"spacer"})))):s.a.createElement("tbody",null,g)}}]),t}();Bn.propTypes={account:u.a.ChainAccount.isRequired,accounts:u.a.ChainAccountsList,level:v.a.number.isRequired},Bn.defaultProps={level:0};var Dn=Object(p.a)(Bn),Ln=function(e){function t(e){Tn(this,t);var a=Mn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){return a.setState({expanded:!a.state.expanded})},a.state={requiredPermissions:[],expanded:e.expanded},a._updateState=a._updateState.bind(a),a}return Rn(t,s.a.Component),In(t,[{key:"componentWillMount",value:function(){this._updateState(),ce.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){ce.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=fn.listToIDs(this.props.required),t=fn.listToIDs(this.props.available);this.setState({requiredPermissions:fn.unnest(e,this.props.type),required:e,available:t})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.type,t.added),n=t.removed,r=t.availableKeys,o=t.globalObject,i=t.reviewPeriodTime,l=t.noFail,c=this.state,u=c.requiredPermissions,p=(c.required,c.available),m=c.expanded;p=Object(hn.a)(p),r=r.toJS(),a&&(p.push(a),r.push(a)),n&&(-1!==p.indexOf(n)&&p.splice(p.indexOf(n),1),-1!==r.indexOf(n)&&r.splice(r.indexOf(n),1));var d=u.reduce(function(e,t){return e+(Nn(t,p,r)?1:0)},0),h=u.length,f=d===h,b=f&&!i&&!l,g=f&&i,_=o.get("parameters").get("max_authority_depth"),v=1===u.length,y=v?u[0]:null,E=!v&&d+" / "+h,w=u.map(function(t){return s.a.createElement(Dn,{key:t.id,account:t.id,accounts:t.accounts,permission:t,available:p,availableKeys:r,expanded:e.props.expanded||v,level:0,maxAuthorityDepth:_,hideRoot:v})});return s.a.createElement("div",{className:"nested-approval-state"},s.a.createElement("div",{className:"root-status"},b?s.a.createElement(wn,null):g?s.a.createElement(En,null):s.a.createElement(yn,null)," ",y?y.threshold>1&&Sn(y,p,r):s.a.createElement("span",null,"(",E,")"),(!y||y.isMultiSig()||y.isNested())&&s.a.createElement(kn,{onToggle:this.handleExpandToggle,expanded:m}),!m&&u.some(function(e){return On(_,e,0)})&&s.a.createElement(vn,null)),m&&s.a.createElement("table",null,w))}}]),t}();Ln.propTypes={required:u.a.ChainAccountsList,available:u.a.ChainAccountsList},Ln.defaultProps={type:"active",added:null,removed:null},Ln=Object(p.a)(Ln);var qn=function(e){function t(){return Tn(this,t),Mn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Rn(t,s.a.Component),In(t,[{key:"render",value:function(){var e=this.props,t=e.proposal,a=e.type,n=t.get("available_"+a+"_approvals"),r=t.get("available_key_approvals"),o=t.get("required_"+a+"_approvals");return s.a.createElement(Ln,jn({},this.props,{required:o,available:n,availableKeys:r,reviewPeriodTime:t.get("review_period_time")}))}}]),t}();qn.propTypes={proposal:u.a.ChainObject.isRequired,type:v.a.string.isRequired,globalObject:u.a.ChainObject.isRequired},qn.defaultProps={type:"active",added:null,globalObject:"2.0.0"};var Fn=Object(p.a)(qn),Vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Wn=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(s)throw r}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Un=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Gn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Kn=function(e,t,a){var n=[];e.forEach(function(e){n=n.concat(e.getMissingSigs(t))});var s=[];return e.forEach(function(e){s=s.concat(e.getMissingKeys(a))}),[n,s]},Hn=function(e){function t(e){zn(this,t);var a=Jn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={active:null,key:null,owner:null,payee:null},a}return Gn(t,s.a.Component),Un(t,[{key:"onActiveAccount",value:function(e,t,a,n){var s={};t[n]?(s.key=n,s[a]=null):n?(s[a]=e[n],s.key=null):(s[a]=null,s.key=null),this.setState(s)}},{key:"_onProposalAction",value:function(e){var t=this,a=e.toJS(),n=this.state,s=n.active,r=(n.key,n.owner,{fee_paying_account:n.payee||s,proposal:a.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]}),o="approve"===this.props.action,i=[];["active","owner","key"].forEach(function(e){var n=t.state[e];if(n){var s=-1!==a["available_"+e+"_approvals"].indexOf(n);(o&&!s||!o&&s)&&("approve"===t.props.action?(r[e+"_approvals_to_add"]=[n],"key"===e&&i.push(n)):"reject"===t.props.action&&(r[e+"_approvals_to_remove"]=[n],"key"===e&&i.push(n)))}});var l=ra.a.new_transaction();l.add_type_operation("proposal_update",r),_t.a.process_transaction(l,null,!0,i),U.a.publish(this.props.modalId,"close")}},{key:"onChangePayee",value:function(e){var t=ce.b.getAccount(e);t&&this.setState({payee:t.get("id")})}},{key:"onCancel",value:function(){U.a.publish(this.props.modalId,"close")}},{key:"render",value:function(){var e=this.props,t=e.proposal,a=e.type,n=[],r={},i="approve"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(i?e&&!t.get("available_"+a+"_approvals").includes(e.get("id")):e&&t.get("available_"+a+"_approvals").includes(e.get("id")))&&(r[e.get("name")]=e.get("id"),n.push(e.get("name")))});var l=[],c={};this.props.keys.length&&this.props.keys.forEach(function(e){var a=o.a.isMyKey(e),n=t.get("available_key_approvals").includes(e);(a&&i&&!n||a&&!i&&n)&&(c[e]=!0,l.push(e))});var u=o.a.getMyAccounts();return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h4",null,i?"Add approval":"Remove approval")),s.a.createElement("div",{className:"content-block",style:{paddingRight:"20%"}},s.a.createElement(Fn,{expanded:!0,proposal:t.get("id"),type:a,added:i?this.state.key?this.state.key:this.state[a]||null:null,removed:i?null:this.state.key?this.state.key:this.state[a]||null,noFail:!0})),s.a.createElement("div",{className:"content-block full-width-content"},s.a.createElement("div",{className:"full-width-content form-group"},s.a.createElement(D.a,{content:"modal.proposals.pay_with",component:"label"}),s.a.createElement(dn.a,{account_names:u,onChange:this.onChangePayee.bind(this)})),n.length||l.length?s.a.createElement("div",{className:"full-width-content form-group"},s.a.createElement(D.a,{content:"modal.proposals.approval_"+(i?"add":"remove"),component:"label"}),s.a.createElement(dn.a,{account_names:n.concat(l),onChange:this.onActiveAccount.bind(this,r,c,a)})):null,null),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this._onProposalAction.bind(this,t),value:i?"Approve":"Remove"}),s.a.createElement("div",{onClick:this.onCancel.bind(this),className:" button"},s.a.createElement(D.a,{content:"account.perm.cancel"})))))}}]),t}();Hn.propTypes={accounts:u.a.ChainAccountsList},Hn=Object(p.a)(Hn);var Zn=function(e){function t(){zn(this,t);var e=Jn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return Gn(t,s.a.Component),Un(t,[{key:"componentWillMount",value:function(){this._updateState(),ce.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){ce.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=this.props,t=e.proposal,a=(e.account,t.get("required_active_approvals").size?"active":"owner"),n=fn.listToIDs(t.get("required_"+a+"_approvals")),s=fn.listToIDs(t.get("available_"+a+"_approvals")),r=fn.listToIDs(t.get("available_key_approvals"));this.setState({requiredPermissions:fn.unnest(n,a),available:s,availableKeys:r,type:a})}},{key:"render",value:function(){var e=this.props.action,t=this.state,a=t.requiredPermissions,n=t.available,r=t.availableKeys,o=t.type,i=Kn(a,n,r),l=Wn(i,2),c=l[0],u=l[1];return s.a.createElement(Hn,Vn({},this.props,{type:o,accounts:"approve"===e?c:n,keys:"approve"===e?u:r}))}}]),t}();Zn.propTypes={account:u.a.ChainAccount.isRequired,proposal:u.a.ChainObject.isRequired},Zn=Object(p.a)(Zn);var Qn=function(e){function t(){zn(this,t);var e=Jn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return Gn(t,s.a.Component),Un(t,[{key:"componentDidMount",value:function(){var e=this;U.a.subscribe(this.props.modalId,function(t,a){e.setState({open:"open"===a})})}},{key:"show",value:function(){U.a.publish(this.props.modalId,"open")}},{key:"render",value:function(){var e=this.props,t=e.modalId;e.proposal;return s.a.createElement(F.a,{id:t,overlay:!0,ref:t},this.state.open?s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(Zn,this.props)):null)}}]),t}(),Yn=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(s)throw r}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Xn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var $n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.forceUpdate=e.forceUpdate.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),Xn(t,[{key:"componentDidMount",value:function(){ce.b.subscribe(this.forceUpdate)}},{key:"componentWillUnmount",value:function(){ce.b.unsubscribe(this.forceUpdate)}},{key:"_onApproveModal",value:function(e,t){this.refs[e+"_"+t]&&this.refs[e+"_"+t].show()}},{key:"_canReject",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length||e.available_key_approvals.length}},{key:"render",value:function(){var e=this,t=this.props.account;if(!t)return null;var a=[];t.get("proposals").size&&t.get("proposals").forEach(function(e){var n=ce.b.getObject(e);if(n){var s=n.get("proposed_transaction").get("operations");a.push({operations:s,account:t,proposal:n})}});var n=a.sort(function(e,t){return J.a.sortID(e.proposal.get("id"),t.proposal.get("id"),!0)}).reduce(function(t,a,n){var r=!1,i=a.proposal.get("id"),l=a.proposal.get("expiration_time"),c=a.operations.map(function(e,t){return"1.2.153124"===e.getIn([1,"to"])&&(r=!0),s.a.createElement(mn.b,{key:a.proposal.get("id")+"_operation_"+t,expiration:l,index:t,op:e.toJS(),inverted:!1,hideFee:!0,hideOpLabel:!0,hideExpiration:!0,hideDate:!0,proposal:!0,id:i})}).toArray(),u=e._canReject(a.proposal.toJS()),p=a.proposal.get("id"),m=a.proposal.get("required_active_approvals").size?"active":"owner";t.push(s.a.createElement("tr",{key:p+"_id"},s.a.createElement("td",{colSpan:"4",className:"proposal"+(0===n?" first":"")},s.a.createElement(mn.a,{id:i,expiration:l}))));var d=fn.listToIDs(a.proposal.get("available_"+m+"_approvals")),h=fn.listToIDs(a.proposal.get("available_key_approvals")),f=fn.listToIDs(a.proposal.get("required_"+m+"_approvals")),b=fn.unnest(f,m),g=Kn(b,d,h),_=Yn(g,2),v=_[0],y=_[1],E=[];v.length&&v.forEach(function(e){e&&!a.proposal.get("available_"+m+"_approvals").includes(e)&&E.push(e)});var w=[];y.length&&y.forEach(function(e){o.a.isMyKey(e)&&!a.proposal.get("available_key_approvals").includes(e)&&w.push(e)});var k=E.length+w.length>0;return t.push(s.a.createElement("tr",{className:"top-left-align",key:p+"_content"},s.a.createElement("td",null,c),s.a.createElement("td",null,b.map(function(e,t){return s.a.createElement("div",{className:"list-item",key:p+"_approver_"+t},s.a.createElement(Oe.a,{subpage:"permissions",account:e.id}))})),s.a.createElement("td",null,s.a.createElement(Fn,{proposal:a.proposal.get("id"),type:m})),s.a.createElement("td",{className:"approval-buttons"},r?s.a.createElement("div",{"data-tip":Q.a.translate("tooltip.propose_scam"),className:"tooltip has-error scam-error"},"SCAM"):s.a.createElement("button",{onClick:k?e._onApproveModal.bind(e,p,"approve"):function(){},className:"button primary hollow"+(k?"":" hidden")},s.a.createElement("span",null,s.a.createElement(D.a,{content:"proposal.approve"}))),s.a.createElement(Qn,{ref:p+"_approve",modalId:p+"_approve",account:a.account.get("id"),proposal:p,action:"approve"}),u?s.a.createElement("button",{onClick:e._onApproveModal.bind(e,p,"reject"),className:"button primary hollow"},s.a.createElement(D.a,{content:"proposal.reject"})):null,s.a.createElement(Qn,{ref:p+"_reject",modalId:p+"_reject",account:a.account.get("id"),proposal:p,action:"reject"})))),t.push(s.a.createElement("tr",{key:p+"_separator"},s.a.createElement("td",{colSpan:"4"},s.a.createElement("hr",null)))),t},[]);return s.a.createElement("table",{className:"table proposals compact "+this.props.className},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(D.a,{content:"proposal.proposals"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"proposal.approvers"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"proposal.status"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"proposal.action"})))),s.a.createElement("tbody",null,n))}}]),t}();$n.propTypes={account:u.a.ChainAccount.isRequired};var es=Object(p.a)($n),ts=a(114),as=a.n(ts),ns=a(481),ss=a(59),rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},os=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function is(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ls(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function cs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var us=function(e){function t(){return is(this,t),ls(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return cs(t,ns["a"]),os(t,[{key:"shouldComponentUpdate",value:function(e,a){return function e(t,a,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,a);if(void 0===s){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.base_amount!==this.props.base_amount||e.quote_amount!==this.props.quote_amount||e.decimals!==this.props.decimals||!J.a.are_equal_shallow(e.pulsate,this.props.pulsate)||!J.a.are_equal_shallow(a,this.state)}},{key:"getFinalPrice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,a=t.coreAsset,n=t.fromAsset,s=t.toAsset,r=t.marketStats;return ss.a.getFinalPrice(a,n,s,r,e)}},{key:"render",value:function(){var e=this.props,t=e.toAsset,a=e.forceDirection,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["toAsset","forceDirection"]),r=this.getFinalPrice();return 1===r?s.a.createElement("span",null,"1.00"):r?s.a.createElement(xe.a,rs({force_direction:!!a&&t.get("symbol"),base_amount:r.base.amount,base_asset:r.base.asset_id,quote_amount:r.quote.amount,quote_asset:r.quote.asset_id},n)):s.a.createElement("span",null,"--")}}]),t}();us.defaultProps={forceDirection:!0},us=Object(te.a)(us,{propNames:["toAsset","fromAsset","coreAsset"],defaultProps:{toAsset:"1.3.0",coreAsset:"1.3.0"}});var ps=function(e){function t(){return is(this,t),ls(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return cs(t,s.a.Component),os(t,[{key:"render",value:function(){var e=this;return s.a.createElement(as.a,{stores:[i.a,qa.a],inject:{toAsset:function(){return e.props.toAsset||i.a.getState().settings.get("unit","1.3.0")},marketStats:function(){return qa.a.getState().allMarketStats}}},s.a.createElement(us,rs({},this.props,{ref:this.props.refCallback})))}}]),t}(),ms=a(607),ds=a(1875),hs=a(1874),fs=a(1822),bs=a(71),gs=a(34),_s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function vs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ys=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedOrders:[],filterValue:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),_s(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("cancelAllOrders");e&&e.addEventListener("click",function(){var e=this._getFilteredOrders.call(this);e=e.toJS?e.toJS():e,this.setState({selectedOrders:e}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked||(e.checked=!0)})}.bind(this))}},{key:"_getFilteredOrders",value:function(){var e=this.state.filterValue;return(this.props.account.get("orders")||[]).filter(function(t){var a=ce.b.getObject(t).toJS(),n=ce.b.getAsset(a.sell_price.base.asset_id),s=ce.b.getAsset(a.sell_price.quote.asset_id),r=n.get("symbol").toLowerCase(),o=s.get("symbol").toLowerCase();return r.indexOf(e)>-1||o.indexOf(e)>-1})}},{key:"_cancelLimitOrder",value:function(e,t){t.preventDefault(),bs.a.cancelLimitOrder(this.props.account.get("id"),e,!1).catch(function(e){console.log("cancel order error:",e)})}},{key:"_cancelLimitOrders",value:function(e){var t=this;bs.a.cancelLimitOrders(this.props.account.get("id"),this.state.selectedOrders).then(function(){t.resetSelected()}).catch(function(e){console.log("cancel orders error:",e)})}},{key:"onFlip",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),Se.a.changeMarketDirection(t)}},{key:"onCheckCancel",value:function(e,t){var a=this.state.selectedOrders;if(t.target.checked)this.setState({selectedOrders:a.concat([e])});else{var n=a.indexOf(e);n>-1&&this.setState({selectedOrders:a.slice(0,n).concat(a.slice(n+1))})}}},{key:"setFilterValue",value:function(e){this.setState({filterValue:e.target.value.toLowerCase()})}},{key:"resetSelected",value:function(){this.setState({selectedOrders:[]}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked&&(e.checked=!1)})}},{key:"cancelSelected",value:function(){this._cancelLimitOrders.call(this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.marketDirections,r=this.state,o=r.filterValue,i=r.selectedOrders,l=Q.a.translate("account.perm.cancel"),c={},u={};if(!a.get("orders"))return null;var p=a.get("orders"),m=p.size;o&&(p=this._getFilteredOrders.call(this)),p.forEach(function(t){var a=ce.b.getObject(t).toJS(),r=ce.b.getAsset(a.sell_price.base.asset_id),o=ce.b.getAsset(a.sell_price.quote.asset_id);if(r&&o){var i,p=(vs(i={},r.get("id"),{precision:r.get("precision")}),vs(i,o.get("id"),{precision:o.get("precision")}),i),m=ss.a.getMarketName(r,o).marketName,d=n.get(m);c[m]||(c[m]=d?{base:{id:r.get("id"),symbol:r.get("symbol"),precision:r.get("precision")},quote:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")}}:{base:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")},quote:{id:r.get("id"),symbol:r.get("symbol"),precision:r.get("precision")}});var h=new gs.d(a,p,c[m].quote.id),f=ce.b.getAsset(c[m].base.id),b=ce.b.getAsset(c[m].quote.id);u[m]||(u[m]=[]),u[m].push(s.a.createElement(fs.b,{ref:c[m].base.symbol,key:a.id,order:h,base:f,quote:b,cancel_text:l,showSymbols:!1,invert:!0,onCancel:e._cancelLimitOrder.bind(e,a.id),price:h.getPrice(),dashboard:!0,isMyAccount:e.props.isMyAccount,settings:e.props.settings,onFlip:e.onFlip.bind(e,m),onCheckCancel:e.onCheckCancel.bind(e,a.id)}))}});var d=[];for(var h in u)u[h].length&&(d.push(s.a.createElement("tbody",{key:h},u[h].sort(function(e,t){return e.props.price-t.props.price}))),0);return s.a.createElement("div",{className:"grid-content no-overflow no-padding",style:{paddingBottom:15}},s.a.createElement("div",{className:"header-selector"},p&&m?s.a.createElement("input",{type:"text",placeholder:Q.a.translate("account.filter_orders"),style:{display:"inline-block",maxWidth:"50%",marginRight:"1em",marginBottom:"0"},onChange:this.setFilterValue.bind(this)}):null,i.length?s.a.createElement("button",{className:"button",onClick:this.resetSelected.bind(this)},s.a.createElement(D.a,{content:"account.reset_orders"})):null,i.length?s.a.createElement("button",{className:"button",onClick:this.cancelSelected.bind(this)},s.a.createElement(D.a,{content:"account.submit_orders"})):null),s.a.createElement("table",{className:"table table-striped dashboard-table table-hover"},s.a.createElement(fs.c,{settings:this.props.settings,dashboard:!0,isMyAccount:this.props.isMyAccount}),d,this.props.children))}}]),t}(),Es=ys=Object(m.connect)(ys,{listenTo:function(){return[i.a]},getProps:function(){return{marketDirections:i.a.getState().marketDirections}}}),ws={},ks=6e4;var xs=a(600),As=a(610),Os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Cs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ns(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ss=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=Ns(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.tick=function(){var e=n.props,t=e.onIcon,a=e.offIcon,s=(n.state||{}).name,r=void 0===s?t:s;n.setState({name:r===t?a:t})},Ns(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),Cs(t,[{key:"componentDidMount",value:function(){var e=this.props.duration;this.interval=setInterval(this.tick,e)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.onIcon,a=e.rest,n=(this.state||{}).name,r=void 0===n?t:n,o=this.props.title;return s.a.createElement(Ne.a,Os({name:r,title:o},a))}}]),t}();Ss.propTypes={duration:v.a.number.isRequired,offIcon:v.a.string.isRequired,onIcon:v.a.string.isRequired,title:v.a.string.isRequired};var Ps=Ss,js=a(601),Is=a(1804),Ts=a.n(Is),Ms=a(1990),Rs=a.n(Ms),Bs=a(1989),Ds=a.n(Bs),Ls=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},qs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Fs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vs(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ws(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Rs()(Ts.a.Highcharts),Ds()(Ts.a.Highcharts);var Us=function(e){function t(){return Fs(this,t),Vs(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ws(t,s.a.Component),qs(t,[{key:"render",value:function(){var e=this.props,t=e.balanceObjects,a=e.core_asset,n=e.marketStats,r=e.preferredAsset,o=null;if(t&&t.length>0){var i=0;o=t.forEach(function(e){if(e){var t="string"==typeof e?ce.b.getObject(e):e,s=t.get("asset_type"),o=ce.b.getAsset(s);if(o&&r){var l=Number(t.get("balance")),c=ss.a.convertValue(l,r,o,n,a);if(c){var u=J.a.get_asset_precision(r.get("precision"));i+=c/u}}}}),o=t.map(function(e,t){if(!e)return null;var s="string"==typeof e?ce.b.getObject(e):e,o=s.get("asset_type"),l=ce.b.getAsset(o);if(!l)return null;var c=Number(s.get("balance")),u=ss.a.convertValue(c,r,l,n,a);if(!u)return null;var p=u/J.a.get_asset_precision(r.get("precision")),m=p/i*100;return m<.5?null:p>=1?{name:l.get("symbol")+" ("+(0===i?0:m.toFixed(2))+"%)",value:p,color:Ts.a.Highcharts.getOptions().colors[t]}:null}).filter(function(e){return!!e})}o&&1===o.length&&0===o[0].value&&(o=null);var l={chart:{backgroundColor:"rgba(255, 0, 0, 0)",height:250,spacingLeft:0,spacingRight:0,spacingBottom:0},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{treemap:{animation:!1,tooltip:{pointFormatter:function(){return"<b>"+this.name+"</b>: "+Ts.a.Highcharts.numberFormat(this.value,0)+" "+r.get("symbol")}}}},series:[{type:"treemap",levels:[{level:1,layoutAlgorithm:"sliceAndDice",dataLabels:{enabled:!0,align:"center",verticalAlign:"middle"}}],data:o}],title:{text:null}};return s.a.createElement("div",{className:"account-treemap"},s.a.createElement(Ts.a,{config:l}))}}]),t}();Us.propTypes={assets:u.a.ChainAssetsList,preferredAsset:u.a.ChainAsset.isRequired},Us.defaultProps={assets:[],preferredAsset:"1.3.0"},Us=Object(p.a)(Us);var zs=function(e){function t(){return Fs(this,t),Vs(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ws(t,s.a.Component),qs(t,[{key:"render",value:function(){var e=this.props.balanceObjects.filter(function(e){return!!e}).map(function(e){return e.get("asset_type")});return s.a.createElement(Us,Ls({preferredAsset:this.props.settings.get("unit","1.3.0"),assets:e},this.props))}}]),t}();zs.propTypes={balanceObjects:u.a.ChainObjectsList,core_asset:u.a.ChainAsset.isRequired},zs.defaultProps={balanceObjects:[],core_asset:"1.3.0"},zs=Object(p.a)(zs);var Js=function(e){function t(){return Fs(this,t),Vs(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ws(t,s.a.Component),qs(t,[{key:"render",value:function(){return s.a.createElement(as.a,{stores:[i.a,qa.a],inject:{marketStats:function(){return qa.a.getState().allMarketStats},settings:function(){return i.a.getState().settings}}},s.a.createElement(zs,Ls({},this.props,{ref:this.props.refCallback})))}}]),t}(),Gs=a(107),Ks=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Hs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Zs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Qs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ys(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Xs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var $s=function(e){function t(e){Qs(this,t);var a=Ys(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));for(var n in a.sortFunctions={qty:function(e,t,a){return Number(this.qtyRefs[e.key])<Number(this.qtyRefs[t.key])?this.state.sortDirection||a?-1:1:Number(this.qtyRefs[e.key])>Number(this.qtyRefs[t.key])?this.state.sortDirection||a?1:-1:void 0},alphabetic:function(e,t,a){return e.key>t.key?this.state.sortDirection||a?1:-1:e.key<t.key?this.state.sortDirection||a?-1:1:0},priceValue:function(e,t){var a=this.priceRefs[e.key],n=this.priceRefs[t.key];if(a&&n){var s=a.getFinalPrice(!0),r=n.getFinalPrice(!0);return null===s&&null!==r?1:null!==s&&null===r?-1:null===s&&null===r?this.sortFunctions.alphabetic(e,t,!0):this.state.sortDirection?s-r:r-s}},totalValue:function(e,t){var a=this.valueRefs[e.key],n=this.valueRefs[t.key];if(a&&n){var s=a.getValue(),r=n.getValue();return!s&&r?1:s&&!r?-1:s||r?this.state.sortDirection?s-r:r-s:this.sortFunctions.alphabetic(e,t,!0)}},changeValue:function(e,t){var a=this.changeRefs[e.key],n=this.changeRefs[t.key];if(a&&n){var s=a.getValue(),r=n.getValue(),o="NaN"!=parseFloat(s)?parseFloat(s):s,i="NaN"!=parseFloat(r)?parseFloat(r):r;return void 0===this.state.sortDirection||this.state.sortDirection?o-i:i-o}}},a._renderBuy=function(e,t,n,r,o){return"BTS"===e&&o<=1e5?s.a.createElement("span",null,s.a.createElement("a",{onClick:a._showDepositWithdraw.bind(a,"bridge_modal",n,!1)},s.a.createElement(Ps,{onIcon:"dollar",offIcon:"dollar-green",title:"icons.dollar.buy",duration:1e3,className:"icon-14px"}))):t&&a.props.isMyAccount?s.a.createElement("span",null,s.a.createElement("a",{onClick:a._showDepositWithdraw.bind(a,"bridge_modal",n,!1)},s.a.createElement(Ne.a,{name:"dollar",title:"icons.dollar.buy",className:"icon-14px"}))):r},a.state={sortKey:e.viewSettings.get("portfolioSort","totalValue"),sortDirection:e.viewSettings.get("portfolioSortDirection",!0),settleAsset:"1.3.0",shownAssets:e.viewSettings.get("shownAssets","active"),depositAsset:null,withdrawAsset:null,bridgeAsset:null,alwaysShowAssets:["BTS"]},a.qtyRefs={},a.priceRefs={},a.valueRefs={},a.changeRefs={},a.sortFunctions)a.sortFunctions[n]=a.sortFunctions[n].bind(a);return a._handleFilterInput=a._handleFilterInput.bind(a),a}return Xs(t,s.a.Component),Hs(t,[{key:"_handleFilterInput",value:function(e){e.preventDefault(),this.setState({filterValue:e.target.value})}},{key:"componentWillMount",value:function(){this._checkMarginStatus()}},{key:"_checkMarginStatus",value:function(){var e=this;(function(e){if(!e||e&&!e.get("call_orders",[]).size)return Promise.resolve(null);var t=e.get("name")+JSON.stringify(e.get("call_orders"));return ws[t]?ws[t].result?Promise.resolve(ws[t].result):new Promise(function(e,a){ws[t].queue.push({res:e,rej:a})}):new Promise(function(a,n){ws[t]={queue:[{res:a,rej:n}],result:null},Object(ce.f)("getObject",e.get("call_orders").toArray()).then(function(e){var a=[];e.forEach(function(e){var t=e.getIn(["call_price","base","asset_id"]),n=e.getIn(["call_price","quote","asset_id"]);-1===a.indexOf(t)&&a.push(t),-1===a.indexOf(n)&&a.push(n)}),Object(ce.f)("getAsset",a,6e3).then(function(a){var n={};a.forEach(function(e){n[e.get("id")]=e.toJS()});var s={};e.forEach(function(e){var t=n[e.getIn(["call_price","quote","asset_id"])],a=n[e.getIn(["call_price","base","asset_id"])],r=t.bitasset.current_feed.settlement_price;if(r.base.asset_id===r.quote.asset_id)s[t.id]={ratio:null};else{var o=new gs.a({amount:e.get("collateral"),asset_id:a.id,precision:a.precision}),i=new gs.a({amount:e.get("debt"),asset_id:t.id,precision:t.precision}),l=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,c=new gs.c({priceObject:t.bitasset.current_feed.settlement_price,market_base:t.bitasset.current_feed.settlement_price.quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:n}),u={ratio:o.getAmount({real:!0})/(i.getAmount({real:!0})/c.toReal())};if(isNaN(u.ratio))return null;u.ratio<l?u.statusClass="danger":u.ratio<l+.5?u.statusClass="warning":u.statusClass=null,s[t.id]=u}}),ws[t].queue.forEach(function(e){e.res(s)}),ws[t]={result:s},setTimeout(function(){delete ws[t]},ks)})}).catch(function(){ws[t].queue.forEach(function(e){e.rej()})})})})((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).account).then(function(t){var a=null;for(var n in t)a=t[n].statusClass||a;e.setState({globalMarginStatus:a})})}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&(this._checkMarginStatus(e),this.priceRefs={},this.valueRefs={},this.changeRefs={},setTimeout(this.forceUpdate.bind(this),500))}},{key:"shouldComponentUpdate",value:function(e,t){return!J.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)||!J.a.are_equal_shallow(e.balances,this.props.balances)||e.account!==this.props.account||e.settings!==this.props.settings||e.hiddenAssets!==this.props.hiddenAssets||!J.a.are_equal_shallow(t,this.state)||this.state.filterValue!==t.filterValue}},{key:"_onSettleAsset",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.refs.settlement_modal.show()}},{key:"_hideAsset",value:function(e,t){Se.a.hideAsset(e,t)}},{key:"_showDepositModal",value:function(e,t){var a=this;t.preventDefault(),this.setState({depositAsset:e},function(){a.refs.deposit_modal_new.show()})}},{key:"_showDepositWithdraw",value:function(e,t,a,n){var s,r=this;n.preventDefault(),this.setState((Zs(s={},"bridge_modal"===e?"bridgeAsset":"deposit_modal"===e?"depositAsset":"withdrawAsset",t),Zs(s,"fiatModal",a),s),function(){r.refs[e].show()})}},{key:"_getSeparator",value:function(e){return e?s.a.createElement("span",null," | "):null}},{key:"triggerSend",value:function(e){var t=this;this.setState({send_asset:e},function(){t.send_modal&&t.send_modal.show()})}},{key:"_renderBalances",value:function(e,t,a){var n=this,r=this.props.core_asset,o=this.props,i=o.settings,l=o.hiddenAssets,c=o.orders,u=i.get("unit")||r.get("symbol"),p=i.get("showAssetPercent",!1),m=function(e,t){var a=e&&e.has("bitasset_data_id"),r="cp_modal_"+e.get("id");return{isBitAsset:a,borrowModal:a?s.a.createElement(Qa.a,{ref:r,modalId:"borrow_modal_"+e.get("id"),quote_asset:e.get("id"),backing_asset:e.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,borrowLink:a?s.a.createElement("a",{onClick:function(){Va.a.hide(),n.refs[r].show()}},s.a.createElement(Ne.a,{name:"dollar",title:"icons.dollar.borrow",className:"icon-14px"})):null}},d=[];return e.forEach(function(e){var t=ce.b.getObject(e);if(t){var a=t.get("asset_type"),o=ce.b.getObject(a);if(o){var i,h,f,b="",g=o.get("symbol"),_="1.3.0"!==o.get("id"),v=u!==r.get("symbol"),y=ee.a.parseDescription(o.getIn(["options","description"])).market;-1===(b=o.get("symbol")).indexOf("OPEN.")||y||(y="USD");var E=y||u;_&&E===b&&(E=r.get("symbol")),i=_?s.a.createElement(R.a,{to:"/market/"+o.get("symbol")+"_"+E},s.a.createElement(Ne.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):v?s.a.createElement(R.a,{to:"/market/"+o.get("symbol")+"_"+u},s.a.createElement(Ne.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):"-",f=s.a.createElement("a",{onClick:n.triggerSend.bind(n,o.get("id"))},s.a.createElement(Ne.a,{name:"transfer",title:"icons.transfer",className:"icon-14px"}));var w=m(o,n.props.account),k=w.isBitAsset,x=w.borrowModal,A=w.borrowLink;h=s.a.createElement("a",{onClick:n._onSettleAsset.bind(n,o.get("id"))},s.a.createElement(Ne.a,{name:"settle",title:"icons.settle",className:"icon-14px"}));var O=!l.includes(a),C=!!t.get("balance"),N=!!c[a],S=Object(Gs.b)(o.get("symbol"),n.props.backedCoins),P=S&&S.depositAllowed||"BTS"==o.get("symbol"),j=S&&S.withdrawalAllowed&&C&&0!=t.get("balance"),I=!!n.props.bridgeCoins.get(b),T=t.get("balance");n.qtyRefs[o.get("symbol")]=J.a.get_asset_amount(T,o),d.push(s.a.createElement("tr",{key:o.get("symbol"),style:{maxWidth:"100rem"}},s.a.createElement("td",{style:{textAlign:"left"}},s.a.createElement(Ce.a,{asset:o.get("id")})),s.a.createElement("td",{style:{textAlign:"right"}},C||N?s.a.createElement(H.a,{balance:e,hide_asset:!0}):null),s.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},s.a.createElement(ps,{refCallback:function(e){e&&e.refs.bound_component&&(n.priceRefs[o.get("symbol")]=e.refs.bound_component)},fromAsset:o.get("id"),pulsate:{reverse:!0,fill:"forwards"},hide_symbols:!0})),s.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},s.a.createElement(Za,{refCallback:function(e){e&&e.refs.bound_component&&(n.changeRefs[o.get("symbol")]=e.refs.bound_component)},base:o.get("id"),quote:u,marketId:o.get("symbol")+"_"+u,hide_symbols:!0})),s.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},C||N?s.a.createElement(da.a,{balance:e,toAsset:u,hide_asset:!0,refCallback:function(e){e&&e.refs.bound_component&&(n.valueRefs[o.get("symbol")]=e.refs.bound_component)}}):null),p?s.a.createElement("td",{style:{textAlign:"right"}},C?s.a.createElement(H.a,{balance:e,asPercentage:!0}):null):null,s.a.createElement("td",null,f),s.a.createElement("td",null,n._renderBuy(o.get("symbol"),I,g,"-",t.get("balance"))),s.a.createElement("td",null,P&&n.props.isMyAccount?s.a.createElement("span",null,s.a.createElement(Ne.a,{style:{cursor:"pointer"},name:"deposit",title:"icons.deposit.deposit",className:"icon-14x",onClick:n._showDepositModal.bind(n,g)})):"-"),s.a.createElement("td",null,j&&n.props.isMyAccount?s.a.createElement("span",null,s.a.createElement("a",{className:j?"":"disabled",onClick:j?n._showDepositWithdraw.bind(n,"withdraw_modal_new",g,!1):function(){}},s.a.createElement(Ne.a,{name:"withdraw",title:"icons.withdraw",className:"icon-14px"}))):"-"),s.a.createElement("td",null,i),s.a.createElement("td",null,k?s.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":Q.a.translate("tooltip.borrow",{asset:b})},A,x):"-"),s.a.createElement("td",null,k?s.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":Q.a.translate("tooltip.settle",{asset:b})},h):"-"),s.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":Q.a.translate("tooltip."+(O?"hide_asset":"show_asset"))},s.a.createElement("a",{style:{marginRight:0},className:O?"order-cancel":"action-plus",onClick:n._hideAsset.bind(n,a,O)},s.a.createElement(Ne.a,{name:O?"cross-circle":"plus-circle",title:O?"icons.cross_circle.hide_asset":"icons.plus_circle.show_asset",className:"icon-14px"})))))}}}),t&&t.filter(function(e){var t=!1;n.props.backedCoins.get("OPEN",[]).forEach(function(a){a&&a.symbol===e&&(t=!0)}),n.props.bridgeCoins.get(e)&&(t=!0);var a=!0;return d.forEach(function(t){t.key===e&&(a=!1)}),a&&t}).forEach(function(e){var t=ce.b.getAsset(e);if(t&&n.props.isMyAccount){var o=!l.includes(t.get("id")),i=t.get("symbol").split("."),c=!!n.props.backedCoins.get("OPEN",[]).find(function(e){return e.backingCoinType===i[1]})||!!n.props.backedCoins.get("RUDEX",[]).find(function(e){return e.backingCoin===i[1]})||"BTS"==t.get("symbol"),u=!!n.props.bridgeCoins.get(t.get("symbol")),p="1.3.0"!==t.get("id"),h=ee.a.parseDescription(t.getIn(["options","description"])).market;-1===t.get("symbol").indexOf("OPEN.")||h||(h="USD");var f=h||(r?r.get("symbol"):"BTS"),b=p?s.a.createElement(R.a,{to:"/market/"+t.get("symbol")+"_"+f},s.a.createElement(Ne.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):"-",g=m(t,n.props.account),_=g.isBitAsset,v=g.borrowModal,y=g.borrowLink;(o&&a||!o&&!a)&&d.push(s.a.createElement("tr",{key:t.get("symbol"),style:{maxWidth:"100rem"}},s.a.createElement("td",{style:{textAlign:"left"}},s.a.createElement(Ce.a,{asset:t.get("id")})),s.a.createElement("td",null,"-"),s.a.createElement("td",{className:"column-hide-small"},"-"),s.a.createElement("td",{className:"column-hide-small"},"-"),s.a.createElement("td",{className:"column-hide-small"},"-"),s.a.createElement("td",null,"-"),s.a.createElement("td",{style:{textAlign:"center"}},u&&n.props.isMyAccount?s.a.createElement("span",null,s.a.createElement("a",{onClick:n._showDepositWithdraw.bind(n,"bridge_modal",e,!1)},s.a.createElement(Ne.a,{name:"dollar",title:"icons.dollar.buy",className:"icon-14px"}))):"-"),s.a.createElement("td",null,c&&n.props.isMyAccount?s.a.createElement("span",null,s.a.createElement(Ne.a,{style:{cursor:"pointer"},name:"deposit",title:"icons.deposit.deposit",className:"icon-14x",onClick:n._showDepositModal.bind(n,t.get("symbol"))})):"-"),s.a.createElement("td",null,"-"),s.a.createElement("td",{style:{textAlign:"center"}},b),s.a.createElement("td",null,_?s.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":Q.a.translate("tooltip.borrow",{asset:t.get("symbol")})},y,v):"-"),s.a.createElement("td",null,"-"),s.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":Q.a.translate("tooltip."+(o?"hide_asset":"show_asset"))},s.a.createElement("a",{style:{marginRight:0},className:o?"order-cancel":"action-plus",onClick:n._hideAsset.bind(n,t.get("id"),o)},s.a.createElement(Ne.a,{name:o?"cross-circle":"plus-circle",title:o?"icons.cross_circle.hide_asset":"icons.plus_circle.show_asset",className:"icon-14px"})))))}}),d.sort(this.sortFunctions[this.state.sortKey]),d}},{key:"_changeShownAssets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";this.setState({shownAssets:e}),Se.a.changeViewSetting({shownAssets:e})}},{key:"_toggleSortOrder",value:function(e){this.state.sortKey===e?(Se.a.changeViewSetting({portfolioSortDirection:!this.state.sortDirection}),this.setState({sortDirection:!this.state.sortDirection})):(Se.a.changeViewSetting({portfolioSort:e}),this.setState({sortDirection:!1,sortKey:e}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.hiddenAssets,r=t.settings,o=t.orders,i=this.state.shownAssets;if(!a)return null;var l=[],c={},u={};a.toJS&&a.has("call_orders")&&(l=a.get("call_orders").toJS());var p=void 0,m=void 0,d=a.get("balances"),h=f.a.List(),b=f.a.List();(l.forEach(function(e){var t=ce.b.getObject(e);if(t){var a=t.getIn(["call_price","base","asset_id"]);c[a]?c[a]+=parseInt(t.get("collateral"),10):c[a]=parseInt(t.get("collateral"),10);var n=t.getIn(["call_price","quote","asset_id"]);u[n]?u[n]+=parseInt(t.get("debt"),10):u[n]=parseInt(t.get("debt"),10)}}),d)&&((d=d.filter(function(e,t){var a=ce.b.getObject(e);return!(a&&!a.get("balance")&&!o[t])})).forEach(function(t,a){var s=ce.b.getAsset(a),r="",o="";e.state.filterValue&&(o=e.state.filterValue?String(e.state.filterValue).toLowerCase():"",r=s.get("symbol").toLowerCase(),J.a.replaceName(s).isBitAsset&&(r="bit"+r));n.includes(a)&&r.includes(o)?b=b.push(t):r.includes(o)&&(h=h.push(t))}),p=this._renderBalances(h,this.state.filterValue?null:this.state.alwaysShowAssets,!0),m=this._renderBalances(b,this.state.filterValue?null:this.state.alwaysShowAsset));var g=s.a.createElement(ja.a,{noTip:!0,balances:b,hide_asset:!0}),_=s.a.createElement(ja.a,{noTip:!0,balances:h,hide_asset:!0}),v=s.a.createElement(ja.a,{noTip:!0,balances:f.a.List(),openOrders:o,hide_asset:!0}),y=s.a.createElement(ja.a,{noTip:!0,balances:f.a.List(),debt:u,collateral:c,hide_asset:!0}),E=s.a.createElement(ja.a,{noTip:!0,balances:f.a.List(),debt:u,hide_asset:!0}),w=s.a.createElement(ja.a,{noTip:!0,balances:f.a.List(),collateral:c,hide_asset:!0}),k=r.get("unit")||this.props.core_asset.get("symbol"),x=s.a.createElement(Ya.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:k,arg:"asset"}]});p.push(s.a.createElement("tr",{key:"portfolio",className:"total-value"},s.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},x),s.a.createElement("td",{className:"column-hide-small"}),s.a.createElement("td",{className:"column-hide-small"}),s.a.createElement("td",{style:{textAlign:"right"}},_),s.a.createElement("td",{colSpan:"9"}))),m.push(s.a.createElement("tr",{key:"portfolio",className:"total-value"},s.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},x),s.a.createElement("td",{className:"column-hide-small"}),s.a.createElement("td",{className:"column-hide-small"}),s.a.createElement("td",{style:{textAlign:"right"}},g),s.a.createElement("td",{colSpan:"9"})));var A=r.get("showAssetPercent",!1),O=this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.withdrawAsset})||{},C=this.props.bridgeCoins.get(this.state.bridgeAsset)||null;return s.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},s.a.createElement("div",{className:"content-block small-12"},s.a.createElement("div",{className:"tabs-container generic-bordered-box"},s.a.createElement(ae.b,{defaultActiveTab:0,segmented:!1,setting:"overviewTab",className:"account-tabs",tabsClass:"account-overview no-padding bordered-header content-block"},s.a.createElement(ae.a,{title:"account.portfolio",subText:_},s.a.createElement("div",{className:"header-selector"},s.a.createElement("div",{className:"filter inline-block"},s.a.createElement("input",{type:"text",placeholder:"Filter",onChange:this._handleFilterInput})),s.a.createElement("div",{className:"selector inline-block"},s.a.createElement("div",{className:ie()("inline-block",{inactive:"active"!=i}),onClick:"active"!=i?this._changeShownAssets.bind(this,"active"):function(){}},s.a.createElement(D.a,{content:"account.hide_hidden"})),m.length?s.a.createElement("div",{className:ie()("inline-block",{inactive:"hidden"!=i}),onClick:"hidden"!=i?this._changeShownAssets.bind(this,"hidden"):function(){}},s.a.createElement(D.a,{content:"account.show_hidden"})):null,s.a.createElement("div",{className:ie()("inline-block",{inactive:"visual"!=i}),onClick:"visual"!=i?this._changeShownAssets.bind(this,"visual"):function(){}},s.a.createElement(D.a,{content:"account.show_visual"})))),s.a.createElement(As.a,{id:"send_modal_portfolio",refCallback:function(t){t&&(e.send_modal=t)},from_name:this.props.account.get("name"),asset_id:this.state.send_asset||"1.3.0"}),"visual"!=i?s.a.createElement("table",{className:"table dashboard-table table-hover"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{style:{textAlign:"left"},className:"clickable",onClick:this._toggleSortOrder.bind(this,"alphabetic")},s.a.createElement(D.a,{component:"span",content:"account.asset"})),s.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"qty"),className:"clickable",style:{textAlign:"right"}},s.a.createElement(D.a,{content:"account.qty"})),s.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"priceValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},s.a.createElement(D.a,{content:"exchange.price"})," ","(",s.a.createElement(Aa.a,{name:k,noTip:!0}),")"),s.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"changeValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},s.a.createElement(D.a,{content:"account.hour_24_short"})),s.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"totalValue"),style:{textAlign:"right"},className:"column-hide-small clickable"},s.a.createElement(Ya.a,{noLink:!0,string:"account.eq_value_header",keys:[{type:"asset",value:k,arg:"asset"}],noTip:!0})),A?s.a.createElement("th",{style:{textAlign:"right"}},s.a.createElement(D.a,{component:"span",content:"account.percent"})):null,s.a.createElement("th",null,s.a.createElement(D.a,{content:"header.payments"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"exchange.buy"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"modal.deposit.submit"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"modal.withdraw.submit"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"account.trade"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"exchange.borrow_short"})),s.a.createElement("th",null,s.a.createElement(D.a,{content:"account.settle"})),s.a.createElement("th",{className:"column-hide-small"},s.a.createElement(D.a,{content:"active"==i?"exchange.hide":"account.perm.show"})))),s.a.createElement("tbody",null,"hidden"==i&&m.length?m:p)):s.a.createElement(Js,{balanceObjects:h})),s.a.createElement(ae.a,{title:"account.open_orders",subText:v},s.a.createElement(Es,this.props,s.a.createElement("tbody",null,s.a.createElement("tr",{className:"total-value"},s.a.createElement("td",{colSpan:"7",style:{textAlign:"right"}},x),s.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},v),this.props.isMyAccount?s.a.createElement("td",null):null)))),s.a.createElement(ae.a,{title:"account.collaterals",subText:s.a.createElement("span",{className:this.state.globalMarginStatus},y)},s.a.createElement("div",{className:"content-block"},s.a.createElement("div",{className:"generic-bordered-box"},s.a.createElement(pn,{preferredUnit:k,className:"dashboard-table",callOrders:l,account:a},s.a.createElement("tr",{className:"total-value"},s.a.createElement("td",null,x),s.a.createElement("td",null),s.a.createElement("td",null,E),s.a.createElement("td",{className:"column-hide-medium"},w),s.a.createElement("td",null),s.a.createElement("td",null,y),s.a.createElement("td",{className:"column-hide-small"}),s.a.createElement("td",{className:"column-hide-small"}),s.a.createElement("td",{colSpan:"3"})))))),s.a.createElement(ae.a,{title:"account.activity",subText:" "},s.a.createElement(Wt.a,{accountsList:f.a.fromJS([a.get("id")]),compactView:!1,showMore:!0,fullHeight:!0,limit:15,showFilters:!0,dashboard:!0})),a.get("proposals")&&a.get("proposals").size?s.a.createElement(ae.a,{title:"explorer.proposals.title",subText:String(a.get("proposals")?a.get("proposals").size:0)},s.a.createElement(es,{className:"dashboard-table",account:a.get("id")})):null))),s.a.createElement(Da,{ref:"settlement_modal",modalId:"settlement_modal",asset:this.state.settleAsset,account:a.get("name")}),s.a.createElement(ds.a,Ks({ref:"withdraw_modal",action:"withdraw",fiatModal:this.state.fiatModal,account:this.props.account.get("name"),sender:this.props.account.get("id"),asset:this.state.withdrawAsset,modalId:"simple_withdraw_modal",balances:this.props.balances},O,{isDown:this.props.gatewayDown.get("OPEN")})),s.a.createElement(js.a,{ref:"withdraw_modal_new",modalId:"withdraw_modal_new",backedCoins:this.props.backedCoins,initialSymbol:this.state.withdrawAsset}),s.a.createElement(ms.a,{ref:"deposit_modal_new",modalId:"deposit_modal_new",asset:this.state.depositAsset,account:this.props.account.get("name"),backedCoins:this.props.backedCoins}),s.a.createElement(hs.a,{ref:"bridge_modal",action:"deposit",account:this.props.account.get("name"),sender:this.props.account.get("id"),asset:this.state.bridgeAsset,modalId:"simple_bridge_modal",balances:this.props.balances,bridges:C,isDown:this.props.gatewayDown.get("TRADE")}))}}]),t}();$s=Object(te.a)($s,{propNames:["core_asset"]});var er=function(e){function t(){return Qs(this,t),Ys(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Xs(t,s.a.Component),Hs(t,[{key:"render",value:function(){return s.a.createElement(xs.a,Ks({},this.props,{wrap:$s}))}}]),t}(),tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ar=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function rr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var or=function(e){function t(){return nr(this,t),sr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return rr(t,s.a.Component),ar(t,[{key:"componentDidMount",value:function(){this.props.account&&(r.a.setCurrentAccount.defer(this.props.account.get("name")),d.a.getPossibleFees(this.props.account,"transfer"))}},{key:"componentWillReceiveProps",value:function(e){if(e.account){var t=e.account.get("name"),a=this.props.account&&this.props.account.get("name");this.props.account&&t===a||(r.a.setCurrentAccount.defer(t),d.a.getPossibleFees(e.account,"transfer"))}}},{key:"render",value:function(){var e=this.props,t=e.myActiveAccounts,a=e.searchAccounts,n=e.settings,r=e.wallet_locked,i=e.account,l=e.hiddenAssets;if(!i)return s.a.createElement(b.a,null);var c=this.props.account.get("name"),u={account_name:c,myActiveAccounts:t,searchAccounts:a,settings:n,wallet_locked:r,account:i,isMyAccount:o.a.isMyAccount(i),hiddenAssets:l,contained:!0,balances:i.get("balances",Object(h.List)()).toList(),orders:i.get("orders",Object(h.List)()).toList(),backedCoins:this.props.backedCoins,bridgeCoins:this.props.bridgeCoins,gatewayDown:this.props.gatewayDown,viewSettings:this.props.viewSettings,proxy:i.getIn(["options","voting_account"]),history:this.props.history};return s.a.createElement("div",{className:"grid-block page-layout"},s.a.createElement("div",{className:"grid-block no-padding"},s.a.createElement(T.a,null,s.a.createElement(g.a,{path:"/account/"+c,exact:!0,render:function(){return s.a.createElement(er,u)}}),s.a.createElement(I,{from:"/account/"+c+"/overview",to:"/account/"+c}),s.a.createElement(g.a,{path:"/account/"+c+"/assets",exact:!0,render:function(){return s.a.createElement(re,u)}}),s.a.createElement(g.a,{path:"/account/"+c+"/create-asset",exact:!0,render:function(){return s.a.createElement(we,u)}}),s.a.createElement(g.a,{path:"/account/"+c+"/update-asset/:asset",exact:!0,render:function(){return s.a.createElement(Ke,u)}}),s.a.createElement(g.a,{path:"/account/"+c+"/member-stats",exact:!0,render:function(){return s.a.createElement(rt,u)}}),s.a.createElement(g.a,{path:"/account/"+c+"/vesting",exact:!0,render:function(){return s.a.createElement(ht,u)}}),s.a.createElement(g.a,{path:"/account/"+c+"/permissions",exact:!0,render:function(){return s.a.createElement(zt,u)}}),s.a.createElement(g.a,{path:"/account/"+c+"/voting",exact:!0,render:function(){return s.a.createElement(Pa,u)}}),s.a.createElement(g.a,{path:"/account/"+c+"/whitelist",exact:!0,render:function(){return s.a.createElement(ma,u)}}),s.a.createElement(g.a,{path:"/account/"+c+"/signedmessages",exact:!0,render:function(){return s.a.createElement(aa,u)}}))))}}]),t}();or.propTypes={account:u.a.ChainAccount.isRequired},or=Object(p.a)(or,{show_loader:!0});var ir=function(e){function t(){return nr(this,t),sr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return rr(t,s.a.Component),ar(t,[{key:"render",value:function(){var e=this.props.match.params.account_name;return s.a.createElement(or,tr({},this.props,{account:e}))}}]),t}();t.default=Object(m.connect)(ir,{listenTo:function(){return[o.a,i.a,l.a,c.a]},getProps:function(){return{myActiveAccounts:o.a.getState().myActiveAccounts,searchAccounts:o.a.getState().searchAccounts,settings:i.a.getState().settings,hiddenAssets:i.a.getState().hiddenAssets,wallet_locked:l.a.getState().locked,viewSettings:i.a.getState().viewSettings,backedCoins:c.a.getState().backedCoins,bridgeCoins:c.a.getState().bridgeCoins,gatewayDown:c.a.getState().down}}})}}]);