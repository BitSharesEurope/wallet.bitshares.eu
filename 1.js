webpackJsonp([1,8],{1466:function(e,t,n){"use strict";function a(e){function t(){l.add(e,"ps-focus")}function n(){l.remove(e,"ps-focus")}var a=this;a.settings=s.clone(c),a.containerWidth=null,a.containerHeight=null,a.contentWidth=null,a.contentHeight=null,a.isRtl="rtl"===u.css(e,"direction"),a.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),a.negativeScrollAdjustment=a.isNegativeScroll?e.scrollWidth-e.clientWidth:0,a.event=new p,a.ownerDocument=e.ownerDocument||document,a.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),e),a.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),a.scrollbarXRail),a.scrollbarX.setAttribute("tabindex",0),a.event.bind(a.scrollbarX,"focus",t),a.event.bind(a.scrollbarX,"blur",n),a.scrollbarXActive=null,a.scrollbarXWidth=null,a.scrollbarXLeft=null,a.scrollbarXBottom=s.toInt(u.css(a.scrollbarXRail,"bottom")),a.isScrollbarXUsingBottom=a.scrollbarXBottom===a.scrollbarXBottom,a.scrollbarXTop=a.isScrollbarXUsingBottom?null:s.toInt(u.css(a.scrollbarXRail,"top")),a.railBorderXWidth=s.toInt(u.css(a.scrollbarXRail,"borderLeftWidth"))+s.toInt(u.css(a.scrollbarXRail,"borderRightWidth")),u.css(a.scrollbarXRail,"display","block"),a.railXMarginWidth=s.toInt(u.css(a.scrollbarXRail,"marginLeft"))+s.toInt(u.css(a.scrollbarXRail,"marginRight")),u.css(a.scrollbarXRail,"display",""),a.railXWidth=null,a.railXRatio=null,a.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),e),a.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),a.scrollbarYRail),a.scrollbarY.setAttribute("tabindex",0),a.event.bind(a.scrollbarY,"focus",t),a.event.bind(a.scrollbarY,"blur",n),a.scrollbarYActive=null,a.scrollbarYHeight=null,a.scrollbarYTop=null,a.scrollbarYRight=s.toInt(u.css(a.scrollbarYRail,"right")),a.isScrollbarYUsingRight=a.scrollbarYRight===a.scrollbarYRight,a.scrollbarYLeft=a.isScrollbarYUsingRight?null:s.toInt(u.css(a.scrollbarYRail,"left")),a.scrollbarYOuterWidth=a.isRtl?s.outerWidth(a.scrollbarY):null,a.railBorderYWidth=s.toInt(u.css(a.scrollbarYRail,"borderTopWidth"))+s.toInt(u.css(a.scrollbarYRail,"borderBottomWidth")),u.css(a.scrollbarYRail,"display","block"),a.railYMarginHeight=s.toInt(u.css(a.scrollbarYRail,"marginTop"))+s.toInt(u.css(a.scrollbarYRail,"marginBottom")),u.css(a.scrollbarYRail,"display",""),a.railYHeight=null,a.railYRatio=null}function r(e){return e.getAttribute("data-ps-id")}function o(e,t){e.setAttribute("data-ps-id",t)}function i(e){e.removeAttribute("data-ps-id")}var s=n(1467),l=n(1471),c=n(1480),u=n(1470),p=n(1481),d=n(1482),h={};t.add=function(e){var t=d();return o(e,t),h[t]=new a(e),h[t]},t.remove=function(e){delete h[r(e)],i(e)},t.get=function(e){return h[r(e)]}},1467:function(e,t,n){"use strict";var a=n(1471),r=n(1470),o=t.toInt=function(e){return parseInt(e,10)||0},i=t.clone=function(e){if(e){if(e.constructor===Array)return e.map(i);if("object"==typeof e){var t={};for(var n in e)t[n]=i(e[n]);return t}return e}return null};t.extend=function(e,t){var n=i(e);for(var a in t)n[a]=i(t[a]);return n},t.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=a.list(e),n=0;n<t.length;n++){var r=t[n];0===r.indexOf("ps-")&&a.remove(e,r)}},t.outerWidth=function(e){return o(r.css(e,"width"))+o(r.css(e,"paddingLeft"))+o(r.css(e,"paddingRight"))+o(r.css(e,"borderLeftWidth"))+o(r.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){a.add(e,"ps-in-scrolling"),void 0!==t?a.add(e,"ps-"+t):(a.add(e,"ps-x"),a.add(e,"ps-y"))},t.stopScrolling=function(e,t){a.remove(e,"ps-in-scrolling"),void 0!==t?a.remove(e,"ps-"+t):(a.remove(e,"ps-x"),a.remove(e,"ps-y"))},t.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},1468:function(e,t,n){"use strict";function a(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function r(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,s.css(t.scrollbarXRail,n);var a={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?a.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:a.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?a.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:a.left=t.scrollbarYLeft+e.scrollLeft,s.css(t.scrollbarYRail,a),s.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),s.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var o=n(1467),i=n(1471),s=n(1470),l=n(1466),c=n(1469);e.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=s.queryChildren(e,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(e){s.remove(e)}),s.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=s.queryChildren(e,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(e){s.remove(e)}),s.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=a(t,o.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=o.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=a(t,o.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=o.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),r(e,t),t.scrollbarXActive?i.add(e,"ps-active-x"):(i.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,c(e,"left",0)),t.scrollbarYActive?i.add(e,"ps-active-y"):(i.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,c(e,"top",0))}},1469:function(e,t,n){"use strict";var a,r,o=n(1466),i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(i("ps-x-reach-start")));var s=o.get(e);"top"===t&&n>=s.contentHeight-s.containerHeight&&(n=s.contentHeight-s.containerHeight,n-e.scrollTop<=1?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&n>=s.contentWidth-s.containerWidth&&(n=s.contentWidth-s.containerWidth,n-e.scrollLeft<=1?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(i("ps-x-reach-end"))),a||(a=e.scrollTop),r||(r=e.scrollLeft),"top"===t&&n<a&&e.dispatchEvent(i("ps-scroll-up")),"top"===t&&n>a&&e.dispatchEvent(i("ps-scroll-down")),"left"===t&&n<r&&e.dispatchEvent(i("ps-scroll-left")),"left"===t&&n>r&&e.dispatchEvent(i("ps-scroll-right")),"top"===t&&(e.scrollTop=a=n,e.dispatchEvent(i("ps-scroll-y"))),"left"===t&&(e.scrollLeft=r=n,e.dispatchEvent(i("ps-scroll-x")))}},1470:function(e,t,n){"use strict";function a(e,t){return window.getComputedStyle(e)[t]}function r(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function o(e,t){for(var n in t){var a=t[n];"number"==typeof a&&(a=a.toString()+"px"),e.style[n]=a}return e}var i={};i.e=function(e,t){var n=document.createElement(e);return n.className=t,n},i.appendTo=function(e,t){return t.appendChild(e),e},i.css=function(e,t,n){return"object"==typeof t?o(e,t):void 0===n?a(e,t):r(e,t,n)},i.matches=function(e,t){return void 0!==e.matches?e.matches(t):void 0!==e.matchesSelector?e.matchesSelector(t):void 0!==e.webkitMatchesSelector?e.webkitMatchesSelector(t):void 0!==e.mozMatchesSelector?e.mozMatchesSelector(t):void 0!==e.msMatchesSelector?e.msMatchesSelector(t):void 0},i.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},i.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return i.matches(e,t)})},e.exports=i},1471:function(e,t,n){"use strict";function a(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function r(e,t){var n=e.className.split(" "),a=n.indexOf(t);a>=0&&n.splice(a,1),e.className=n.join(" ")}t.add=function(e,t){e.classList?e.classList.add(t):a(e,t)},t.remove=function(e,t){e.classList?e.classList.remove(t):r(e,t)},t.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},1472:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},1473:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=r;var o=n(1),i=(a(o),n(27)),s=a(i);t.nameShape=s.default.oneOfType([s.default.string,s.default.shape({enter:s.default.string,leave:s.default.string,active:s.default.string}),s.default.shape({enter:s.default.string,enterActive:s.default.string,leave:s.default.string,leaveActive:s.default.string,appear:s.default.string,appearActive:s.default.string})])},1474:function(e,t,n){"use strict";e.exports=n(1478)},1475:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"b",function(){return v}),n.d(t,"a",function(){return b});var s=n(1),l=n.n(s),c=n(5),u=n.n(c),p=n(25),d=n.n(p),h=n(26),m=(n.n(h),n(31)),f=n(38),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),b=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),g(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.index,a=e.changeTab,r=e.title,o=e.className,i=e.disabled,s=d()({"is-active":t},o);return this.props.collapsed?l.a.createElement("option",{value:n},"string"==typeof r&&r.indexOf(".")>0?l.a.createElement(u.a,{className:"tab-title",content:r}):l.a.createElement("span",{className:"tab-title"},r)):l.a.createElement("li",{className:s,onClick:i?null:a.bind(this,n)},l.a.createElement("a",null,"string"==typeof r&&r.indexOf(".")>0?l.a.createElement(u.a,{className:"tab-title",content:r}):l.a.createElement("span",{className:"tab-title"},r),this.props.subText?l.a.createElement("div",{className:"tab-subtext"},this.props.subText):null))}}]),t}(l.a.Component);b.propTypes={changeTab:s.PropTypes.func,isActive:s.PropTypes.bool.isRequired,index:s.PropTypes.number.isRequired,className:s.PropTypes.string},b.defaultProps={isActive:!1,index:0,className:""};var v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},n._setDimensions=n._setDimensions.bind(n),n}return i(t,e),g(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions)}},{key:"_setDimensions",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:"_changeTab",value:function(e){e!==this.state.activeTab&&(this.props.setting&&m.a.changeViewSetting(a({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.contentClass,r=t.tabsClass,o=t.style,i=t.segmented,s=this.state.width<900&&l.a.Children.count(n)>2,c=null,u=[],p=l.a.Children.map(n,function(t,n){if(!t)return null;if(s&&t.props.disabled)return null;var a=n===e.state.activeTab;return a&&(c=t.props.children),l.a.cloneElement(t,{collapsed:s,isActive:a,changeTab:e._changeTab.bind(e),index:n})}).filter(function(e){return e&&u.push(e.props.index),null!==e});return c||(c=p[0].props.children),l.a.createElement("div",{className:d()(this.props.actionButtons?"with-buttons":"",this.props.className)},l.a.createElement("div",{className:"service-selector"},l.a.createElement("ul",{style:o,className:d()("button-group no-margin",r,{segmented:i})},s?l.a.createElement("li",{style:{paddingLeft:10,paddingRight:10,minWidth:"15rem"}},l.a.createElement("select",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:"bts-select",onChange:function(t){e._changeTab(parseInt(t.target.value,10))}},p)):p,this.props.actionButtons?l.a.createElement("li",{className:"tabs-action-buttons"},this.props.actionButtons):null)),l.a.createElement("div",{className:a+" tab-content"},c))}}]),t}(l.a.Component);v.propTypes={setting:s.PropTypes.string,defaultActiveTab:s.PropTypes.number,segmented:s.PropTypes.bool},v.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:"",style:{}},v=Object(h.connect)(v,{listenTo:function(){return[f.a]},getProps:function(){return{viewSettings:f.a.getState().viewSettings}}})},1476:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(1),s=n.n(i),l=n(1493),c=n.n(l),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return o(t,e),u(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?s.a.createElement(c.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):s.a.createElement(this.props.component)}}]),t}(s.a.Component);p.defaultProps={component:"span",enterTimeout:2e3},t.a=p},1478:function(e,t,n){"use strict";var a=n(1479),r=n(1483),o=n(1491);e.exports={initialize:r,update:o,destroy:a}},1479:function(e,t,n){"use strict";var a=n(1467),r=n(1470),o=n(1466);e.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),r.remove(t.scrollbarX),r.remove(t.scrollbarY),r.remove(t.scrollbarXRail),r.remove(t.scrollbarYRail),a.removePsClasses(e),o.remove(e))}},1480:function(e,t,n){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},1481:function(e,t,n){"use strict";var a=function(e){this.element=e,this.events={}};a.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},a.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter(function(a){return!(!n||a===t)||(this.element.removeEventListener(e,a,!1),!1)},this)},a.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var r=function(){this.eventElements=[]};r.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return void 0===t&&(t=new a(e),this.eventElements.push(t)),t},r.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},r.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},r.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},r.prototype.once=function(e,t,n){var a=this.eventElement(e),r=function(e){a.unbind(t,r),n(e)};a.bind(t,r)},e.exports=r},1482:function(e,t,n){"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},1483:function(e,t,n){"use strict";var a=n(1467),r=n(1471),o=n(1466),i=n(1468),s={"click-rail":n(1484),"drag-scrollbar":n(1485),keyboard:n(1486),wheel:n(1487),touch:n(1488),selection:n(1489)},l=n(1490);e.exports=function(e,t){t="object"==typeof t?t:{},r.add(e,"ps-container");var n=o.add(e);n.settings=a.extend(n.settings,t),r.add(e,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(t){s[t](e)}),l(e),i(e)}},1484:function(e,t,n){"use strict";function a(e,t){function n(e){return e.getBoundingClientRect()}var a=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",a),t.event.bind(t.scrollbarYRail,"click",function(a){var r=a.pageY-window.pageYOffset-n(t.scrollbarYRail).top,s=r>t.scrollbarYTop?1:-1;i(e,"top",e.scrollTop+s*t.containerHeight),o(e),a.stopPropagation()}),t.event.bind(t.scrollbarX,"click",a),t.event.bind(t.scrollbarXRail,"click",function(a){var r=a.pageX-window.pageXOffset-n(t.scrollbarXRail).left,s=r>t.scrollbarXLeft?1:-1;i(e,"left",e.scrollLeft+s*t.containerWidth),o(e),a.stopPropagation()})}var r=n(1466),o=n(1468),i=n(1469);e.exports=function(e){a(e,r.get(e))}},1485:function(e,t,n){"use strict";function a(e,t){function n(n){var r=a+n*t.railXRatio,i=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=r<0?0:r>i?i:r;var s=o.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;c(e,"left",s)}var a=null,r=null,s=function(t){n(t.pageX-r),l(e),t.stopPropagation(),t.preventDefault()},u=function(){o.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarX,"mousedown",function(n){r=n.pageX,a=o.toInt(i.css(t.scrollbarX,"left"))*t.railXRatio,o.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function r(e,t){function n(n){var r=a+n*t.railYRatio,i=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=r<0?0:r>i?i:r;var s=o.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));c(e,"top",s)}var a=null,r=null,s=function(t){n(t.pageY-r),l(e),t.stopPropagation(),t.preventDefault()},u=function(){o.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarY,"mousedown",function(n){r=n.pageY,a=o.toInt(i.css(t.scrollbarY,"top"))*t.railYRatio,o.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var o=n(1467),i=n(1470),s=n(1466),l=n(1468),c=n(1469);e.exports=function(e){var t=s.get(e);a(e,t),r(e,t)}},1486:function(e,t,n){"use strict";function a(e,t){function n(n,a){var r=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===r&&a>0||r>=t.contentHeight-t.containerHeight&&a<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===a){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var a=!1;t.event.bind(e,"mouseenter",function(){a=!0}),t.event.bind(e,"mouseleave",function(){a=!1});var i=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var u=o.matches(t.scrollbarX,":focus")||o.matches(t.scrollbarY,":focus");if(a||u){var p=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(p){if("IFRAME"===p.tagName)p=p.contentDocument.activeElement;else for(;p.shadowRoot;)p=p.shadowRoot.activeElement;if(r.isEditable(p))return}var d=0,h=0;switch(c.which){case 37:d=c.metaKey?-t.contentWidth:c.altKey?-t.containerWidth:-30;break;case 38:h=c.metaKey?t.contentHeight:c.altKey?t.containerHeight:30;break;case 39:d=c.metaKey?t.contentWidth:c.altKey?t.containerWidth:30;break;case 40:h=c.metaKey?-t.contentHeight:c.altKey?-t.containerHeight:-30;break;case 33:h=90;break;case 32:h=c.shiftKey?90:-90;break;case 34:h=-90;break;case 35:h=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:h=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-h),l(e,"left",e.scrollLeft+d),s(e),i=n(d,h),i&&c.preventDefault()}}})}var r=n(1467),o=n(1470),i=n(1466),s=n(1468),l=n(1469);e.exports=function(e){a(e,i.get(e))}},1487:function(e,t,n){"use strict";function a(e,t){function n(n,a){var r=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===r&&a>0||r>=t.contentHeight-t.containerHeight&&a<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===a){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function a(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}function r(t,n){var a=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(a){if(a.className.match(/ps-must-propagate/))return!0;if(!window.getComputedStyle(a).overflow.match(/(scroll|auto)/))return!1;var r=a.scrollHeight-a.clientHeight;if(r>0&&!(0===a.scrollTop&&n>0||a.scrollTop===r&&n<0))return!0;var o=a.scrollLeft-a.clientWidth;if(o>0&&!(0===a.scrollLeft&&t<0||a.scrollLeft===o&&t>0))return!0}return!1}function s(s){var c=a(s),u=c[0],p=c[1];r(u,p)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(p?i(e,"top",e.scrollTop-p*t.settings.wheelSpeed):i(e,"top",e.scrollTop+u*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?i(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):i(e,"left",e.scrollLeft-p*t.settings.wheelSpeed),l=!0):(i(e,"top",e.scrollTop-p*t.settings.wheelSpeed),i(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),o(e),(l=l||n(u,p))&&(s.stopPropagation(),s.preventDefault()))}var l=!1;void 0!==window.onwheel?t.event.bind(e,"wheel",s):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",s)}var r=n(1466),o=n(1468),i=n(1469);e.exports=function(e){a(e,r.get(e))}},1488:function(e,t,n){"use strict";function a(e,t,n,a){function r(n,a){var r=e.scrollTop,o=e.scrollLeft,i=Math.abs(n),s=Math.abs(a);if(s>i){if(a<0&&r===t.contentHeight-t.containerHeight||a>0&&0===r)return!t.settings.swipePropagation}else if(i>s&&(n<0&&o===t.contentWidth-t.containerWidth||n>0&&0===o))return!t.settings.swipePropagation;return!0}function l(t,n){s(e,"top",e.scrollTop-n),s(e,"left",e.scrollLeft-t),i(e)}function c(){_=!0}function u(){_=!1}function p(e){return e.targetTouches?e.targetTouches[0]:e}function d(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function h(e){if(d(e)){E=!0;var t=p(e);g.pageX=t.pageX,g.pageY=t.pageY,b=(new Date).getTime(),null!==y&&clearInterval(y),e.stopPropagation()}}function m(e){if(!E&&t.settings.swipePropagation&&h(e),!_&&E&&d(e)){var n=p(e),a={pageX:n.pageX,pageY:n.pageY},o=a.pageX-g.pageX,i=a.pageY-g.pageY;l(o,i),g=a;var s=(new Date).getTime(),c=s-b;c>0&&(v.x=o/c,v.y=i/c,b=s),r(o,i)&&(e.stopPropagation(),e.preventDefault())}}function f(){!_&&E&&(E=!1,clearInterval(y),y=setInterval(function(){return o.get(e)&&(v.x||v.y)?Math.abs(v.x)<.01&&Math.abs(v.y)<.01?void clearInterval(y):(l(30*v.x,30*v.y),v.x*=.8,void(v.y*=.8)):void clearInterval(y)},10))}var g={},b=0,v={},y=null,_=!1,E=!1;n?(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",h),t.event.bind(e,"touchmove",m),t.event.bind(e,"touchend",f)):a&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",h),t.event.bind(e,"pointermove",m),t.event.bind(e,"pointerup",f)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",h),t.event.bind(e,"MSPointerMove",m),t.event.bind(e,"MSPointerUp",f)))}var r=n(1467),o=n(1466),i=n(1468),s=n(1469);e.exports=function(e){if(r.env.supportsTouch||r.env.supportsIePointer){a(e,o.get(e),r.env.supportsTouch,r.env.supportsIePointer)}}},1489:function(e,t,n){"use strict";function a(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function a(){c||(c=setInterval(function(){if(!o.get(e))return void clearInterval(c);s(e,"top",e.scrollTop+u.top),s(e,"left",e.scrollLeft+u.left),i(e)},50))}function l(){c&&(clearInterval(c),c=null),r.stopScrolling(e)}var c=null,u={top:0,left:0},p=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?p=!0:(p=!1,l())}),t.event.bind(window,"mouseup",function(){p&&(p=!1,l())}),t.event.bind(window,"keyup",function(){p&&(p=!1,l())}),t.event.bind(window,"mousemove",function(t){if(p){var n={x:t.pageX,y:t.pageY},o={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<o.left+3?(u.left=-5,r.startScrolling(e,"x")):n.x>o.right-3?(u.left=5,r.startScrolling(e,"x")):u.left=0,n.y<o.top+3?(u.top=o.top+3-n.y<5?-5:-20,r.startScrolling(e,"y")):n.y>o.bottom-3?(u.top=n.y-o.bottom+3<5?5:20,r.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?l():a()}})}var r=n(1467),o=n(1466),i=n(1468),s=n(1469);e.exports=function(e){a(e,o.get(e))}},1490:function(e,t,n){"use strict";function a(e,t){t.event.bind(e,"scroll",function(){o(e)})}var r=n(1466),o=n(1468);e.exports=function(e){a(e,r.get(e))}},1491:function(e,t,n){"use strict";var a=n(1467),r=n(1470),o=n(1466),i=n(1468),s=n(1469);e.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,r.css(t.scrollbarXRail,"display","block"),r.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=a.toInt(r.css(t.scrollbarXRail,"marginLeft"))+a.toInt(r.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=a.toInt(r.css(t.scrollbarYRail,"marginTop"))+a.toInt(r.css(t.scrollbarYRail,"marginBottom")),r.css(t.scrollbarXRail,"display","none"),r.css(t.scrollbarYRail,"display","none"),i(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),r.css(t.scrollbarXRail,"display",""),r.css(t.scrollbarYRail,"display",""))}},1493:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=n(1),c=a(l),u=n(27),p=a(u),d=n(1494),h=a(d),m=n(1497),f=a(m),g=n(1473),b=(g.nameShape.isRequired,p.default.bool,p.default.bool,p.default.bool,(0,g.transitionTimeout)("Appear"),(0,g.transitionTimeout)("Enter"),(0,g.transitionTimeout)("Leave"),{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}),v=function(e){function t(){var n,a,i;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=o(this,e.call.apply(e,[this].concat(l))),a._wrapChild=function(e){return c.default.createElement(f.default,{name:a.props.transitionName,appear:a.props.transitionAppear,enter:a.props.transitionEnter,leave:a.props.transitionLeave,appearTimeout:a.props.transitionAppearTimeout,enterTimeout:a.props.transitionEnterTimeout,leaveTimeout:a.props.transitionLeaveTimeout},e)},i=n,o(a,i)}return i(t,e),t.prototype.render=function(){return c.default.createElement(h.default,s({},this.props,{childFactory:this._wrapChild}))},t}(c.default.Component);v.displayName="CSSTransitionGroup",v.propTypes={},v.defaultProps=b,t.default=v,e.exports=t.default},1494:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=n(1495),c=a(l),u=n(1),p=a(u),d=n(27),h=a(d),m=n(77),f=(a(m),n(1496)),g=(h.default.any,h.default.func,h.default.node,{component:"span",childFactory:function(e){return e}}),b=function(e){function t(n,a){r(this,t);var i=o(this,e.call(this,n,a));return i.performAppear=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e,t)):i._handleDoneAppearing(e,t)},i._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=(0,f.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performEnter=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e,t)):i._handleDoneEntering(e,t)},i._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=(0,f.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performLeave=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e,t)):i._handleDoneLeaving(e,t)},i._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=(0,f.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)?i.keysToEnter.push(e):i.setState(function(t){var n=s({},t.children);return delete n[e],{children:n}})},i.childRefs=Object.create(null),i.state={children:(0,f.getChildMapping)(n.children)},i}return i(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,f.getChildMapping)(e.children),n=this.state.children;this.setState({children:(0,f.mergeChildMappings)(n,t)});for(var a in t){var r=n&&n.hasOwnProperty(a);!t[a]||r||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(var o in n){var i=t&&t.hasOwnProperty(o);!n[o]||i||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[];for(var n in this.state.children)!function(n){var a=e.state.children[n];if(a){var r="string"!=typeof a.ref,o=e.props.childFactory(a),i=function(t){e.childRefs[n]=t};o===a&&r&&(i=(0,c.default)(a.ref,i)),t.push(p.default.cloneElement(o,{key:n,ref:i}))}}(n);var a=s({},this.props);return delete a.transitionLeave,delete a.transitionName,delete a.transitionAppear,delete a.transitionEnter,delete a.childFactory,delete a.transitionLeaveTimeout,delete a.transitionEnterTimeout,delete a.transitionAppearTimeout,delete a.component,p.default.createElement(this.props.component,a,t)},t}(p.default.Component);b.displayName="TransitionGroup",b.propTypes={},b.defaultProps=g,t.default=b,e.exports=t.default},1495:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(e){return null!=e}),0!==t.length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},1496:function(e,t,n){"use strict";function a(e){if(!e)return e;var t={};return o.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t}function r(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var a={},r=[];for(var o in e)t.hasOwnProperty(o)?r.length&&(a[o]=r,r=[]):r.push(o);var i=void 0,s={};for(var l in t){if(a.hasOwnProperty(l))for(i=0;i<a[l].length;i++){var c=a[l][i];s[a[l][i]]=n(c)}s[l]=n(l)}for(i=0;i<r.length;i++)s[r[i]]=n(r[i]);return s}t.__esModule=!0,t.getChildMapping=a,t.mergeChildMappings=r;var o=n(1)},1497:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return w.length?w.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){w.length&&w.forEach(function(n){return e.removeEventListener(n,t,!1)})}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=n(1498),u=a(c),p=n(1500),d=a(p),h=n(1501),m=a(h),f=n(1502),g=n(1),b=a(g),v=n(27),y=a(v),_=n(86),E=n(1473),w=[];f.transitionEnd&&w.push(f.transitionEnd),f.animationEnd&&w.push(f.animationEnd);var k=(y.default.node,E.nameShape.isRequired,y.default.bool,y.default.bool,y.default.bool,y.default.number,y.default.number,y.default.number,function(e){function t(){var n,a,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=a=o(this,e.call.apply(e,[this].concat(l))),a.componentWillAppear=function(e){a.props.appear?a.transition("appear",e,a.props.appearTimeout):e()},a.componentWillEnter=function(e){a.props.enter?a.transition("enter",e,a.props.enterTimeout):e()},a.componentWillLeave=function(e){a.props.leave?a.transition("leave",e,a.props.leaveTimeout):e()},i=n,o(a,i)}return i(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var a=(0,_.findDOMNode)(this);if(!a)return void(t&&t());var r=this.props.name[e]||this.props.name+"-"+e,o=this.props.name[e+"Active"]||r+"-active",i=null,l=void 0;(0,u.default)(a,r),this.queueClassAndNode(o,a);var c=function(e){e&&e.target!==a||(clearTimeout(i),l&&l(),(0,d.default)(a,r),(0,d.default)(a,o),l&&l(),t&&t())};n?(i=setTimeout(c,n),this.transitionTimeouts.push(i)):f.transitionEnd&&(l=s(a,c))},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,m.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,u.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=l({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,b.default.cloneElement(b.default.Children.only(this.props.children),e)},t}(b.default.Component));k.displayName="CSSTransitionGroupChild",k.propTypes={},t.default=k,e.exports=t.default},1498:function(e,t,n){"use strict";function a(e,t){e.classList?e.classList.add(t):(0,o.default)(e)||(e.className=e.className+" "+t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=n(1499),o=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=t.default},1499:function(e,t,n){"use strict";function a(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+e.className+" ").indexOf(" "+t+" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,e.exports=t.default},1500:function(e,t,n){"use strict";e.exports=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}},1501:function(e,t,n){"use strict";function a(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-p)),a=setTimeout(e,n);return p=t,a}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1472),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=["","webkit","moz","o","ms"],s="clearTimeout",l=a,c=void 0,u=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o.default&&i.some(function(e){var t=u(e,"request");if(t in window)return s=u(e,"cancel"),l=function(e){return window[t](e)}});var p=(new Date).getTime();c=function(e){return l(e)},c.cancel=function(e){window[s]&&"function"==typeof window[s]&&window[s](e)},t.default=c,e.exports=t.default},1502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var a=n(1472),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o="transform",i=void 0,s=void 0,l=void 0,c=void 0,u=void 0,p=void 0,d=void 0,h=void 0,m=void 0,f=void 0,g=void 0;if(r.default){var b=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),a=void 0,r=void 0,o="",i=0;i<n.length;i++){var s=n[i];if(s+"TransitionProperty"in e){o="-"+s.toLowerCase(),a=t[s]("TransitionEnd"),r=t[s]("AnimationEnd");break}}return!a&&"transitionProperty"in e&&(a="transitionend"),!r&&"animationName"in e&&(r="animationend"),e=null,{animationEnd:r,transitionEnd:a,prefix:o}}();i=b.prefix,t.transitionEnd=s=b.transitionEnd,t.animationEnd=l=b.animationEnd,t.transform=o=i+"-"+o,t.transitionProperty=c=i+"-transition-property",t.transitionDuration=u=i+"-transition-duration",t.transitionDelay=d=i+"-transition-delay",t.transitionTiming=p=i+"-transition-timing-function",t.animationName=h=i+"-animation-name",t.animationDuration=m=i+"-animation-duration",t.animationTiming=f=i+"-animation-delay",t.animationDelay=g=i+"-animation-timing-function"}t.transform=o,t.transitionProperty=c,t.transitionTiming=p,t.transitionDelay=d,t.transitionDuration=u,t.transitionEnd=s,t.animationName=h,t.animationDuration=m,t.animationTiming=f,t.animationDelay=g,t.animationEnd=l,t.default={transform:o,end:s,property:c,timing:p,delay:d,duration:u}},1504:function(e,t){e.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},1505:function(e,t){e.exports={L:1,M:0,Q:3,H:2}},1506:function(e,t,n){function a(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var a=0;a<e.length-n;a++)this.num[a]=e[a+n]}var r=n(1507);a.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<e.getLength();o++)t[n+o]^=r.gexp(r.glog(this.get(n))+r.glog(e.get(o)));return new a(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=r.glog(this.get(0))-r.glog(e.get(0)),n=new Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(var o=0;o<e.getLength();o++)n[o]^=r.gexp(r.glog(e.get(o))+t);return new a(n,0).mod(e)}},e.exports=a},1507:function(e,t){for(var n={glog:function(e){if(e<1)throw new Error("glog("+e+")");return n.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return n.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},a=0;a<8;a++)n.EXP_TABLE[a]=1<<a;for(var a=8;a<256;a++)n.EXP_TABLE[a]=n.EXP_TABLE[a-4]^n.EXP_TABLE[a-5]^n.EXP_TABLE[a-6]^n.EXP_TABLE[a-8];for(var a=0;a<255;a++)n.LOG_TABLE[n.EXP_TABLE[a]]=a;e.exports=n},1508:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.a.BASE_OL+g.a.COINS_LIST;return fetch(e).then(function(e){return e.json().then(function(e){return e})}).catch(function(t){console.log("error fetching simple list of coins",t,e)})}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.a.BASE+g.a.DEPOSIT_LIMIT;return fetch(n+"?inputCoinType="+encodeURIComponent(e)+"&outputCoinType="+encodeURIComponent(t),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(n){console.log("error fetching deposit limit of",e,t,n)})}function o(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.a.BASE+g.a.ESTIMATE_OUTPUT;return fetch(a+"?inputAmount="+encodeURIComponent(e)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(e){console.log("error fetching deposit limit of",t,n,e)})}function i(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.a.BASE+g.a.ESTIMATE_INPUT;return fetch(a+"?outputAmount="+encodeURIComponent(e)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(e){console.log("error fetching deposit limit of",t,n,e)})}function s(e){var t=e.inputCoinType,n=e.outputCoinType,a=e.outputAddress,r=e.url,o=void 0===r?g.a.BASE_OL:r,i=e.stateCallback,s={inputCoinType:t,outputCoinType:n,outputAddress:a},l=JSON.stringify(s);v[l]||(v[l]=!0,fetch(o+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:l}).then(function(e){e.json().then(function(e){delete v[l];var t={address:e.inputAddress||"unknown",memo:e.inputMemo,error:e.error||null};i&&i(t)},function(e){delete v[l],i&&i(null)})},function(e){delete v[l],i&&i(null)}).catch(function(e){console.log("fetch error:",e),delete v[l]}))}function l(e){var t=e.url,n=void 0===t?g.a.BASE:t,a=e.walletType,r=e.newAddress;return r?fetch(n+"/wallets/"+a+"/address-validator?address="+encodeURIComponent(r),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e.isValid})}).catch(function(e){console.log("validate error:",e)}):new Promise(function(e){return e()})}function c(e){var t=e.input_coin_type,n=e.output_coin_type,a=e.url,r=e.account_name;if(!t||!n)return Promise.reject();var o=JSON.stringify({inputCoinType:t,outputCoinType:n,outputAddress:r,inputMemo:"blocktrades conversion: "+t+"to"+n}),i=a+t+n+r;return new Promise(function(e,t){if(y[i])return e(y[i]);fetch(a+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:o}).then(function(n){n.json().then(function(t){y[i]=t,e(t)},t).catch(t)}).catch(t)})}function u(e){return b.has("history_address_"+e)}function p(e){var t=e.wallet,n=e.addresses;b.set("history_address_"+t,n)}function d(e){return b.get("history_address_"+e,[])}function h(e){var t=e.wallet,n=e.address;b.set("history_address_last_"+t,n)}function m(e){return b.get("history_address_last_"+e,"")}t.d=a,t.f=r,t.c=o,t.b=i,t.g=s,t.h=l,t.e=c,n.d(t,"a",function(){return _});var f=n(102),g=n(272),b=new f.a(""),v={},y={},_={has:u,set:p,get:d,setLast:h,getLast:m}},1509:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function s(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}n.d(t,"a",function(){return S}),n.d(t,"b",function(){return N});var l=n(1),c=n.n(l),u=n(5),p=n.n(u),d=n(282),h=(n.n(d),n(663)),m=n(33),f=n(34),g=n(17),b=n(3),v=n(1476),y=n(1474),_=n.n(y),E=n(11),w=n.n(E),k=n(84),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),O=b.c.operations,T={textAlign:"left"},C={textAlign:"right"},S=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={limit:e.limit||20,csvExport:!1,headerHeight:85,filter:"all"},n}return o(t,e),A(t,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;_.a.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!g.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!g.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!g.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var n=0;n<e.accountsList.length;++n){var a=e.accountsList[n],r=this.props.accountsList[n];if(a&&r&&a.get("history")!==r.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container"),t=e.childNodes,n="",a=!0,r=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var c=i.value,u=c.childNodes;""!==n&&(n+="\n"),n+=[s(u[0]),s(u[1]),s(u[2]),s(u[3])].join(",")}}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}var p=new Blob([n],{type:"text/csv;charset=utf-8"}),h=new Date;Object(d.saveAs)(p,"btshist-"+h.getFullYear()+"-"+("0"+(h.getMonth()+1)).slice(-2)+"-"+("0"+h.getDate()).slice(-2)+"-"+("0"+h.getHours()).slice(-2)+("0"+h.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var m=this.refs.transactions;_.a.update(m),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,n){var a=[],r=new Set,o=!0,i=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(u){var p=u.get("history");p&&(a=a.concat(p.toJS().filter(function(e){return!r.has(e.id)&&r.add(e.id)})))}}}catch(e){i=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw s}}return t&&(a=a.filter(function(e){return e.op[0]===O[t]})),n&&(a=a.filter(function(e){return n.fields.reduce(function(t,a){switch(a){case"asset_id":return t&&e.op[1].amount[a]===n.values[a];default:return t&&e.op[1][a]===n.values[a]}},!0)})),a}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.accountsList,n=e.compactView,a=e.filter,r=e.customFilter,o=e.style,s=e.maxHeight,l=this.state,u=l.limit,d=l.headerHeight,m=1===t.length&&t[0]?t[0].get("id"):null,f=this._getHistory(t,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:a,r).sort(i),g=f.length;o=o||{},o.width="100%",o.height="100%";var b=null;b=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"].map(function(e){return c.a.createElement("option",{value:e,key:e},w.a.translate("transaction.trxTypes."+e))});var y=f.length?f.slice(0,u).map(function(e){return c.a.createElement(h.a,{style:T,key:e.id,op:e.op,result:e.result,block:e.block_num,current:m,hideFee:!0,inverted:!1,hideOpLabel:n})}):[c.a.createElement("tr",{key:"no_recent"},c.a.createElement("td",{colSpan:n?"2":"3"},c.a.createElement(p.a,{content:"operation.no_recent"})))];return y.push(c.a.createElement("tr",{className:"total-value",key:"total_value"},c.a.createElement("td",{className:"column-hide-tiny"}),c.a.createElement("td",{style:C},g>0?c.a.createElement("span",null,c.a.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":w.a.translate("transaction.csv_tip"),"data-place":"bottom"},c.a.createElement(k.a,{name:"excel",className:"icon-14px"}))):null),c.a.createElement("td",{style:{textAlign:"center"}},"",this.props.showMore&&g>this.props.limit||u<g?c.a.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},c.a.createElement(k.a,{name:"chevron-down",className:"icon-14px"})):null))),c.a.createElement("div",{className:"recent-transactions no-overflow",style:o},c.a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard?null:c.a.createElement("div",{ref:"header"},c.a.createElement("div",{className:"block-content-header"},c.a.createElement("span",null,this.props.title?this.props.title:c.a.createElement(p.a,{content:"account.recent"})))),c.a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:s-d},ref:"transactions"},c.a.createElement("table",{className:"table"+(n?" compact":"")+(this.props.dashboard?" dashboard-table":"")},c.a.createElement("thead",null,c.a.createElement("tr",null,n?null:c.a.createElement("th",{style:T,className:"column-hide-tiny"},this.props.showFilters?c.a.createElement("select",{"data-place":"left","data-tip":w.a.translate("tooltip.filter_ops"),style:{paddingTop:5,width:"auto"},className:"bts-select no-margin",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},b):null),c.a.createElement("th",{style:T},c.a.createElement(p.a,{content:"account.votes.info"})),c.a.createElement("th",null))),c.a.createElement(v.a,{component:"tbody",transitionName:"newrow"},y))),g>0&&this.state.csvExport&&c.a.createElement("div",{id:"csv_export_container",style:{display:"none"}},c.a.createElement("div",null,c.a.createElement("div",null,"DATE"),c.a.createElement("div",null,"OPERATION"),c.a.createElement("div",null,"MEMO"),c.a.createElement("div",null,"AMOUNT")),f.map(function(e){return c.a.createElement(h.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}(c.a.Component);S.propTypes={accountsList:m.a.ChainAccountsList.isRequired,compactView:c.a.PropTypes.bool,limit:c.a.PropTypes.number,maxHeight:c.a.PropTypes.number,fullHeight:c.a.PropTypes.bool,showFilters:c.a.PropTypes.bool},S.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},S=Object(f.a)(S,{keep_updating:!0});var N=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),A(t,[{key:"render",value:function(){return c.a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}(c.a.Component);N.propTypes={asset:m.a.ChainAsset.isRequired,to:m.a.ChainAccount.isRequired,fromAccount:m.a.ChainAccount.isRequired},N.defaultProps={asset:"1.3.0"},N=Object(f.a)(N)},1510:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"b",function(){return T}),n.d(t,"a",function(){return C});var s=n(1),l=n.n(s),c=n(66),u=n(33),p=n(34),d=n(17),h=n(26),m=(n.n(h),n(273)),f=n(5),g=n.n(f),b=n(11),v=n.n(b),y=n(140),_=n.n(y),E=n(664),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),A=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,a)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(a)},O=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),k(t,[{key:"componentDidMount",value:function(){_.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:"getValue",value:function(){var e=this.props,t=e.amount,n=e.toAsset,a=e.fromAsset,r=e.fullPrecision,o=e.marketStats,i=e.coreAsset,s=void 0,l=void 0,c=n.get("id"),u=n.get("symbol"),p=a.get("id"),h=a.get("symbol");if(r||(t=d.a.get_asset_amount(t,a)),i&&o){var m=i.get("symbol");s=o.get(u+"_"+m),l=o.get(h+"_"+m)}var f=d.a.convertPrice(l&&l.close?l.close:"1.3.0"===p||a.has("bitasset")?a:null,s&&s.close?s.close:"1.3.0"===c||n.has("bitasset")?n:null,p,c);return f?d.a.convertValue(f,t,a,n):null}},{key:"render",value:function(){var e=this.props,t=e.amount,n=e.toAsset,a=e.fromAsset,r=e.fullPrecision,o=n.get("id"),i=n.get("symbol");r||(t=d.a.get_asset_amount(t,a));var s=this.getValue();return s||0===s?l.a.createElement(c.a,{hide_asset:this.props.hide_asset,noPrefix:!0,amount:s,asset:o,decimalOffset:-1!==i.indexOf("BTC")?4:this.props.noDecimals?n.get("precision"):n.get("precision")-2}):l.a.createElement("div",{className:"tooltip inline-block","data-place":"bottom","data-tip":v.a.translate("tooltip.no_price"),style:{fontSize:"0.9rem"}},l.a.createElement(g.a,{content:"account.no_price"}))}}]),t}(E.a);O.propTypes={toAsset:u.a.ChainAsset.isRequired,fromAsset:u.a.ChainAsset.isRequired,coreAsset:u.a.ChainAsset.isRequired},O.defaultProps={toAsset:"1.3.0",fullPrecision:!0,noDecimals:!1,hide_asset:!1,coreAsset:"1.3.0"},O=Object(p.a)(O,{keep_updating:!0});var T=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),k(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,n=a(e,["refCallback"]);return l.a.createElement(O,w({},n,{ref:t}))}}]),t}(l.a.Component);T=Object(h.connect)(T,{listenTo:function(){return[m.a]},getProps:function(){return{marketStats:m.a.getState().allMarketStats}}});var C=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),k(t,[{key:"render",value:function(){var e=this.props.balance,t=!!e.getIn(["balance","amount"]),n=Number(t?e.getIn(["balance","amount"]):e.get("balance")),a=t?e.getIn(["balance","asset_id"]):e.get("asset_type");return isNaN(n)?l.a.createElement("span",null,"--"):l.a.createElement(T,{refCallback:this.props.refCallback,hide_asset:this.props.hide_asset,amount:n,fromAsset:a,noDecimals:!0,toAsset:this.props.toAsset})}}]),t}(l.a.Component);C.propTypes={balance:u.a.ChainObject.isRequired},C=Object(p.a)(C,{keep_updating:!0})},1511:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(1),c=n(27),u=n(1512),p=n(1505),d=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){var n=this;return Object.keys(t.propTypes).some(function(t){return n.props[t]!==e[t]})}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var e=this.props,t=e.value,n=e.size,a=e.level,r=e.bgColor,o=e.fgColor,s=new u(-1,p[a]);if(s.addData(t),s.make(),null!=this._canvas){var l=this._canvas,c=l.getContext("2d");if(!c)return;var d=s.modules;if(null===d)return;var h=n/d.length,m=n/d.length,f=(window.devicePixelRatio||1)/i(c);l.height=l.width=n*f,c.scale(f,f),d.forEach(function(e,t){e.forEach(function(e,n){c&&(c.fillStyle=e?o:r);var a=Math.ceil((n+1)*h)-Math.floor(n*h),i=Math.ceil((t+1)*m)-Math.floor(t*m);c&&c.fillRect(Math.round(n*h),Math.round(t*m),a,i)})})}}},{key:"render",value:function(){var e=this;return l.createElement("canvas",{style:{height:this.props.size,width:this.props.size},height:this.props.size,width:this.props.size,ref:function(t){return e._canvas=t}})}}]),t}(l.Component);Object.defineProperty(d,"defaultProps",{enumerable:!0,writable:!0,value:{size:128,level:"L",bgColor:"#FFFFFF",fgColor:"#000000"}}),Object.defineProperty(d,"propTypes",{enumerable:!0,writable:!0,value:{value:c.string.isRequired,size:c.number,level:c.oneOf(["L","M","Q","H"]),bgColor:c.string,fgColor:c.string}}),e.exports=d},1512:function(e,t,n){function a(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var r=n(1513),o=n(1514),i=n(1515),s=n(1516),l=n(1506),c=a.prototype;c.addData=function(e){var t=new r(e);this.dataList.push(t),this.dataCache=null},c.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},c.getModuleCount=function(){return this.moduleCount},c.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=o.getRSBlocks(e,this.errorCorrectLevel),n=new i,a=0,r=0;r<t.length;r++)a+=t[r].dataCount;for(var r=0;r<this.dataList.length;r++){var l=this.dataList[r];n.put(l.mode,4),n.put(l.getLength(),s.getLengthInBits(l.mode,e)),l.write(n)}if(n.getLengthInBits()<=8*a)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},c.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},c.setupPositionProbePattern=function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(this.modules[e+n][t+a]=0<=n&&n<=6&&(0==a||6==a)||0<=a&&a<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=a&&a<=4)},c.getBestMaskPattern=function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var a=s.getLostPoint(this);(0==n||e>a)&&(e=a,t=n)}return t},c.createMovieClip=function(e,t,n){var a=e.createEmptyMovieClip(t,n);this.make();for(var r=0;r<this.modules.length;r++)for(var o=1*r,i=0;i<this.modules[r].length;i++){var s=1*i,l=this.modules[r][i];l&&(a.beginFill(0,100),a.moveTo(s,o),a.lineTo(s+1,o),a.lineTo(s+1,o+1),a.lineTo(s,o+1),a.endFill())}return a},c.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},c.setupPositionAdjustPattern=function(){for(var e=s.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var a=e[t],r=e[n];if(null==this.modules[a][r])for(var o=-2;o<=2;o++)for(var i=-2;i<=2;i++)this.modules[a+o][r+i]=-2==o||2==o||-2==i||2==i||0==o&&0==i}},c.setupTypeNumber=function(e){for(var t=s.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var a=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=a}for(var n=0;n<18;n++){var a=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}},c.setupTypeInfo=function(e,t){for(var n=this.errorCorrectLevel<<3|t,a=s.getBCHTypeInfo(n),r=0;r<15;r++){var o=!e&&1==(a>>r&1);r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(var r=0;r<15;r++){var o=!e&&1==(a>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=o:r<9?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o}this.modules[this.moduleCount-8][8]=!e},c.mapData=function(e,t){for(var n=-1,a=this.moduleCount-1,r=7,o=0,i=this.moduleCount-1;i>0;i-=2)for(6==i&&i--;;){for(var l=0;l<2;l++)if(null==this.modules[a][i-l]){var c=!1;o<e.length&&(c=1==(e[o]>>>r&1));var u=s.getMask(t,a,i-l);u&&(c=!c),this.modules[a][i-l]=c,r--,-1==r&&(o++,r=7)}if((a+=n)<0||this.moduleCount<=a){a-=n,n=-n;break}}},a.PAD0=236,a.PAD1=17,a.createData=function(e,t,n){for(var r=o.getRSBlocks(e,t),l=new i,c=0;c<n.length;c++){var u=n[c];l.put(u.mode,4),l.put(u.getLength(),s.getLengthInBits(u.mode,e)),u.write(l)}for(var p=0,c=0;c<r.length;c++)p+=r[c].dataCount;if(l.getLengthInBits()>8*p)throw new Error("code length overflow. ("+l.getLengthInBits()+">"+8*p+")");for(l.getLengthInBits()+4<=8*p&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;;){if(l.getLengthInBits()>=8*p)break;if(l.put(a.PAD0,8),l.getLengthInBits()>=8*p)break;l.put(a.PAD1,8)}return a.createBytes(l,r)},a.createBytes=function(e,t){for(var n=0,a=0,r=0,o=new Array(t.length),i=new Array(t.length),c=0;c<t.length;c++){var u=t[c].dataCount,p=t[c].totalCount-u;a=Math.max(a,u),r=Math.max(r,p),o[c]=new Array(u);for(var d=0;d<o[c].length;d++)o[c][d]=255&e.buffer[d+n];n+=u;var h=s.getErrorCorrectPolynomial(p),m=new l(o[c],h.getLength()-1),f=m.mod(h);i[c]=new Array(h.getLength()-1);for(var d=0;d<i[c].length;d++){var g=d+f.getLength()-i[c].length;i[c][d]=g>=0?f.get(g):0}}for(var b=0,d=0;d<t.length;d++)b+=t[d].totalCount;for(var v=new Array(b),y=0,d=0;d<a;d++)for(var c=0;c<t.length;c++)d<o[c].length&&(v[y++]=o[c][d]);for(var d=0;d<r;d++)for(var c=0;c<t.length;c++)d<i[c].length&&(v[y++]=i[c][d]);return v},e.exports=a},1513:function(e,t,n){function a(e){this.mode=r.MODE_8BIT_BYTE,this.data=e}var r=n(1504);a.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},e.exports=a},1514:function(e,t,n){function a(e,t){this.totalCount=e,this.dataCount=t}var r=n(1505);a.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],a.getRSBlocks=function(e,t){var n=a.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,o=new Array,i=0;i<r;i++)for(var s=n[3*i+0],l=n[3*i+1],c=n[3*i+2],u=0;u<s;u++)o.push(new a(l,c));return o},a.getRsBlockTable=function(e,t){switch(t){case r.L:return a.RS_BLOCK_TABLE[4*(e-1)+0];case r.M:return a.RS_BLOCK_TABLE[4*(e-1)+1];case r.Q:return a.RS_BLOCK_TABLE[4*(e-1)+2];case r.H:return a.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},e.exports=a},1515:function(e,t){function n(){this.buffer=new Array,this.length=0}n.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=n},1516:function(e,t,n){var a=n(1504),r=n(1506),o=n(1507),i={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;s.getBCHDigit(t)-s.getBCHDigit(s.G15)>=0;)t^=s.G15<<s.getBCHDigit(t)-s.getBCHDigit(s.G15);return(e<<10|t)^s.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;s.getBCHDigit(t)-s.getBCHDigit(s.G18)>=0;)t^=s.G18<<s.getBCHDigit(t)-s.getBCHDigit(s.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return s.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case i.PATTERN000:return(t+n)%2==0;case i.PATTERN001:return t%2==0;case i.PATTERN010:return n%3==0;case i.PATTERN011:return(t+n)%3==0;case i.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case i.PATTERN101:return t*n%2+t*n%3==0;case i.PATTERN110:return(t*n%2+t*n%3)%2==0;case i.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new r([1],0),n=0;n<e;n++)t=t.multiply(new r([1,o.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,a=0;a<t;a++)for(var r=0;r<t;r++){for(var o=0,i=e.isDark(a,r),s=-1;s<=1;s++)if(!(a+s<0||t<=a+s))for(var l=-1;l<=1;l++)r+l<0||t<=r+l||0==s&&0==l||i==e.isDark(a+s,r+l)&&o++;o>5&&(n+=3+o-5)}for(var a=0;a<t-1;a++)for(var r=0;r<t-1;r++){var c=0;e.isDark(a,r)&&c++,e.isDark(a+1,r)&&c++,e.isDark(a,r+1)&&c++,e.isDark(a+1,r+1)&&c++,0!=c&&4!=c||(n+=3)}for(var a=0;a<t;a++)for(var r=0;r<t-6;r++)e.isDark(a,r)&&!e.isDark(a,r+1)&&e.isDark(a,r+2)&&e.isDark(a,r+3)&&e.isDark(a,r+4)&&!e.isDark(a,r+5)&&e.isDark(a,r+6)&&(n+=40);for(var r=0;r<t;r++)for(var a=0;a<t-6;a++)e.isDark(a,r)&&!e.isDark(a+1,r)&&e.isDark(a+2,r)&&e.isDark(a+3,r)&&e.isDark(a+4,r)&&!e.isDark(a+5,r)&&e.isDark(a+6,r)&&(n+=40);for(var u=0,r=0;r<t;r++)for(var a=0;a<t;a++)e.isDark(a,r)&&u++;return n+=Math.abs(100*u/t/t-50)/5*10}};e.exports=s},1518:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(9),o=n(1508),i=(n(272),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),s={},l=function(e,t){e({down:t})},c=function(){function e(){a(this,e)}return i(e,[{key:"fetchCoins",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.backer,e.url;return{}}},{key:"fetchCoinsSimple",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.backer,n=void 0===t?"RUDEX":t,a=e.url,r=void 0===a?void 0:a;return s["fetchCoinsSimple_"+n]?{}:(s["fetchCoinsSimple_"+n]=!0,function(e){var t=setTimeout(l.bind(null,e,n),1e4);Object(o.d)(r).then(function(a){clearTimeout(t),delete s["fetchCoinsSimple_"+n],e({coins:a,backer:n})})})}},{key:"fetchBridgeCoins",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{}}}]),e}();t.a=r.a.createActions(c)},1520:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(1),s=n.n(i),l=n(17),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.price,n=e.preFormattedPrice,a=e.quote,r=e.base,o=(e.component,n||l.a.price_to_text(t,a,r));return o.full>=1?s.a.createElement("span",null,s.a.createElement("span",{className:"price-integer"},o.int,"."),o.dec?s.a.createElement("span",{className:"price-integer"},o.dec):null,o.trailing?s.a.createElement("span",{className:"price-decimal"},o.trailing):null):o.full>=.1?s.a.createElement("span",null,s.a.createElement("span",{className:"price-decimal"},o.int,"."),o.dec?s.a.createElement("span",{className:"price-integer"},o.dec):null,o.trailing?s.a.createElement("span",{className:"price-decimal"},o.trailing):null):s.a.createElement("span",null,s.a.createElement("span",{className:"price-decimal"},o.int,"."),o.dec?s.a.createElement("span",{className:"price-decimal"},o.dec):null,o.trailing?s.a.createElement("span",{className:"price-integer"},o.trailing):null)}}]),t}(s.a.Component);t.a=u},1521:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(24),o=n(102),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=new o.a("__bts__"),l=function(){function e(){a(this,e),this.current_blocktrades_address_cache_version_string="2"}return i(e,[{key:"getIndexForDepositKeyInExchange",value:function(e,t,n){return[this.current_blocktrades_address_cache_version_string,e,t,n].reduce(function(e,t){return e.concat("[",t,"]")},"")}},{key:"getCachedInputAddress",value:function(e,t,n,a){var o=r.a.getWallet();o=null;var i=this.getIndexForDepositKeyInExchange(t,n,a);if(o){o.deposit_keys=o.deposit_keys||{},o.deposit_keys[e]=o.deposit_keys[e]||{},o.deposit_keys[e][i]=o.deposit_keys[e][i]||[];var l=o.deposit_keys[e][i].length;return l?o.deposit_keys[e][i][l-1]:null}var c=s.get("deposit_keys",{});c[e]=c[e]||{},c[e][i]=c[e][i]||[];var u=c[e][i].length;return u?c[e][i][u-1]:null}},{key:"cacheInputAddress",value:function(e,t,n,a,o,i){if(o){var l=r.a.getWallet();l=null;var c=this.getIndexForDepositKeyInExchange(t,n,a);if(l)l.deposit_keys=l.deposit_keys||{},l.deposit_keys[e]=l.deposit_keys[e]||{},l.deposit_keys[e][c]=l.deposit_keys[e][c]||[],l.deposit_keys[e][c].push({address:o,memo:i}),r.a._updateWallet();else{var u=s.get("deposit_keys",{});u[e]=u[e]||{},u[e][c]=u[e][c]||[],u[e][c].push({address:o,memo:i}),s.set("deposit_keys",u)}}}}]),e}();t.a=l},1522:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(11),i=n.n(o),s=n(1526),l=n.n(s),c=n(84),u=function(e){var t=e.className,n=void 0===t?"button":t,a=e.text,o=void 0===a?"":a,s=e.tip,u=void 0===s?"tooltip.copy_tip":s,p=e.dataPlace,d=void 0===p?"right":p,h=e.buttonIcon,m=void 0===h?"clippy":h,f=e.buttonText,g=void 0===f?"":f;return r.a.createElement(l.a,{"data-clipboard-text":o,className:n,"data-place":d,"data-tip":i.a.translate(u)},g||r.a.createElement(c.a,{name:m}))};t.a=u},1523:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return w}),n.d(t,"b",function(){return _});var i=n(1),s=n.n(i),l=n(33),c=n(34),u=n(25),p=n.n(u),d=n(274),h=n(273),m=n(26),f=(n.n(m),n(17)),g=n(141),b=n(123),v=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,a)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(a)},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.statsInterval=null;var o=b.a.getMarketID(e.base,e.quote),i=o.marketID,s=o.first,l=o.second;return n.state={marketID:i,first:s,second:l},n}return o(t,e),y(t,[{key:"_checkStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{close:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{close:{}};return e.volumeBase!==t.volumeBase||!f.a.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)||!f.a.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)}},{key:"shouldComponentUpdate",value:function(e){return this._checkStats(e.allMarketStats.get(this.state.marketID),this.props.allMarketStats.get(this.state.marketID))||e.base.get("id")!==this.props.base.get("id")||e.quote.get("id")!==this.props.quote.get("id")}},{key:"componentWillMount",value:function(){d.a.getMarketStats.defer(this.state.second,this.state.first),this.statsChecked=new Date,this.statsInterval=setInterval(d.a.getMarketStats.bind(this,this.state.second,this.state.first),35e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.statsInterval)}}]),t}(s.a.Component),E=function(e){function t(e){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),y(t,[{key:"shouldComponentUpdate",value:function(e){return v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)}},{key:"render",value:function(){var e=this.props.allMarketStats,t=this.state.marketID,n=e.get(t),a=n&&n.price?n.price:null;return s.a.createElement("span",{className:p()("",this.props.className)},a?s.a.createElement(g.a,{base_amount:a.base.amount,base_asset:a.base.asset_id,quote_amount:a.quote.amount,quote_asset:a.quote.asset_id,hide_symbols:!0}):"n/a")}}]),t}(_);E.propTypes={quote:l.a.ChainAsset.isRequired,base:l.a.ChainAsset.isRequired},E=Object(c.a)(E);var w=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),y(t,[{key:"render",value:function(){return s.a.createElement(E,this.props)}}]),t}(s.a.Component);w=Object(m.connect)(w,{listenTo:function(){return[h.a]},getProps:function(){return{allMarketStats:h.a.getState().allMarketStats}}})},1525:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"b",function(){return S}),n.d(t,"c",function(){return C}),n.d(t,"a",function(){return N});var s=n(1),l=n.n(s),c=n(32),u=n(78),p=n(1474),d=n.n(p),h=n(17),m=n(5),f=n.n(m),g=n(1520),b=n(1476),v=n(118),y=n(84),_=n(3),E=n(139),w=n(1510),k=n(1523),A=n(141),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),T={textAlign:"right"},C=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),O(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,n=e.quoteSymbol,a=e.dashboard,r=e.isMyAccount,o=e.settings,i=o?o.get("unit"):"1.3.0";return a?l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"3"},l.a.createElement(f.a,{content:"account.bts_market"})),l.a.createElement("th",{style:T},l.a.createElement(f.a,{content:"account.quote"})),l.a.createElement("th",{style:T},l.a.createElement(f.a,{content:"exchange.price"})),l.a.createElement("th",{style:T},l.a.createElement(f.a,{content:"account.qty"})),l.a.createElement("th",{style:T},l.a.createElement(f.a,{content:"exchange.total"})),l.a.createElement("th",null,l.a.createElement(f.a,{content:"exchange.order_value"})," (",l.a.createElement(v.a,{name:i}),")"),l.a.createElement("th",null,l.a.createElement(f.a,{content:"account.trade"})),r?l.a.createElement("th",{id:"cancelAllOrders",style:{cursor:"pointer"}},l.a.createElement(f.a,{content:"wallet.cancel"})):null)):l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{paddingLeft:10,textAlign:this.props.leftAlign?"left":""}},l.a.createElement(f.a,{className:"header-sub-title",content:"exchange.price"})),l.a.createElement("th",{style:this.props.leftAlign?{textAlign:"left"}:null},t?l.a.createElement("span",{className:"header-sub-title"},l.a.createElement(v.a,{dataPlace:"top",name:n})):null),l.a.createElement("th",{style:this.props.leftAlign?{textAlign:"left"}:null},t?l.a.createElement("span",{className:"header-sub-title"},l.a.createElement(v.a,{dataPlace:"top",name:t})):null),l.a.createElement("th",{style:{width:"28%",textAlign:this.props.leftAlign?"left":""}},l.a.createElement(f.a,{className:"header-sub-title",content:"transaction.expiration"})),l.a.createElement("th",null)))}}]),t}(l.a.Component);C.defaultProps={quoteSymbol:null,baseSymbol:null};var S=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),O(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.for_sale!==this.props.order.for_sale||e.order.id!==this.props.order.id||e.quote!==this.props.quote||e.base!==this.props.base||e.order.market_base!==this.props.order.market_base}},{key:"render",value:function(){var e=this.props,t=e.base,n=e.quote,a=e.order,r=e.showSymbols,o=e.dashboard,i=e.isMyAccount,s=e.settings,p=a.isBid(),d=a.isCall(),m=d?"orderHistoryCall":p?"orderHistoryBid":"orderHistoryAsk",f=r?l.a.createElement("span",null," "+t.get("symbol")+"/"+n.get("symbol")):null,b=r?" "+t.get("symbol"):null,_=r?" "+n.get("symbol"):null,E=s?s.get("unit"):"1.3.0";return o?l.a.createElement("tr",{key:a.id},l.a.createElement("td",{style:{textAlign:"right",paddingLeft:0,borderRight:"none"}},l.a.createElement(c.b,{to:"/asset/"+n.get("symbol")},l.a.createElement(v.a,{noTip:!0,name:n.get("symbol")}))),l.a.createElement("td",{style:{borderLeft:"none",borderRight:"none"}},l.a.createElement("a",{onClick:this.props.onFlip},"",l.a.createElement(y.a,{className:"shuffle",name:"shuffle"}),"")),l.a.createElement("td",{style:{textAlign:"left",paddingRight:0,borderLeft:"none"}},l.a.createElement(c.b,{to:"/asset/"+t.get("symbol")},l.a.createElement(v.a,{noTip:!0,name:t.get("symbol")}))),l.a.createElement("td",{style:{textAlign:"right",paddingLeft:0}},l.a.createElement(k.a,{base:t.get("id"),quote:n.get("id")})),l.a.createElement("td",{className:m,style:T},l.a.createElement(A.a,{base_amount:a.sellPrice().base.amount,base_asset:a.sellPrice().base.asset_id,quote_amount:a.sellPrice().quote.amount,quote_asset:a.sellPrice().quote.asset_id,hide_symbols:!0}),f),l.a.createElement("td",{style:T},h.a.format_number(a[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),n.get("precision"))," ",_),l.a.createElement("td",{style:T},h.a.format_number(a[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",b),l.a.createElement("td",null,l.a.createElement(w.b,{hide_asset:!0,amount:a.amountForSale().getAmount(),fromAsset:a.amountForSale().asset_id,noDecimals:!0,toAsset:E})),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/market/"+n.get("symbol")+"_"+t.get("symbol")},l.a.createElement(y.a,{name:"trade",className:"icon-14px"}))),i?l.a.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},d?null:l.a.createElement("span",{style:{marginRight:0},className:"order-cancel"},l.a.createElement("input",{type:"checkbox",className:"orderCancel",onChange:this.props.onCheckCancel}))):null):l.a.createElement("tr",{key:a.id},l.a.createElement("td",{className:m,style:{paddingLeft:10}},l.a.createElement(g.a,{price:a.getPrice(),base:t,quote:n}),f),l.a.createElement("td",null,h.a.format_number(a[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),n.get("precision"))," ",_),l.a.createElement("td",null,h.a.format_number(a[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",b),l.a.createElement("td",{style:{width:"28%"}},d?null:l.a.createElement(u.a,{value:a.expiration,format:"short"})),l.a.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},d?null:l.a.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},l.a.createElement(y.a,{name:"cross-circle",className:"icon-14px"}))))}}]),t}(l.a.Component);S.defaultProps={showSymbols:!1};var N=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._getOrders=e._getOrders.bind(e),e}return i(t,e),O(t,[{key:"componentDidMount",value:function(){var e=this.refs.asks;e&&d.a.initialize(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.asks;e&&d.a.update(e)}},{key:"_getOrders",value:function(){var e,t=this,n=this.props,r=n.currentAccount,o=n.base,i=n.quote,s=r.get("orders"),l=r.get("call_orders"),c=o.get("id"),u=i.get("id"),p=(e={},a(e,o.get("id"),{precision:o.get("precision")}),a(e,i.get("id"),{precision:i.get("precision")}),e),d=s.toArray().map(function(e){var t=_.b.getObject(e);if(!t)return null;var n=t.getIn(["sell_price","base","asset_id"]),a=t.getIn(["sell_price","quote","asset_id"]);return n===c&&a===u||n===u&&a===c?new E.d(t.toJS(),p,i.get("id")):void 0}).filter(function(e){return!!e}),h=l.toArray().map(function(e){var n=_.b.getObject(e);if(!n)return null;var a=n.getIn(["call_price","base","asset_id"]),r=n.getIn(["call_price","quote","asset_id"]);return a===c&&r===u||a===u&&r===c?t.props.feedPrice?new E.b(n.toJS(),p,i.get("id"),t.props.feedPrice):null:void 0}).filter(function(e){return!!e}).filter(function(e){return e.isMarginCalled()});return d.concat(h)}},{key:"render",value:function(){var e=this,t=this.props,n=t.base,a=t.quote,r=t.quoteSymbol,o=t.baseSymbol;if(!n||!a)return null;var i=this._getOrders(),s=l.a.createElement("tr",null,l.a.createElement("td",{style:{textAlign:"center"},colSpan:"5"},l.a.createElement(f.a,{content:"account.no_orders"}))),c=i.filter(function(e){return e.isBid()}).sort(function(e,t){return t.getPrice()-e.getPrice()}).map(function(t){var r=t.getPrice();return l.a.createElement(S,{price:r,key:t.id,order:t,base:n,quote:a,onCancel:e.props.onCancel.bind(e,t.id)})}),u=i.filter(function(e){return!e.isBid()}).sort(function(e,t){return e.getPrice()-t.getPrice()}).map(function(t){var r=t.getPrice();return l.a.createElement(S,{price:r,key:t.id,order:t,base:n,quote:a,onCancel:e.props.onCancel.bind(e,t.id)})}),p=[];return u.length&&(p=p.concat(u)),c.length&&(p=p.concat(c)),p.sort(function(e,t){return e.props.price-t.props.price}),l.a.createElement("div",{style:{marginBottom:"15px"},key:"open_orders",className:this.props.className},l.a.createElement("div",{className:"exchange-bordered small-12",style:{height:266}},l.a.createElement("div",{className:"exchange-content-header"},l.a.createElement(f.a,{content:"exchange.my_orders"})),l.a.createElement("table",{className:"table order-table table-hover"},l.a.createElement(C,{leftAlign:!0,type:"sell",baseSymbol:o,quoteSymbol:r})),l.a.createElement("div",{className:"grid-block no-padding market-right-padding",ref:"asks",style:{overflow:"hidden",maxHeight:200}},l.a.createElement("table",{style:{paddingBottom:5},className:"table order-table table-hover"},l.a.createElement(b.a,{component:"tbody",transitionName:"newrow"},p.length?p:s)))))}}]),t}(l.a.Component);N.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},N.propTypes={base:s.PropTypes.object.isRequired,quote:s.PropTypes.object.isRequired,orders:s.PropTypes.object.isRequired,quoteSymbol:s.PropTypes.string.isRequired,baseSymbol:s.PropTypes.string.isRequired}},1526:function(e,t,n){!function(t,a){e.exports=a(n(1),n(27),n(1527))}(0,function(e,t,n){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),u=a(c),p=n(2),d=a(p),h=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"propsWith",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return Object.keys(this.props).forEach(function(a){if(-1!==a.search(e)){var r=t?a.replace(e,""):a;n[r]=this.props[a]}},this),n}},{key:"componentWillUnmount",value:function(){this.clipboard&&this.clipboard.destroy()}},{key:"componentDidMount",value:function(){var e=this.props.options||this.propsWith(/^option-/,!0),t=u.default.version.match(/0\.13(.*)/)?this.refs.element.getDOMNode():this.element,a=n(3);this.clipboard=new a(t,e);var r=this.propsWith(/^on/,!0);Object.keys(r).forEach(function(e){this.clipboard.on(e.toLowerCase(),this.props["on"+e])},this)}},{key:"render",value:function(){var e=this,t=s({type:this.getType(),className:this.props.className||"",style:this.props.style||{},ref:function(t){e.element=t},onClick:this.props.onClick},this.propsWith(/^data-/),this.propsWith(/^button-/,!0));return u.default.createElement(this.getComponent(),t,this.props.children)}},{key:"getType",value:function(){return"button"===this.getComponent()||"input"===this.getComponent()?this.props.type||"button":void 0}},{key:"getComponent",value:function(){return this.props.component||"button"}}]),t}(u.default.Component);h.propTypes={options:d.default.object,type:d.default.string,className:d.default.string,style:d.default.object,component:d.default.string,children:d.default.oneOfType([d.default.element,d.default.string,d.default.number,d.default.object])},h.defaultProps={onClick:function(){}},t.default=h},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n}])})},1527:function(e,t,n){var a,r,o;!function(i,s){r=[e,n(1528),n(1530),n(1531)],a=s,void 0!==(o="function"==typeof a?a.apply(t,r):a)&&(e.exports=o)}(0,function(e,t,n,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var c=r(t),u=r(n),p=r(a),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=function(e){function t(e,n){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.resolveOptions(n),a.listenClick(e),a}return s(t,e),h(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===d(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,p.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(u.default);e.exports=m})},1528:function(e,t,n){var a,r,o;!function(i,s){r=[e,n(1529)],a=s,void 0!==(o="function"==typeof a?a.apply(t,r):a)&&(e.exports=o)}(0,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(e){return e&&e.__esModule?e:{default:e}}(t),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return o(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,a.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,a.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":r(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=i})},1529:function(e,t){function n(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var a=window.getSelection(),r=document.createRange();r.selectNodeContents(e),a.removeAllRanges(),a.addRange(r),t=a.toString()}return t}e.exports=n},1530:function(e,t){function n(){}n.prototype={on:function(e,t,n){var a=this.e||(this.e={});return(a[e]||(a[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function a(){r.off(e,a),t.apply(n,arguments)}var r=this;return a._=t,this.on(e,a,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),a=0,r=n.length;for(a;a<r;a++)n[a].fn.apply(n[a].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),a=n[e],r=[];if(a&&t)for(var o=0,i=a.length;o<i;o++)a[o].fn!==t&&a[o].fn._!==t&&r.push(a[o]);return r.length?n[e]=r:delete n[e],this}},e.exports=n},1531:function(e,t,n){function a(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return r(e,t,n);if(s.nodeList(e))return o(e,t,n);if(s.string(e))return i(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function o(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function i(e,t,n){return l(document.body,e,t,n)}var s=n(1532),l=n(1533);e.exports=a},1532:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},1533:function(e,t,n){function a(e,t,n,a,o){var i=r.apply(this,arguments);return e.addEventListener(n,i,o),{destroy:function(){e.removeEventListener(n,i,o)}}}function r(e,t,n,a){return function(n){n.delegateTarget=o(n.target,t),n.delegateTarget&&a.call(e,n)}}var o=n(1534);e.exports=a},1534:function(e,t){function n(e,t){for(;e&&e.nodeType!==a;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var a=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=n},1537:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return u});var i=n(1),s=n.n(i),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"onKeyPress",value:function(e){"."===e.key&&""===e.target.value&&(e.target.value="0");var t=e.target.value+e.key,n=t.match(/\./g),a=n?n.length:0;"."===e.key&&a>1&&e.preventDefault(),parseFloat(t)!=t&&e.preventDefault(),this.props.onKeyPress&&this.props.onKeyPress(e)}}]),t}(s.a.Component),p=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),c(t,[{key:"componentWillReceiveProps",value:function(e){this.props.value&&!e.value&&(this.refs.input.value="")}},{key:"render",value:function(){return s.a.createElement("input",l({ref:"input",type:"text"},this.props,{onKeyPress:this.onKeyPress.bind(this)}))}}]),t}(u);t.b=p},1538:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(1),s=n.n(i),l=n(119),c=(n.n(l),n(47)),u=n.n(c),p=n(120),d=n(143),h=n.n(d),m=n(5),f=n.n(m),g=n(33),b=n(34),v=n(66),y=n(17),_=n(25),E=n.n(_),w=n(661),k=n(660),A=n(275),O=n(24),T=n(141),C=n(11),S=n.n(C),N=n(662),P=n(18),x=n.n(P),j=n(3),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),R=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state=n._initialState(e),n}return o(t,e),L(t,[{key:"_initialState",value:function(e){var t=e?this._getCurrentPosition(e):{};if(t.collateral){var n=y.a.get_asset_amount(t.debt,e.quote_asset),a=y.a.get_asset_amount(t.collateral,e.backing_asset);return{short_amount:n?n.toString():null,collateral:a?a.toString():null,collateral_ratio:this._getCollateralRatio(n,a),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:n,collateral:a}}}return{short_amount:0,collateral:0,collateral_ratio:this._getInitialCollateralRatio(e),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:0,collateral:0}}}},{key:"componentDidMount",value:function(){var e=this._initialState(this.props);this.setState(e),this._setUpdatedPosition(e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(y.a.are_equal_shallow(t,this.state)&&x.a.is(e.quote_asset,this.props.quote_asset)&&!e.backing_asset.get("symbol")!==this.props.backing_asset.get("symbol")&&x.a.is(e.account,this.props.account)&&x.a.is(e.call_orders,this.props.call_orders))}},{key:"componentWillReceiveProps",value:function(e){var t=this.state,n=t.short_amount,a=t.collateral,r=t.collateral_ratio;if(e.account!==this.props.account||e.hasCallOrders!==this.props.hasCallOrders||e.quote_asset.get("id")!==this.props.quote_asset.get("id")){var o=this._initialState(e),i=!1;(n||a||r)&&(o.short_amount=n,o.collateral=a,o.collateral_ratio=r,i=!0),this.setState(o),i&&this._validateFields(o)}}},{key:"_getInitialErrors",value:function(){return{collateral_balance:null,ratio_too_high:null}}},{key:"confirmClicked",value:function(e){e.preventDefault(),u.a.publish(this.props.modalId,"close")}},{key:"_onBorrowChange",value:function(e){var t=this._getFeedPrice(),n=e.amount.replace(/,/g,""),a={short_amount:n,collateral:(this.state.collateral_ratio*(n/t)).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:this.state.collateral_ratio};this.setState(a),this._validateFields(a),this._setUpdatedPosition(a)}},{key:"_onCollateralChange",value:function(e){var t=e.amount.replace(/,/g,""),n=this._getFeedPrice(),a=t/(this.state.short_amount/n),r=this._isPredictionMarket(this.props)?{short_amount:t,collateral:t,collateral_ratio:1}:{short_amount:this.state.short_amount,collateral:t,collateral_ratio:Object(l.isFinite)(a)?a:this._getInitialCollateralRatio(this.props)};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:"_onRatioChange",value:function(e){var t=this._getFeedPrice(),n=e.target.value,a={short_amount:this.state.short_amount,collateral:(this.state.short_amount/t*n).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:n};this.setState(a),this._validateFields(a),this._setUpdatedPosition(a)}},{key:"_setUpdatedPosition",value:function(e){this.setState({newPosition:parseFloat(e.short_amount)/parseFloat(e.collateral)})}},{key:"_validateFields",value:function(e){var t=this._getInitialErrors(),n=this.state.original_position,a=this.props.backing_balance?this.props.backing_balance.toJS():{balance:0};parseFloat(e.collateral)-n.collateral>y.a.get_asset_amount(a.balance,this.props.backing_asset.toJS())&&(t.collateral_balance=S.a.translate("borrow.errors.collateral"));var r=e.short_amount>=0&&e.collateral>=0&&(e.short_amount!=n.debt||e.collateral!=n.collateral),o=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3;parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o)?(t.below_maintenance=S.a.translate("borrow.errors.below",{mr:o}),r=!1):parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o+.5)&&(t.close_maintenance=S.a.translate("borrow.errors.close",{mr:o}),r=!0),this.setState({errors:t,isValid:r})}},{key:"_onSubmit",value:function(e){e.preventDefault();var t=y.a.get_asset_precision(this.props.quote_asset.get("precision")),n=y.a.get_asset_precision(this.props.backing_asset.get("precision")),a=this._getCurrentPosition(this.props),r=A.a.new_transaction();r.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.account.get("id"),delta_collateral:{amount:parseInt(this.state.collateral*n-a.collateral,10),asset_id:this.props.backing_asset.get("id")},delta_debt:{amount:parseInt(this.state.short_amount*t-a.debt,10),asset_id:this.props.quote_asset.get("id")}}),O.a.process_transaction(r,null,!0).catch(function(e){}),u.a.publish(this.props.modalId,"close")}},{key:"_getCurrentPosition",value:function(e){var t={collateral:null,debt:null};if(e&&e.hasCallOrders&&e.call_orders)for(var n in e.call_orders)e.call_orders.hasOwnProperty(n)&&e.call_orders[n]&&e.quote_asset.get("id")===e.call_orders[n].getIn(["call_price","quote","asset_id"])&&(t=e.call_orders[n].toJS());return t}},{key:"_getFeedPrice",value:function(){return this.props?this._isPredictionMarket(this.props)?1:1/y.a.get_asset_price(this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.backing_asset,this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.quote_asset):1}},{key:"_getInitialCollateralRatio",value:function(e){return this._isPredictionMarket(e)?1:0}},{key:"_getCollateralRatio",value:function(e,t){return t/(e/this._getFeedPrice())}},{key:"_isPredictionMarket",value:function(e){return e.quote_asset.getIn(["bitasset","is_prediction_market"])}},{key:"render",value:function(){var e=this,t=this.props,n=t.quote_asset,a=t.bitasset_balance,r=t.backing_asset,o=t.backing_balance,i=this.state,l=i.short_amount,c=i.collateral,u=i.collateral_ratio,p=i.errors,d=i.isValid,m=y.a.get_asset_precision(this.props.quote_asset.get("precision")),g=y.a.get_asset_precision(this.props.backing_asset.get("precision"));u&&!isNaN(u)&&u>0&&u<1e3||(u=0),a=a?a.toJS():{balance:0,id:null},o=o?o.toJS():{balance:0,id:null};var b=E()("form-group",{"has-error":p.collateral_balance}),_=E()("form-group",{"has-error":p.below_maintenance},{"has-warning":p.close_maintenance}),A=E()("button",{disabled:p.collateral_balance||!d},{success:d}),O=this._getCurrentPosition(this.props),C=o.id?j.b.getObject(o.id):null,S=C?C.get("balance"):0,P=parseInt(this.state.collateral*g-O.collateral,10),x=S-P,L=s.a.createElement("span",null,s.a.createElement(f.a,{component:"span",content:"transfer.available"}),": ",a.id?s.a.createElement(k.a,{balance:a.id}):s.a.createElement(v.a,{amount:0,asset:n.get("id")})),R=s.a.createElement("span",null,s.a.createElement(f.a,{component:"span",content:"transfer.available"}),": ",o.id?s.a.createElement(v.a,{amount:x,asset:r.get("id")}):s.a.createElement(v.a,{amount:0,asset:r.get("id")})),D=this._getFeedPrice(),M=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3,I=(this.props.quote_asset.getIn(["bitasset","current_feed","maximum_short_squeeze_ratio"]),this._isPredictionMarket(this.props));return!I&&isNaN(D)?s.a.createElement("div",null,s.a.createElement("form",{className:"grid-container text-center no-overflow",noValidate:!0},s.a.createElement(f.a,{component:"h3",content:"borrow.no_valid",asset_symbol:n.get("symbol")})),s.a.createElement("div",{className:"grid-content button-group text-center no-overflow"},s.a.createElement(h.a,{close:this.props.modalId},s.a.createElement("div",{className:" button warning"},s.a.createElement(f.a,{content:"account.perm.cancel"}))))):s.a.createElement("div",null,s.a.createElement("form",{className:"grid-container small-10 small-offset-1 no-overflow",noValidate:!0},s.a.createElement(f.a,{component:"h3",content:"borrow.title",asset_symbol:n.get("symbol")}),s.a.createElement("div",{style:{textAlign:"left"}},this.props.hide_help?null:s.a.createElement(N.a,{path:"components/"+(I?"BorrowModalPrediction":"BorrowModal"),debt:n.get("symbol"),collateral:r.get("symbol"),borrower:this.props.account.get("name"),mr:M}),I?null:s.a.createElement("div",{style:{paddingBottom:"1rem"}},s.a.createElement("div",{className:"borrow-price-feeds"},s.a.createElement("span",{className:"borrow-price-label"},s.a.createElement(f.a,{content:"transaction.feed_price"}),":"),s.a.createElement(T.a,{noPopOver:!0,quote_amount:n.getIn(["bitasset","current_feed","settlement_price","base","amount"]),quote_asset:n.getIn(["bitasset","current_feed","settlement_price","base","asset_id"]),base_asset:n.getIn(["bitasset","current_feed","settlement_price","quote","asset_id"]),base_amount:n.getIn(["bitasset","current_feed","settlement_price","quote","amount"])})),s.a.createElement("b",null),s.a.createElement("div",{className:"borrow-price-final "+(p.below_maintenance?"has-error":p.close_maintenance?"has-warning":"")},s.a.createElement("span",{className:"borrow-price-label"},s.a.createElement(f.a,{content:"exchange.your_price"}),":"),this.state.newPosition?s.a.createElement(T.a,{noPopOver:!0,quote_amount:M*this.state.short_amount*m,quote_asset:n.get("id"),base_asset:r.get("id"),base_amount:this.state.collateral*g}):null)),s.a.createElement("div",{className:"form-group"},s.a.createElement(w.a,{label:"transaction.borrow_amount",amount:l.toString(),onChange:this._onBorrowChange.bind(this),asset:n.get("id"),assets:[n.get("id")],display_balance:L,placeholder:"0.0",tabIndex:1})),s.a.createElement("div",{className:b},s.a.createElement(w.a,{label:"transaction.collateral",amount:c.toString(),onChange:this._onCollateralChange.bind(this),asset:r.get("id"),assets:[r.get("id")],display_balance:R,placeholder:"0.0",tabIndex:1}),p.collateral_balance?s.a.createElement("div",{style:{paddingTop:"0.5rem"}},p.collateral_balance):null),I?null:s.a.createElement("div",{className:_},s.a.createElement(f.a,{component:"label",content:"borrow.coll_ratio"}),s.a.createElement("input",{min:"0",max:"6",step:"0.05",onChange:this._onRatioChange.bind(this),value:u,type:"range",disabled:!l}),s.a.createElement("div",{className:"inline-block"},y.a.format_number(u,2)),p.below_maintenance||p.close_maintenance?s.a.createElement("div",{style:{maxWidth:"calc(100% - 50px)"},className:"float-right"},p.below_maintenance,p.close_maintenance):null),s.a.createElement("div",{className:"no-padding grid-content button-group no-overflow"},s.a.createElement("div",{onClick:this._onSubmit.bind(this),href:!0,className:A},s.a.createElement(f.a,{content:"borrow.adjust"})),s.a.createElement("div",{onClick:function(t){t.preventDefault(),e.setState(e._initialState(e.props))},href:!0,className:"button info"},s.a.createElement(f.a,{content:"wallet.reset"}))))))}}]),t}(s.a.Component);R.propTypes={quote_asset:g.a.ChainAsset.isRequired,bitasset_balance:g.a.ChainObject,backing_asset:g.a.ChainAsset.isRequired,backing_balance:g.a.ChainObject,call_orders:g.a.ChainObjectsList,hasCallOrders:i.PropTypes.bool},R=Object(b.a)(R,{keep_updating:!0});var D=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={smallScreen:!1},e}return o(t,e),L(t,[{key:"show",value:function(){var e="borrow_modal_"+this.props.quote_asset;u.a.publish(e,"open")}},{key:"componentWillMount",value:function(){this.setState({smallScreen:window.innerHeight<=800})}},{key:"render",value:function(){var e=this.props,t=e.quote_asset,n=e.backing_asset,a=e.account,r="borrow_modal_"+t,o=a.get("balances").toJS(),i=void 0,l=void 0;if(o)for(var c in o)c===n&&(i=o[c]),c===t&&(l=o[c]);return s.a.createElement(p.a,{id:r,overlay:!0,ref:r},s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(R,{quote_asset:t,call_orders:a.get("call_orders"),hasCallOrders:a.get("call_orders")&&a.get("call_orders").size>0,modalId:r,bitasset_balance:l,backing_balance:i,backing_asset:n,hide_help:this.state.smallScreen,account:a})))}}]),t}(s.a.Component);t.a=D},1543:function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(1),s=n.n(i),l=n(47),c=n.n(l),u=n(120),p=n(5),d=n.n(p),h=n(139),m=n(17),f=n(34),g=n(33),b=n(85),v=n(140),y=n.n(v),_=n(11),E=n.n(_),w=n(1508),k=n(1521),A=n(1522),O=n(84),T=n(121),C=n(276),S=n(118),N=n(3),P=n(119),x=(n.n(P),n(1537)),j=n(272),L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),D=function(t){function n(e){a(this,n);var t=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return console.log("constructor"),t.state={toAddress:w.a.getLast(e.walletType),withdrawValue:"",amountError:null,symbol:e.asset.get("symbol"),to_withdraw:new h.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),fee_asset_id:"1.3.0",feeStatus:{}},t._validateAddress(t.state.toAddress,e),t.deposit_address_cache=new k.a,t.addDepositAddress=t.addDepositAddress.bind(t),t._checkFeeStatus=t._checkFeeStatus.bind(t),t._checkBalance=t._checkBalance.bind(t),t._getCurrentBalance=t._getCurrentBalance.bind(t),t._getFee=t._getFee.bind(t),t._updateFee=Object(P.debounce)(t._updateFee.bind(t),250),t}return o(n,t),R(n,[{key:"componentWillMount",value:function(){this._getDepositAddress(),this._updateFee(),this._checkFeeStatus()}},{key:"componentWillReceiveProps",value:function(e){e.asset&&this.props.asset&&e.asset.get("id")!==this.props.asset.get("id")&&this.setState({to_withdraw:new h.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),gateFee:e.asset.get("gateFee"),intermediateAccount:e.asset.get("intermediateAccount"),symbol:e.asset.get("symbol"),memo:"",withdrawValue:"",receive_address:null,toAddress:w.a.getLast(e.walletType)},this._getDepositAddress)}},{key:"_getDepositAddress",value:function(){if(this.props.backingCoinType){var e=this.props.sender.get("name"),t=this.deposit_address_cache.getCachedInputAddress("openledger",e,this.props.backingCoinType.toLowerCase(),this.props.symbol.toLowerCase());t?this.setState({receive_address:t}):Object(w.g)(this._getDepositObject())}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.backingCoinType.toLowerCase(),outputCoinType:this.props.symbol.toLowerCase(),outputAddress:this.props.sender.get("name"),stateCallback:this.addDepositAddress}}},{key:"addDepositAddress",value:function(e){var t=this.props.sender.get("name");this.deposit_address_cache.cacheInputAddress("openledger",t,this.props.backingCoinType.toLowerCase(),this.props.symbol.toLowerCase(),e.address,e.memo),this.setState({receive_address:e})}},{key:"componentDidUpdate",value:function(){y.a.rebuild()}},{key:"onSubmit",value:function(t){if(t.preventDefault(),0===this.state.to_withdraw.getAmount())return this.setState({amountError:"transfer.errors.pos"});if(this.props.intermediateAccount){var n=this._getFee(),a=this._getGateFee(),r=this.state.to_withdraw.clone(),o=r.clone(this._getCurrentBalance().get("balance"));r.plus(a),o.lt(r)&&(r=this.state.to_withdraw.clone()),b.a.transfer(this.props.sender.get("id"),this.props.intermediateAccount,this.state.to_withdraw.getAmount(),this.state.to_withdraw.asset_id,this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,n.asset_id)}}},{key:"_updateAmount",value:function(){var e=this._getFee(),t=this._getCurrentBalance(),n=new h.a({amount:t?t.get("balance"):0,asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});n.asset_id===e.asset_id&&n.minus(e),this.state.to_withdraw.setAmount({sats:n.getAmount()}),this.setState({withdrawValue:n.getAmount({real:!0}),amountError:null},this._checkBalance)}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.sender;if(t){var n=["1.3.0",this.state.to_withdraw.asset_id],a={},r=[];n.forEach(function(n){r.push(Object(C.b)({accountID:t.get("id"),feeID:n,options:["price_per_kbyte"],data:{type:"memo",content:e.props.backingCoinType.toLowerCase()+":"+e.state.toAddress+(e.state.memo?":"+e.state.memo:"")}}))}),Promise.all(r).then(function(t){n.forEach(function(e,n){a[e]=t[n]}),m.a.are_equal_shallow(e.state.feeStatus,a)||e.setState({feeStatus:a}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.fee_asset_id;if(!this.props.sender)return null;Object(C.b)({accountID:this.props.sender.get("id"),feeID:t,options:["price_per_kbyte"],data:{type:"memo",content:this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+this.state.memo:"")}}).then(function(t){var n=t.fee,a=t.hasBalance,r=t.hasPoolBalance;e.setState({feeAmount:n,hasBalance:a,hasPoolBalance:r,error:!a||!r},e._checkFeeStatus)})}},{key:"_getCurrentBalance",value:function(){var e=this;return this.props.balances.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,n=e.to_withdraw,a=this.props.asset,r=this._getCurrentBalance();if(r&&t){var o=Object(C.a)(n.getAmount({real:!0}),a,this._getFee(),r,this._getGateFee());if(null!==o)return this.state.balanceError!==!o&&this.setState({balanceError:!o}),o}}},{key:"_getFee",value:function(){var e={getAmount:function(){return 0},asset_id:this.state.fee_asset_id};if(!this.state.feeStatus||!this.state.feeAmount)return e;var t=this.state.feeStatus["1.3.0"],n=this.state.feeStatus[this.state.to_withdraw.asset_id];return t&&t.hasBalance?t.fee:t&&!t.hasBalance&&n&&n.hasBalance?n.fee:t?t.fee:e}},{key:"_onInputAmount",value:function(e){try{this.state.to_withdraw.setAmount({real:parseFloat(e.target.value||0)}),this.setState({withdrawValue:e.target.value,amountError:null},this._checkBalance)}catch(e){console.error("err:",e)}}},{key:"_onInputTo",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address_check_in_progress:!0,withdraw_address_selected:t,validAddress:null,toAddress:t}),this._validateAddress(t)}},{key:"_onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"_validateAddress",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(w.h)({url:j.a.BASE_OL,walletType:n.walletType,newAddress:e}).then(function(n){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:!!n})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(SettingsStore.site_registr,"_blank").opener=null}},{key:"_getGateFee",value:function(){var e=this.props,t=e.gateFee,n=e.asset;return new h.a({real:parseFloat(t?t.replace(",",""):0),asset_id:n.get("id"),precision:n.get("precision")})}},{key:"_renderWithdraw",value:function(){var e=this.state.amountError,t=m.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),n=t.name,a=1,r=this.props.supportsMemos,o=this._getFee(),i=this._getGateFee(),l=this.state.feeStatus[o.asset_id],c=N.b.getAsset(o.asset_id),u=l&&!l.hasBalance||this.state.balanceError||!this.state.toAddress||!this.state.withdrawValue;return s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement(d.a,{content:"gateway.withdraw_funds",asset:n})),this._renderCurrentBalance(),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},E.a.translate("modal.withdraw.amount")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{tabIndex:a++,type:"number",min:"0",onKeyPress:this.onKeyPress.bind(this),value:this.state.withdrawValue,onChange:this._onInputAmount.bind(this)}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",null,n)))),e?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(d.a,{content:e})):null,this.state.balanceError?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(d.a,{content:"transfer.errors.insufficient"})):null),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},E.a.translate("transfer.fee")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{type:"text",disabled:!0,value:o.getAmount({real:!0})}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",null,c?s.a.createElement(S.a,{name:c.get("symbol")}):null)))),l&&!l.hasBalance?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(d.a,{content:"transfer.errors.insufficient"})):null),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},E.a.translate("gateway.fee")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{type:"text",disabled:!0,value:i.getAmount({real:!0})}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",null,s.a.createElement(S.a,{name:this.props.asset.get("symbol")}))))),l&&!l.hasBalance?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(d.a,{content:"transfer.errors.insufficient"})):null),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},E.a.translate("modal.withdraw.address")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{placeholder:E.a.translate("gateway.withdraw_placeholder",{asset:n}),tabIndex:a++,type:"text",value:this.state.toAddress,onChange:this._onInputTo.bind(this)}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",{"data-place":"right","data-tip":E.a.translate("tooltip.withdraw_address",{asset:n})},"?")))),!this.state.validAddress&&this.state.toAddress?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},s.a.createElement(d.a,{content:"gateway.valid_address",coin_type:n})):null),r?s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},E.a.translate("transfer.memo")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("textarea",{rows:"1",value:this.state.memo,tabIndex:a++,onChange:this._onMemoChanged.bind(this)})),!this.state.validAddress&&this.state.toAddress?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},s.a.createElement(d.a,{content:"gateway.valid_address",coin_type:n})):null):null,s.a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},s.a.createElement("button",{tabIndex:a++,className:"button"+(u?" disabled":""),onClick:this.onSubmit.bind(this),type:"submit"},s.a.createElement(d.a,{content:"gateway.withdraw_now"}))))}},{key:"_renderDeposit",value:function(){var e=this.state.receive_address,t=m.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),n=t.name,a=e&&"memo"in e&&e.memo,r=e&&e.address||"",o=1;return s.a.createElement("div",{className:r?"":"no-overflow"},s.a.createElement("p",null,s.a.createElement(d.a,{unsafe:!0,content:"gateway.add_funds",account:this.props.sender.get("name")})),this._renderCurrentBalance(),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("p",{style:{marginBottom:10},"data-place":"right","data-tip":E.a.translate("tooltip.deposit_tip",{asset:n})},s.a.createElement(d.a,{className:"help-tooltip",content:"gateway.deposit_to",asset:n}),":"),r?s.a.createElement("label",null,s.a.createElement("span",{className:"inline-label"},s.a.createElement("input",{readOnly:!0,type:"text",value:r}),s.a.createElement(A.a,{text:r}))):s.a.createElement(T.a,{type:"three-bounce"}),a?s.a.createElement("label",null,s.a.createElement("span",{className:"inline-label"},s.a.createElement("input",{readOnly:!0,type:"text",value:E.a.translate("transfer.memo")+": "+e.memo}),s.a.createElement(A.a,{text:e.memo}))):null,e&&e.error?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},e.error.message):null),s.a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},s.a.createElement("button",{tabIndex:o++,className:"button",onClick:w.g.bind(null,this._getDepositObject()),type:"submit"},s.a.createElement(d.a,{content:"gateway.generate_new"}))))}},{key:"_renderCurrentBalance",value:function(){var e=m.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),t=e.name,n="deposit"===this.props.action,a=this._getCurrentBalance(),r=a?new h.a({asset_id:a.get("asset_type"),precision:this.props.asset.get("precision"),amount:a.get("balance")}):null,o=n?s.a.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},t):s.a.createElement("button",{"data-place":"right","data-tip":E.a.translate("tooltip.withdraw_full"),className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,a?parseInt(a.get("balance"),10):0)},s.a.createElement(O.a,{name:"clippy"}));return s.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},s.a.createElement("label",{style:{fontSize:"1rem"}},E.a.translate("gateway.balance_asset",{asset:t}),":",s.a.createElement("span",{className:"inline-label"},s.a.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:r?r.getAmount({real:!0}):0}),o)))}},{key:"render",value:function(){var e=this.props,t=e.asset,n=e.action,a="deposit"===n;if(!t)return null;var r=m.a.replaceName(t.get("symbol"),!0),o=r.name,i=this.props.isDown?s.a.createElement("div",null,s.a.createElement(d.a,{className:"txtlabel cancel",content:"gateway.unavailable_OPEN",component:"p"})):this.props.isAvailable?a?this._renderDeposit():this._renderWithdraw():s.a.createElement("div",null,s.a.createElement(d.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}));return s.a.createElement("div",{className:"SimpleTrade__modal"},s.a.createElement("div",{className:"Modal__header"},s.a.createElement("h3",null,s.a.createElement(d.a,{content:a?"gateway.deposit":"modal.withdraw.submit"})," ",o)),s.a.createElement("div",{className:"Modal__divider"}),s.a.createElement("div",{className:"grid-block vertical no-overflow",style:{zIndex:1002,paddingLeft:"2rem",paddingRight:"2rem",paddingTop:"1rem"}},i))}}]),n}(x.a);D.propTypes={sender:g.a.ChainAccount.isRequired,asset:g.a.ChainAsset.isRequired,coreAsset:g.a.ChainAsset.isRequired,globalObject:g.a.ChainAsset.isRequired},D.defaultProps={coreAsset:"1.3.0",globalObject:"2.0.0"},D=Object(f.a)(D);var M=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return o(t,e),R(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){c.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return s.a.createElement(u.a,{className:"test",onClose:this.onClose.bind(this),overlay:!0,id:this.props.modalId},this.state.open?s.a.createElement(D,L({},this.props,{open:this.state.open})):null)}}]),t}(s.a.Component);t.a=M}).call(t,n(2).Buffer)},1544:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),l=n.n(s),c=n(47),u=n.n(c),p=n(120),d=n(5),h=n.n(d),m=n(139),f=n(17),g=n(34),b=n(33),v=n(140),y=n.n(v),_=n(11),E=n.n(_),w=n(1508),k=n(1521),A=n(1522),O=n(84),T=n(121),C=n(272),S=n(279),N=n(26),P=(n.n(N),n(38)),x=n(31),j=n(1511),L=n.n(j),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={toAddress:w.a.getLast(e.walletType),withdrawValue:"",amountError:null,inputAmount:0,receiveLoading:!1,limitLoading:!0,apiError:!1},n._validateAddress(n.state.toAddress,e),n.deposit_address_cache=new k.a,n}return i(t,e),D(t,[{key:"onClose",value:function(){u.a.publish(this.props.modalId,"close")}},{key:"componentWillMount",value:function(){this._getDepositAddress()}},{key:"componentDidMount",value:function(){this._getDepositLimit(),this._estimateOutput()}},{key:"componentWillReceiveProps",value:function(e){e.inputCoinType===this.props.inputCoinType&&e.outputCoinType===this.props.outputCoinType||(this._getDepositLimit(e),this._estimateOutput(e),this._getDepositAddress(e))}},{key:"shouldComponentUpdate",value:function(e,t){return e.inputCoinType!==this.props.inputCoinType||e.outputCoinType!==this.props.outputCoinType||e.sender!==this.props.sender||e.asset!==this.props.asset||e.isAvailable!==this.props.isAvailable||e.isDown!==this.props.isDown||!f.a.are_equal_shallow(t,this.state)}},{key:"_getDepositLimit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({limitLoading:!0}),Object(w.f)(t.inputCoinType,t.outputCoinType).then(function(t){e.setState({depositLimit:t.depositLimit,limitLoading:!1})}).catch(function(t){console.log("deposit limit error:",t),e.setState({depositLimit:null,limitLoading:!1})})}},{key:"_onAmountChange",value:function(e,t){var n=new RegExp(/[[:digit:]]/),a=t.target;switch(n.test(a.value)||(a.value=a.value.replace(/[^0-9.]/g,"")),"."==a.value.charAt(0)&&(a.value="0."),a.value.charAt(a.value.length)!=a.value.search(".")&&a.value.substr(1),a.value=f.a.limitByPrecision(a.value,8),e){case"input":this.setState({inputAmount:a.value},this._estimateOutput.bind(this));break;case"output":this.setState({outputAmount:a.value},this._estimateInput.bind(this))}}},{key:"_estimateOutput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:0,sendAmount:this.state.inputAmount}),this.state.inputAmount&&(this.setState({receiveLoading:!0}),Object(w.c)(this.state.inputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,receiveAmount:t.outputAmount,receiveLoading:!1})}).catch(function(t){console.log("receive amount err:",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:"_estimateInput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:this.state.outputAmount,sendAmount:0}),this.state.outputAmount&&(this.setState({receiveLoading:!0}),Object(w.b)(this.state.outputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,sendAmount:f.a.limitByPrecision(t.inputAmount,8),receiveLoading:!1})}).catch(function(t){console.log("send amount err:",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:"_getDepositAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.inputCoinType){this.setState({receive_address:null}),Object(w.g)(this._getDepositObject(e))}}},{key:"_getDepositObject",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{inputCoinType:t.inputCoinType.toLowerCase(),outputCoinType:t.outputCoinType.toLowerCase(),outputAddress:t.sender.get("name"),url:C.a.BASE,stateCallback:function(n){e.addDepositAddress(t.inputCoinType.toLowerCase(),t.outputCoinType.toLowerCase(),t.sender.get("name"),n)}}}},{key:"addDepositAddress",value:function(e,t,n,a){this.deposit_address_cache.cacheInputAddress("blocktrades",n,e,t,a.address,a.memo),this.setState({receive_address:a})}},{key:"componentDidUpdate",value:function(){y.a.rebuild()}},{key:"_validateAddress",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(w.h)({walletType:n.walletType,newAddress:e}).then(function(n){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:n})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(P.a.site_registr,"_blank").opener=null}},{key:"_onDropDownSelect",value:function(e){x.a.changeViewSetting({preferredBridge:e})}},{key:"onBlockTradesContact",value:function(){console.log("Open New Tab"),window.open("https://www.blocktrades.us/contact","_blank").focus()}},{key:"_renderDeposit",value:function(){var e=f.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),t=e.name,n=e.prefix,a=this.state,r=a.receive_address,o=a.apiError,i=r&&"memo"in r&&r.memo,s=r&&r.address||"",c=l.a.createElement("div",{className:"SimpleTrade__QR"},l.a.createElement(L.a,{size:140,value:s})),u=Object.keys(this.props.bridges.toJS()),p=this.props.inputCoinType.toUpperCase(),d=(n||"")+t,m=(this.state.receiveAmount/this.state.inputAmount).toFixed(4),g=d+"/"+p,b=this.state.inputAmount>parseFloat(this.state.depositLimit)||this.state.sendAmount>parseFloat(this.state.depositLimit),v=b?{border:"1px solid #a94442"}:null;return l.a.createElement("div",{className:s?"":"no-overflow"},l.a.createElement("div",{className:"SimpleTrade__withdraw-row"},l.a.createElement("label",{className:"left-label"},"ASSET"),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{disabled:!0,type:"text",defaultValue:d}))),l.a.createElement("div",{className:"SimpleTrade__withdraw-row"},l.a.createElement("div",{className:"grid-block"},l.a.createElement("label",{className:"left-label"},"BRIDGE"),l.a.createElement("span",{"data-tip":E.a.translate("tooltip.bridge_TRADE"),className:"inline-block tooltip",onClick:this.onBlockTradesContact.bind(this)},"",l.a.createElement(O.a,{style:{position:"relative",top:0},name:"question-circle"}))),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{disabled:!0,type:"text",defaultValue:"BLOCKTRADES"})," ")),l.a.createElement("span",{style:o?{display:"none"}:{display:""}},l.a.createElement("div",{className:"SimpleTrade__withdraw-row"},l.a.createElement("div",{className:"no-margin no-padding"},l.a.createElement("div",{className:"small-6",style:{paddingRight:10}},l.a.createElement("div",{className:"grid-block"},l.a.createElement("label",{className:"left-label"},l.a.createElement(h.a,{content:"transfer.send"})),b?l.a.createElement("div",{className:"error-msg inline-block tooltip","data-tip":E.a.translate("tooltip.over_limit")},l.a.createElement(h.a,{content:"gateway.over_limit"}),"",l.a.createElement(O.a,{name:"question-circle"})):null),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{style:v,type:"text",value:this.state.sendAmount,onInput:this._onAmountChange.bind(this,"input")}),l.a.createElement("div",{className:"form-label select floating-dropdown"},l.a.createElement(S.a,{entries:u,values:u.reduce(function(e,t){return t&&(e[t]=t),e},{}),singleEntry:u[0],value:this.props.preferredBridge||u[0],onChange:this._onDropDownSelect,upperCase:!0})))),l.a.createElement("div",{className:"small-6",style:{paddingLeft:10}},l.a.createElement("label",{className:"left-label"},l.a.createElement(h.a,{content:"gateway.deposit_limit"})),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{disabled:!0,type:"number",value:this.state.depositLimit&&parseFloat(this.state.depositLimit).toFixed(4)||0}),l.a.createElement("div",{className:"input-right-symbol"},p))))),l.a.createElement("div",{className:"SimpleTrade__withdraw-row"},l.a.createElement("div",{className:"no-margin no-padding"},l.a.createElement("div",{className:"small-6",style:{paddingRight:10}},l.a.createElement("label",{className:"left-label"},l.a.createElement(h.a,{content:"exchange.receive"})),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{style:v,type:"text",value:this.state.receiveAmount,onInput:this._onAmountChange.bind(this,"output")}),l.a.createElement("div",{className:"input-right-symbol"},d))),l.a.createElement("div",{className:"small-6",style:{paddingLeft:10}},l.a.createElement("div",{className:"grid-block"},l.a.createElement("label",{className:"left-label"},l.a.createElement(h.a,{content:"exchange.price"}),"",this.state.receiveLoading?l.a.createElement(h.a,{content:"footer.loading"}):"")),l.a.createElement("div",{className:"inline-label input-wrapper"},l.a.createElement("input",{disabled:!0,type:"number",value:b?0:m}),l.a.createElement("div",{className:"input-right-symbol"},g))))),s?l.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{textAlign:"center"}},i?null:c,l.a.createElement("div",{className:"grid-block SimpleTrade__deposit-info"},l.a.createElement("div",{className:"copyIcon"},l.a.createElement(A.a,{text:s,className:"SimpleTrade__copyIcon"})),l.a.createElement("div",{className:"deposit-details"},l.a.createElement("div",null,l.a.createElement(h.a,{unsafe:!0,content:"gateway.purchase_notice",inputAsset:p,outputAsset:d})),l.a.createElement("div",null,s))),i?l.a.createElement("div",{className:"grid-block SimpleTrade__deposit-info",style:{marginTop:"10px"}},l.a.createElement("div",{className:"copyIcon"},l.a.createElement(A.a,{text:r.memo,className:"SimpleTrade__copyIcon"})),l.a.createElement("div",{className:"deposit-details"},l.a.createElement("div",null,l.a.createElement(h.a,{unsafe:!0,content:"gateway.purchase_notice_memo"})),l.a.createElement("div",null,r.memo))):null):l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(T.a,{type:"three-bounce"})),l.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{textAlign:"center",paddingBottom:"2rem"}},l.a.createElement("div",{className:"no-margin no-padding"},l.a.createElement("button",{className:"ActionButton_Close",onClick:this.onClose.bind(this)},l.a.createElement(h.a,{content:"transfer.close"}))))),l.a.createElement("span",{style:o?{display:""}:{display:"none"}},l.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{textAlign:"center",paddingBottom:"2rem",color:"#bb2926"}},l.a.createElement(h.a,{className:"txtlabel cancel",content:"gateway.unavailable_TRADE",component:"p"}),l.a.createElement("button",{className:"ActionButton_Close",onClick:this.onClose.bind(this)},l.a.createElement(h.a,{content:"transfer.close"})))))}},{key:"_renderCurrentBalance",value:function(){var e=this,t=f.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),n=t.name,a="deposit"===this.props.action,r=this.props.balances.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")}),o=r?new m.a({asset_id:r.get("asset_type"),precision:this.props.asset.get("precision"),amount:r.get("balance")}):null,i=a?l.a.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},n):l.a.createElement("button",{"data-place":"right","data-tip":E.a.translate("tooltip.withdraw_full"),className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,r?parseInt(r.get("balance"),10):0)},l.a.createElement(O.a,{name:"clippy"}));return l.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},l.a.createElement("label",{style:{fontSize:"1rem"}},E.a.translate("gateway.balance_asset",{asset:n}),":",l.a.createElement("span",{className:"inline-label"},l.a.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:o?o.getAmount({real:!0}):0}),i)))}},{key:"render",value:function(){if(!this.props.asset)return null;var e=n(183);return l.a.createElement("div",{className:"SimpleTrade__modal"},l.a.createElement("div",{className:"Modal__header",style:{background:"none"}}),l.a.createElement("div",{className:"grid-block vertical no-overflow",style:{zIndex:1002,paddingLeft:"2rem",paddingRight:"2rem"}},l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("img",{style:{margin:0,height:80},src:e}),l.a.createElement("br",null),l.a.createElement("p",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:0}},"Buy")),this.props.isDown?l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(h.a,{className:"txtlabel cancel",content:"gateway.unavailable_TRADE",component:"p"})):this.props.isAvailable?this._renderDeposit():l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(h.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}))))}}]),t}(l.a.Component);M.propTypes={sender:b.a.ChainAccount.isRequired,asset:b.a.ChainAsset.isRequired},M=Object(g.a)(M);var I=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),D(t,[{key:"render",value:function(){var e=this.props,t=e.preferredBridge,n=a(e,["preferredBridge"]),r=this.props.bridges.get(this.props.preferredBridge);return r||(r=this.props.bridges.first(),t=r.inputCoinType),l.a.createElement(M,R({},n,{preferredBridge:t},r.toJS()))}}]),t}(l.a.Component);I=Object(N.connect)(I,{listenTo:function(){return[P.a]},getProps:function(){return{preferredBridge:P.a.getState().viewSettings.get("preferredBridge","btc")}}});var q=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return i(t,e),D(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){u.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return this.props.bridges?l.a.createElement(p.a,{className:"test",onClose:this.onClose.bind(this),id:this.props.modalId,overlay:!0},this.state.open?l.a.createElement(I,R({},this.props,{open:this.state.open})):null):null}}]),t}(l.a.Component);t.a=q},1592:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e){return new Promise(function(t,n){if(!e||e&&!e.get("call_orders",[]).size)return t(null);Object(K.f)("getObject",e.get("call_orders").toArray()).then(function(e){var n=[];e.forEach(function(e){var t=e.getIn(["call_price","base","asset_id"]),a=e.getIn(["call_price","quote","asset_id"]);-1===n.indexOf(t)&&n.push(t),-1===n.indexOf(a)&&n.push(a)}),Object(K.f)("getAsset",n).then(function(n){var a={};n.forEach(function(e){a[e.get("id")]=e.toJS()});var r={};e.forEach(function(e){var t=a[e.getIn(["call_price","quote","asset_id"])],n=a[e.getIn(["call_price","base","asset_id"])],o=t.bitasset.current_feed.settlement_price;if(o.base.asset_id===o.quote.asset_id)r[t.id]={ratio:null};else{var i=new dt.a({amount:e.get("collateral"),asset_id:n.id,precision:n.precision}),s=new dt.a({amount:e.get("debt"),asset_id:t.id,precision:t.precision}),l=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,c=new dt.c({priceObject:t.bitasset.current_feed.settlement_price,market_base:t.bitasset.current_feed.settlement_price.quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:a}),u={ratio:i.getAmount({real:!0})/(s.getAmount({real:!0})/c.toReal())};if(isNaN(u.ratio))return null;u.ratio<l?u.statusClass="danger":u.ratio<l+.5?u.statusClass="warning":u.statusClass=null,r[t.id]=u}}),t(r)})}).catch(n)})}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var S=n(1),N=n.n(S),P=n(18),x=n.n(P),j=n(5),L=n.n(j),R=n(660),D=n(666),M=n(47),I=n.n(M),q=n(120),B=n(33),W=n(34),H=n(17),F=n(275),Y=n(24),X=n(11),U=n.n(X),K=n(3),V=n(661),z=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),J=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e}return o(t,e),z(t,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onSubmit",value:function(e){e.preventDefault(),I.a.publish("settlement_modal","close");var t=H.a.get_asset_precision(this.props.asset.get("precision")),n=this.state.amount.replace(/,/g,"");n*=t;var a=F.a.new_transaction();return a.add_type_operation("asset_settle",{fee:{amount:0,asset_id:0},account:this.props.account.get("id"),amount:{amount:n,asset_id:this.props.asset.get("id")}}),Y.a.process_transaction(a,null,!0).then(function(e){return!0}).catch(function(e){return console.error("asset settle error: ",e),!1})}},{key:"render",value:function(){var e=this.props,t=e.asset,n=e.account,a=this.state.amount;if(!t)return null;var r=t.get("id"),o=n.get("balances"),i=null,s=0;o&&o.forEach(function(e){var t=K.b.getObject(e);if(!t.get("balance"))return null;t.get("asset_type")===r&&(i=e,s=t.get("balance"))});var l=H.a.get_asset_precision(t.get("precision")),c=a?a.replace(/,/g,""):0,u=parseFloat(c)>0&&parseFloat(c)*l<=parseFloat(s)?"button success":"button disabled",p=i?N.a.createElement("span",null,N.a.createElement(L.a,{content:"exchange.balance"}),":",N.a.createElement(R.a,{balance:i})):null;return N.a.createElement("form",{className:"grid-block vertical full-width-content"},N.a.createElement(L.a,{component:"h3",content:"modal.settle.title",asset:t.get("symbol")}),N.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},N.a.createElement("div",{className:"content-block",style:{maxWidth:"25rem"}},N.a.createElement(V.a,{label:"modal.settle.amount",amount:a,onChange:this.onAmountChanged.bind(this),display_balance:p,asset:r,assets:[r],tabIndex:1})),N.a.createElement("div",{className:"content-block"},N.a.createElement("input",{type:"submit",className:u,onClick:this.onSubmit.bind(this),value:U.a.translate("modal.settle.submit")}))))}}]),t}(N.a.Component);J.propTypes={asset:B.a.ChainAsset.isRequired,account:B.a.ChainAccount.isRequired},J=Object(W.a)(J,{keep_updating:!0});var G=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),z(t,[{key:"show",value:function(){I.a.publish("settlement_modal","open")}},{key:"render",value:function(){return N.a.createElement(q.a,{id:"settlement_modal",overlay:!0,ref:"settlement_modal"},N.a.createElement("div",{className:"grid-block vertical"},N.a.createElement(J,this.props)))}}]),t}(N.a.Component),Q=G,$=n(1510),Z=n(78),ee=n(26),te=n(273),ne=n(140),ae=n.n(ne),re=n(1523),oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ie=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),se=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,a)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(a)},le=function(e){function t(e){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return c(t,e),ie(t,[{key:"componentDidMount",value:function(){ae.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return se(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.base!==this.props.base}},{key:"getValue",value:function(){var e=this.props.marketStats;return e&&e.change?e.change:0}},{key:"render",value:function(){var e=this.getValue(),t=0===parseFloat(e)?"":parseFloat(e)<0?"change-down":"change-up",n=N.a.createElement(Z.b,{style:"decimal",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return N.a.createElement("span",{className:"value "+t},n,"%")}}]),t}(re.b);le.propTypes={quote:B.a.ChainAsset.isRequired,base:B.a.ChainAsset.isRequired},le.defaultProps={quote:"1.3.0",fullPrecision:!1,noDecimals:!1,hide_asset:!1},le=Object(W.a)(le,{keep_updating:!0});var ce=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),ie(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,n=i(e,["refCallback"]);return N.a.createElement(le,oe({},n,{ref:t}))}}]),t}(N.a.Component);ce=Object(ee.connect)(ce,{listenTo:function(){return[te.a]},getProps:function(e){return{marketStats:te.a.getState().allMarketStats.get(e.marketId),allMarketStats:te.a.getState().allMarketStats}}});var ue=n(118),pe=n(66),de=n(141),he=n(1538),me=n(84),fe=n(32),ge=n(284),be=n(664),ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ye=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_e={textAlign:"right"},Ee={textAlign:"left"},we=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),ye(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.object.getIn(["call_price","quote","asset_id"]);this.refs[t].show()}},{key:"_onClosePosition",value:function(e){e.preventDefault();var t=F.a.new_transaction();t.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get("borrower"),delta_collateral:{amount:-this.props.object.get("collateral"),asset_id:this.props.object.getIn(["call_price","base","asset_id"])},delta_debt:{amount:-this.props.object.get("debt"),asset_id:this.props.object.getIn(["call_price","quote","asset_id"])}}),Y.a.process_transaction(t,null,!0)}},{key:"_getFeedPrice",value:function(){return this.props?1/H.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_getCollateralRatio",value:function(){var e=this.props.object.toJS();return H.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(H.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:"_getMR",value:function(){return this.props.debtAsset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3}},{key:"_getStatusClass",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?"danger":e<t+.5?"warning":""}},{key:"_getCRTip",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&""!==e?"danger"===e?U.a.translate("tooltip.cr_danger",{mr:t}):"warning"===e?U.a.translate("tooltip.cr_warning",{mr:t}):null:null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,n=e.collateralAsset,a=e.object,r=a.toJS(),o=this._getCollateralRatio(),i=H.a.get_asset_amount(r.debt,this.props.debtAsset),s=this._getStatusClass(),l="/asset/"+t.get("symbol"),c="/market/"+t.get("symbol")+"_"+n.get("symbol"),p=N.a.createElement("ul",null,N.a.createElement("li",null,N.a.createElement("a",{href:l,onClick:this._onNavigate.bind(this,l)},N.a.createElement(L.a,{content:"account.asset_details"}))),N.a.createElement("li",null,N.a.createElement("a",{href:c,onClick:this._onNavigate.bind(this,c)},N.a.createElement(ue.a,{name:t.get("symbol")})," : ",N.a.createElement(ue.a,{name:n.get("symbol")}))));return N.a.createElement("tr",{className:"margin-row"},N.a.createElement("td",{style:Ee},N.a.createElement(fe.b,{to:"/asset/"+t.get("symbol")},N.a.createElement(ue.a,{noTip:!0,name:t.get("symbol")}))),N.a.createElement("td",{style:_e},N.a.createElement(pe.a,{amount:r.debt,asset:r.call_price.quote.asset_id,assetInfo:p,hide_asset:!0})),N.a.createElement("td",{style:_e,className:"column-hide-medium"},N.a.createElement(pe.a,{decimalOffset:5,amount:r.collateral,asset:r.call_price.base.asset_id})),N.a.createElement("td",{"data-place":"bottom","data-tip":this._getCRTip(),className:"center-content "+s},H.a.format_number(o,2)),N.a.createElement("td",{style:_e},N.a.createElement(D.a,{noTip:!0,balances:Object(P.List)(),debt:u({},t.get("id"),r.debt),collateral:u({},n.get("id"),parseInt(r.collateral,10)),hide_asset:!0})),N.a.createElement("td",{style:_e,className:"column-hide-small"},N.a.createElement(de.a,{base_amount:r.call_price.base.amount,base_asset:r.call_price.base.asset_id,quote_amount:r.call_price.quote.amount,quote_asset:r.call_price.quote.asset_id,hide_symbols:!0})),N.a.createElement("td",{style:_e,className:"column-hide-small"},N.a.createElement(be.b,{forceDirection:!1,fromAsset:r.call_price.base.asset_id,toAsset:r.call_price.quote.asset_id,hide_symbols:!0})),N.a.createElement("td",{className:"center-content column-hide-small",style:Ee},N.a.createElement(de.a,{base_amount:r.call_price.base.amount,base_asset:r.call_price.base.asset_id,quote_amount:r.call_price.quote.amount,quote_asset:r.call_price.quote.asset_id,hide_value:!0})),N.a.createElement("td",null,N.a.createElement("div",{"data-place":"left","data-tip":U.a.translate("tooltip.update_position"),style:{paddingBottom:5}},N.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},N.a.createElement(me.a,{name:"adjust",className:"icon-14px rotate90"})))),N.a.createElement("td",null,N.a.createElement("div",{"data-place":"left","data-tip":U.a.translate("tooltip.close_position",{amount:i,asset:t.get("symbol")}),style:{paddingBottom:5}},N.a.createElement("a",{onClick:this._onClosePosition.bind(this)},N.a.createElement(me.a,{name:"cross-circle",className:"icon-14px"}))),t?N.a.createElement(he.a,{ref:"cp_modal_"+r.call_price.quote.asset_id,quote_asset:r.call_price.quote.asset_id,backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}(N.a.Component);we.propTypes={debtAsset:B.a.ChainAsset.isRequired,collateralAsset:B.a.ChainAsset.isRequired},we.defaultProps={tempComponent:"tr"},we.contextTypes={router:N.a.PropTypes.object},we=Object(W.a)(we,{keep_updating:!0});var ke=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),ye(t,[{key:"render",value:function(){var e=this.props.object,t=e.getIn(["call_price","quote","asset_id"]),n=e.getIn(["call_price","base","asset_id"]);return N.a.createElement(we,ve({debtAsset:t,collateralAsset:n},this.props))}}]),t}(N.a.Component);ke.propTypes={object:B.a.ChainObject.isRequired},ke=Object(W.a)(ke,{keep_updating:!0});var Ae=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),ye(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.debtAsset.get("id");this.refs[t].show()}},{key:"_getFeedPrice",value:function(){return this.props?1/H.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,n=e.collateralAsset,a="/asset/"+t.get("symbol"),r="/market/"+t.get("symbol")+"_"+n.get("symbol"),o=N.a.createElement("ul",null,N.a.createElement("li",null,N.a.createElement("a",{href:a,onClick:this._onNavigate.bind(this,a)},N.a.createElement(L.a,{content:"account.asset_details"}))),N.a.createElement("li",null,N.a.createElement("a",{href:r,onClick:this._onNavigate.bind(this,r)},N.a.createElement(ue.a,{name:t.get("symbol")})," : ",N.a.createElement(ue.a,{name:n.get("symbol")}))));return N.a.createElement("tr",{className:"margin-row"},N.a.createElement("td",{style:Ee},N.a.createElement(fe.b,{to:"/asset/"+t.get("symbol")},N.a.createElement(ue.a,{noTip:!0,name:t.get("symbol")}))),N.a.createElement("td",{style:_e},N.a.createElement(pe.a,{amount:0,asset:t.get("id"),assetInfo:o,hide_asset:!0})),N.a.createElement("td",{style:_e,className:"column-hide-medium"},N.a.createElement(pe.a,{decimalOffset:5,amount:0,asset:n.get("id")})),N.a.createElement("td",null),N.a.createElement("td",{style:_e}),N.a.createElement("td",{style:_e,className:"column-hide-small"}),N.a.createElement("td",{style:_e,className:"column-hide-small"}),N.a.createElement("td",{className:"center-content column-hide-small",style:Ee}),N.a.createElement("td",null,N.a.createElement("div",{"data-place":"left","data-tip":U.a.translate("tooltip.update_position"),style:{paddingBottom:5}},N.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},N.a.createElement(me.a,{name:"adjust",className:"icon-14px rotate90"})))),N.a.createElement("td",null,t?N.a.createElement(he.a,{ref:"cp_modal_"+t.get("id"),quote_asset:t.get("id"),backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}(N.a.Component);Ae.propTypes={debtAsset:B.a.ChainAsset.isRequired,collateralAsset:B.a.ChainAsset.isRequired},Ae.defaultProps={tempComponent:"tr"},Ae.contextTypes={router:N.a.PropTypes.object},Ae=Object(W.a)(Ae);var Oe=function(e){function t(){return p(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),ye(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.objects,a=t.optionals;if(n=n.filter(function(e){return!!e}),a=a.filter(function(e){return!!e}),!a.length)return null;if(n.forEach(function(e){if(e){var t=a.findIndex(function(t){return t&&t.get("id")===e.getIn(["call_price","quote","asset_id"])});-1!==t&&a.splice(t,1)}}),!a.length)return null;var r=a.map(function(t){return N.a.createElement(Ae,ve({key:t.get("id"),debtAsset:t.get("id"),collateralAsset:t.getIn(["bitasset","options","short_backing_asset"])},e.props))});return N.a.createElement("tbody",null,r)}}]),t}(N.a.Component);Oe.propTypes={objects:B.a.ChainObjectsList,optionals:B.a.ChainAssetsList},Oe.defaultProps={optionals:x.a.List(["1.3.103","1.3.113","1.3.120","1.3.121","1.3.958","1.3.1325","1.3.1362"])},Oe=Object(W.a)(Oe,{keep_updating:!0});var Te=function(e){var t=e.callOrders,n=e.account,a=e.className,r=e.children,o=e.preferredUnit;return N.a.createElement("table",{className:"table "+a},N.a.createElement("thead",null,N.a.createElement("tr",null,N.a.createElement("th",{style:Ee},N.a.createElement(L.a,{content:"explorer.asset.title"})),N.a.createElement("th",{style:_e},N.a.createElement(L.a,{content:"transaction.borrow_amount"})),N.a.createElement("th",{style:_e,className:"column-hide-medium"},N.a.createElement(L.a,{content:"transaction.collateral"})),N.a.createElement("th",null,N.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":U.a.translate("tooltip.coll_ratio")},N.a.createElement(L.a,{content:"borrow.coll_ratio"}))),N.a.createElement("th",null,N.a.createElement(ge.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:o,arg:"asset"}]})),N.a.createElement("th",{style:_e,className:"column-hide-small"},N.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":U.a.translate("tooltip.call_price")},N.a.createElement(L.a,{content:"exchange.call"}))),N.a.createElement("th",{style:_e,className:"column-hide-small"},N.a.createElement(L.a,{content:"exchange.price"})),N.a.createElement("th",{className:"column-hide-small",style:Ee},N.a.createElement(L.a,{content:"explorer.assets.units"})),N.a.createElement("th",null,N.a.createElement(L.a,{content:"borrow.adjust_short"})),N.a.createElement("th",null,N.a.createElement(L.a,{content:"transfer.close"})))),N.a.createElement("tbody",null,t.sort(function(e,t){return e.split(".")[2]-t.split(".")[2]}).map(function(e){return N.a.createElement(ke,{key:e,object:e,account:n})})),N.a.createElement(Oe,{account:n,objects:x.a.List(t)}),N.a.createElement("tbody",null,r))},Ce=Te,Se=n(1509),Ne=n(286),Pe=n(184),xe=n(54),je=n(142),Le=function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}},Re={AccountPermission:function(e,t,n){var a=this;this.id=e.get("id"),this.weight=t,this.threshold=e.getIn([n,"weight_threshold"]),this.accounts=[],this.keys=e.getIn([n,"key_auths"]).map(function(e){return new Le(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(a.id):-1!==e.indexOf(a)},this._sumWeights=function(e){if(a.isNested()||a.isMultiSig()){var t=a.accounts.reduce(function(t,n){return t+(n._sumWeights(e)?n.weight:0)},0);return Math.floor(t/a.threshold)}return a.isAvailable(e)?a.weight:0},this.getStatus=function(e,t){if(a.isNested()){var n=a.accounts.reduce(function(t,n){return t+n._sumWeights(e)},0);return a.keys.length&&(n+=a.sumKeys(t)),n}var r=a._sumWeights(e);return a.isMultiSig()&&(r+=a.sumKeys(t)),r},this.sumKeys=function(e){return a.keys.reduce(function(t,n){return t+(n.isAvailable(e)?n.weight:0)},0)},this.isNested=function(){return a.accounts.length>0},this.isMultiSig=function(){return a.keys.reduce(function(e,t){return e||t.weight<a.threshold},!1)},this.getMissingSigs=function(e){var t=[],n=[];return a.isNested()?n=a.accounts.reduce(function(t,n){return t.concat(n.getMissingSigs(e))},[]):a.isAvailable(e)||t.push(a.id),t.concat(n)},this.getMissingKeys=function(e){var t=[],n=[];return a.keys.length&&(a.isNested()||a.isMultiSig())&&a.keys.forEach(function(n){n.isAvailable(e)||t.push(n.id)}),a.isNested()&&(n=a.accounts.reduce(function(t,n){return t.concat(n.getMissingKeys(e))},[])),t.concat(n)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get("id"):e)}),t},unravel:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(a<3){var r=K.b.getAccount(e.id);r&&r.getIn([t,"account_auths"]).size&&r.getIn([t,"account_auths"]).forEach(function(r){var o=K.b.getAccount(r.get(0));o&&e.accounts.push(n.unravel(new n.AccountPermission(o,r.get(1),t),t,a+1))})}return e},unnest:function(e,t){var n=this,a=[];return e.forEach(function(e){var r=K.b.getAccount(e),o=n.unravel(new n.AccountPermission(r,null,t),t);a.push(o)}),a},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},De=Re,Me=n(119),Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qe=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Be=function(e){function t(){return m(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),qe(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.account,a=t.available,r=t.availableKeys,o=t.permission,i=t.threshold,s=o.isAvailable(a),l=o.isNested(),c=o.isMultiSig(),u=[],p=i&&i>10?H.a.get_percentage(o.weight,this.props.threshold):o.weight,d=o&&o.threshold>10?H.a.get_percentage(o.getStatus(a,r),o.threshold)+" / 100%":o.getStatus(a,r)+" / "+o.threshold;return u.push(N.a.createElement("div",{key:n.get("id"),style:{textAlign:"left",width:"100%",clear:"both",paddingBottom:5}},N.a.createElement("div",{className:"inline-block",style:{paddingLeft:5*this.props.indent+"%"}},N.a.createElement(je.a,{subpage:"permissions",account:n.get("id")}),!l&&p?(p&&2===p.length?"":"")+"("+p+") ":null),N.a.createElement("div",{className:"float-right",style:{paddingLeft:20,marginRight:10}},l||c?N.a.createElement("span",{className:s?"success-text":""},d):N.a.createElement("span",null,s?N.a.createElement(me.a,{name:"checkmark-circle",size:"1x",className:"success"}):N.a.createElement(me.a,{name:"cross-circle",size:"1x",className:"error"}))))),(l||c)&&(o.accounts.forEach(function(t){u.push(N.a.createElement(We,{key:t.id,indent:e.props.indent+1,account:t.id,accounts:t.accounts,permission:t,available:a,availableKeys:r,threshold:o.threshold}))}),o.keys.length&&o.keys.forEach(function(t){u.push(N.a.createElement(He,{key:t.id,permission:t,available:r,indent:e.props.indent+1}))})),N.a.createElement("div",null,u)}}]),t}(N.a.Component);Be.propTypes={account:B.a.ChainAccount.isRequired,accounts:B.a.ChainAccountsList,indent:N.a.PropTypes.number.isRequired},Be.defaultProps={indent:0};var We=Object(W.a)(Be),He=function(e){function t(){return m(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),qe(t,[{key:"render",value:function(){var e=this.props,t=e.available,n=e.permission,a=n.isAvailable(t),r=[];return r.push(N.a.createElement("div",{key:n.id,style:{textAlign:"left",width:"100%",paddingBottom:5}},N.a.createElement("div",{className:"inline-block",style:{paddingLeft:5*this.props.indent+"%"}},N.a.createElement("span",null,n.id.substr(0,20-4*this.props.indent),"... (",n.weight,")")),N.a.createElement("div",{className:"float-right",style:{paddingLeft:20,marginRight:10}},N.a.createElement("span",null,a?N.a.createElement(me.a,{name:"checkmark-circle",size:"1x",className:"success"}):N.a.createElement(me.a,{name:"cross-circle",size:"1x",className:"error"}))))),N.a.createElement("div",null,r)}}]),t}(N.a.Component);He.propTypes={indent:N.a.PropTypes.number.isRequired},He.defaultProps={indent:0};var Fe=function(e){function t(){return m(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),qe(t,[{key:"render",value:function(){var e=this.props,t=e.requiredPermissions,n=e.available,a=e.availableKeys,r=(e.type,[]);return t.forEach(function(e){r.push(N.a.createElement(We,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:n,availableKeys:a}))}),N.a.createElement("div",null,r)}}]),t}(N.a.Component),Ye=function(e){function t(){m(this,t);var e=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={requiredPermissions:[]},e._updateState=e._updateState.bind(e),e}return g(t,e),qe(t,[{key:"componentWillMount",value:function(){this._updateState(),K.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){K.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=De.listToIDs(this.props.required),t=De.listToIDs(this.props.available);this.setState({requiredPermissions:De.unnest(e,this.props.type),required:e,available:t})}},{key:"render",value:function(){var e=this.props,t=e.type,n=(e.proposal,e.added),a=e.removed,r=e.availableKeys,o=this.state,i=o.requiredPermissions,s=o.required,l=o.available;return l=Object(Me.cloneDeep)(l),r=r.toJS(),n&&(l.push(n),r.push(n)),a&&(-1!==l.indexOf(a)&&l.splice(l.indexOf(a),1),-1!==r.indexOf(a)&&r.splice(r.indexOf(a),1)),N.a.createElement(Fe,{type:t,added:n,removed:a,required:s,available:l,availableKeys:r,requiredPermissions:i})}}]),t}(N.a.Component);Ye.propTypes={required:B.a.ChainAccountsList,available:B.a.ChainAccountsList},Ye.defaultProps={type:"active",added:null,removed:null},Ye=Object(W.a)(Ye,{keep_updating:!0});var Xe=function(e){function t(){return m(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),qe(t,[{key:"render",value:function(){var e=this.props,t=e.proposal,n=e.type,a=t.get("available_"+n+"_approvals"),r=t.get("available_key_approvals"),o=t.get("required_"+n+"_approvals");return N.a.createElement(Ye,Ie({},this.props,{required:o,available:a,availableKeys:r}))}}]),t}(N.a.Component);Xe.propTypes={proposal:B.a.ChainObject.isRequired,type:N.a.PropTypes.string.isRequired},Xe.defaultProps={type:"active",added:null};var Ue=Object(W.a)(Xe,{keep_updating:!0}),Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ze=function(e){function t(e){b(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={active:null,key:null,owner:null,payee:null},n}return y(t,e),Ve(t,[{key:"onActiveAccount",value:function(e,t,n,a){var r={};t[a]?(r.key=a,r[n]=null):a?(r[n]=e[a],r.key=null):(r[n]=null,r.key=null),this.setState(r)}},{key:"_onProposalAction",value:function(e){var t=this,n=e.toJS(),a=this.state,r=a.active,o=(a.key,a.owner,a.payee),i={fee_paying_account:o||r,proposal:n.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]},s="approve"===this.props.action,l=[];["active","owner","key"].forEach(function(e){var a=t.state[e];if(a){var r=-1!==n["available_"+e+"_approvals"].indexOf(a);(s&&!r||!s&&r)&&("approve"===t.props.action?(i[e+"_approvals_to_add"]=[a],"key"===e&&l.push(a)):"reject"===t.props.action&&(i[e+"_approvals_to_remove"]=[a],"key"===e&&l.push(a)))}});var c=F.a.new_transaction();c.add_type_operation("proposal_update",i),Y.a.process_transaction(c,null,!0,l),I.a.publish(this.props.modalId,"close")}},{key:"onChangePayee",value:function(e){var t=K.b.getAccount(e);t&&this.setState({payee:t.get("id")})}},{key:"onCancel",value:function(){I.a.publish(this.props.modalId,"close")}},{key:"render",value:function(){var e=this.props,t=e.proposal,n=e.type,a=[],r={},o="approve"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(o?e&&!t.get("available_"+n+"_approvals").includes(e.get("id")):e&&t.get("available_"+n+"_approvals").includes(e.get("id")))&&(r[e.get("name")]=e.get("id"),a.push(e.get("name")))});var i=[],s={};this.props.keys.length&&this.props.keys.forEach(function(e){xe.a.isMyKey(e)&&!t.get("available_key_approvals").includes(e)&&(s[e]=!0,i.push(e))});var l=xe.a.getMyAccounts();return N.a.createElement("form",{className:"grid-block vertical full-width-content"},N.a.createElement("div",{className:"grid-container"},N.a.createElement("div",{className:"content-block"},N.a.createElement("h4",null,o?"Add approval":"Remove approval")),N.a.createElement("div",{className:"content-block",style:{paddingRight:"20%"}},N.a.createElement(Ue,{proposal:t.get("id"),type:n,added:o?this.state.key?this.state.key:this.state[n]||null:null,removed:o?null:this.state.key?this.state.key:this.state[n]||null})),N.a.createElement("div",{className:"content-block full-width-content"},N.a.createElement("div",{className:"full-width-content form-group"},N.a.createElement(L.a,{content:"modal.proposals.pay_with",component:"label"}),N.a.createElement(Pe.a,{account_names:l,onChange:this.onChangePayee.bind(this)})),a.length||i.length?N.a.createElement("div",{className:"full-width-content form-group"},N.a.createElement(L.a,{content:"modal.proposals.approval_"+(o?"add":"remove"),component:"label"}),N.a.createElement(Pe.a,{account_names:a.concat(i),onChange:this.onActiveAccount.bind(this,r,s,n)})):null,null),N.a.createElement("div",{className:"content-block"},N.a.createElement("input",{type:"submit",className:"button",onClick:this._onProposalAction.bind(this,t),value:o?"Approve":"Remove"}),N.a.createElement("div",{onClick:this.onCancel.bind(this),className:" button"},N.a.createElement(L.a,{content:"account.perm.cancel"})))))}}]),t}(N.a.Component);ze.propTypes={accounts:B.a.ChainAccountsList},ze=Object(W.a)(ze);var Je=function(e){function t(){b(this,t);var e=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return y(t,e),Ve(t,[{key:"componentWillMount",value:function(){this._updateState(),K.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){K.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=this.props,t=e.proposal,n=(e.account,t.get("required_active_approvals").size?"active":"owner"),a=De.listToIDs(t.get("required_"+n+"_approvals")),r=De.listToIDs(t.get("available_"+n+"_approvals")),o=De.listToIDs(t.get("available_key_approvals"));this.setState({requiredPermissions:De.unnest(a,n),available:r,availableKeys:o,type:n})}},{key:"render",value:function(){var e=this.props.action,t=this.state,n=t.requiredPermissions,a=t.available,r=t.availableKeys,o=t.type,i=[];n.forEach(function(e){i=i.concat(e.getMissingSigs(a))});var s=[];return n.forEach(function(e){s=s.concat(e.getMissingKeys(r))}),N.a.createElement(ze,Ke({},this.props,{type:o,accounts:"approve"===e?i:a,keys:"approve"===e?s:r}))}}]),t}(N.a.Component);Je.propTypes={account:B.a.ChainAccount.isRequired,proposal:B.a.ChainObject.isRequired},Je=Object(W.a)(Je);var Ge=function(e){function t(){b(this,t);var e=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return y(t,e),Ve(t,[{key:"componentDidMount",value:function(){var e=this;I.a.subscribe(this.props.modalId,function(t,n){e.setState({open:"open"===n})})}},{key:"show",value:function(){I.a.publish(this.props.modalId,"open")}},{key:"render",value:function(){var e=this.props,t=e.modalId;e.proposal;return N.a.createElement(q.a,{id:t,overlay:!0,ref:t},this.state.open?N.a.createElement("div",{className:"grid-block vertical"},N.a.createElement(Je,this.props)):null)}}]),t}(N.a.Component),Qe=Ge,$e=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Ze=function(e){function t(){return _(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),$e(t,[{key:"_onApproveModal",value:function(e,t){this.refs[e+"_"+t]&&this.refs[e+"_"+t].show()}},{key:"_canApprove",value:function(e,t){return-1!==e.required_active_approvals.indexOf(t)&&-1===e.available_active_approvals.indexOf(t)||-1!==e.required_owner_approvals.indexOf(t)&&-1===e.available_owner_approvals.indexOf(t)}},{key:"_canReject",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length}},{key:"render",value:function(){var e=this,t=this.props.account;if(!t)return null;var n=[];t.get("proposals").size&&t.get("proposals").forEach(function(e){var a=K.b.getObject(e);if(a){var r=a.get("proposed_transaction"),o=r.get("operations");n.push({operations:o,account:t,proposal:a})}});var a=n.sort(function(e,t){return H.a.sortID(e.proposal.get("id"),t.proposal.get("id"),!0)}).map(function(t){var n=!1,a=t.operations.map(function(e,a){return"1.2.153124"===e.getIn([1,"to"])&&(n=!0),N.a.createElement(Ne.a,{key:t.proposal.get("id")+"_"+a,expiration:t.proposal.get("expiration_time"),index:a,op:e.toJS(),inverted:!1,hideFee:!1,hideOpLabel:!0,hideDate:!0,proposal:!0,id:t.proposal.get("id")})}).toArray(),r=e._canReject(t.proposal.toJS()),o=t.proposal.get("id"),i=t.proposal.get("required_active_approvals").size?"active":"owner";return N.a.createElement("tr",{key:o},N.a.createElement("td",null,a),N.a.createElement("td",null,N.a.createElement(Ue,{proposal:t.proposal.get("id"),type:i})),N.a.createElement("td",null,r?N.a.createElement("button",{onClick:e._onApproveModal.bind(e,o,"reject"),className:"button outline"},N.a.createElement(L.a,{content:"proposal.reject"})):null,N.a.createElement(Qe,{ref:o+"_reject",modalId:o+"_reject",account:t.account.get("id"),proposal:o,action:"reject"}),n?N.a.createElement("div",{"data-tip":U.a.translate("tooltip.propose_scam"),className:" tooltip has-error"},"SCAM"):N.a.createElement("button",{onClick:e._onApproveModal.bind(e,o,"approve"),className:"button outline"},N.a.createElement("span",null,N.a.createElement(L.a,{content:"proposal.approve"}))),N.a.createElement(Qe,{ref:o+"_approve",modalId:o+"_approve",account:t.account.get("id"),proposal:o,action:"approve"})))});return N.a.createElement("table",{className:"table compact "+this.props.className},N.a.createElement("thead",null,N.a.createElement("tr",null,N.a.createElement("th",null,N.a.createElement(L.a,{content:"account.votes.info"})),N.a.createElement("th",null,N.a.createElement(L.a,{content:"proposal.status"})),N.a.createElement("th",null,N.a.createElement(L.a,{content:"proposal.action"})))),N.a.createElement("tbody",null,a))}}]),t}(S.Component);Ze.propTypes={account:B.a.ChainAccount.isRequired};var et=Object(W.a)(Ze,{keep_updating:!0}),tt=n(31),nt=n(277),at=n(144),rt=n(1543),ot=n(1544),it=n(7),st=n(1518),lt=n(1475),ct=n(678),ut=n(25),pt=n.n(ut),dt=n(139),ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ft=function(e){function t(e){O(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.sortFunctions={alphabetic:function(e,t,n){return e.key>t.key?this.state.sortDirection||n?1:-1:e.key<t.key?this.state.sortDirection||n?-1:1:0},priceValue:function(e,t){var n=this.priceRefs[e.key],a=this.priceRefs[t.key];if(n&&a){var r=n.getFinalPrice(!0),o=a.getFinalPrice(!0);return!r&&o?1:r&&!o?-1:r||o?this.state.sortDirection?r-o:o-r:this.sortFunctions.alphabetic(e,t,!0)}},totalValue:function(e,t){var n=this.valueRefs[e.key],a=this.valueRefs[t.key];if(n&&a){var r=n.getValue(),o=a.getValue();return!r&&o?1:r&&!o?-1:r||o?this.state.sortDirection?o-r:r-o:this.sortFunctions.alphabetic(e,t,!0)}},changeValue:function(e,t){var n=this.changeRefs[e.key],a=this.changeRefs[t.key];if(n&&a){var r=n.getValue(),o=a.getValue(),i="NaN"!=parseFloat(r)?parseFloat(r):r,s="NaN"!=parseFloat(o)?parseFloat(o):o;return void 0===this.state.sortDirection||this.state.sortDirection?i-s:s-i}}},n.state={sortKey:e.viewSettings.get("portfolioSort","totalValue"),sortDirection:e.viewSettings.get("portfolioSortDirection",!0),settleAsset:"1.3.0",showHidden:!1,depositAsset:null,withdrawAsset:null,bridgeAsset:null,alwaysShowAssets:["BTS","USD","CNY","HERO","BTC","SILVER","GOLD"]},n.priceRefs={},n.valueRefs={},n.changeRefs={};for(var a in n.sortFunctions)n.sortFunctions[a]=n.sortFunctions[a].bind(n);return n}return C(t,e),mt(t,[{key:"componentWillMount",value:function(){this._checkMarginStatus()}},{key:"_checkMarginStatus",value:function(){var e=this;k((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).account).then(function(t){var n=null;for(var a in t)n=t[a].statusClass||n;e.setState({globalMarginStatus:n})})}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&(this._checkMarginStatus(e),this.priceRefs={},this.valueRefs={},this.changeRefs={},setTimeout(this.forceUpdate.bind(this),500))}},{key:"shouldComponentUpdate",value:function(e,t){return!(H.a.are_equal_shallow(e.balanceAssets,this.props.balanceAssets)&&H.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)&&H.a.are_equal_shallow(e.balances,this.props.balances)&&e.account===this.props.account&&e.settings===this.props.settings&&e.hiddenAssets===this.props.hiddenAssets&&H.a.are_equal_shallow(t,this.state))}},{key:"_onSettleAsset",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.refs.settlement_modal.show()}},{key:"_hideAsset",value:function(e,t){tt.a.hideAsset(e,t)}},{key:"_showDepositWithdraw",value:function(e,t,n,a){var r,o=this;a.preventDefault(),this.setState((r={},A(r,"bridge_modal"===e?"bridgeAsset":"deposit_modal"===e?"depositAsset":"withdrawAsset",t),A(r,"fiatModal",n),r),function(){o.refs[e].show()})}},{key:"_getSeparator",value:function(e){return e?N.a.createElement("span",null,"|"):null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.props.router.push(e)}},{key:"_renderBalances",value:function(e,t,n){var a=this,r=this.props.core_asset,o=this.props,i=o.settings,s=o.hiddenAssets,l=o.orders,c=i.get("unit")||r.get("symbol"),u=i.get("showAssetPercent",!1),p=function(e,t){var n=e&&e.has("bitasset_data_id"),r="cp_modal_"+e.get("id");return{isBitAsset:n,borrowModal:n?N.a.createElement(he.a,{ref:r,quote_asset:e.get("id"),backing_asset:e.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,borrowLink:n?N.a.createElement("a",{onClick:function(){ae.a.hide(),a.refs[r].show()}},N.a.createElement(me.a,{name:"dollar",className:"icon-14px"})):null}},d=[];return e.forEach(function(e){var t=K.b.getObject(e),n=t.get("asset_type"),o=K.b.getObject(n),i=void 0,h=void 0,m=void 0,f="";if(!o)return null;var g=o.get("symbol"),b="1.3.0"!==o.get("id"),v=c!==r.get("symbol"),y=nt.a.parseDescription(o.getIn(["options","description"])),_=y.market;f=o.get("symbol"),_||(_="USD");var E=_||c;b&&E===f&&(E=r.get("symbol")),i=b?N.a.createElement(fe.b,{to:"/market/"+o.get("symbol")+"_"+E},N.a.createElement(me.a,{name:"trade",className:"icon-14px"})):v?N.a.createElement(fe.b,{to:"/market/"+o.get("symbol")+"_"+c},N.a.createElement(me.a,{name:"trade",className:"icon-14px"})):"-",m=N.a.createElement(fe.b,{to:"/transfer?asset="+o.get("id")},N.a.createElement(me.a,{name:"transfer",className:"icon-14px"}));var w=p(o,a.props.account),k=w.isBitAsset,A=w.borrowModal,O=w.borrowLink;h=N.a.createElement("a",{href:!0,onClick:a._onSettleAsset.bind(a,o.get("id"))},N.a.createElement(me.a,{name:"settle",className:"icon-14px"}));var T=!s.includes(n),C=!!t.get("balance"),S=!!l[n],P=!!a.props.bridgeCoins.get(f);d.push(N.a.createElement("tr",{key:o.get("symbol"),style:{maxWidth:"100rem"}},N.a.createElement("td",{style:{textAlign:"left"}},N.a.createElement(at.a,{asset:o.get("id")})),N.a.createElement("td",{style:{textAlign:"right"}},C||S?N.a.createElement(R.a,{balance:e,hide_asset:!0}):null),N.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},N.a.createElement(be.b,{refCallback:function(e){e&&e.refs.bound_component&&(a.priceRefs[o.get("symbol")]=e.refs.bound_component)},fromAsset:o.get("id"),hide_symbols:!0})),N.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},N.a.createElement(ce,{refCallback:function(e){e&&e.refs.bound_component&&(a.changeRefs[o.get("symbol")]=e.refs.bound_component)},base:o.get("id"),quote:c,marketId:o.get("symbol")+"_"+c,hide_symbols:!0})),N.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},C||S?N.a.createElement($.a,{balance:e,toAsset:c,hide_asset:!0,refCallback:function(e){e&&e.refs.bound_component&&(a.valueRefs[o.get("symbol")]=e.refs.bound_component)}}):null),u?N.a.createElement("td",{style:{textAlign:"right"}},C?N.a.createElement(R.a,{balance:e,asPercentage:!0}):null):null,N.a.createElement("td",null,m),N.a.createElement("td",null,P&&a.props.isMyAccount?N.a.createElement("span",null,N.a.createElement("a",{onClick:a._showDepositWithdraw.bind(a,"bridge_modal",g,!1)},N.a.createElement(me.a,{name:"dollar",className:"icon-14px"}))):"-"),N.a.createElement("td",null,"-"),N.a.createElement("td",null,"-"),N.a.createElement("td",null,i),N.a.createElement("td",null,k?N.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":U.a.translate("tooltip.borrow",{asset:f})},O,A):"-"),N.a.createElement("td",null,k?N.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":U.a.translate("tooltip.settle",{asset:f})},h):"-"),N.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":U.a.translate("tooltip."+(T?"hide_asset":"show_asset"))},N.a.createElement("a",{style:{marginRight:0},className:T?"order-cancel":"action-plus",onClick:a._hideAsset.bind(a,n,T)},N.a.createElement(me.a,{name:T?"cross-circle":"plus-circle",className:"icon-14px"})))))}),t&&t.filter(function(e){var t=!1;a.props.bridgeCoins.get(e)&&(t=!0);var n=!0;return d.forEach(function(t){t.key===e&&(n=!1)}),n&&t}).forEach(function(e){var t=K.b.getAsset(e);if(t&&a.props.isMyAccount){var o=!s.includes(t.get("id")),i=!!a.props.bridgeCoins.get(t.get("symbol")),l="1.3.0"!==t.get("id"),c=nt.a.parseDescription(t.getIn(["options","description"])),u=c.market;u||(u="USD");var h=u||(r?r.get("symbol"):"BTS"),m=l?N.a.createElement(fe.b,{to:"/market/"+t.get("symbol")+"_"+h},N.a.createElement(me.a,{name:"trade",className:"icon-14px"})):"-",f=p(t,a.props.account),g=f.isBitAsset,b=f.borrowModal,v=f.borrowLink;(o&&n||!o&&!n)&&d.push(N.a.createElement("tr",{key:t.get("symbol"),style:{maxWidth:"100rem"}},N.a.createElement("td",{style:{textAlign:"left"}},N.a.createElement(at.a,{asset:t.get("id")})),N.a.createElement("td",null,"-"),N.a.createElement("td",{className:"column-hide-small"},"-"),N.a.createElement("td",{className:"column-hide-small"},"-"),N.a.createElement("td",{className:"column-hide-small"},"-"),N.a.createElement("td",null,"-"),N.a.createElement("td",{style:{textAlign:"center"}},i&&a.props.isMyAccount?N.a.createElement("span",null,N.a.createElement("a",{onClick:a._showDepositWithdraw.bind(a,"bridge_modal",e,!1)},N.a.createElement(me.a,{name:"dollar",className:"icon-14px"}))):"-"),N.a.createElement("td",null,"-"),N.a.createElement("td",null,"-"),N.a.createElement("td",{style:{textAlign:"center"}},m),N.a.createElement("td",null,g?N.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":U.a.translate("tooltip.borrow",{asset:t.get("symbol")})},v,b):"-"),N.a.createElement("td",null,"-"),N.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":U.a.translate("tooltip."+(o?"hide_asset":"show_asset"))},N.a.createElement("a",{style:{marginRight:0},className:o?"order-cancel":"action-plus",onClick:a._hideAsset.bind(a,t.get("id"),o)},N.a.createElement(me.a,{name:o?"cross-circle":"plus-circle",className:"icon-14px"})))))}}),d.sort(this.sortFunctions[this.state.sortKey]),d}},{key:"_toggleHiddenAssets",value:function(){this.setState({showHidden:!this.state.showHidden})}},{key:"_toggleSortOrder",value:function(e){this.state.sortKey===e?(tt.a.changeViewSetting({portfolioSortDirection:!this.state.sortDirection}),this.setState({sortDirection:!this.state.sortDirection})):(tt.a.changeViewSetting({portfolioSort:e}),this.setState({sortKey:e}))}},{key:"render",value:function(){var e=this.props,t=e.account,n=e.hiddenAssets,a=e.settings,r=e.orders,o=this.state.showHidden;if(!t)return null;var i=[],s={},l={};t.toJS&&t.has("call_orders")&&(i=t.get("call_orders").toJS());var c=void 0,u=void 0,p=t.get("balances"),d=x.a.List(),h=x.a.List();if(i.forEach(function(e){var t=K.b.getObject(e);if(t){var n=t.getIn(["call_price","base","asset_id"]);s[n]?s[n]+=parseInt(t.get("collateral"),10):s[n]=parseInt(t.get("collateral"),10);var a=t.getIn(["call_price","quote","asset_id"]);l[a]?l[a]+=parseInt(t.get("debt"),10):l[a]=parseInt(t.get("debt"),10)}}),p){p=p.filter(function(e,t){var n=K.b.getObject(e);return!(n&&!n.get("balance")&&!r[t])}),p.forEach(function(e,t){n.includes(t)?h=h.push(e):d=d.push(e)});c=this._renderBalances(d,this.state.alwaysShowAssets,!0);u=this._renderBalances(h,this.state.alwaysShowAssets)}var m=d.concat(h),f=N.a.createElement(D.a,{noTip:!0,balances:m,hide_asset:!0}),g=N.a.createElement(D.a,{noTip:!0,balances:x.a.List(),openOrders:r,hide_asset:!0}),b=N.a.createElement(D.a,{noTip:!0,balances:x.a.List(),debt:l,collateral:s,hide_asset:!0}),v=N.a.createElement(D.a,{noTip:!0,balances:x.a.List(),debt:l,hide_asset:!0}),y=N.a.createElement(D.a,{noTip:!0,balances:x.a.List(),collateral:s,hide_asset:!0}),_=a.get("unit")||this.props.core_asset.get("symbol"),E=N.a.createElement(ge.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:_,arg:"asset"}]});c.push(N.a.createElement("tr",{key:"portfolio",className:"total-value"},N.a.createElement("td",{style:{textAlign:"left"}},E),N.a.createElement("td",null),N.a.createElement("td",{className:"column-hide-small"}),N.a.createElement("td",null),N.a.createElement("td",{className:"column-hide-small",style:{textAlign:"right"}},f),N.a.createElement("td",{colSpan:"9"})));var w=a.get("showAssetPercent",!1),k=this.props.bridgeCoins.get(this.state.bridgeAsset)||null,A=K.b.getAsset(_),O=A?A.get("symbol"):"";if(A){var T=H.a.replaceName(O,!!A.get("bitasset_data_id")),C=T.prefix,S=T.name;O=(C||"")+S}var P=N.a.createElement("span",{style:{visibility:"hidden"}},"H");return N.a.createElement("div",{className:"grid-content app-tables no-padding",ref:"appTables"},N.a.createElement("div",{className:"content-block small-12"},N.a.createElement("div",{className:"tabs-container generic-bordered-box"},N.a.createElement(lt.b,{defaultActiveTab:0,segmented:!1,setting:"overviewTab",className:"account-tabs",tabsClass:"account-overview no-padding bordered-header content-block"},N.a.createElement(lt.a,{title:"account.portfolio",subText:f},N.a.createElement("div",{className:"hide-selector"},N.a.createElement("div",{className:pt()("inline-block",{inactive:o&&u.length}),onClick:o?this._toggleHiddenAssets.bind(this):function(){}},N.a.createElement(L.a,{content:"account.hide_hidden"})),u.length?N.a.createElement("div",{className:pt()("inline-block",{inactive:!o}),onClick:o?function(){}:this._toggleHiddenAssets.bind(this)},N.a.createElement(L.a,{content:"account.show_hidden"})):null),N.a.createElement("table",{className:"table dashboard-table"},N.a.createElement("thead",null,N.a.createElement("tr",null,N.a.createElement("th",{style:{textAlign:"left"},className:"clickable",onClick:this._toggleSortOrder.bind(this,"alphabetic")},N.a.createElement(L.a,{component:"span",content:"account.asset"})),N.a.createElement("th",{style:{textAlign:"right"}},N.a.createElement(L.a,{content:"account.qty"})),N.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"priceValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},N.a.createElement(L.a,{content:"exchange.price"})," (",N.a.createElement(ue.a,{name:_}),")"),N.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"changeValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},N.a.createElement(L.a,{content:"account.hour_24_short"})),N.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"totalValue"),style:{textAlign:"right"},className:"column-hide-small clickable"},N.a.createElement(ge.a,{noLink:!0,string:"account.eq_value_header",keys:[{type:"asset",value:_,arg:"asset"}]})),w?N.a.createElement("th",{style:{textAlign:"right"}},N.a.createElement(L.a,{component:"span",content:"account.percent"})):null,N.a.createElement("th",null,N.a.createElement(L.a,{content:"header.payments"})),N.a.createElement("th",null,N.a.createElement(L.a,{content:"exchange.buy"})),N.a.createElement("th",null,N.a.createElement(L.a,{content:"modal.deposit.submit"})),N.a.createElement("th",null,N.a.createElement(L.a,{content:"modal.withdraw.submit"})),N.a.createElement("th",null,N.a.createElement(L.a,{content:"account.trade"})),N.a.createElement("th",null,N.a.createElement(L.a,{content:"exchange.borrow"})),N.a.createElement("th",null,N.a.createElement(L.a,{content:"account.settle"})),N.a.createElement("th",{className:"column-hide-small"},N.a.createElement(L.a,{content:o?"account.perm.show":"exchange.hide"})))),N.a.createElement("tbody",null,o&&u.length?u:c))),N.a.createElement(lt.a,{title:"account.open_orders",subText:g},N.a.createElement(ct.default,this.props,N.a.createElement("tbody",null,N.a.createElement("tr",{className:"total-value"},N.a.createElement("td",{style:{textAlign:"center"},colSpan:"3"},E),N.a.createElement("td",{colSpan:"3"}),N.a.createElement("td",{style:{textAlign:"right"}},g),N.a.createElement("td",{colSpan:"1"}),N.a.createElement("td",null),this.props.isMyAccount?N.a.createElement("td",null):null)))),N.a.createElement(lt.a,{title:"account.collaterals",subText:N.a.createElement("span",{className:this.state.globalMarginStatus},b)},N.a.createElement("div",{className:"content-block"},N.a.createElement("div",{className:"generic-bordered-box"},N.a.createElement(Ce,{preferredUnit:_,className:"dashboard-table",callOrders:i,account:t},N.a.createElement("tr",{className:"total-value"},N.a.createElement("td",null,E),N.a.createElement("td",null,v),N.a.createElement("td",{className:"column-hide-medium"},y),N.a.createElement("td",null),N.a.createElement("td",null,b),N.a.createElement("td",{className:"column-hide-small"}),N.a.createElement("td",{className:"column-hide-small"}),N.a.createElement("td",{colSpan:"3"})))))),N.a.createElement(lt.a,{title:"account.activity",subText:P},N.a.createElement(Se.a,{accountsList:x.a.fromJS([t.get("id")]),compactView:!1,showMore:!0,fullHeight:!0,limit:15,showFilters:!0,dashboard:!0})),t.get("proposals")&&t.get("proposals").size?N.a.createElement(lt.a,{title:"explorer.proposals.title",subText:t.get("proposals")?t.get("proposals").size:0},N.a.createElement(et,{className:"dashboard-table",account:t.get("id")})):null),N.a.createElement(Q,{ref:"settlement_modal",asset:this.state.settleAsset,account:t.get("name")}))),N.a.createElement(rt.a,ht({ref:"deposit_modal",action:"deposit",fiatModal:this.state.fiatModal,account:this.props.account.get("name"),sender:this.props.account.get("id"),asset:this.state.depositAsset,modalId:"simple_deposit_modal",balances:this.props.balances},currentDepositAsset,{isDown:this.props.gatewayDown.get("OPEN")})),N.a.createElement(rt.a,ht({ref:"withdraw_modal",action:"withdraw",fiatModal:this.state.fiatModal,account:this.props.account.get("name"),sender:this.props.account.get("id"),asset:this.state.withdrawAsset,modalId:"simple_withdraw_modal",balances:this.props.balances},currentWithdrawAsset,{isDown:this.props.gatewayDown.get("OPEN")})),N.a.createElement(ot.a,{ref:"bridge_modal",action:"deposit",account:this.props.account.get("name"),sender:this.props.account.get("id"),asset:this.state.bridgeAsset,modalId:"simple_bridge_modal",balances:this.props.balances,bridges:k,isDown:this.props.gatewayDown.get("TRADE")}))}}]),t}(N.a.Component);ft.propTypes={balanceAssets:B.a.ChainAssetsList,core_asset:B.a.ChainAsset.isRequired},ft.defaultProps={core_asset:"1.3.0"},ft=Object(W.a)(ft);var gt=function(e){function t(){return O(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),mt(t,[{key:"componentWillMount",value:function(){"4018d784"===it.Apis.instance().chain_id.substr(0,8)&&(st.a.fetchCoins(),st.a.fetchBridgeCoins())}},{key:"render",value:function(){var e=this.props.balances.map(function(e){return e&&e.get("asset_type")}).filter(function(e){return!!e}),t=this.props.orders.reduce(function(e,t){var n=t.getIn(["sell_price","base","asset_id"]);return e[n]||(e[n]=0),e[n]+=parseInt(t.get("for_sale"),10),e},{});for(var n in t)-1===e.indexOf(n)&&e.push(n);return N.a.createElement(ft,ht({},this.state,this.props,{orders:t,balanceAssets:x.a.List(e)}))}}]),t}(N.a.Component);gt.propTypes={balances:B.a.ChainObjectsList,orders:B.a.ChainObjectsList},gt.defaultProps={balances:x.a.List(),orders:x.a.List()};t.default=Object(W.a)(gt)},678:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),l=n.n(s),c=n(1525),u=n(11),p=n.n(u),d=n(274),h=n(3),m=n(139),f=n(26),g=(n.n(f),n(38)),b=n(31),v=n(123),y=n(5),_=n.n(y),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedOrders:[],filterValue:""},n}return i(t,e),E(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("cancelAllOrders");e&&e.addEventListener("click",function(){var e=this._getFilteredOrders.call(this);e=e.toJS?e.toJS():e,this.setState({selectedOrders:e}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked||(e.checked=!0)})}.bind(this))}},{key:"_getFilteredOrders",value:function(){var e=this.state.filterValue;return(this.props.account.get("orders")||[]).filter(function(t){var n=h.b.getObject(t).toJS(),a=h.b.getAsset(n.sell_price.base.asset_id),r=h.b.getAsset(n.sell_price.quote.asset_id),o=a.get("symbol").toLowerCase(),i=r.get("symbol").toLowerCase();return o.indexOf(e)>-1||i.indexOf(e)>-1})}},{key:"_cancelLimitOrder",value:function(e,t){t.preventDefault(),d.a.cancelLimitOrder(this.props.account.get("id"),e,!1).catch(function(e){console.log("cancel order error:",e)})}},{key:"_cancelLimitOrders",value:function(e){var t=this;d.a.cancelLimitOrders(this.props.account.get("id"),this.state.selectedOrders).then(function(){t.resetSelected()}).catch(function(e){console.log("cancel orders error:",e)})}},{key:"onFlip",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),b.a.changeMarketDirection(t)}},{key:"onCheckCancel",value:function(e,t){var n=this.state.selectedOrders;if(t.target.checked)this.setState({selectedOrders:n.concat([e])});else{var a=n.indexOf(e);a>-1&&this.setState({selectedOrders:n.slice(0,a).concat(n.slice(a+1))})}}},{key:"setFilterValue",value:function(e){this.setState({filterValue:e.target.value.toLowerCase()})}},{key:"resetSelected",value:function(){this.setState({selectedOrders:[]}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked&&(e.checked=!1)})}},{key:"cancelSelected",value:function(){this._cancelLimitOrders.call(this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.account,r=t.marketDirections,o=this.state,i=o.filterValue,s=o.selectedOrders,u=p.a.translate("account.perm.cancel"),d={},f={};if(!n.get("orders"))return null;var g=n.get("orders"),b=g.size;i&&(g=this._getFilteredOrders.call(this)),g.forEach(function(t){var n=h.b.getObject(t).toJS(),o=h.b.getAsset(n.sell_price.base.asset_id),i=h.b.getAsset(n.sell_price.quote.asset_id);if(o&&i){var s,p=(s={},a(s,o.get("id"),{precision:o.get("precision")}),a(s,i.get("id"),{precision:i.get("precision")}),s),g=v.a.getMarketID(o,i),b=g.marketID,y=r.get(b);d[b]||(d[b]=y?{base:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")},quote:{id:i.get("id"),symbol:i.get("symbol"),precision:i.get("precision")}}:{base:{id:i.get("id"),symbol:i.get("symbol"),precision:i.get("precision")},quote:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")}});var _=new m.d(n,p,d[b].quote.id),E=h.b.getAsset(d[b].base.id),w=h.b.getAsset(d[b].quote.id);f[b]||(f[b]=[]),f[b].push(l.a.createElement(c.b,{ref:d[b].base.symbol,key:n.id,order:_,base:E,quote:w,cancel_text:u,showSymbols:!1,invert:!0,onCancel:e._cancelLimitOrder.bind(e,n.id),price:_.getPrice(),dashboard:!0,isMyAccount:e.props.isMyAccount,settings:e.props.settings,onFlip:e.onFlip.bind(e,b),onCheckCancel:e.onCheckCancel.bind(e,n.id)}))}});var y=[],E=0;for(var w in f)f[w].length&&(y.push(l.a.createElement("tbody",{key:w},f[w].sort(function(e,t){return e.props.price-t.props.price}))),E++);return l.a.createElement("div",{className:"grid-content no-overflow no-padding",style:{paddingBottom:15}},l.a.createElement("div",{style:{maxWidth:"50%",marginBottom:"1em"}},g&&b?l.a.createElement("input",{type:"text",placeholder:p.a.translate("account.filter_orders"),style:{display:"inline-block",maxWidth:"50%",marginRight:"1em",marginBottom:"0"},onChange:this.setFilterValue.bind(this)}):null,s.length?l.a.createElement("button",{className:"button"},l.a.createElement(_.a,{content:"account.reset_orders",onClick:this.resetSelected.bind(this)})):null,s.length?l.a.createElement("button",{className:"button"},l.a.createElement(_.a,{content:"account.submit_orders",onClick:this.cancelSelected.bind(this)})):null),l.a.createElement("table",{className:"table table-striped dashboard-table"},l.a.createElement(c.c,{settings:this.props.settings,dashboard:!0,isMyAccount:this.props.isMyAccount}),y,this.props.children))}}]),t}(l.a.Component);w=Object(f.connect)(w,{listenTo:function(){return[g.a]},getProps:function(){return{marketDirections:g.a.getState().marketDirections}}}),t.default=w}});
//# sourceMappingURL=1.js.map