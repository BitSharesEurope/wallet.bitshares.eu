webpackJsonp([5],{1170:function(t,e,n){"use strict";function a(t){function e(){l.add(t,"ps-focus")}function n(){l.remove(t,"ps-focus")}var a=this;a.settings=s.clone(c),a.containerWidth=null,a.containerHeight=null,a.contentWidth=null,a.contentHeight=null,a.isRtl="rtl"===p.css(t,"direction"),a.isNegativeScroll=function(){var e=t.scrollLeft,n=null;return t.scrollLeft=-1,n=t.scrollLeft<0,t.scrollLeft=e,n}(),a.negativeScrollAdjustment=a.isNegativeScroll?t.scrollWidth-t.clientWidth:0,a.event=new u,a.ownerDocument=t.ownerDocument||document,a.scrollbarXRail=p.appendTo(p.e("div","ps-scrollbar-x-rail"),t),a.scrollbarX=p.appendTo(p.e("div","ps-scrollbar-x"),a.scrollbarXRail),a.scrollbarX.setAttribute("tabindex",0),a.event.bind(a.scrollbarX,"focus",e),a.event.bind(a.scrollbarX,"blur",n),a.scrollbarXActive=null,a.scrollbarXWidth=null,a.scrollbarXLeft=null,a.scrollbarXBottom=s.toInt(p.css(a.scrollbarXRail,"bottom")),a.isScrollbarXUsingBottom=a.scrollbarXBottom===a.scrollbarXBottom,a.scrollbarXTop=a.isScrollbarXUsingBottom?null:s.toInt(p.css(a.scrollbarXRail,"top")),a.railBorderXWidth=s.toInt(p.css(a.scrollbarXRail,"borderLeftWidth"))+s.toInt(p.css(a.scrollbarXRail,"borderRightWidth")),p.css(a.scrollbarXRail,"display","block"),a.railXMarginWidth=s.toInt(p.css(a.scrollbarXRail,"marginLeft"))+s.toInt(p.css(a.scrollbarXRail,"marginRight")),p.css(a.scrollbarXRail,"display",""),a.railXWidth=null,a.railXRatio=null,a.scrollbarYRail=p.appendTo(p.e("div","ps-scrollbar-y-rail"),t),a.scrollbarY=p.appendTo(p.e("div","ps-scrollbar-y"),a.scrollbarYRail),a.scrollbarY.setAttribute("tabindex",0),a.event.bind(a.scrollbarY,"focus",e),a.event.bind(a.scrollbarY,"blur",n),a.scrollbarYActive=null,a.scrollbarYHeight=null,a.scrollbarYTop=null,a.scrollbarYRight=s.toInt(p.css(a.scrollbarYRail,"right")),a.isScrollbarYUsingRight=a.scrollbarYRight===a.scrollbarYRight,a.scrollbarYLeft=a.isScrollbarYUsingRight?null:s.toInt(p.css(a.scrollbarYRail,"left")),a.scrollbarYOuterWidth=a.isRtl?s.outerWidth(a.scrollbarY):null,a.railBorderYWidth=s.toInt(p.css(a.scrollbarYRail,"borderTopWidth"))+s.toInt(p.css(a.scrollbarYRail,"borderBottomWidth")),p.css(a.scrollbarYRail,"display","block"),a.railYMarginHeight=s.toInt(p.css(a.scrollbarYRail,"marginTop"))+s.toInt(p.css(a.scrollbarYRail,"marginBottom")),p.css(a.scrollbarYRail,"display",""),a.railYHeight=null,a.railYRatio=null}function i(t){return t.getAttribute("data-ps-id")}function o(t,e){t.setAttribute("data-ps-id",e)}function r(t){t.removeAttribute("data-ps-id")}var s=n(1172),l=n(1176),c=n(1194),p=n(1175),u=n(1191),d=n(1192),h={};e.add=function(t){var e=d();return o(t,e),h[e]=new a(t),h[e]},e.remove=function(t){delete h[i(t)],r(t)},e.get=function(t){return h[i(t)]}},1172:function(t,e,n){"use strict";var a=n(1176),i=n(1175),o=e.toInt=function(t){return parseInt(t,10)||0},r=e.clone=function(t){if(t){if(t.constructor===Array)return t.map(r);if("object"==typeof t){var e={};for(var n in t)e[n]=r(t[n]);return e}return t}return null};e.extend=function(t,e){var n=r(t);for(var a in e)n[a]=r(e[a]);return n},e.isEditable=function(t){return i.matches(t,"input,[contenteditable]")||i.matches(t,"select,[contenteditable]")||i.matches(t,"textarea,[contenteditable]")||i.matches(t,"button,[contenteditable]")},e.removePsClasses=function(t){for(var e=a.list(t),n=0;n<e.length;n++){var i=e[n];0===i.indexOf("ps-")&&a.remove(t,i)}},e.outerWidth=function(t){return o(i.css(t,"width"))+o(i.css(t,"paddingLeft"))+o(i.css(t,"paddingRight"))+o(i.css(t,"borderLeftWidth"))+o(i.css(t,"borderRightWidth"))},e.startScrolling=function(t,e){a.add(t,"ps-in-scrolling"),void 0!==e?a.add(t,"ps-"+e):(a.add(t,"ps-x"),a.add(t,"ps-y"))},e.stopScrolling=function(t,e){a.remove(t,"ps-in-scrolling"),void 0!==e?a.remove(t,"ps-"+e):(a.remove(t,"ps-x"),a.remove(t,"ps-y"))},e.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},1173:function(t,e,n){"use strict";function a(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function i(t,e){var n={width:e.railXWidth};e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-t.scrollTop:n.top=e.scrollbarXTop+t.scrollTop,s.css(e.scrollbarXRail,n);var a={top:t.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?a.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:a.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?a.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:a.left=e.scrollbarYLeft+t.scrollLeft,s.css(e.scrollbarYRail,a),s.css(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),s.css(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}var o=n(1172),r=n(1176),s=n(1175),l=n(1170),c=n(1174);t.exports=function(t){var e=l.get(t);e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight;var n;t.contains(e.scrollbarXRail)||(n=s.queryChildren(t,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(t){s.remove(t)}),s.appendTo(e.scrollbarXRail,t)),t.contains(e.scrollbarYRail)||(n=s.queryChildren(t,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(t){s.remove(t)}),s.appendTo(e.scrollbarYRail,t)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=a(e,o.toInt(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=o.toInt((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=a(e,o.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=o.toInt(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),i(t,e),e.scrollbarXActive?r.add(t,"ps-active-x"):(r.remove(t,"ps-active-x"),e.scrollbarXWidth=0,e.scrollbarXLeft=0,c(t,"left",0)),e.scrollbarYActive?r.add(t,"ps-active-y"):(r.remove(t,"ps-active-y"),e.scrollbarYHeight=0,e.scrollbarYTop=0,c(t,"top",0))}},1174:function(t,e,n){"use strict";var a,i,o=n(1170),r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e};t.exports=function(t,e,n){if(void 0===t)throw"You must provide an element to the update-scroll function";if(void 0===e)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===e&&n<=0&&(t.scrollTop=n=0,t.dispatchEvent(r("ps-y-reach-start"))),"left"===e&&n<=0&&(t.scrollLeft=n=0,t.dispatchEvent(r("ps-x-reach-start")));var s=o.get(t);"top"===e&&n>=s.contentHeight-s.containerHeight&&(n=s.contentHeight-s.containerHeight,n-t.scrollTop<=1?n=t.scrollTop:t.scrollTop=n,t.dispatchEvent(r("ps-y-reach-end"))),"left"===e&&n>=s.contentWidth-s.containerWidth&&(n=s.contentWidth-s.containerWidth,n-t.scrollLeft<=1?n=t.scrollLeft:t.scrollLeft=n,t.dispatchEvent(r("ps-x-reach-end"))),a||(a=t.scrollTop),i||(i=t.scrollLeft),"top"===e&&n<a&&t.dispatchEvent(r("ps-scroll-up")),"top"===e&&n>a&&t.dispatchEvent(r("ps-scroll-down")),"left"===e&&n<i&&t.dispatchEvent(r("ps-scroll-left")),"left"===e&&n>i&&t.dispatchEvent(r("ps-scroll-right")),"top"===e&&(t.scrollTop=a=n,t.dispatchEvent(r("ps-scroll-y"))),"left"===e&&(t.scrollLeft=i=n,t.dispatchEvent(r("ps-scroll-x")))}},1175:function(t,e,n){"use strict";function a(t,e){return window.getComputedStyle(t)[e]}function i(t,e,n){return"number"==typeof n&&(n=n.toString()+"px"),t.style[e]=n,t}function o(t,e){for(var n in e){var a=e[n];"number"==typeof a&&(a=a.toString()+"px"),t.style[n]=a}return t}var r={};r.e=function(t,e){var n=document.createElement(t);return n.className=e,n},r.appendTo=function(t,e){return e.appendChild(t),t},r.css=function(t,e,n){return"object"==typeof e?o(t,e):void 0===n?a(t,e):i(t,e,n)},r.matches=function(t,e){return void 0!==t.matches?t.matches(e):void 0!==t.matchesSelector?t.matchesSelector(e):void 0!==t.webkitMatchesSelector?t.webkitMatchesSelector(e):void 0!==t.mozMatchesSelector?t.mozMatchesSelector(e):void 0!==t.msMatchesSelector?t.msMatchesSelector(e):void 0},r.remove=function(t){void 0!==t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)},r.queryChildren=function(t,e){return Array.prototype.filter.call(t.childNodes,function(t){return r.matches(t,e)})},t.exports=r},1176:function(t,e,n){"use strict";function a(t,e){var n=t.className.split(" ");n.indexOf(e)<0&&n.push(e),t.className=n.join(" ")}function i(t,e){var n=t.className.split(" "),a=n.indexOf(e);a>=0&&n.splice(a,1),t.className=n.join(" ")}e.add=function(t,e){t.classList?t.classList.add(e):a(t,e)},e.remove=function(t,e){t.classList?t.classList.remove(e):i(t,e)},e.list=function(t){return t.classList?Array.prototype.slice.apply(t.classList):t.className.split(" ")}},1181:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(109),c=n(45),p=n(44),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),d=function(t){function e(){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"render",value:function(){var t=Number(this.props.balance.get("balance")),e=this.props.balance.get("asset_type");return s.a.createElement(l.a,{amount:t,asset:e,asPercentage:this.props.asPercentage,assetInfo:this.props.assetInfo})}}]),e}(s.a.Component);d.propTypes={balance:c.a.ChainObject.isRequired,assetInfo:s.a.PropTypes.node},e.a=n.i(p.a)(d,{keep_updating:!0})},1184:function(t,e,n){"use strict";t.exports=n(1193)},1187:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(21),c=n.n(l),p=n(6),u=n(45),d=n(44),h=n(109),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),_=function(t){function e(){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),m(e,[{key:"render",value:function(){var t=this.props.asset?this.props.asset.get("symbol"):this.props.asset_id;return s.a.createElement("option",{value:this.props.asset_id},t)}}]),e}(s.a.Component);_.propTypes={asset:u.a.ChainObject,asset_id:s.a.PropTypes.string},_=n.i(d.a)(_);var f=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={selected:t.value||t.assets[0]},n}return o(e,t),m(e,[{key:"onChange",value:function(t){var e=p.b.getAsset(t.target.value);this.props.onChange(e),this.setState({selected:e?e.get("id"):"1.3.0"})}},{key:"render",value:function(){if(0===this.props.assets.length)return null;var t=this.props.assets.map(function(t){return s.a.createElement(_,{key:t,asset:t,asset_id:t})});return 1==this.props.assets.length?s.a.createElement(h.a,{asset:this.props.assets[0],amount:0,hide_amount:!0}):s.a.createElement("select",{value:this.state.selected,className:"form-control",onChange:this.onChange.bind(this)},t)}}]),e}(s.a.Component);f.propTypes={value:s.a.PropTypes.string,assets:s.a.PropTypes.array,onChange:s.a.PropTypes.func};var y=function(t){function e(){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),m(e,[{key:"componentDidMount",value:function(){this.onAssetChange(this.props.asset)}},{key:"formatAmount",value:function(t){t||(t=""),"number"==typeof t&&(t=t.toString());for(var e=t.trim().replace(/,/g,"");"00"==e.substring(0,2);)e=e.substring(1);if("."===e[0])e="0"+e;else if(e.length){var n=Number(e);if(isNaN(n)&&(e=parseFloat(e),isNaN(e)))return"";var a=(e+"").split(".");e=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),a.length>1&&(e+="."+a[1])}return e}},{key:"_onChange",value:function(t){var e=t.target.value;this.setState({amount:e}),this.props.onChange({amount:e,asset:this.props.asset})}},{key:"onAssetChange",value:function(t){this.setState({selected_asset:t}),this.props.onChange({amount:this.props.amount,asset:t})}},{key:"render",value:function(){var t=this.formatAmount(this.props.amount);return s.a.createElement("div",{className:"amount-selector",style:this.props.style},s.a.createElement("div",{className:"float-right"},this.props.display_balance),s.a.createElement(c.a,{component:"label",content:this.props.label}),s.a.createElement("div",{className:"inline-label"},s.a.createElement("input",{disabled:this.props.disabled,type:"text",value:t||"",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex}),s.a.createElement("span",{className:"form-label select"},s.a.createElement(f,{ref:this.props.refCallback,value:this.props.asset.get("id"),assets:this.props.assets,onChange:this.onAssetChange.bind(this)}))))}}]),e}(s.a.Component);y.propTypes={label:s.a.PropTypes.string,asset:u.a.ChainAsset.isRequired,assets:s.a.PropTypes.array,amount:s.a.PropTypes.any,placeholder:s.a.PropTypes.string,onChange:s.a.PropTypes.func.isRequired,tabIndex:s.a.PropTypes.number},y.defaultProps={disabled:!1},y=n.i(d.a)(y),e.a=y},1190:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(1209),c=n.n(l),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),u=function(t){function e(){a(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={animateEnter:!1},t.timer=null,t}return o(e,t),p(e,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var t=this;this.timer=setTimeout(function(){t.timer&&t.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?s.a.createElement(c.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):s.a.createElement(this.props.component)}}]),e}(s.a.Component);u.defaultProps={component:"span",enterTimeout:2e3},e.a=u},1191:function(t,e,n){"use strict";var a=function(t){this.element=t,this.events={}};a.prototype.bind=function(t,e){void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this.element.addEventListener(t,e,!1)},a.prototype.unbind=function(t,e){var n=void 0!==e;this.events[t]=this.events[t].filter(function(a){return!(!n||a===e)||(this.element.removeEventListener(t,a,!1),!1)},this)},a.prototype.unbindAll=function(){for(var t in this.events)this.unbind(t)};var i=function(){this.eventElements=[]};i.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return void 0===e&&(e=new a(t),this.eventElements.push(e)),e},i.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},i.prototype.unbind=function(t,e,n){this.eventElement(t).unbind(e,n)},i.prototype.unbindAll=function(){for(var t=0;t<this.eventElements.length;t++)this.eventElements[t].unbindAll()},i.prototype.once=function(t,e,n){var a=this.eventElement(t),i=function(t){a.unbind(e,i),n(t)};a.bind(e,i)},t.exports=i},1192:function(t,e,n){"use strict";t.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()},1193:function(t,e,n){"use strict";var a=n(1195),i=n(1203),o=n(1204);t.exports={initialize:i,update:o,destroy:a}},1194:function(t,e,n){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},1195:function(t,e,n){"use strict";var a=n(1172),i=n(1175),o=n(1170);t.exports=function(t){var e=o.get(t);e&&(e.event.unbindAll(),i.remove(e.scrollbarX),i.remove(e.scrollbarY),i.remove(e.scrollbarXRail),i.remove(e.scrollbarYRail),a.removePsClasses(t),o.remove(t))}},1196:function(t,e,n){"use strict";function a(t,e){function n(t){return t.getBoundingClientRect()}var a=function(t){t.stopPropagation()};e.event.bind(e.scrollbarY,"click",a),e.event.bind(e.scrollbarYRail,"click",function(a){var i=a.pageY-window.pageYOffset-n(e.scrollbarYRail).top,s=i>e.scrollbarYTop?1:-1;r(t,"top",t.scrollTop+s*e.containerHeight),o(t),a.stopPropagation()}),e.event.bind(e.scrollbarX,"click",a),e.event.bind(e.scrollbarXRail,"click",function(a){var i=a.pageX-window.pageXOffset-n(e.scrollbarXRail).left,s=i>e.scrollbarXLeft?1:-1;r(t,"left",t.scrollLeft+s*e.containerWidth),o(t),a.stopPropagation()})}var i=n(1170),o=n(1173),r=n(1174);t.exports=function(t){a(t,i.get(t))}},1197:function(t,e,n){"use strict";function a(t,e){function n(n){var i=a+n*e.railXRatio,r=Math.max(0,e.scrollbarXRail.getBoundingClientRect().left)+e.railXRatio*(e.railXWidth-e.scrollbarXWidth);e.scrollbarXLeft=i<0?0:i>r?r:i,c(t,"left",o.toInt(e.scrollbarXLeft*(e.contentWidth-e.containerWidth)/(e.containerWidth-e.railXRatio*e.scrollbarXWidth))-e.negativeScrollAdjustment)}var a=null,i=null,s=function(e){n(e.pageX-i),l(t),e.stopPropagation(),e.preventDefault()},p=function(){o.stopScrolling(t,"x"),e.event.unbind(e.ownerDocument,"mousemove",s)};e.event.bind(e.scrollbarX,"mousedown",function(n){i=n.pageX,a=o.toInt(r.css(e.scrollbarX,"left"))*e.railXRatio,o.startScrolling(t,"x"),e.event.bind(e.ownerDocument,"mousemove",s),e.event.once(e.ownerDocument,"mouseup",p),n.stopPropagation(),n.preventDefault()})}function i(t,e){function n(n){var i=a+n*e.railYRatio,r=Math.max(0,e.scrollbarYRail.getBoundingClientRect().top)+e.railYRatio*(e.railYHeight-e.scrollbarYHeight);e.scrollbarYTop=i<0?0:i>r?r:i,c(t,"top",o.toInt(e.scrollbarYTop*(e.contentHeight-e.containerHeight)/(e.containerHeight-e.railYRatio*e.scrollbarYHeight)))}var a=null,i=null,s=function(e){n(e.pageY-i),l(t),e.stopPropagation(),e.preventDefault()},p=function(){o.stopScrolling(t,"y"),e.event.unbind(e.ownerDocument,"mousemove",s)};e.event.bind(e.scrollbarY,"mousedown",function(n){i=n.pageY,a=o.toInt(r.css(e.scrollbarY,"top"))*e.railYRatio,o.startScrolling(t,"y"),e.event.bind(e.ownerDocument,"mousemove",s),e.event.once(e.ownerDocument,"mouseup",p),n.stopPropagation(),n.preventDefault()})}var o=n(1172),r=n(1175),s=n(1170),l=n(1173),c=n(1174);t.exports=function(t){var e=s.get(t);a(t,e),i(t,e)}},1198:function(t,e,n){"use strict";function a(t,e){function n(n,a){var i=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===i&&a>0||i>=e.contentHeight-e.containerHeight&&a<0)return!e.settings.wheelPropagation}var o=t.scrollLeft;if(0===a){if(!e.scrollbarXActive)return!1;if(0===o&&n<0||o>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}var a=!1;e.event.bind(t,"mouseenter",function(){a=!0}),e.event.bind(t,"mouseleave",function(){a=!1});var r=!1;e.event.bind(e.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var p=o.matches(e.scrollbarX,":focus")||o.matches(e.scrollbarY,":focus");if(a||p){var u=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(u){if("IFRAME"===u.tagName)u=u.contentDocument.activeElement;else for(;u.shadowRoot;)u=u.shadowRoot.activeElement;if(i.isEditable(u))return}var d=0,h=0;switch(c.which){case 37:d=c.metaKey?-e.contentWidth:c.altKey?-e.containerWidth:-30;break;case 38:h=c.metaKey?e.contentHeight:c.altKey?e.containerHeight:30;break;case 39:d=c.metaKey?e.contentWidth:c.altKey?e.containerWidth:30;break;case 40:h=c.metaKey?-e.contentHeight:c.altKey?-e.containerHeight:-30;break;case 33:h=90;break;case 32:h=c.shiftKey?90:-90;break;case 34:h=-90;break;case 35:h=c.ctrlKey?-e.contentHeight:-e.containerHeight;break;case 36:h=c.ctrlKey?t.scrollTop:e.containerHeight;break;default:return}l(t,"top",t.scrollTop-h),l(t,"left",t.scrollLeft+d),s(t),r=n(d,h),r&&c.preventDefault()}}})}var i=n(1172),o=n(1175),r=n(1170),s=n(1173),l=n(1174);t.exports=function(t){a(t,r.get(t))}},1199:function(t,e,n){"use strict";function a(t,e){function n(n,a){var i=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===i&&a>0||i>=e.contentHeight-e.containerHeight&&a<0)return!e.settings.wheelPropagation}var o=t.scrollLeft;if(0===a){if(!e.scrollbarXActive)return!1;if(0===o&&n<0||o>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}function a(t){var e=t.deltaX,n=-1*t.deltaY;return void 0!==e&&void 0!==n||(e=-1*t.wheelDeltaX/6,n=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,n*=10),e!==e&&n!==n&&(e=0,n=t.wheelDelta),t.shiftKey?[-n,-e]:[e,n]}function i(e,n){var a=t.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(a){if(a.className.match(/ps-must-propagate/))return!0;if(!window.getComputedStyle(a).overflow.match(/(scroll|auto)/))return!1;var i=a.scrollHeight-a.clientHeight;if(i>0&&!(0===a.scrollTop&&n>0||a.scrollTop===i&&n<0))return!0;var o=a.scrollLeft-a.clientWidth;if(o>0&&!(0===a.scrollLeft&&e<0||a.scrollLeft===o&&e>0))return!0}return!1}function s(s){var c=a(s),p=c[0],u=c[1];i(p,u)||(l=!1,e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(u?r(t,"top",t.scrollTop-u*e.settings.wheelSpeed):r(t,"top",t.scrollTop+p*e.settings.wheelSpeed),l=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(p?r(t,"left",t.scrollLeft+p*e.settings.wheelSpeed):r(t,"left",t.scrollLeft-u*e.settings.wheelSpeed),l=!0):(r(t,"top",t.scrollTop-u*e.settings.wheelSpeed),r(t,"left",t.scrollLeft+p*e.settings.wheelSpeed)),o(t),l=l||n(p,u),l&&(s.stopPropagation(),s.preventDefault()))}var l=!1;void 0!==window.onwheel?e.event.bind(t,"wheel",s):void 0!==window.onmousewheel&&e.event.bind(t,"mousewheel",s)}var i=n(1170),o=n(1173),r=n(1174);t.exports=function(t){a(t,i.get(t))}},1200:function(t,e,n){"use strict";function a(t,e){e.event.bind(t,"scroll",function(){o(t)})}var i=n(1170),o=n(1173);t.exports=function(t){a(t,i.get(t))}},1201:function(t,e,n){"use strict";function a(t,e){function n(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}function a(){c||(c=setInterval(function(){if(!o.get(t))return void clearInterval(c);s(t,"top",t.scrollTop+p.top),s(t,"left",t.scrollLeft+p.left),r(t)},50))}function l(){c&&(clearInterval(c),c=null),i.stopScrolling(t)}var c=null,p={top:0,left:0},u=!1;e.event.bind(e.ownerDocument,"selectionchange",function(){t.contains(n())?u=!0:(u=!1,l())}),e.event.bind(window,"mouseup",function(){u&&(u=!1,l())}),e.event.bind(window,"keyup",function(){u&&(u=!1,l())}),e.event.bind(window,"mousemove",function(e){if(u){var n={x:e.pageX,y:e.pageY},o={left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight};n.x<o.left+3?(p.left=-5,i.startScrolling(t,"x")):n.x>o.right-3?(p.left=5,i.startScrolling(t,"x")):p.left=0,n.y<o.top+3?(o.top+3-n.y<5?p.top=-5:p.top=-20,i.startScrolling(t,"y")):n.y>o.bottom-3?(n.y-o.bottom+3<5?p.top=5:p.top=20,i.startScrolling(t,"y")):p.top=0,0===p.top&&0===p.left?l():a()}})}var i=n(1172),o=n(1170),r=n(1173),s=n(1174);t.exports=function(t){a(t,o.get(t))}},1202:function(t,e,n){"use strict";function a(t,e,n,a){function i(n,a){var i=t.scrollTop,o=t.scrollLeft,r=Math.abs(n),s=Math.abs(a);if(s>r){if(a<0&&i===e.contentHeight-e.containerHeight||a>0&&0===i)return!e.settings.swipePropagation}else if(r>s&&(n<0&&o===e.contentWidth-e.containerWidth||n>0&&0===o))return!e.settings.swipePropagation;return!0}function l(e,n){s(t,"top",t.scrollTop-n),s(t,"left",t.scrollLeft-e),r(t)}function c(){b=!0}function p(){b=!1}function u(t){return t.targetTouches?t.targetTouches[0]:t}function d(t){return!(!t.targetTouches||1!==t.targetTouches.length)||!(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE)}function h(t){if(d(t)){w=!0;var e=u(t);f.pageX=e.pageX,f.pageY=e.pageY,y=(new Date).getTime(),null!==g&&clearInterval(g),t.stopPropagation()}}function m(t){if(!w&&e.settings.swipePropagation&&h(t),!b&&w&&d(t)){var n=u(t),a={pageX:n.pageX,pageY:n.pageY},o=a.pageX-f.pageX,r=a.pageY-f.pageY;l(o,r),f=a;var s=(new Date).getTime(),c=s-y;c>0&&(v.x=o/c,v.y=r/c,y=s),i(o,r)&&(t.stopPropagation(),t.preventDefault())}}function _(){!b&&w&&(w=!1,clearInterval(g),g=setInterval(function(){return o.get(t)&&(v.x||v.y)?Math.abs(v.x)<.01&&Math.abs(v.y)<.01?void clearInterval(g):(l(30*v.x,30*v.y),v.x*=.8,void(v.y*=.8)):void clearInterval(g)},10))}var f={},y=0,v={},g=null,b=!1,w=!1;n?(e.event.bind(window,"touchstart",c),e.event.bind(window,"touchend",p),e.event.bind(t,"touchstart",h),e.event.bind(t,"touchmove",m),e.event.bind(t,"touchend",_)):a&&(window.PointerEvent?(e.event.bind(window,"pointerdown",c),e.event.bind(window,"pointerup",p),e.event.bind(t,"pointerdown",h),e.event.bind(t,"pointermove",m),e.event.bind(t,"pointerup",_)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",c),e.event.bind(window,"MSPointerUp",p),e.event.bind(t,"MSPointerDown",h),e.event.bind(t,"MSPointerMove",m),e.event.bind(t,"MSPointerUp",_)))}var i=n(1172),o=n(1170),r=n(1173),s=n(1174);t.exports=function(t){if(i.env.supportsTouch||i.env.supportsIePointer){a(t,o.get(t),i.env.supportsTouch,i.env.supportsIePointer)}}},1203:function(t,e,n){"use strict";var a=n(1172),i=n(1176),o=n(1170),r=n(1173),s={"click-rail":n(1196),"drag-scrollbar":n(1197),keyboard:n(1198),wheel:n(1199),touch:n(1202),selection:n(1201)},l=n(1200);t.exports=function(t,e){e="object"==typeof e?e:{},i.add(t,"ps-container");var n=o.add(t);n.settings=a.extend(n.settings,e),i.add(t,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(e){s[e](t)}),l(t),r(t)}},1204:function(t,e,n){"use strict";var a=n(1172),i=n(1175),o=n(1170),r=n(1173),s=n(1174);t.exports=function(t){var e=o.get(t);e&&(e.negativeScrollAdjustment=e.isNegativeScroll?t.scrollWidth-t.clientWidth:0,i.css(e.scrollbarXRail,"display","block"),i.css(e.scrollbarYRail,"display","block"),e.railXMarginWidth=a.toInt(i.css(e.scrollbarXRail,"marginLeft"))+a.toInt(i.css(e.scrollbarXRail,"marginRight")),e.railYMarginHeight=a.toInt(i.css(e.scrollbarYRail,"marginTop"))+a.toInt(i.css(e.scrollbarYRail,"marginBottom")),i.css(e.scrollbarXRail,"display","none"),i.css(e.scrollbarYRail,"display","none"),r(t),s(t,"top",t.scrollTop),s(t,"left",t.scrollLeft),i.css(e.scrollbarXRail,"display",""),i.css(e.scrollbarYRail,"display",""))}},1208:function(t,e,n){var a,i=i||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},a=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in a,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},r=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c="application/octet-stream",p=4e4,u=function(t){var e=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};setTimeout(e,p)},d=function(t,e,n){e=[].concat(e);for(var a=e.length;a--;){var i=t["on"+e[a]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){l(t)}}},h=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},m=function(e,l,p){p||(e=h(e));var m,_=this,f=e.type,y=f===c,v=function(){d(_,"writestart progress write writeend".split(" "))},g=function(){if((s||y&&r)&&t.FileReader){var a=new FileReader;return a.onloadend=function(){var e=s?a.result:a.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,_.readyState=_.DONE,v()},a.readAsDataURL(e),void(_.readyState=_.INIT)}if(m||(m=n().createObjectURL(e)),y)t.location.href=m;else{t.open(m,"_blank")||(t.location.href=m)}_.readyState=_.DONE,v(),u(m)};if(_.readyState=_.INIT,i)return m=n().createObjectURL(e),void setTimeout(function(){a.href=m,a.download=l,o(a),v(),u(m),_.readyState=_.DONE});g()},_=m.prototype,f=function(t,e,n){return new m(t,e||t.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=h(t)),navigator.msSaveOrOpenBlob(t,e)}:(_.abort=function(){},_.readyState=_.INIT=0,_.WRITING=1,_.DONE=2,_.error=_.onwritestart=_.onprogress=_.onwrite=_.onabort=_.onerror=_.onwriteend=null,f)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports?t.exports.saveAs=i:null!==n(1217)&&null!==n(1218)&&(a=function(){return i}.call(e,n,e,t),void 0!==a&&(t.exports=a))},1209:function(t,e,n){t.exports=n(1211)},1210:function(t,e,n){"use strict";var a=n(387);e.getReactDOM=function(){return a}},1211:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t){var e="transition"+t+"Timeout",n="transition"+t;return function(t){if(t[n]){if(null==t[e])return new Error(e+" wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof t[e])return new Error(e+" must be a number (in milliseconds)")}}}var s=n(10),l=n(89),c=n(1214),p=n(1212),u=function(t){function e(){var n,o,r;a(this,e);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=o=i(this,t.call.apply(t,[this].concat(c))),o._wrapChild=function(t){return l.createElement(p,{name:o.props.transitionName,appear:o.props.transitionAppear,enter:o.props.transitionEnter,leave:o.props.transitionLeave,appearTimeout:o.props.transitionAppearTimeout,enterTimeout:o.props.transitionEnterTimeout,leaveTimeout:o.props.transitionLeaveTimeout},t)},r=n,i(o,r)}return o(e,t),e.prototype.render=function(){return l.createElement(c,s({},this.props,{childFactory:this._wrapChild}))},e}(l.Component);u.displayName="ReactCSSTransitionGroup",u.propTypes={transitionName:p.propTypes.name,transitionAppear:l.PropTypes.bool,transitionEnter:l.PropTypes.bool,transitionLeave:l.PropTypes.bool,transitionAppearTimeout:r("Appear"),transitionEnterTimeout:r("Enter"),transitionLeaveTimeout:r("Leave")},u.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.exports=u},1212:function(t,e,n){"use strict";var a=n(89),i=n(1210),o=n(1216),r=n(389),s=n(390),l=17,c=a.createClass({displayName:"ReactCSSTransitionGroupChild",propTypes:{name:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.shape({enter:a.PropTypes.string,leave:a.PropTypes.string,active:a.PropTypes.string}),a.PropTypes.shape({enter:a.PropTypes.string,enterActive:a.PropTypes.string,leave:a.PropTypes.string,leaveActive:a.PropTypes.string,appear:a.PropTypes.string,appearActive:a.PropTypes.string})]).isRequired,appear:a.PropTypes.bool,enter:a.PropTypes.bool,leave:a.PropTypes.bool,appearTimeout:a.PropTypes.number,enterTimeout:a.PropTypes.number,leaveTimeout:a.PropTypes.number},transition:function(t,e,n){var a=i.getReactDOM().findDOMNode(this);if(!a)return void(e&&e());var s=this.props.name[t]||this.props.name+"-"+t,l=this.props.name[t+"Active"]||s+"-active",c=null,p=function(t){t&&t.target!==a||(clearTimeout(c),o.removeClass(a,s),o.removeClass(a,l),r.removeEndEventListener(a,p),e&&e())};o.addClass(a,s),this.queueClassAndNode(l,a),n?(c=setTimeout(p,n),this.transitionTimeouts.push(c)):r.addEndEventListener(a,p)},queueClassAndNode:function(t,e){this.classNameAndNodeQueue.push({className:t,node:e}),this.timeout||(this.timeout=setTimeout(this.flushClassNameAndNodeQueue,l))},flushClassNameAndNodeQueue:function(){this.isMounted()&&this.classNameAndNodeQueue.forEach(function(t){o.addClass(t.node,t.className)}),this.classNameAndNodeQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(t){clearTimeout(t)}),this.classNameAndNodeQueue.length=0},componentWillAppear:function(t){this.props.appear?this.transition("appear",t,this.props.appearTimeout):t()},componentWillEnter:function(t){this.props.enter?this.transition("enter",t,this.props.enterTimeout):t()},componentWillLeave:function(t){this.props.leave?this.transition("leave",t,this.props.leaveTimeout):t()},render:function(){return s(this.props.children)}});t.exports=c},1213:function(t,e,n){"use strict";var a=n(1215),i={getChildMapping:function(t,e){return t?a(t):t},mergeChildMappings:function(t,e){function n(n){return e.hasOwnProperty(n)?e[n]:t[n]}t=t||{},e=e||{};var a={},i=[];for(var o in t)e.hasOwnProperty(o)?i.length&&(a[o]=i,i=[]):i.push(o);var r,s={};for(var l in e){if(a.hasOwnProperty(l))for(r=0;r<a[l].length;r++){var c=a[l][r];s[a[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}};t.exports=i},1214:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(10),s=n(89),l=n(1213),c=n(167),p=function(t){function e(){var n,o,s;a(this,e);for(var c=arguments.length,p=Array(c),u=0;u<c;u++)p[u]=arguments[u];return n=o=i(this,t.call.apply(t,[this].concat(p))),o.state={children:l.getChildMapping(o.props.children)},o.performAppear=function(t){o.currentlyTransitioningKeys[t]=!0;var e=o.refs[t];e.componentWillAppear?e.componentWillAppear(o._handleDoneAppearing.bind(o,t)):o._handleDoneAppearing(t)},o._handleDoneAppearing=function(t){var e=o.refs[t];e.componentDidAppear&&e.componentDidAppear(),delete o.currentlyTransitioningKeys[t];var n=l.getChildMapping(o.props.children);n&&n.hasOwnProperty(t)||o.performLeave(t)},o.performEnter=function(t){o.currentlyTransitioningKeys[t]=!0;var e=o.refs[t];e.componentWillEnter?e.componentWillEnter(o._handleDoneEntering.bind(o,t)):o._handleDoneEntering(t)},o._handleDoneEntering=function(t){var e=o.refs[t];e.componentDidEnter&&e.componentDidEnter(),delete o.currentlyTransitioningKeys[t];var n=l.getChildMapping(o.props.children);n&&n.hasOwnProperty(t)||o.performLeave(t)},o.performLeave=function(t){o.currentlyTransitioningKeys[t]=!0;var e=o.refs[t];e.componentWillLeave?e.componentWillLeave(o._handleDoneLeaving.bind(o,t)):o._handleDoneLeaving(t)},o._handleDoneLeaving=function(t){var e=o.refs[t];e.componentDidLeave&&e.componentDidLeave(),delete o.currentlyTransitioningKeys[t];var n=l.getChildMapping(o.props.children);n&&n.hasOwnProperty(t)?o.performEnter(t):o.setState(function(e){var n=r({},e.children);return delete n[t],{children:n}})},s=n,i(o,s)}return o(e,t),e.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},e.prototype.componentDidMount=function(){var t=this.state.children;for(var e in t)t[e]&&this.performAppear(e)},e.prototype.componentWillReceiveProps=function(t){var e=l.getChildMapping(t.children),n=this.state.children;this.setState({children:l.mergeChildMappings(n,e)});var a;for(a in e){var i=n&&n.hasOwnProperty(a);!e[a]||i||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(a in n){var o=e&&e.hasOwnProperty(a);!n[a]||o||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},e.prototype.componentDidUpdate=function(){var t=this.keysToEnter;this.keysToEnter=[],t.forEach(this.performEnter);var e=this.keysToLeave;this.keysToLeave=[],e.forEach(this.performLeave)},e.prototype.render=function(){var t=[];for(var e in this.state.children){var n=this.state.children[e];n&&t.push(s.cloneElement(this.props.childFactory(n),{ref:e,key:e}))}var a=r({},this.props);return delete a.transitionLeave,delete a.transitionName,delete a.transitionAppear,delete a.transitionEnter,delete a.childFactory,delete a.transitionLeaveTimeout,delete a.transitionEnterTimeout,delete a.transitionAppearTimeout,delete a.component,s.createElement(this.props.component,a,t)},e}(s.Component);p.displayName="ReactTransitionGroup",p.propTypes={component:s.PropTypes.any,childFactory:s.PropTypes.func},p.defaultProps={component:"span",childFactory:c.thatReturnsArgument},t.exports=p},1215:function(t,e,n){"use strict";(function(e){function a(t,e,n,a){if(t&&"object"==typeof t){var i=t,o=void 0===i[n];o&&null!=e&&(i[n]=e)}}function i(t,e){if(null==t)return t;var n={};return o(t,a,n),n}var o=(n(388),n(391));n(65);void 0!==e&&n.i({NODE_ENV:"production"}),t.exports=i}).call(e,n(39))},1216:function(t,e,n){"use strict";function a(t,e){for(var n=t;n.parentNode;)n=n.parentNode;var a=n.querySelectorAll(e);return Array.prototype.indexOf.call(a,t)!==-1}var i=n(92),o={addClass:function(t,e){return/\s/.test(e)&&i(!1),e&&(t.classList?t.classList.add(e):o.hasClass(t,e)||(t.className=t.className+" "+e)),t},removeClass:function(t,e){return/\s/.test(e)&&i(!1),e&&(t.classList?t.classList.remove(e):o.hasClass(t,e)&&(t.className=t.className.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),t},conditionClass:function(t,e,n){return(n?o.addClass:o.removeClass)(t,e)},hasClass:function(t,e){return/\s/.test(e)&&i(!1),t.classList?!!e&&t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1},matchesSelector:function(t,e){return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||function(e){return a(t,e)}).call(t,e)}};t.exports=o},1217:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},1218:function(t,e){(function(e){t.exports=e}).call(e,{})},1225:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){return e.block_num===t.block_num?e.virtual_op-t.virtual_op:e.block_num-t.block_num}function s(t){return t?'"'+t.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}var l=n(1),c=n.n(l),p=n(21),u=n.n(p),d=n(1208),h=(n.n(d),n(392)),m=n(45),_=n(44),f=n(18),y=n(6),v=n(1190),g=n(1184),b=n.n(g),w=n(32),E=n.n(w);n.d(e,"b",function(){return T}),n.d(e,"a",function(){return S});var C=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),k=y.a.operations,T=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={limit:t.limit||20,csvExport:!1,headerHeight:85,filter:"all"},n}return o(e,t),C(e,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var t=this.refs.transactions;b.a.initialize(t),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var t=this.refs.header.offsetHeight;t!==this.state.headerHeight&&this.setState({headerHeight:t})}},{key:"shouldComponentUpdate",value:function(t,e){if(!f.a.are_equal_shallow(this.props.accountsList,t.accountsList))return!0;if(this.props.maxHeight!==t.maxHeight)return!0;if(this.state.headerHeight!==e.headerHeight)return!0;if(this.state.filter!==e.filter)return!0;if(this.props.customFilter&&(!f.a.are_equal_shallow(this.props.customFilter.fields,t.customFilter.fields)||!f.a.are_equal_shallow(this.props.customFilter.values,t.customFilter.values)))return!0;if(this.props.maxHeight!==t.maxHeight)return!0;if(e.limit!==this.state.limit||e.csvExport!==this.state.csvExport)return!0;for(var n=0;n<t.accountsList.length;++n){var a=t.accountsList[n],i=this.props.accountsList[n];if(a&&i&&a.get("history")!==i.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var t=document.getElementById("csv_export_container"),e=t.childNodes,a="",i=!0,o=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var p=l.value,u=p.childNodes;""!==a&&(a+="\n"),a+=[s(u[0]),s(u[1]),s(u[2]),s(u[3])].join(",")}}catch(t){o=!0,r=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw r}}var h=new Blob([a],{type:"text/csv;charset=utf-8"}),m=new Date;n.i(d.saveAs)(h,"btshist-"+m.getFullYear()+"-"+m.getMonth()+"-"+m.getDate()+".csv")}if(!this.props.fullHeight){var _=this.refs.transactions;b.a.update(_),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(t,e,n){var a=[],i=new Set,o=!0,r=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var p=l.value;if(p){var u=p.get("history");u&&(a=a.concat(u.toJS().filter(function(t){return!i.has(t.id)&&i.add(t.id)})))}}}catch(t){r=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(r)throw s}}return e&&(a=a.filter(function(t){return t.op[0]===k[e]})),n&&(a=a.filter(function(t){return n.fields.reduce(function(e,a){switch(a){case"asset_id":return e&&t.op[1].amount[a]===n.values[a];default:return e&&t.op[1][a]===n.values[a]}},!0)})),a}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(t){this.setState({filter:t.target.value})}},{key:"render",value:function(){var t=this.props,e=t.accountsList,n=t.compactView,a=t.filter,i=t.customFilter,o=t.style,s=t.maxHeight,l=this.state,p=l.limit,d=l.headerHeight,m=1===e.length&&e[0]?e[0].get("id"):null,_=this._getHistory(e,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:a,i).sort(r),f=_.length;o=o?o:{},o.width="100%",o.height="100%";var y=null;y=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"].map(function(t){return c.a.createElement("option",{value:t,key:t},E.a.translate("transaction.trxTypes."+t))});var g=_.length?_.slice(0,p).map(function(t){return c.a.createElement(h.a,{key:t.id,op:t.op,result:t.result,block:t.block_num,current:m,hideFee:!0,inverted:!1,hideOpLabel:n})}):c.a.createElement("tr",null,c.a.createElement("td",{colSpan:n?"2":"3"},c.a.createElement(u.a,{content:"operation.no_recent"})));return c.a.createElement("div",{className:"recent-transactions no-overflow",style:o},c.a.createElement("div",{className:"generic-bordered-box"},c.a.createElement("div",{ref:"header"},c.a.createElement("div",{className:"block-content-header"},c.a.createElement("span",null,this.props.title?this.props.title:c.a.createElement(u.a,{content:"account.recent"})),f>0?c.a.createElement("span",{style:{fontSize:"60%",textTransform:"lowercase"}}," (",c.a.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":E.a.translate("transaction.csv_tip"),"data-place":"bottom"},c.a.createElement(u.a,{content:"transaction.csv"})),")"):null,this.props.showFilters?c.a.createElement("div",{className:"float-right"},c.a.createElement("select",{"data-place":"left","data-tip":E.a.translate("tooltip.filter_ops"),style:{paddingTop:0},className:"bts-select",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},y)):null),c.a.createElement("table",{className:"table"+(n?" compact":"")},c.a.createElement("thead",null,c.a.createElement("tr",null,n?null:c.a.createElement("th",{className:"column-hide-tiny",style:{width:"20%"}},c.a.createElement(u.a,{content:"explorer.block.op"})),c.a.createElement("th",null,c.a.createElement(u.a,{content:"account.votes.info"})))))),c.a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:s-d},ref:"transactions"},c.a.createElement("table",{className:"table"+(n?" compact":"")},c.a.createElement(v.a,{component:"tbody",transitionName:"newrow"},g))),f>0&&this.state.csvExport&&c.a.createElement("div",{id:"csv_export_container",style:{display:"none"}},c.a.createElement("div",null,c.a.createElement("div",null,"DATE"),c.a.createElement("div",null,"OPERATION"),c.a.createElement("div",null,"MEMO"),c.a.createElement("div",null,"AMOUNT")),_.map(function(t){return c.a.createElement(h.a,{key:t.id,op:t.op,result:t.result,block:t.block_num,inverted:!1,csvExportMode:!0})}))),this.props.showMore&&f>this.props.limit||p<f?c.a.createElement("div",{className:"account-info more-button"},c.a.createElement("button",{className:"button outline small",onClick:this._onIncreaseLimit.bind(this)},c.a.createElement(u.a,{content:"account.more"}))):null)}}]),e}(c.a.Component);T.propTypes={accountsList:m.a.ChainAccountsList.isRequired,compactView:c.a.PropTypes.bool,limit:c.a.PropTypes.number,maxHeight:c.a.PropTypes.number,fullHeight:c.a.PropTypes.bool,showFilters:c.a.PropTypes.bool},T.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},T=n.i(_.a)(T,{keep_updating:!0});var S=function(t){function e(){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),C(e,[{key:"render",value:function(){return c.a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),e}(c.a.Component);S.propTypes={asset:m.a.ChainAsset.isRequired,to:m.a.ChainAccount.isRequired,fromAccount:m.a.ChainAccount.isRequired},S.defaultProps={asset:"1.3.0"},S=n.i(_.a)(S)},1240:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(257),c=n(45),p=n(44),u=n(1181),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),h=function(t){function e(){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),d(e,[{key:"render",value:function(){var t=this.props.asset.get("id"),e=this.props.account.getIn(["balances",t]);return e?s.a.createElement(u.a,{balance:e}):s.a.createElement("span",null,"0 ",s.a.createElement(l.a,{name:this.props.asset.get("symbol")}))}}]),e}(s.a.Component);h.propTypes={account:c.a.ChainAccount.isRequired,asset:c.a.ChainAsset.isRequired},e.a=n.i(p.a)(h,{keep_updating:!0})},1243:function(t,e,n){"use strict";function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.b.BASE+h.b.COINS_LIST;return fetch(t).then(function(t){return t.json().then(function(t){return t})}).catch(function(e){console.log("error fetching blocktrades list of coins",e,t)})}function i(t){var e=t.inputCoinType,n=t.outputCoinType,a=t.outputAddress,i=t.url,o=void 0===i?h.b.BASE_OL:i,r=t.stateCallback,s={inputCoinType:e,outputCoinType:n,outputAddress:a},l=JSON.stringify(s);fetch(o+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:l}).then(function(t){t.json().then(function(t){var e={address:t.inputAddress||"unknown",memo:t.inputMemo,error:t.error||null};r&&r(e)},function(t){r&&r({address:"unknown",memo:null})})},function(t){r&&r({address:"unknown",memo:null})}).catch(function(t){console.log("fetch error:",t)})}function o(t){var e=t.allCoins,n=t.backer,a={};e.forEach(function(t){return a[t.coinType]=t});var i=[];return e.forEach(function(t){t.walletSymbol.startsWith(n+".")&&t.backingCoinType&&a[t.backingCoinType]&&i.push({name:a[t.backingCoinType].name,walletType:a[t.backingCoinType].walletType,backingCoinType:a[t.backingCoinType].walletSymbol,symbol:t.walletSymbol,supportsMemos:a[t.backingCoinType].supportsOutputMemos})}),i}function r(t){var e=t.url,n=void 0===e?h.b.BASE:e,a=t.walletType,i=t.newAddress;return i?fetch(n+"/wallets/"+a+"/address-validator?address="+encodeURIComponent(i),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json().then(function(t){return t.isValid})}).catch(function(t){console.log("validate error:",t)}):new Promise(function(t){return t()})}function s(t){return m.has("history_address_"+t)}function l(t){var e=t.wallet,n=t.addresses;m.set("history_address_"+e,n)}function c(t){return m.get("history_address_"+t,[])}function p(t){var e=t.wallet,n=t.address;m.set("history_address_last_"+e,n)}function u(t){return m.get("history_address_last_"+t,"")}var d=n(93),h=n(394);e.a=a,e.e=i,e.b=o,e.d=r,n.d(e,"c",function(){return _});var m=new d.a(""),_={has:s,set:l,get:c,setLast:p,getLast:u}},1266:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(33),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=function(){function t(){a(this,t),this.current_blocktrades_address_cache_version_string="1"}return o(t,[{key:"getIndexForDepositKeyInExchange",value:function(t,e,n){return[this.current_blocktrades_address_cache_version_string,t,e,n].reduce(function(t,e){return t.concat("[",e,"]")},"")}},{key:"getCachedInputAddress",value:function(t,e,n,a){var o=i.a.getWallet();o.deposit_keys=o.deposit_keys||{},o.deposit_keys[t]=o.deposit_keys[t]||{};var r=this.getIndexForDepositKeyInExchange(e,n,a);o.deposit_keys[t][r]=o.deposit_keys[t][r]||[];var s=o.deposit_keys[t][r].length;return s?o.deposit_keys[t][r][s-1]:null}},{key:"cacheInputAddress",value:function(t,e,n,a,o,r){var s=i.a.getWallet();s.deposit_keys=s.deposit_keys||{},s.deposit_keys[t]=s.deposit_keys[t]||{};var l=this.getIndexForDepositKeyInExchange(e,n,a);s.deposit_keys[t][l]=s.deposit_keys[t][l]||[],s.deposit_keys[t][l].push({address:o,memo:r}),i.a._updateWallet()}}]),t}();e.a=r},1322:function(t,e,n){"use strict";(function(t){function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(128),c=n.n(l),p=n(21),u=n.n(p),d=n(45),h=n(44),m=n(18),_=n(1181),f=n(32),y=n.n(f),v=n(1187),g=n(163),b=n(129),w=n.n(b),E=n(38),C=n.n(E),k=n(1243),T=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),S=function(e){function r(t){a(this,r);var e=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return e.state={withdraw_amount:e.props.amount_to_withdraw,withdraw_address:k.c.getLast(t.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:k.c.getLast(t.output_wallet_type),memo:"",withdraw_address_first:!0,empty_withdraw_value:!1},e._validateAddress(e.state.withdraw_address,t),e}return o(r,e),T(r,[{key:"onMemoChanged",value:function(t){this.setState({memo:t.target.value})}},{key:"onWithdrawAmountChange",value:function(t){var e=t.amount;t.asset;this.setState({withdraw_amount:e,empty_withdraw_value:!parseInt(e,10)})}},{key:"onSelectChanged",value:function(t,e){var n=k.c.get(this.props.output_wallet_type)[t];k.c.setLast({wallet:this.props.output_wallet_type,address:n}),this.setState({withdraw_address_selected:n,options_is_valid:!1,withdraw_address:n,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null}),this._validateAddress(n)}},{key:"onWithdrawAddressChanged",value:function(t){var e=t.target.value.trim();this.setState({withdraw_address:e,withdraw_address_check_in_progress:!0,withdraw_address_selected:e,withdraw_address_is_valid:null}),this._validateAddress(e)}},{key:"_validateAddress",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;n.i(k.d)({url:a.url,walletType:a.output_wallet_type,newAddress:t}).then(function(n){e.state.withdraw_address===t&&e.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:n})})}},{key:"onSubmit",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseInt(this.state.withdraw_amount)){if(k.c.has(this.props.output_wallet_type)){var e=k.c.get(this.props.output_wallet_type);e.indexOf(this.state.withdraw_address)==-1&&(e.push(this.state.withdraw_address),k.c.set({wallet:this.props.output_wallet_type,addresses:e}))}else{var n=[];n.push(this.state.withdraw_address),k.c.set({wallet:this.props.output_wallet_type,addresses:n})}k.c.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,i=m.a.get_asset_precision(a.get("precision")),o=this.state.withdraw_amount.replace(/,/g,"");console.log("withdraw_amount: ",o),g.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),parseInt(o*i,10),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new t(this.state.memo,"utf-8"):"")),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else C.a.publish(this.getWithdrawModalId(),"open")}},{key:"onSubmitConfirmation",value:function(){if(C.a.publish(this.getWithdrawModalId(),"close"),k.c.has(this.props.output_wallet_type)){var e=k.c.get(this.props.output_wallet_type);e.indexOf(this.state.withdraw_address)==-1&&(e.push(this.state.withdraw_address),k.c.set({wallet:this.props.output_wallet_type,addresses:e}))}else{var n=[];n.push(this.state.withdraw_address),k.c.set({wallet:this.props.output_wallet_type,addresses:n})}k.c.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,i=m.a.get_asset_precision(a.get("precision")),o=this.state.withdraw_amount.replace(/,/g,"");console.log("withdraw_amount: ",o),g.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),parseInt(o*i,10),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new t(this.state.memo,"utf-8"):""))}},{key:"onDropDownList",value:function(){k.c.has(this.props.output_wallet_type)&&(this.state.options_is_valid===!1&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),this.state.options_is_valid===!0&&this.setState({options_is_valid:!1}))}},{key:"getWithdrawModalId",value:function(){return"confirmation"}},{key:"onAccountBalance",value:function(){Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))&&this.setState({withdraw_amount:this.props.balance.get("balance")/m.a.get_asset_precision(this.props.asset.get("precision"))})}},{key:"render",value:function(){var t=this.state,e=t.withdraw_address_selected,n=t.memo,a=k.c.get(this.props.output_wallet_type),i=null,o=this.props.account.get("balances").toJS();if(Object.keys(o).length>0){var r=this.props.asset.get("id");i=r?s.a.createElement("span",null,s.a.createElement(u.a,{component:"span",content:"transfer.available"}),": ",s.a.createElement("span",{className:"set-cursor",onClick:this.onAccountBalance.bind(this)},s.a.createElement(_.a,{balance:o[r]}))):"No funds"}else i="No funds";var l=this.getWithdrawModalId(),p=null,d=null,h=null;this.state.options_is_valid&&(d=s.a.createElement("div",{className:a.length?"blocktrades-options":"blocktrades-disabled-options"},a.map(function(t,e){return s.a.createElement("a",{key:e,onClick:this.onSelectChanged.bind(this,e)},t)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(p=s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},s.a.createElement(u.a,{content:"gateway.valid_address",coin_type:this.props.output_coin_type})),h=s.a.createElement(w.a,{id:l,overlay:!0},s.a.createElement(c.a,{close:l},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("label",null,s.a.createElement(u.a,{content:"modal.confirmation.title"})),s.a.createElement("br",null),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitConfirmation.bind(this),value:y.a.translate("modal.confirmation.accept")}),s.a.createElement(c.a,{close:l},s.a.createElement("a",{href:!0,className:"secondary button"},s.a.createElement(u.a,{content:"modal.confirmation.cancel"})))))));var m=1,f=null;return this.props.output_supports_memos&&(f=s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(u.a,{component:"span",content:"transfer.memo"})),s.a.createElement("textarea",{rows:"1",value:n,tabIndex:m++,onChange:this.onMemoChanged.bind(this)}))),s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,s.a.createElement(u.a,{content:"gateway.withdraw_coin",coin:this.props.output_coin_name,symbol:this.props.output_coin_symbol}))),s.a.createElement("div",{className:"content-block"},s.a.createElement(v.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.asset.get("id"),assets:[this.props.asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:i}),this.state.empty_withdraw_value?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.valid"})):null),s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(u.a,{component:"span",content:"modal.withdraw.address"})),s.a.createElement("div",{className:"blocktrades-select-dropdown"},s.a.createElement("div",{className:"inline-label"},s.a.createElement("input",{type:"text",value:e,tabIndex:"4",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:"off"}),s.a.createElement("span",{onClick:this.onDropDownList.bind(this)},"▼"))),s.a.createElement("div",{className:"blocktrades-position-options"},d),p),f,s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmit.bind(this),value:y.a.translate("modal.withdraw.submit")}),s.a.createElement(c.a,{close:this.props.modal_id},s.a.createElement("a",{href:!0,className:"secondary button"},s.a.createElement(u.a,{content:"account.perm.cancel"})))),h))}}]),r}(s.a.Component);S.propTypes={account:d.a.ChainAccount.isRequired,issuer:d.a.ChainAccount.isRequired,asset:d.a.ChainAsset.isRequired,output_coin_name:s.a.PropTypes.string.isRequired,output_coin_symbol:s.a.PropTypes.string.isRequired,output_coin_type:s.a.PropTypes.string.isRequired,url:s.a.PropTypes.string,output_wallet_type:s.a.PropTypes.string,output_supports_memos:s.a.PropTypes.bool.isRequired,amount_to_withdraw:s.a.PropTypes.string,balance:d.a.ChainObject},e.a=n.i(h.a)(S,{keep_updating:!0})}).call(e,n(2).Buffer)},1405:function(t,e,n){"use strict";(function(t){function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(45),c=n(44),p=n(21),u=n.n(p),d=n(51),h=n.n(d),m=n(265),_=n(163),f=n(63),y=n(1240),v=n(18),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),b=function(e){function n(t){a(this,n);var e=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.state={action:t.viewSettings.get("bktAction","deposit"),min:50,max:25e3},e}return o(n,e),g(n,[{key:"_renderDeposits",value:function(){return s.a.createElement("iframe",{style:{width:"100%",border:0,minHeight:800},src:"https://bitkapital.com/kapital.html?u="+this.props.account.get("name")})}},{key:"_renderWithdrawals",value:function(){return s.a.createElement("form",{onSubmit:this._onSubmit.bind(this)},s.a.createElement("div",{style:{padding:"20px 0"}},s.a.createElement(u.a,{content:"gateway.balance"}),":  ",s.a.createElement("span",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(y.a,{account:this.props.account.get("name"),asset:this.props.asset.get("symbol")}))),s.a.createElement("label",null,s.a.createElement(u.a,{content:"exchange.quantity"}),s.a.createElement("input",{ref:"amount",required:!0,id:"amount",type:"number",min:this.state.min,max:this.state.max})),s.a.createElement("label",null,s.a.createElement(u.a,{content:"gateway.iban"}),s.a.createElement("input",{ref:"iban",required:!0,id:"iban",type:"text"})),s.a.createElement("button",{className:"button",type:"submit"},s.a.createElement(u.a,{content:"gateway.withdraw_now"})))}},{key:"changeAction",value:function(t){this.setState({action:t}),f.a.changeViewSetting({bktAction:t})}},{key:"_onSubmit",value:function(e){var n=this;e.preventDefault();var a=this.state,i=a.min,o=a.max,r=this.props,s=r.asset,l=r.account,c=r.bitKapital,p=parseInt(this.refs.amount.value,10),u=this.refs.iban.value;console.log("amount:",p,"iban:",u);var d=v.a.get_asset_precision(s.get("precision"));p<i||p>o||_.a.transfer(l.get("id"),c.get("id"),parseInt(p*d,10),s.get("id"),new t("BOZDURMA - "+u.toUpperCase(),"utf-8"),null,s.get("id")).then(function(){m.a.unlisten(n.onTrxIncluded),m.a.listen(n.onTrxIncluded)})}},{key:"onTrxIncluded",value:function(t){t.included&&t.broadcasted_transaction?(m.a.unlisten(this.onTrxIncluded),m.a.reset()):t.closed&&(m.a.unlisten(this.onTrxIncluded),m.a.reset())}},{key:"render",value:function(){var t=this.props,e=t.jianjolly,n=t.onay,a=t.account,i=this.state.action;return e.get("whitelisted_accounts").includes(a.get("id"))||n.get("whitelisted_accounts").includes(a.get("id"))?s.a.createElement("div",{className:"BitKapital"},s.a.createElement("div",{className:"content-block"},s.a.createElement("div",{style:{paddingBottom:15}},s.a.createElement("div",{style:{marginRight:10},onClick:this.changeAction.bind(this,"deposit"),className:h()("button","deposit"===i?"active":"outline")},s.a.createElement(u.a,{content:"gateway.deposit"})),s.a.createElement("div",{onClick:this.changeAction.bind(this,"withdraw"),className:h()("button","withdraw"===i?"active":"outline")},s.a.createElement(u.a,{content:"gateway.withdraw"}))),"deposit"===i?this._renderDeposits():this._renderWithdrawals())):s.a.createElement("div",{className:"BitKapital"},s.a.createElement("div",{className:"content-block"},s.a.createElement("iframe",{style:{width:"100%",border:0,minHeight:1730},src:"https://www.123contactform.com/sf.php?s=123contactform-2315816&control23748168="+a.get("name")})))}}]),n}(s.a.Component);b.propTypes={jianjolly:l.a.ChainAccount.isRequired,onay:l.a.ChainAccount.isRequired,bitKapital:l.a.ChainAccount.isRequired,asset:l.a.ChainAsset.isRequired},b.defaultProps={jianjolly:"1.2.126253",bitKapital:"1.2.130090",onay:"1.2.139289",asset:"KAPITAL"},e.a=n.i(c.a)(b)}).call(e,n(2).Buffer)},1406:function(t,e,n){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),l=n.n(s),c=n(1408),p=n(21),u=n.n(p),d=n(62),h=(n.n(d),n(46)),m=n(63),_=n(1225),f=n(24),y=n.n(f),v=n(51),g=n.n(v),b=n(130),w=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),E=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={activeCoin:n._getActiveCoin(t,{action:"deposit"}),action:t.viewSettings.get(t.provider+"Action","deposit")},n}return r(e,t),w(e,[{key:"_getActiveCoin",value:function(t,e){var n=t.viewSettings.get("activeCoin_"+t.provider+"_"+e.action,null),a=null;return"blocktrades"==t.provider&&"deposit"==e.action&&(a="BTC"),"openledger"==t.provider&&"deposit"==e.action&&(a="BTC"),"blocktrades"==t.provider&&"withdraw"==e.action&&(a="TRADE.BTC"),"openledger"==t.provider&&"withdraw"==e.action&&(a="OPEN.BTC"),n?n:a}},{key:"componentWillReceiveProps",value:function(t){t.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(t,this.state.action)})}},{key:"onSelectCoin",value:function(t){this.setState({activeCoin:t.target.value});var e={};e["activeCoin_"+this.props.provider+"_"+this.state.action]=t.target.value,m.a.changeViewSetting(e)}},{key:"changeAction",value:function(t){var e=this._getActiveCoin(this.props,{action:t});this.setState({action:t,activeCoin:e}),m.a.changeViewSetting(a({},this.props.provider+"Action",t))}},{key:"render",value:function(){var t=this,e=this.props,n=e.coins,a=e.account,i=e.provider,o=this.state,r=o.activeCoin,s=o.action;if(!n.length)return l.a.createElement(b.a,null);var p=n.filter(function(t){return!(!t||!t.symbol)}),d=p.map(function(t){var e="deposit"===s?t.backingCoinType.toUpperCase():t.symbol;return l.a.createElement("option",{value:e,key:t.symbol},e)}).filter(function(t){return null!==t}),h=p.filter(function(t){return"deposit"===s?t.backingCoinType.toUpperCase()===r:t.symbol===r})[0];h||(h=p[0]);var m={blocktrades:{name:"blocktrades",id:"1.2.32567",support:"support@blocktrades.us"},openledger:{name:"openledger-wallet",id:"1.2.96397",support:"opensupport@blocktrades.us"}},f=m[i],v="deposit"===this.state.action;return l.a.createElement("div",{style:this.props.style},l.a.createElement("div",{style:{paddingBottom:15}},l.a.createElement(u.a,{component:"h5",content:"gateway.gateway_text"})),l.a.createElement("div",{style:{paddingBottom:15}},l.a.createElement("div",{style:{marginRight:10},onClick:this.changeAction.bind(this,"deposit"),className:g()("button","deposit"===s?"active":"outline")},l.a.createElement(u.a,{content:"gateway.deposit"})),l.a.createElement("div",{onClick:this.changeAction.bind(this,"withdraw"),className:g()("button","withdraw"===s?"active":"outline")},l.a.createElement(u.a,{content:"gateway.withdraw"}))),h?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement(u.a,{content:"gateway.choose_"+s}),": "),l.a.createElement("select",{style:{marginLeft:5,display:"inline",maxWidth:"15rem"},className:"external-coin-types bts-select",onChange:this.onSelectCoin.bind(this),value:r},d)),l.a.createElement("div",{style:{marginBottom:15}},l.a.createElement(c.a,{key:i+"."+h.symbol,gateway:i,issuer_account:f.name,account:a,deposit_asset:h.backingCoinType.toUpperCase(),deposit_asset_name:h.name,deposit_coin_type:h.backingCoinType.toLowerCase(),deposit_account:h.depositAccount,deposit_wallet_type:h.walletType,receive_asset:h.symbol,receive_coin_type:h.symbol.toLowerCase(),supports_output_memos:h.supportsMemos,action:this.state.action}),l.a.createElement("div",{style:{padding:15}},l.a.createElement(u.a,{content:"gateway.support_block"})," ",l.a.createElement("a",{href:"mailto:"+f.support},f.support))),h&&h.symbol?l.a.createElement(_.a,{asset:h.symbol,fromAccount:v?f.id:this.props.account.get("id"),to:v?this.props.account.get("id"):f.id},function(e){var n=e.asset,a=e.to,i=e.fromAccount;return l.a.createElement(_.b,{accountsList:y.a.List([t.props.account.get("id")]),limit:10,compactView:!0,fullHeight:!0,filter:"transfer",title:l.a.createElement(u.a,{content:"gateway.recent_"+t.state.action}),customFilter:{fields:["to","from","asset_id"],values:{to:a.get("id"),from:i.get("id"),asset_id:n.get("id")}}})}):null):null)}}]),e}(l.a.Component);e.a=n.i(d.connect)(E,{listenTo:function(){return[h.a]},getProps:function(){return{viewSettings:h.a.getState().viewSettings}}})},1407:function(t,e,n){"use strict";(function(t){function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),l=n.n(s),c=n(21),p=n.n(c),u=n(45),d=n(44),h=n(129),m=n.n(h),_=n(128),f=n.n(_),y=n(38),v=n.n(y),g=n(1240),b=n(1322),w=n(1266),E=n(18),C=n(163),k=n(265),T=n(394),S=function(){function t(t,e){var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);a=!0);}catch(t){i=!0,o=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),A=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),O=function(e){function n(t){i(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.state={error:null,conversion_memo:null},e}return r(n,e),A(n,[{key:"onTrxIncluded",value:function(t){t.included&&t.broadcasted_transaction?(k.a.unlisten(this.onTrxIncluded),k.a.reset()):t.closed&&(k.a.unlisten(this.onTrxIncluded),k.a.reset())}},{key:"onConvert",value:function(){var e=this,n=this.props.input_coin_type,a=this.props.output_coin_type,i=JSON.stringify({inputCoinType:n,outputCoinType:a,outputAddress:this.props.account_name,inputMemo:"blocktrades conversion: "+n+"to"+a});fetch(this.props.url+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:i}).then(function(i){i.json().then(function(i){if(i.inputCoinType!=n||i.outputCoinType!=a)throw Error("unexpected reply from initiate-trade");if(n==i.inputCoinType&&a==i.outputCoinType&&!isNaN(e.props.amount)){e.setState({conversion_memo:i.inputMemo}),e.setState({error:null});var o=E.a.get_asset_precision(e.props.asset.get("precision")),r=e.props.amount.replace(/,/g,"");C.a.transfer(e.props.account_id,"1.2.32567",parseInt(r*o,10),e.props.asset.get("id"),e.state.conversion_memo?new t(e.state.conversion_memo,"utf-8"):e.state.conversion_memo,null,"1.3.0").then(function(){k.a.unlisten(e.onTrxIncluded),k.a.listen(e.onTrxIncluded)}).catch(function(t){var n=t.message?t.message.split("\n")[1]:null;console.log("error: ",t,n),e.setState({error:n})})}},function(t){e.setState({conversion_memo:null})})},function(t){e.setState({conversion_memo:null})})}},{key:"render",value:function(){var t="button disabled";return Object.keys(this.props.account_balances.toJS()).includes(this.props.asset.get("id"))&&!(this.props.amount.indexOf(" ")>=0)&&!isNaN(this.props.amount)&&this.props.amount>0&&this.props.amount<=this.props.balance.toJS().balance/E.a.get_asset_precision(this.props.asset.get("precision"))&&(t="button"),l.a.createElement("span",null,l.a.createElement("button",{className:t,onClick:this.onConvert.bind(this)},l.a.createElement(p.a,{content:""}),l.a.createElement(p.a,{content:"gateway.convert_now"})," "))}}]),n}(l.a.Component);O.propTypes={balance:u.a.ChainObject,asset:u.a.ChainAsset.isRequired,input_coin_type:l.a.PropTypes.string.isRequired,output_coin_type:l.a.PropTypes.string.isRequired,account_name:l.a.PropTypes.string.isRequired,account_id:l.a.PropTypes.string.isRequired,url:l.a.PropTypes.string.isRequired},O=n.i(d.a)(O);var N=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),A(e,[{key:"render",value:function(){var t=l.a.createElement(O,{asset:this.props.asset.get("id"),input_coin_type:this.props.input_coin_type,output_coin_type:this.props.output_coin_type,account_name:this.props.account_name,amount:this.props.amount,account_id:this.props.account_id,account_balances:this.props.account_balances,url:this.props.url,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]});return l.a.createElement("span",null,t)}}]),e}(l.a.Component);N.propTypes={account:u.a.ChainAccount.isRequired,asset:u.a.ChainAsset.isRequired,input_coin_type:l.a.PropTypes.string.isRequired,output_coin_type:l.a.PropTypes.string.isRequired,account_name:l.a.PropTypes.string.isRequired,account_id:l.a.PropTypes.string.isRequired,url:l.a.PropTypes.string.isRequired},N=n.i(d.a)(N);var P=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),A(e,[{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.gateway+"_bridge"}},{key:"onWithdraw",value:function(){v.a.publish(this.getWithdrawModalId(),"open")}},{key:"render",value:function(){var t=this.getWithdrawModalId(),e="button disabled";return Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))&&!(this.props.amount_to_withdraw.indexOf(" ")>=0)&&!isNaN(this.props.amount_to_withdraw)&&this.props.amount_to_withdraw>0&&this.props.amount_to_withdraw<=this.props.balance.toJS().balance/E.a.get_asset_precision(this.props.asset.get("precision"))&&(e="button"),l.a.createElement("span",null,l.a.createElement("span",null,l.a.createElement("button",{className:e,onClick:this.onWithdraw.bind(this)},l.a.createElement(p.a,{content:""}),l.a.createElement(p.a,{content:"gateway.withdraw_now"})," ")),l.a.createElement(m.a,{id:t,overlay:!0},l.a.createElement(f.a,{close:t},l.a.createElement("a",{href:"#",className:"close-button"},"×")),l.a.createElement("br",null),l.a.createElement("div",{className:"grid-block vertical"},l.a.createElement(b.a,{key:""+this.props.key,account:this.props.account.get("name"),issuer:this.props.issuer,asset:this.props.asset.get("id"),output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,modal_id:t,url:this.props.url,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]}))))}}]),e}(l.a.Component);P.propTypes={account:u.a.ChainAccount.isRequired,asset:u.a.ChainAsset.isRequired,balance:u.a.ChainObject,url:l.a.PropTypes.string.isRequired},P=n.i(d.a)(P);var j=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),A(e,[{key:"render",value:function(){var t=l.a.createElement(P,{key:this.props.key,account:this.props.account.get("name"),issuer:this.props.issuer,asset:this.props.asset.get("id"),output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,url:this.props.url,gateway:this.props.gateway,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]});return l.a.createElement("span",null,t)}}]),e}(l.a.Component);j.propTypes={account:u.a.ChainAccount.isRequired,asset:u.a.ChainAsset.isRequired,output_coin_type:l.a.PropTypes.string.isRequired,url:l.a.PropTypes.string.isRequired},j=n.i(d.a)(j);var x=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.refresh_interval=12e4,n.deposit_address_cache=new w.a,n.coin_info_request_states={request_in_progress:0,request_complete:1,request_failed:2},n.estimation_directions={output_from_input:0,input_from_output:1},n.state={coin_symbol:"btc",key_for_withdrawal_dialog:"btc",supports_output_memos:"",url:T.b.BASE,error:null,deposit_input_coin_type:null,deposit_output_coin_type:null,input_address_and_memo:null,deposit_estimated_input_amount:n.props.initial_deposit_estimated_input_amount||"1.0",deposit_estimated_output_amount:null,deposit_limit:null,deposit_error:null,failed_calculate_deposit:null,withdraw_input_coin_type:null,withdraw_output_coin_type:null,withdraw_estimated_input_amount:n.props.initial_withdraw_estimated_input_amount||"1.0",withdraw_estimated_output_amount:null,withdraw_limit:null,withdraw_error:null,failed_calculate_withdraw:null,conversion_input_coin_type:null,conversion_output_coin_type:null,conversion_estimated_input_amount:n.props.initial_conversion_estimated_input_amount||"1.0",conversion_estimated_output_amount:null,conversion_limit:null,conversion_error:null,failed_calculate_conversion:null,coin_info_request_state:n.coin_info_request_states.request_in_progress,input_address_requests_in_progress:{},deposit_estimate_direction:n.estimation_directions.output_from_input,deposit_limit_cache:{},deposit_limit_requests_in_progress:{},coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null,conversion_memo:null},n}return r(e,t),A(e,[{key:"urlConnection",value:function(t,e){var n=this;this.setState({url:t});var a=t+"/coins",i=fetch(a,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json()}),o=t+"/wallets",r=fetch(o,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json()}),s=t+"/trading-pairs",l=fetch(s,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json()}),c=t+"/active-wallets",p=fetch(c,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json()});Promise.all([i,r,l,p]).then(function(t){var e=S(t,4),a=e[0],i=(e[1],e[2]),o=e[3],r={};a.forEach(function(t){return r[t.coinType]=t});var s={},l={},c={};i.forEach(function(t){var e=r[t.inputCoinType],n=r[t.outputCoinType];e.backingCoinType!=t.outputCoinType&&n.backingCoinType!=t.inputCoinType&&0==e.restricted&&0==n.restricted&&o.indexOf(e.walletType)!=-1&&o.indexOf(n.walletType)!=-1&&("bitshares2"!=e.walletType&&"bitshares2"==n.walletType?(s[t.inputCoinType]=s[t.inputCoinType]||[],s[t.inputCoinType].push(t.outputCoinType)):"bitshares2"==e.walletType&&"bitshares2"!=n.walletType?(l[t.inputCoinType]=l[t.inputCoinType]||[],l[t.inputCoinType].push(t.outputCoinType)):"bitshares2"==e.walletType&&"bitshares2"==n.walletType&&(c[t.inputCoinType]=c[t.inputCoinType]||[],c[t.inputCoinType].push(t.outputCoinType)))});var p=null,u=null,d=Object.keys(s);if(d.forEach(function(t){s[t].sort()}),d.length){p=n.props.initial_deposit_input_coin_type&&n.props.initial_deposit_input_coin_type in s?n.props.initial_deposit_input_coin_type:d[0];var h=s[p];u=n.props.initial_deposit_output_coin_type&&h.indexOf(n.props.initial_deposit_output_coin_type)!=-1?n.props.initial_deposit_output_coin_type:h[0]}var m=null,_=null,f=null,y=null,v=Object.keys(l);if(v.forEach(function(t){l[t].sort()}),v.length){m=n.props.initial_withdraw_input_coin_type&&n.props.initial_withdraw_input_coin_type in l?n.props.initial_withdraw_input_coin_type:v[0];var g=l[m];_=n.props.initial_withdraw_output_coin_type&&g.indexOf(n.props.initial_withdraw_output_coin_type)!=-1?n.props.initial_withdraw_output_coin_type:g[0]}var b=Object.keys(c);if(b.forEach(function(t){c[t].sort()}),b.length){f=n.props.initial_conversion_input_coin_type&&n.props.initial_conversion_input_coin_type in c?n.props.initial_conversion_input_coin_type:b[0];var w=c[f];y=n.props.initial_conversion_output_coin_type&&w.indexOf(n.props.initial_conversion_output_coin_type)!=-1?n.props.initial_conversion_output_coin_type:w[0]}var E=n.getCachedOrGeneratedInputAddress(p,u),C=n.getCachedOrFreshDepositLimit("deposit",p,u),k=n.getAndUpdateOutputEstimate("deposit",p,u,n.state.deposit_estimated_input_amount),T=n.getAndUpdateOutputEstimate("withdraw",m,_,n.state.withdraw_estimated_input_amount),A=n.getCachedOrFreshDepositLimit("withdraw",m,_),O=n.getAndUpdateOutputEstimate("conversion",f,y,n.state.conversion_estimated_input_amount),N=n.getCachedOrFreshDepositLimit("conversion",f,y);n.setState({coin_info_request_state:n.coin_info_request_states.request_complete,coins_by_type:r,allowed_mappings_for_deposit:s,allowed_mappings_for_withdraw:l,allowed_mappings_for_conversion:c,deposit_input_coin_type:p,deposit_output_coin_type:u,input_address_and_memo:E,deposit_limit:C,deposit_estimated_output_amount:k,deposit_estimate_direction:n.estimation_directions.output_from_input,withdraw_input_coin_type:m,withdraw_output_coin_type:_,withdraw_limit:A,withdraw_estimated_output_amount:T,conversion_input_coin_type:f,conversion_output_coin_type:y,conversion_limit:N,conversion_estimated_output_amount:O,withdraw_estimate_direction:n.estimation_directions.output_from_input,conversion_estimate_direction:n.estimation_directions.output_from_input,supports_output_memos:r.btc.supportsOutputMemos})}).catch(function(t){n.setState({coin_info_request_state:e,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:"updateEstimates",value:function(){if(this.state.deposit_input_coin_type&&this.state.deposit_output_coin_type){var t=this.getCachedOrGeneratedInputAddress(this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),e=this.getCachedOrFreshDepositLimit("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),n=this.state.deposit_estimated_input_amount,a=this.state.deposit_estimated_output_amount;this.state.deposit_estimate_direction==this.estimation_directions.output_from_input?a=this.getAndUpdateOutputEstimate("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,n):n=this.getAndUpdateInputEstimate("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,a);var i=this.getCachedOrFreshDepositLimit("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type),o=this.state.withdraw_estimated_input_amount,r=this.state.withdraw_estimated_output_amount;this.state.withdraw_estimate_direction==this.estimation_directions.output_from_input?r=this.getAndUpdateOutputEstimate("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,o):o=this.getAndUpdateinputEstimate("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,r);var s=this.getCachedOrFreshDepositLimit("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type),l=this.state.conversion_estimated_input_amount,c=this.state.conversion_estimated_output_amount;this.state.conversion_estimate_direction==this.estimation_directions.output_from_input?c=this.getAndUpdateOutputEstimate("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,l):l=this.getAndUpdateinputEstimate("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,c),this.setState({input_address_and_memo:t,deposit_limit:e,deposit_estimated_input_amount:n,deposit_estimated_output_amount:a,withdraw_limit:i,withdraw_estimated_input_amount:o,withdraw_estimated_output_amount:r,conversion_limit:s,conversion_estimated_input_amount:l,conversion_estimated_output_amount:c,key_for_withdrawal_dialog:o})}}},{key:"componentWillMount",value:function(){var t=this,e=this.state.url;this.urlConnection(e,0);var n=fetch(e+"/coins",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json()}),a=fetch(e+"/trading-pairs",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json()}),i=fetch(e+"/active-wallets",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json()});Promise.all([n,a,i]).then(function(t){var e=S(t,3),n=e[0],a=e[1],i=e[2],o={};n.forEach(function(t){return o[t.coinType]=t}),a.forEach(function(t){var e=o[t.inputCoinType],n=o[t.outputCoinType];e.backingCoinType!=t.outputCoinType&&n.backingCoinType!=t.inputCoinType&&i.indexOf(e.walletType)!=-1&&i.indexOf(n.walletType)})}).catch(function(e){t.urlConnection("https://api.blocktrades.info/v2",2),t.setState({coin_info_request_state:0,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:"componentDidMount",value:function(){this.update_timer=setInterval(this.updateEstimates.bind(this),this.refresh_interval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.update_timer)}},{key:"getCachedInputAddress",value:function(t,e,n){var a=this.props.account.get("name");return this.deposit_address_cache.getCachedInputAddress(this.props.gateway,a,t,e)}},{key:"cacheInputAddress",value:function(t,e,n,a){var i=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,i,t,e,n)}},{key:"getCachedOrGeneratedInputAddress",value:function(t,e){var n=this,a=this.getCachedInputAddress(t,e);if(a)return a;if(this.state.input_address_requests_in_progress[t]=this.state.input_address_requests_in_progress[t]||{},this.state.input_address_requests_in_progress[t][e])return null;var i=JSON.stringify({inputCoinType:t,outputCoinType:e,outputAddress:this.props.account.get("name")});return this.state.input_address_requests_in_progress[t][e]=!0,fetch(this.state.url+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:i}).then(function(a){a.json().then(function(a){if(console.assert(a.inputCoinType==t,"unexpected reply from initiate-trade"),console.assert(a.outputCoinType==e,"unexpected reply from initiate-trade"),a.inputCoinType!=t||a.outputCoinType!=e)throw Error("unexpected reply from initiate-trade");n.cacheInputAddress(a.inputCoinType,a.outputCoinType,a.inputAddress,a.inputMemo),delete n.state.input_address_requests_in_progress[t][e],n.state.deposit_input_coin_type==a.inputCoinType&&n.state.deposit_output_coin_type==a.outputCoinType&&n.setState({input_address_and_memo:{address:a.inputAddress,memo:a.inputMemo}})},function(a){delete n.state.input_address_requests_in_progress[t][e],n.state.deposit_input_coin_type==t&&n.state.deposit_output_coin_type==e&&n.setState({input_address_and_memo:{address:"error generating address",memo:null}})})},function(a){delete n.state.input_address_requests_in_progress[t][e],n.state.deposit_input_coin_type==t&&n.state.deposit_output_coin_type==e&&n.setState({input_address_and_memo:{address:"error generating address",memo:null}})}),null}},{key:"getCachedDepositLimit",value:function(t,e){if(this.state.deposit_limit_cache[t]=this.state.deposit_limit_cache[t]||{},this.state.deposit_limit_cache[t][e]){var n=this.state.deposit_limit_cache[t][e];if(new Date-n.timestamp<this.refresh_interval)return n;delete this.state.deposit_limit_cache[t][e]}return null}},{key:"cacheDepositLimit",value:function(t,e,n){n.timestamp=new Date,this.state.deposit_limit_cache[t]=this.state.deposit_limit_cache[t]||{},this.state.deposit_limit_cache[t][e]=n}},{key:"getCachedOrFreshDepositLimit",value:function(t,e,n){var i=this,o=this.getCachedDepositLimit(e,n);if(o)return o;this.state.deposit_limit_requests_in_progress[e]=this.state.input_address_requests_in_progress[e]||{},this.state.deposit_limit_requests_in_progress[e][n]=!0;var r=this.state.url+"/deposit-limits?inputCoinType="+encodeURIComponent(e)+"&outputCoinType="+encodeURIComponent(n);return fetch(r,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json()}).then(function(o){if(console.assert(o.inputCoinType==e&&o.outputCoinType==n,"unexpected reply from deposit-limits"),o.inputCoinType!=e||o.outputCoinType!=n)throw Error("unexpected reply from deposit-limits");var r={timestamp:new Date,limit:o.depositLimit};i.cacheDepositLimit(e,n,r),delete i.state.deposit_limit_requests_in_progress[e][n],i.state[t+"_input_coin_type"]==e&&i.state[t+"_output_coin_type"]==n&&i.setState(a({},t+"_limit",r))},function(t){delete i.state.deposit_limit_requests_in_progress[e][n]}),null}},{key:"getAndUpdateOutputEstimate",value:function(t,e,n,i){var o=this;"deposit"==t&&this.setState({failed_calculate_deposit:null}),"withdraw"==t&&this.setState({failed_calculate_withdraw:null}),"conversion"==t&&this.setState({failed_calculate_conversion:null});var r=this.state.url+"/estimate-output-amount?inputAmount="+encodeURIComponent(i)+"&inputCoinType="+encodeURIComponent(e)+"&outputCoinType="+encodeURIComponent(n);return fetch(r,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json()}).then(function(r){if(r.error){if(o.state[t+"_input_coin_type"]==e&&o.state[t+"_output_coin_type"]==n&&o.state[t+"_estimated_input_amount"]==i&&o.state[t+"_estimate_direction"]==o.estimation_directions.output_from_input){var s=r.error.message;"deposit"==t&&o.setState({failed_calculate_deposit:"Failed to calculate"}),"withdraw"==t&&o.setState({failed_calculate_withdraw:"Failed to calculate"}),"conversion"==t&&o.setState({failed_calculate_conversion:"Failed to calculate"});var l="Internal Server Error: ";s.startsWith(l)&&(s=s.substr(l.length)),o.setState(a({},t+"_error",s))}}else{var c;if(console.assert(r.inputCoinType==e&&r.outputCoinType==n&&r.inputAmount==i,"unexpected reply from estimate-output-amount"),r.inputCoinType!=e||r.outputCoinType!=n||r.inputAmount!=i)throw Error("unexpected reply from estimate-output-amount");o.state[t+"_input_coin_type"]==e&&o.state[t+"_output_coin_type"]==n&&o.state[t+"_estimated_input_amount"]==i&&o.state[t+"_estimate_direction"]==o.estimation_directions.output_from_input&&o.setState((c={},a(c,t+"_estimated_output_amount",r.outputAmount),a(c,t+"_error",null),c))}},function(t){}),null}},{key:"getAndUpdateInputEstimate",value:function(t,e,n,i){var o=this;"deposit"==t&&this.setState({failed_calculate_deposit:null}),"withdraw"==t&&this.setState({failed_calculate_withdraw:null}),"conversion"==t&&this.setState({failed_calculate_conversion:null});var r=this.state.url+"/estimate-input-amount?outputAmount="+encodeURIComponent(i)+"&inputCoinType="+encodeURIComponent(e)+"&outputCoinType="+encodeURIComponent(n);return fetch(r,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(t){return t.json()}).then(function(r){var s;console.assert(r.inputCoinType==e&&r.outputCoinType==n&&r.outputAmount==i,"unexpected reply from estimate-input-amount"),r.inputCoinType==e&&r.outputCoinType==n&&r.outputAmount==i||("deposit"==t&&o.setState({failed_calculate_deposit:"Failed to calculate"}),"withdraw"==t&&o.setState({failed_calculate_withdraw:"Failed to calculate"}),"conversion"==t&&o.setState({failed_calculate_conversion:"Failed to calculate"})),o.state[t+"_input_coin_type"]==e&&o.state[t+"_output_coin_type"]==n&&o.state[t+"_estimated_output_amount"]==i&&o.state[t+"_estimate_direction"]==o.estimation_directions.input_from_output&&o.setState((s={},a(s,t+"_estimated_input_amount",r.inputAmount),a(s,"key_for_withdrawal_dialog",r.inputAmount),s))},function(t){}),null}},{key:"onInputAmountChanged",value:function(t,e){var n,i=e.target.value;""==i&&(i="0");var o=this.getAndUpdateOutputEstimate(t,this.state[t+"_input_coin_type"],this.state[t+"_output_coin_type"],i);this.setState((n={},a(n,t+"_estimated_input_amount",i),a(n,t+"_estimated_output_amount",o),a(n,t+"_estimate_direction",this.estimation_directions.output_from_input),a(n,"key_for_withdrawal_dialog",i),n))}},{key:"onOutputAmountChanged",value:function(t,e){var n,i=e.target.value;""==i&&(i="0");var o=this.getAndUpdateInputEstimate(t,this.state[t+"_input_coin_type"],this.state[t+"_output_coin_type"],i);this.setState((n={},a(n,t+"_estimated_output_amount",i),a(n,t+"_estimated_input_amount",o),a(n,t+"_estimate_direction",this.estimation_directions.input_from_output),n))}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.gateway+"_bridge"}},{key:"onWithdraw",value:function(){v.a.publish(this.getWithdrawModalId(),"open")}},{key:"onInputCoinTypeChanged",value:function(t,e){var n,i=this,o=null,r="_estimated_output_amount",s=e.target.value,l=this.state["allowed_mappings_for_"+t][s],c=l[0];l.indexOf(this.state[t+"_output_coin_type"])!=-1&&(c=this.state[t+"_output_coin_type"]);var p=this.state.input_address_and_memo;"deposit"==t&&(p=this.getCachedOrGeneratedInputAddress(s,c));var u=this.getCachedOrFreshDepositLimit(t,s,c);this.state[t+"_estimated_input_amount"]?o=this.getAndUpdateOutputEstimate(t,s,c,this.state[t+"_estimated_input_amount"]):(o=this.getAndUpdateInputEstimate(t,s,c,this.state[t+"_estimated_output_amount"]),r="_estimated_input_amount"),"withdraw"==t&&l.forEach(function(t){c===t&&i.setState({coin_symbol:s+"input",supports_output_memos:i.state.coins_by_type[t].supportsOutputMemos})}),this.setState((n={},a(n,t+"_input_coin_type",s),a(n,t+"_output_coin_type",c),a(n,"input_address_and_memo",p),a(n,t+"_limit",u),a(n,t+r,o),a(n,t+"_estimate_direction",this.estimation_directions.output_from_input),n))}},{key:"onOutputCoinTypeChanged",value:function(t,e){var n,i=this,o=null,r="_estimated_output_amount",s=e.target.value,l=this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type];"withdraw"==t&&l.forEach(function(t){s===t&&i.setState({coin_symbol:s+"output",supports_output_memos:i.state.coins_by_type[t].supportsOutputMemos,key_for_withdrawal_dialog:s})});var c=this.state.input_address_and_memo;"deposit"==t&&(c=this.getCachedOrGeneratedInputAddress(this.state[t+"_input_coin_type"],s));var p=this.getCachedOrFreshDepositLimit(t,this.state[t+"_input_coin_type"],s);this.state[t+"_estimated_input_amount"]?o=this.getAndUpdateOutputEstimate(t,this.state[t+"_input_coin_type"],s,this.state[t+"_estimated_input_amount"]):(o=this.getAndUpdateInputEstimate(t,this.state[t+"_input_coin_type"],s,this.state[t+"_estimated_output_amount"]),r="_estimated_input_amount"),this.setState((n={},a(n,t+"_output_coin_type",s),a(n,"input_address_and_memo",c),a(n,t+"_limit",p),a(n,t+r,o),a(n,t+"_estimate_direction",this.estimation_directions.output_from_input),n))}},{key:"render",value:function(){var t=this;if(!this.props.account||!this.props.issuer_account||!this.props.gateway)return l.a.createElement("div",null);var e=void 0,n=void 0,a=void 0,i=void 0,o=void 0,r=void 0;if(this.state.coin_info_request_state==this.coin_info_request_states.request_failed)return l.a.createElement("div",null,l.a.createElement("p",null,"Error connecting to blocktrades.us, please try again later"));if(this.state.coin_info_request_state==this.coin_info_request_states.never_requested||this.state.coin_info_request_state==this.coin_info_request_states.request_in_progress)return l.a.createElement("div",null,l.a.createElement("p",null,"Retrieving current trade data from blocktrades.us"));var s=null,c=l.a.createElement(p.a,{content:"gateway.calc"});null!=this.state.failed_calculate_deposit&&(c=this.state.failed_calculate_deposit);var u=l.a.createElement(p.a,{content:"gateway.calc"});null!=this.state.failed_calculate_withdraw&&(u=this.state.failed_calculate_withdraw);var d=l.a.createElement(p.a,{content:"gateway.calc"});if(null!=this.state.failed_calculate_conversion&&(d=this.state.failed_calculate_conversion),Object.getOwnPropertyNames(this.state.allowed_mappings_for_deposit).length>0){var h=[];Object.keys(this.state.allowed_mappings_for_deposit).sort().forEach(function(e){h.push(l.a.createElement("option",{key:e,value:e||""},t.state.coins_by_type[e].symbol))});var m=l.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.deposit_input_coin_type||"",onChange:this.onInputCoinTypeChanged.bind(this,"deposit")},h),_=[];this.state.allowed_mappings_for_deposit[this.state.deposit_input_coin_type].forEach(function(e){_.push(l.a.createElement("option",{key:e,value:e||""},t.state.coins_by_type[e].walletSymbol))});var f=l.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.deposit_output_coin_type||"",onChange:this.onOutputCoinTypeChanged.bind(this,"deposit")},_),y=this.state.input_address_and_memo?this.state.input_address_and_memo:{address:"unknown",memo:null},v=this.state.deposit_estimated_input_amount,b=this.state.deposit_estimated_output_amount,w=v?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:v||"",onChange:this.onInputAmountChanged.bind(this,"deposit")}):c,C=b?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:b||"",onChange:this.onOutputAmountChanged.bind(this,"deposit")}):c,k=l.a.createElement("span",null,"updating");this.state.deposit_limit&&(k=this.state.deposit_limit.limit?l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},l.a.createElement(p.a,{content:"gateway.limit",amount:E.a.format_number(this.state.deposit_limit.limit,8),symbol:this.state.coins_by_type[this.state.deposit_input_coin_type].walletSymbol}))):null);var T=null;this.state.deposit_error&&(T=l.a.createElement("div",null,this.state.deposit_error)),n=l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(p.a,{content:"gateway.deposit"})),l.a.createElement("th",null,l.a.createElement(p.a,{content:"gateway.balance"})),l.a.createElement("th",null,l.a.createElement(p.a,{content:"gateway.deposit_to"})))),e=l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,m),l.a.createElement("div",null,w)),"→",l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,f),l.a.createElement("div",null,C)),l.a.createElement("div",null,T))),l.a.createElement("td",null,l.a.createElement(g.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.deposit_output_coin_type].walletSymbol})),l.a.createElement("td",null,y.address,l.a.createElement("br",null),k)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_withdraw).length>0){this.getWithdrawModalId();this.state.coins_by_type[this.state.withdraw_input_coin_type].symbol;s=this.state.withdraw_estimated_input_amount;var S=[];Object.keys(this.state.allowed_mappings_for_withdraw).sort().forEach(function(e){S.push(l.a.createElement("option",{key:e,value:e},t.state.coins_by_type[e].walletSymbol))});var A=l.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.withdraw_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,"withdraw")},S),O=[];this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type].forEach(function(e){O.push(l.a.createElement("option",{key:e,value:e},t.state.coins_by_type[e].symbol))});var P=l.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.withdraw_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,"withdraw")},O),x=this.state.withdraw_estimated_input_amount,R=x?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:x||"",onChange:this.onInputAmountChanged.bind(this,"withdraw")}):u,L=this.state.withdraw_estimated_output_amount,I=L?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:L||"",onChange:this.onOutputAmountChanged.bind(this,"withdraw")}):u,W=l.a.createElement(j,{key:this.state.key_for_withdrawal_dialog,account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol,output_coin_name:this.state.coins_by_type[this.state.withdraw_output_coin_type].name,output_coin_symbol:this.state.coins_by_type[this.state.withdraw_output_coin_type].symbol,output_coin_type:this.state.withdraw_output_coin_type,output_supports_memos:this.state.supports_output_memos,amount_to_withdraw:s,url:this.state.url,gateway:this.props.gateway,output_wallet_type:this.state.coins_by_type[this.state.withdraw_output_coin_type].walletType}),D=null;this.state.withdraw_error&&(D=l.a.createElement("div",null,this.state.withdraw_error));var q=l.a.createElement("span",null,"...");this.state.withdraw_limit&&(q=this.state.withdraw_limit.limit?l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},l.a.createElement(p.a,{content:"gateway.limit",amount:E.a.format_number(this.state.withdraw_limit.limit,8),symbol:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol}))):l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},"no limit"))),i=l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(p.a,{content:"gateway.withdraw"})),l.a.createElement("th",null,l.a.createElement(p.a,{content:"gateway.balance"})),l.a.createElement("th",null))),a=l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,A),l.a.createElement("div",null,R)),"→",l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,P),l.a.createElement("div",null,I)),l.a.createElement("div",null,D))),l.a.createElement("td",null,l.a.createElement(g.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol})),l.a.createElement("td",null,W,l.a.createElement("br",null),q)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_conversion).length>0){var Y=[];Object.keys(this.state.allowed_mappings_for_conversion).sort().forEach(function(e){Y.push(l.a.createElement("option",{key:e,value:e},t.state.coins_by_type[e].walletSymbol))});var M=l.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.conversion_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,"conversion")},Y),H=[];this.state.allowed_mappings_for_conversion[this.state.conversion_input_coin_type].forEach(function(e){H.push(l.a.createElement("option",{key:e,value:e},t.state.coins_by_type[e].symbol))});var X=l.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.conversion_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,"conversion")},H),U=this.state.conversion_estimated_input_amount,B=U?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:U||"",onChange:this.onInputAmountChanged.bind(this,"conversion")}):d,F=this.state.conversion_estimated_output_amount,K=F?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:F||"",onChange:this.onOutputAmountChanged.bind(this,"conversion")}):d,J=l.a.createElement(N,{asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol,account:this.props.account.get("id"),input_coin_type:this.state.conversion_input_coin_type,output_coin_type:this.state.conversion_output_coin_type,account_name:this.props.account.get("name"),amount:this.state.conversion_estimated_input_amount,account_id:this.props.account.get("id"),account_balances:this.props.account.get("balances"),url:this.state.url}),V=null;this.state.conversion_error&&(V=l.a.createElement("div",null,this.state.conversion_error));var G=l.a.createElement("span",null,"...");this.state.conversion_limit&&(G=this.state.conversion_limit.limit?l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},l.a.createElement(p.a,{content:"gateway.limit",amount:E.a.format_number(this.state.conversion_limit.limit,8),symbol:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol}))):l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},"no limit"))),r=l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(p.a,{content:"gateway.convert"})),l.a.createElement("th",null,l.a.createElement(p.a,{content:"gateway.balance"})),l.a.createElement("th",null))),o=l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,M),l.a.createElement("div",null,B)),"→",l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,X),l.a.createElement("div",null,K)),l.a.createElement("div",null,V))),l.a.createElement("td",null,l.a.createElement(g.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol})),l.a.createElement("td",null,J,l.a.createElement("br",null),G)))}return l.a.createElement("div",null,l.a.createElement("div",{style:{paddingBottom:15}},l.a.createElement(p.a,{component:"h5",content:"gateway.bridge_text"})),l.a.createElement("table",{className:"table"},n,e,i,a,r,o))}}]),e}(l.a.Component);x.propTypes={url:l.a.PropTypes.string,gateway:l.a.PropTypes.string,account:u.a.ChainAccount,issuer_account:u.a.ChainAccount,initial_deposit_input_coin_type:l.a.PropTypes.string,initial_deposit_output_coin_type:l.a.PropTypes.string,initial_deposit_estimated_input_amount:l.a.PropTypes.string,initial_withdraw_input_coin_type:l.a.PropTypes.string,initial_withdraw_output_coin_type:l.a.PropTypes.string,initial_withdraw_estimated_input_amount:l.a.PropTypes.string,initial_conversion_input_coin_type:l.a.PropTypes.string,initial_conversion_output_coin_type:l.a.PropTypes.string,initial_conversion_estimated_input_amount:l.a.PropTypes.string},e.a=n.i(d.a)(x,{keep_updating:!0})}).call(e,n(2).Buffer)},1408:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(21),c=n.n(l),p=n(6),u=n(45),d=n(44),h=n(1322),m=n(129),_=n.n(m),f=n(128),y=n.n(f),v=n(38),g=n.n(v),b=n(1240),w=n(1266),E=n(257),C=n(131),k=n(1243),T=n(394),S=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),A=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.deposit_address_cache=new w.a;var o={blocktrades:T.b.BASE,openledger:T.b.BASE_OL};return n.state={receive_address:null,url:t.url||o[t.gateway]},n.addDepositAddress=n.addDepositAddress.bind(n),n._copy=n._copy.bind(n),document.addEventListener("copy",n._copy),n}return o(e,t),S(e,[{key:"_copy",value:function(t){try{t.clipboardData.setData("text/plain",this.state.clipboardText),t.preventDefault()}catch(t){console.error(t)}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get("name"),url:this.state.url,stateCallback:this.addDepositAddress}}},{key:"componentWillMount",value:function(){var t=this.props.account.get("name");this.deposit_address_cache.getCachedInputAddress(this.props.gateway,t,this.props.deposit_coin_type,this.props.receive_coin_type)||n.i(k.e)(this._getDepositObject())}},{key:"addDepositAddress",value:function(t){var e=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,e,this.props.deposit_coin_type,this.props.receive_coin_type,t.address,t.memo),this.setState({receive_address:t})}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.issuer_account.get("name")+"_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){g.a.publish(this.getWithdrawModalId(),"open")}},{key:"toClipboard",value:function(t){try{this.setState({clipboardText:t},function(){document.execCommand("copy")})}catch(t){console.error(t)}}},{key:"render",value:function(){var t=s.a.createElement("div",{style:{display:"none",minHeight:150}});if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return t;var e=this.props.account.get("balances");this.props.receive_asset.get("symbol");if(this.props.deprecated_in_favor_of){var a=!1,i=e.get(this.props.receive_asset.get("id"));if(i){var o=p.b.getObject(i);if(o){0!=o.get("balance")&&(a=!0)}}if(!a)return t}var r=this.state.receive_address;if(!r){var l=this.props.account.get("name");r=this.deposit_address_cache.getCachedInputAddress(this.props.gateway,l,this.props.deposit_coin_type,this.props.receive_coin_type)}if(!r)return n.i(k.e)(this._getDepositObject()),t;var u=this.getWithdrawModalId(),d=null,m=null,f="",v=void 0;if(this.props.deposit_account){d=s.a.createElement("span",null,this.props.deposit_account),f=this.props.receive_coin_type+":"+this.props.account.get("name"),m=s.a.createElement("span",null,f);var g=this.props.deposit_coin_type+":"}else{r.memo?(v=r.memo,f=r.address,d=s.a.createElement("span",null,r.address),m=s.a.createElement("span",null,r.memo)):(f=r.address,d=s.a.createElement("span",null,r.address));var g=""}return"deposit"===this.props.action?s.a.createElement("div",{className:"grid-block no-padding no-margin test"},s.a.createElement("div",{style:{paddingRight:40,paddingBottom:20}},s.a.createElement(c.a,{component:"h4",content:"gateway.deposit_summary"}),s.a.createElement("table",{style:{width:"inherit"},className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.asset_to_deposit"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.asset_to_receive"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(E.a,{name:this.props.receive_asset.get("symbol")}))),s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.intermediate"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(C.a,{account:this.props.issuer_account.get("id")}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(c.a,{content:"gateway.balance"}),":"),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(b.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol")})))))),s.a.createElement("div",null,s.a.createElement(c.a,{component:"h4",content:"gateway.deposit_inst"}),s.a.createElement("span",null,s.a.createElement(c.a,{content:"gateway.deposit_to",asset:this.props.deposit_asset}),":"),s.a.createElement("div",{style:{padding:"10px 0",fontSize:"1.1rem",fontWeight:"bold"}},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,d)),m?s.a.createElement("tr",null,s.a.createElement("td",null,"memo: ",m)):null)),s.a.createElement("div",{className:"button-group",style:{paddingTop:10}},d?s.a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,f)},"Copy address"):null,v?s.a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,v)},"Copy memo"):null,s.a.createElement("button",{className:"button",onClick:k.e.bind(null,this._getDepositObject())},s.a.createElement(c.a,{content:"gateway.generate_new"})))))):s.a.createElement("div",{className:"grid-block no-padding no-margin"},s.a.createElement("div",{style:{paddingRight:40,paddingBottom:20}},s.a.createElement(c.a,{component:"h4",content:"gateway.withdraw_summary"}),s.a.createElement("table",{style:{width:"inherit"},className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.asset_to_withdraw"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(E.a,{name:this.props.receive_asset.get("symbol")}))),s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.asset_to_receive"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.intermediate"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(C.a,{account:this.props.issuer_account.get("id")}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(c.a,{content:"gateway.balance"}),":"),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(b.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol")})))))),s.a.createElement("div",null,s.a.createElement(c.a,{component:"h4",content:"gateway.withdraw_inst"}),s.a.createElement("span",null,s.a.createElement(c.a,{content:"gateway.withdraw_to",asset:this.props.deposit_asset}),":"),s.a.createElement("div",{style:{padding:"10px 0",fontSize:"1.1rem",fontWeight:"bold"}},s.a.createElement("div",{style:{paddingTop:10}},s.a.createElement("button",{className:"button success",style:{width:"100%"},onClick:this.onWithdraw.bind(this)},s.a.createElement(c.a,{content:"gateway.withdraw_now"})," ")))),s.a.createElement(_.a,{id:u,overlay:!0},s.a.createElement(y.a,{close:u},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(h.a,{account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.props.receive_asset.get("symbol"),url:this.state.url,output_coin_name:this.props.deposit_asset_name,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:g,modal_id:u,balance:this.props.account.get("balances").toJS()[this.props.receive_asset.get("id")]}))))}}]),e}(s.a.Component);A.propTypes={url:s.a.PropTypes.string,gateway:s.a.PropTypes.string,deposit_coin_type:s.a.PropTypes.string,deposit_asset_name:s.a.PropTypes.string,deposit_account:s.a.PropTypes.string,receive_coin_type:s.a.PropTypes.string,account:u.a.ChainAccount,issuer_account:u.a.ChainAccount,deposit_asset:s.a.PropTypes.string,deposit_wallet_type:s.a.PropTypes.string,receive_asset:u.a.ChainAsset,deprecated_in_favor_of:u.a.ChainAsset,deprecated_message:s.a.PropTypes.string,action:s.a.PropTypes.string,supports_output_memos:s.a.PropTypes.bool.isRequired},e.a=n.i(d.a)(A,{keep_updating:!0})},1409:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(45),c=n(44),p=n(18),u=n(32),d=n.n(u),h=n(1187),m=n(38),_=n.n(m),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),y=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={deposit_amount:null,deposit_info:null,deposit_error:null},n}return o(e,t),f(e,[{key:"onDepositAmountChange",value:function(t){var e=t.amount;t.asset;this.setState({deposit_amount:e})}},{key:"onSubmitDeposit",value:function(){var t=this,e=this.props.receive_asset,n=(p.a.get_asset_precision(e.get("precision")),this.state.deposit_amount.replace(/,/g,""));console.log("deposit_amount: ",n);var a={jsonrpc:"2.0",method:"getDepositAccount",params:{bitsharesAccountName:this.props.account.get("name"),currency:this.props.deposit_asset,amount:n},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(a))}).then(function(t){return t.json()}).then(function(e){"result"in e?t.setState({deposit_info:e.result}):"error"in json_reponse&&"message"in e.error?t.setState({deposit_error:e.error.message}):t.setState({deposit_error:"Unable to approve deposit, please contact OpenLedger or try again later"})}).catch(function(e){t.setState({deposit_error:"Unable to approve deposit, please contact OpenLedger or try again later"})})}},{key:"onClose",value:function(){this.setState({deposit_amount:null,deposit_info:null,deposit_error:null}),_.a.publish(this.props.modal_id,"close")}},{key:"onOpenLink",value:function(){window.open(this.state.deposit_info.link,"_blank")}},{key:"render",value:function(){if(this.state.deposit_error)return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit Error")),s.a.createElement("div",{className:"content-block"},s.a.createElement("p",null,this.state.deposit_error)),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:"Close"}))));if(this.state.deposit_info){if("link"in this.state.deposit_info)return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit Information")),s.a.createElement("div",{className:"content-block"},s.a.createElement("p",null,"Click ",s.a.createElement("a",{onClick:this.onOpenLink.bind(this)},"here")," for deposit instructions")),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:"Close"}))));var t=[];for(var e in this.state.deposit_info)this.state.deposit_info.hasOwnProperty(e)&&t.push(s.a.createElement("tr",null,s.a.createElement("td",null,e),s.a.createElement("td",null,this.state.deposit_info[e])));return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit Information")),s.a.createElement("div",{className:"content-block"},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,t))),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:d.a.translate("account.perm.cancel")}))))}return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit ",this.props.deposit_asset)),s.a.createElement("div",{className:"content-block"},s.a.createElement(h.a,{label:"modal.deposit.amount",amount:this.state.deposit_amount,asset:this.props.receive_asset.get("id"),assets:[this.props.receive_asset.get("id")],placeholder:"0.0",onChange:this.onDepositAmountChange.bind(this),display_balance:null})),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitDeposit.bind(this),value:d.a.translate("modal.deposit.submit")}),s.a.createElement("input",{type:"submit",className:" button",onClick:this.onClose.bind(this),value:d.a.translate("account.perm.cancel")}))))}}]),e}(s.a.Component);y.propTypes={account:l.a.ChainAccount.isRequired,issuer_account:l.a.ChainAccount.isRequired,deposit_asset:s.a.PropTypes.string,receive_asset:l.a.ChainAsset.isRequired,rpc_url:s.a.PropTypes.string},e.a=n.i(c.a)(y,{keep_updating:!0})},1410:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(21),c=n.n(l),p=n(45),u=n(44),d=n(33),h=n(129),m=n.n(h),_=n(128),f=n.n(_),y=n(38),v=n.n(y),g=n(1240),b=n(1181),w=n(1409),E=n(1412),C=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),k=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return o(e,t),C(e,[{key:"getWithdrawModalId",value:function(){return"withdraw_fiat_openledger_"+this.props.receive_asset.get("symbol")}},{key:"getDepositModalId",value:function(){return"deposit_fiat_openledger_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){v.a.publish(this.getWithdrawModalId(),"open")}},{key:"onDeposit",value:function(){v.a.publish(this.getDepositModalId(),"open")}},{key:"render",value:function(){if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return s.a.createElement("tr",{style:{display:"none"}},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null));var t=(d.a.getWallet(),this.props.account.get("balances")),e=(this.props.receive_asset.get("symbol"),t.toJS());if(Object.keys(e).length>0){var n=this.props.receive_asset.get("id");n&&s.a.createElement("span",null,s.a.createElement(c.a,{component:"span",content:"transfer.available"}),": ",s.a.createElement(b.a,{balance:e[n]}))}var a=this.getDepositModalId(),i=this.getWithdrawModalId(),o=null;o=this.props.deposit_allowed?s.a.createElement("td",null,s.a.createElement("button",{className:"button outline",onClick:this.onDeposit.bind(this)}," ",s.a.createElement(c.a,{content:"gateway.deposit"})," "),s.a.createElement(m.a,{id:a,overlay:!0},s.a.createElement(f.a,{close:a},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(w.a,{account:this.props.account.get("name"),issuer_account:this.props.issuer_account.get("name"),receive_asset:this.props.receive_asset.get("symbol"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:a})))):s.a.createElement("td",null,"Click ",s.a.createElement("a",{href:"https://openledger.info/v/",target:"_blank"},"here")," to register for deposits");var r=null;return r=this.props.withdraw_allowed?s.a.createElement("td",null,s.a.createElement("button",{className:"button outline",onClick:this.onWithdraw.bind(this)}," ",s.a.createElement(c.a,{content:"gateway.withdraw"})," "),s.a.createElement(m.a,{id:i,overlay:!0},s.a.createElement(f.a,{close:i},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(E.a,{account:this.props.account.get("name"),issuer_account:this.props.issuer_account.get("name"),receive_asset:this.props.receive_asset.get("symbol"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:i})))):s.a.createElement("td",null,"Click ",s.a.createElement("a",{href:"https://openledger.info/v/"},"here")," to register for withdrawals"),s.a.createElement("tr",null,s.a.createElement("td",null,this.props.deposit_asset),o,s.a.createElement("td",null,s.a.createElement(g.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol")})),r)}}]),e}(s.a.Component);k.propTypes={url:s.a.PropTypes.string,gateway:s.a.PropTypes.string,deposit_coin_type:s.a.PropTypes.string,deposit_asset_name:s.a.PropTypes.string,deposit_account:s.a.PropTypes.string,receive_coin_type:s.a.PropTypes.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,deposit_asset:s.a.PropTypes.string,receive_asset:p.a.ChainAsset,deposit_allowed:s.a.PropTypes.bool,withdraw_allowed:s.a.PropTypes.bool},k=n.i(u.a)(k,{keep_updating:!0});var T=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.state={allowedFiatCurrencies:{deposit:[],withdraw:[]}};var o={jsonrpc:"2.0",id:1,method:"isValidatedForFiat",params:{bitsharesAccountName:n.props.account.get("name")}};return fetch(n.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(o))}).then(function(t){return t.json()}).then(function(t){"result"in t&&n.setState({allowedFiatCurrencies:t.result})}).catch(function(t){n.setState({allowedFiatCurrencies:{deposit:[],withdraw:[]}})}),n}return o(e,t),C(e,[{key:"componentWillUnmount",value:function(){clearInterval(this.update_timer)}},{key:"render",value:function(){return this.props.account&&this.props.issuer_account?s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(c.a,{content:"gateway.symbol"})),s.a.createElement("th",null,s.a.createElement(c.a,{content:"gateway.deposit_to"})),s.a.createElement("th",null,s.a.createElement(c.a,{content:"gateway.balance"})),s.a.createElement("th",null,s.a.createElement(c.a,{content:"gateway.withdraw"})))),s.a.createElement("tbody",null,s.a.createElement(k,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"USD",receive_asset:"OPEN.USD",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("USD")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("USD")>-1}),s.a.createElement(k,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"EUR",receive_asset:"OPEN.EUR",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("EUR")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("EUR")>-1}),s.a.createElement(k,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"CNY",receive_asset:"OPEN.CNY",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("CNY")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("CNY")>-1}))):s.a.createElement("div",null)}}]),e}(s.a.Component);T.propTypes={rpc_url:s.a.PropTypes.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount},T=n.i(u.a)(T,{keep_updating:!0}),e.a=T},1411:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(45),c=n(44),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),u=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={current_status:"never_loaded",withdrawals:null,deposits:null,error:null},n}return o(e,t),p(e,[{key:"onShowOpenLedgerTransactionHistory",value:function(){var t=this,e={jsonrpc:"2.0",method:"getRequestsList",params:{bitsharesAccountName:this.props.account.get("name")},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(e))}).then(function(t){return t.json()}).then(function(e){if(!("result"in e))throw"error"in e&&"message"in e.error?json_repsonse.error.message:"Unexpected response";t.setState({current_status:"loaded",withdrawals:e.result.withdrawals,deposits:e.result.deposits,error:null})}).catch(function(e){t.setState({current_status:"error",withdrawals:null,deposits:null,error:"Error getting transaction history: "+e})})}},{key:"render",value:function(){if(!this.props.account)return null;var t=null;if("loaded"===this.state.current_status){var e=[];if(this.state.withdrawals.length){for(var n=0;n<this.state.withdrawals.length;++n)e.push(s.a.createElement("tr",null,s.a.createElement("td",null,this.state.withdrawals[n].amount," ",this.state.withdrawals[n].currency),s.a.createElement("td",null,this.state.withdrawals[n].status)));t=s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Withdrawal Amount"),s.a.createElement("th",null,"Status"))),s.a.createElement("tbody",null,e))}else t=s.a.createElement("p",null,"No withdrawals")}var a=null;if("loaded"===this.state.current_status)if(this.state.deposits.length){for(var i=[],n=0;n<this.state.deposits.length;++n)i.push(s.a.createElement("tr",null,s.a.createElement("td",null,this.state.deposits[n].amount," ",this.state.deposits[n].currency),s.a.createElement("td",null,s.a.createElement("a",{href:this.state.deposits[n].link,target:"_blank"},"link")),s.a.createElement("td",null,this.state.deposits[n].status)));a=s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Deposit Amount"),s.a.createElement("th",null,"Details"),s.a.createElement("th",null,"Status"))),s.a.createElement("tbody",null,i))}else a=s.a.createElement("p",null,"No deposits");var o=null;if("error"===this.state.current_status)o=s.a.createElement("div",{className:"content-block"},s.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)}," Retry "),s.a.createElement("p",null,this.state.error));else if("loading"===this.state.current_status)o=s.a.createElement("div",{className:"content-block"},s.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this),disabled:"true"}," Show Transaction History "),s.a.createElement("p",null,"Loading..."));else{var r="never_loaded"===this.state.current_status?"Show Transaction History":"Refresh";o=s.a.createElement("div",{className:"content-block"},s.a.createElement("br",null),s.a.createElement("h4",null,"Transaction History"),s.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)}," ",r," "),t,a)}return o}}]),e}(s.a.Component);u.propTypes={rpc_url:s.a.PropTypes.string,account:l.a.ChainAccount},e.a=n.i(c.a)(u,{keep_updating:!0})},1412:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(128),c=n.n(l),p=n(21),u=n.n(p),d=n(45),h=n(44),m=n(18),_=n(1181),f=n(32),y=n.n(f),v=n(1187),g=n(163),b=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),w=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={withdraw_amount:null},n}return o(e,t),b(e,[{key:"onWithdrawAmountChange",value:function(t){var e=t.amount;t.asset;this.setState({withdraw_amount:e})}},{key:"onSubmit",value:function(){var t=this,e=this.props.receive_asset,n=m.a.get_asset_precision(e.get("precision")),a=this.state.withdraw_amount.replace(/,/g,""),i={jsonrpc:"2.0",method:"getMemoForFiatWithdrawal",params:{bitsharesAccountName:this.props.account.get("name"),currency:this.props.deposit_asset,amount:a},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(i))}).then(function(t){return t.json()}).then(function(i){if(!("result"in i))throw"error"in i&&"message"in i.error?json_repsonse.error.message:"Unable to approve withdrawal, please contact OpenLedger or try again later";g.a.transfer(t.props.account.get("id"),t.props.issuer_account.get("id"),parseInt(a*n,10),e.get("id"),i.result)}).catch(function(t){alert(t)})}},{key:"render",value:function(){var t=null,e=this.props.account.get("balances").toJS();if(Object.keys(e).length>0){var n=this.props.receive_asset.get("id");t=n?s.a.createElement("span",null,s.a.createElement(u.a,{component:"span",content:"transfer.available"}),": ",s.a.createElement(_.a,{balance:e[n]})):"No funds"}else t="No funds";return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Withdraw ",this.props.deposit_asset)),s.a.createElement("div",{className:"content-block"},s.a.createElement(v.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.receive_asset.get("id"),assets:[this.props.receive_asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:t})),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmit.bind(this),value:y.a.translate("modal.withdraw.submit")}),s.a.createElement(c.a,{close:this.props.modal_id},s.a.createElement("div",{className:"button"},s.a.createElement(u.a,{content:"account.perm.cancel"}))))))}}]),e}(s.a.Component);w.propTypes={account:d.a.ChainAccount.isRequired,issuer_account:d.a.ChainAccount.isRequired,deposit_asset:s.a.PropTypes.string,receive_asset:d.a.ChainAsset.isRequired,rpc_url:s.a.PropTypes.string},e.a=n.i(h.a)(w,{keep_updating:!0})},1413:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(128),c=n.n(l),p=n(21),u=n.n(p),d=n(45),h=n(44),m=n(1240),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),f=function(t){function e(t){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),_(e,[{key:"gotoShop",value:function(){window.open(this.props.depositUrl)}},{key:"render",value:function(){return s.a.createElement("div",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,s.a.createElement(u.a,{content:"gateway.transwiser.deposit_title",asset:this.props.inventoryAsset.get("symbol")}))),s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(u.a,{content:"gateway.inventory"})),s.a.createElement(m.a,{account:this.props.issuerAccount.get("name"),asset:this.props.inventoryAsset.get("symbol")})),s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(u.a,{content:"gateway.transwiser.visit_weidian"})),s.a.createElement("a",{onClick:this.gotoShop.bind(this),href:this.props.depositUrl,target:"_blank"},this.props.depositUrl)),s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(u.a,{content:"gateway.scan_qr"})),s.a.createElement("img",{src:this.props.qr})),s.a.createElement("div",{className:"content-block"},s.a.createElement(c.a,{close:this.props.modalId},s.a.createElement("div",{className:"button"},s.a.createElement(u.a,{content:"modal.ok"}))))))}}]),e}(s.a.Component);f.propTypes={issuerAccount:d.a.ChainAccount.isRequired,depositUrl:s.a.PropTypes.string.isRequired,qr:s.a.PropTypes.string.isRequired,fee:s.a.PropTypes.number.isRequired,modalId:s.a.PropTypes.string.isRequired,inventoryAsset:d.a.ChainAsset.isRequired},e.a=n.i(h.a)(f,{keep_updating:!0})},1414:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(21),c=n.n(l),p=n(45),u=n(44),d=n(129),h=n.n(d),m=n(128),_=n.n(m),f=n(38),y=n.n(f),v=n(1240),g=n(1413),b=n(1415),w=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),E=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={depositUrl:null,qr:null,deposit_fee:null,withdraw_fee:null},n.depositCoin="rmb",n.apiUrl="https://bitshares.dacplay.org/transwiser/setting.json",n}return o(e,t),w(e,[{key:"requestDepositUrl",value:function(){var t=this,e=this.depositCoin.toLocaleLowerCase()+":"+this.props.receiveAsset.get("symbol").toLocaleLowerCase();fetch(this.apiUrl,{method:"get",headers:new Headers({Accept:"application/json","Content-Type":"application/json"})}).then(function(n){n.json().then(function(n){var a=n[e];a&&t.setState({depositUrl:a.depositURL,qr:a.qr,deposit_fee:a.fee.deposit,withdraw_fee:a.fee.withdraw})},function(t){console.log("error: ",t)})},function(t){console.log("error: ",t)})}},{key:"getWithdrawModalId",value:function(){return"withdraw"+this.getModalId()}},{key:"getDepositModalId",value:function(){return"deposit"+this.getModalId()}},{key:"getModalId",value:function(){return"_asset_"+this.props.issuerAccount.get("name")+"_"+this.props.receiveAsset.get("symbol")}},{key:"onWithdraw",value:function(){y.a.publish(this.getWithdrawModalId(),"open")}},{key:"onDeposit",value:function(){y.a.publish(this.getDepositModalId(),"open")}},{key:"render",value:function(){var t=s.a.createElement("tr",{style:{display:"block"}},s.a.createElement("td",null,"loading"),s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null));if(!this.props.account||!this.props.issuerAccount||!this.props.receiveAsset)return t;if(!this.state.depositUrl)return this.requestDepositUrl(),t;var e=this.getWithdrawModalId(),n=this.getDepositModalId();return s.a.createElement("tr",null,s.a.createElement("td",null,this.props.receiveAsset.get("symbol")," "),s.a.createElement("td",null,s.a.createElement("button",{className:"button outline",onClick:this.onDeposit.bind(this)}," ",s.a.createElement(c.a,{content:"gateway.deposit"})," "),s.a.createElement(h.a,{id:n,overlay:!0},s.a.createElement(_.a,{close:n},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(g.a,{issuerAccount:this.props.issuerAccount.get("name"),depositUrl:this.state.depositUrl,qr:this.state.qr,fee:this.state.deposit_fee,inventoryAsset:this.props.receiveAsset.get("symbol"),modalId:n})))),s.a.createElement("td",null," ",s.a.createElement(v.a,{account:this.props.account.get("name"),asset:this.props.receiveAsset.get("symbol")})," "),s.a.createElement("td",null,s.a.createElement("button",{className:"button outline",onClick:this.onWithdraw.bind(this)}," ",s.a.createElement(c.a,{content:"gateway.withdraw"})," "),s.a.createElement(h.a,{id:e,overlay:!0},s.a.createElement(_.a,{close:e},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(b.a,{account:this.props.account.get("name"),issuerAccount:this.props.issuerAccount.get("name"),sellAsset:this.props.receiveAsset.get("symbol"),fee:this.state.withdraw_fee,modalId:e})))))}}]),e}(s.a.Component);E.propTypes={issuerAccount:p.a.ChainAccount,account:p.a.ChainAccount,receiveAsset:p.a.ChainAsset},e.a=n.i(u.a)(E,{keep_updating:!0})},1415:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(1),s=n.n(r),l=n(128),c=n.n(l),p=n(21),u=n.n(p),d=n(45),h=n(6),m=n(44),_=n(18),f=n(1181),y=n(32),v=n.n(y),g=n(1187),b=n(163),w=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),E=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.state={withdraw_amount:null,withdraw_address:null,withdraw_amount_after_fee:null,balance_error:!1};return n}return o(e,t),w(e,[{key:"onWithdrawAmountChange",value:function(t){var e=t.amount,n=t.asset;if(this.balanceAmount&&0!=this.balanceAmount&&e&&n){var a=parseInt(e.replace(/,/g,""));a-=a*this.props.fee,a=Math.floor(100*a)/100,this.setState({withdraw_amount:e,withdraw_amount_after_fee:a,balance_error:e>this.balanceAmount})}else this.setState({withdraw_amount:0,withdraw_amount_after_fee:0,balance_error:!0})}},{key:"onWithdrawAddressChanged",value:function(t){this.setState({withdraw_address:t.target.value})}},{key:"onSubmit",value:function(){var t=this.props.sellAsset,e=_.a.get_asset_precision(t.get("precision")),n=this.state.withdraw_amount.replace(/,/g,"");b.a.transfer(this.props.account.get("id"),this.props.issuerAccount.get("id"),parseInt(n*e,10),t.get("id"),(this.props.memo_prefix||"")+this.state.withdraw_address)}},{key:"displayFee",value:function(){return 100*this.props.fee+"%"}},{key:"render",value:function(){var t=null,e=this.props.account.get("balances").toJS();if(Object.keys(e).length>0){var n=this.props.sellAsset.get("id");n?(t=s.a.createElement("span",null,s.a.createElement(u.a,{component:"span",content:"transfer.available"}),": ",s.a.createElement(f.a,{balance:e[n]})),e[n]&&(this.balanceAmount=parseInt(h.b.getObject(e[n]).get("balance"))/Math.pow(10,parseInt(this.props.sellAsset.get("precision"))))):(t="No funds",this.balanceAmount=0)}else t="No funds",this.balanceAmount=0;return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,s.a.createElement(u.a,{content:"gateway.transwiser.withdraw_title",asset:this.props.sellAsset.get("symbol")}))),s.a.createElement("div",{className:"content-block"},s.a.createElement("p",null,s.a.createElement(u.a,{content:"gateway.transwiser.withdraw_note"}))),s.a.createElement("div",{className:"content-block"},s.a.createElement(g.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.sellAsset.get("id"),assets:[this.props.sellAsset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:t}),this.state.balance_error?s.a.createElement("div",{className:"has-error"},s.a.createElement(u.a,{content:"transfer.errors.insufficient"})):null,s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block"},s.a.createElement(u.a,{content:"transfer.fee"}),": ",this.displayFee(),this.state.withdraw_amount_after_fee>0?s.a.createElement("span",null," (",s.a.createElement(u.a,{content:"gateway.transwiser.you_will_receive",amount:this.state.withdraw_amount_after_fee}),")"):null)),s.a.createElement("div",{className:"content-block full-width-content"},s.a.createElement("label",null,s.a.createElement(u.a,{component:"span",content:"gateway.transwiser.alipay"})),s.a.createElement("input",{type:"text",value:this.state.withdraw_address||"",tabIndex:"4",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:"off"})),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmit.bind(this),value:v.a.translate("modal.withdraw.submit")}),s.a.createElement(c.a,{close:this.props.modalId},s.a.createElement("div",{className:"button"},s.a.createElement(u.a,{content:"account.perm.cancel"}))))))}}]),e}(s.a.Component);E.propTypes={account:d.a.ChainAccount.isRequired,issuerAccount:d.a.ChainAccount.isRequired,sellAsset:d.a.ChainAsset.isRequired,fee:s.a.PropTypes.number.isRequired,memo_prefix:s.a.PropTypes.string},e.a=n.i(m.a)(E,{keep_updating:!0})},402:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),s=n.n(r),l=n(62),c=(n.n(l),n(266)),p=n(18),u=n(21),d=n.n(u),h=n(45),m=n(44),_=n(1414),f=n(1407),y=n(1406),v=n(1410),g=n(1411),b=n(381),w=n(51),E=n.n(w),C=n(90),k=n(46),T=n(63),S=n(1243),A=n(12),O=(n.n(A),n(394)),N=n(1405),P=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),j=function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={blockTradesCoins:[],blockTradesBackedCoins:[],openLedgerCoins:[],openLedgerBackedCoins:[],olService:t.viewSettings.get("olService","gateway"),btService:t.viewSettings.get("btService","bridge"),metaService:t.viewSettings.get("metaService","bridge"),activeService:t.viewSettings.get("activeService",0)},n}return o(e,t),P(e,[{key:"shouldComponentUpdate",value:function(t,e){return!(t.account===this.props.account&&p.a.are_equal_shallow(e.blockTradesCoins,this.state.blockTradesCoins)&&p.a.are_equal_shallow(e.blockTradesBackedCoins,this.state.blockTradesBackedCoins)&&p.a.are_equal_shallow(e.openLedgerCoins,this.state.openLedgerCoins)&&p.a.are_equal_shallow(e.openLedgerBackedCoins,this.state.openLedgerBackedCoins)&&e.olService===this.state.olService&&e.btService===this.state.btService&&e.metaService===this.state.metaService&&e.activeService===this.state.activeService)}},{key:"componentWillMount",value:function(){var t=this;c.a.getFinalFeeAsset(this.props.account,"transfer"),"4018d784"===A.Apis.instance().chain_id.substr(0,8)&&(n.i(S.a)().then(function(e){t.setState({blockTradesCoins:e,blockTradesBackedCoins:n.i(S.b)({allCoins:e,backer:"TRADE"})})}),n.i(S.a)().then(function(e){t.setState({openLedgerCoins:e,openLedgerBackedCoins:n.i(S.b)({allCoins:e,backer:"OPEN"})})}))}},{key:"toggleOLService",value:function(t){this.setState({olService:t}),T.a.changeViewSetting({olService:t})}},{key:"toggleBTService",value:function(t){this.setState({btService:t}),T.a.changeViewSetting({btService:t})}},{key:"toggleMetaService",value:function(t){this.setState({metaService:t}),T.a.changeViewSetting({metaService:t})}},{key:"onSetService",value:function(t){this.setState({activeService:parseInt(t.target.value)}),T.a.changeViewSetting({activeService:parseInt(t.target.value)})}},{key:"renderServices",value:function(t,e){var n=[],a=this.props.account,i=this.state,o=i.olService,r=i.btService;return n.push({name:"Openledger (OPEN.X)",template:s.a.createElement("div",{className:"content-block"},s.a.createElement("div",{className:"float-right"},s.a.createElement("a",{href:"https://www.ccedk.com/",target:"__blank"},s.a.createElement(d.a,{content:"gateway.website"}))),s.a.createElement("div",{className:"button-group",style:{marginBottom:0}},s.a.createElement("div",{onClick:this.toggleOLService.bind(this,"gateway"),className:E()("button","gateway"===o?"active":"outline")},s.a.createElement(d.a,{content:"gateway.gateway"})),s.a.createElement("div",{onClick:this.toggleOLService.bind(this,"fiat"),className:E()("button","fiat"===o?"active":"outline")},"Fiat")),"gateway"===o&&e.length?s.a.createElement(y.a,{account:a,coins:e,provider:"openledger"}):null,"fiat"===o?s.a.createElement("div",null,s.a.createElement("div",{style:{paddingBottom:15}},s.a.createElement(d.a,{component:"h5",content:"gateway.fiat_text"})),s.a.createElement(v.a,{rpc_url:O.a.RPC_URL,account:a,issuer_account:"openledger-fiat"}),s.a.createElement(g.a,{rpc_url:O.a.RPC_URL,account:a})):null)}),n.push({name:"BlockTrades (TRADE.X)",template:s.a.createElement("div",null,s.a.createElement("div",{className:"content-block"},s.a.createElement("div",{className:"float-right"},s.a.createElement("a",{href:"https://blocktrades.us",target:"__blank"},s.a.createElement(d.a,{content:"gateway.website"}))),s.a.createElement("div",{className:"button-group"},s.a.createElement("div",{onClick:this.toggleBTService.bind(this,"bridge"),className:E()("button","bridge"===r?"active":"outline")},s.a.createElement(d.a,{content:"gateway.bridge"})),s.a.createElement("div",{onClick:this.toggleBTService.bind(this,"gateway"),className:E()("button","gateway"===r?"active":"outline")},s.a.createElement(d.a,{content:"gateway.gateway"}))),"bridge"===r?s.a.createElement(f.a,{gateway:"blocktrades",issuer_account:"blocktrades",account:a,initial_deposit_input_coin_type:"btc",initial_deposit_output_coin_type:"bts",initial_deposit_estimated_input_amount:"1.0",initial_withdraw_input_coin_type:"bts",initial_withdraw_output_coin_type:"btc",initial_withdraw_estimated_input_amount:"100000",initial_conversion_input_coin_type:"bts",initial_conversion_output_coin_type:"bitbtc",initial_conversion_estimated_input_amount:"1000"}):null,"gateway"===r&&t.length?s.a.createElement(y.a,{account:a,coins:t,provider:"blocktrades"}):null),s.a.createElement("div",{className:"content-block"}))}),n.push({name:"Transwiser",template:s.a.createElement("div",null,s.a.createElement("div",{className:"float-right"},s.a.createElement("a",{href:"http://www.transwiser.com",target:"_blank"},s.a.createElement(d.a,{content:"gateway.website"}))),s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(d.a,{content:"gateway.symbol"})),s.a.createElement("th",null,s.a.createElement(d.a,{content:"gateway.deposit_to"})),s.a.createElement("th",null,s.a.createElement(d.a,{content:"gateway.balance"})),s.a.createElement("th",null,s.a.createElement(d.a,{content:"gateway.withdraw"})))),s.a.createElement("tbody",null,s.a.createElement(_.a,{issuerAccount:"transwiser-wallet",account:a.get("name"),receiveAsset:"TCNY"}),s.a.createElement(_.a,{issuerAccount:"transwiser-wallet",account:a.get("name"),receiveAsset:"CNY"}))))}),n.push({name:"BitKapital",template:s.a.createElement(N.a,{viewSettings:this.props.viewSettings,account:a})}),n}},{key:"render",value:function(){var t=this.props.account,e=this.state.activeService,n=this.state.blockTradesBackedCoins.filter(function(t){return"muse"!==t.backingCoinType&&t.symbol.toUpperCase().indexOf("TRADE")!==-1}).map(function(t){return t}).sort(function(t,e){return t.symbol<e.symbol?-1:t.symbol>e.symbol?1:0}),a=this.state.openLedgerBackedCoins.map(function(t){return t}).sort(function(t,e){return t.symbol<e.symbol?-1:t.symbol>e.symbol?1:0}),i=this.renderServices(n,a),o=i.map(function(t,e){return s.a.createElement("option",{key:e,value:e},t.name)});return s.a.createElement("div",{className:this.props.contained?"grid-content":"grid-container"},s.a.createElement("div",{className:this.props.contained?"":"grid-content"},s.a.createElement("div",{style:{borderBottom:"2px solid #444"}},s.a.createElement(b.a,{path:"components/DepositWithdraw",section:"receive",account:t.get("name")}),s.a.createElement(b.a,{path:"components/DepositWithdraw",section:"deposit-short"})),s.a.createElement("div",{style:{paddingTop:30,paddingLeft:8,paddingBottom:10,fontSize:14}},s.a.createElement(d.a,{content:"gateway.service"})),s.a.createElement("select",{onChange:this.onSetService.bind(this),className:"bts-select",value:e},o),s.a.createElement("div",{className:"grid-content no-padding",style:{paddingTop:15}},e&&i[e]?i[e].template:i[0].template)))}}]),e}(s.a.Component);j.propTypes={account:h.a.ChainAccount.isRequired,contained:s.a.PropTypes.bool},j.defaultProps={contained:!1},j=n.i(m.a)(j);var x=function(t){function e(){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),P(e,[{key:"render",value:function(){return s.a.createElement(j,this.props)}}]),e}(s.a.Component);e.default=n.i(l.connect)(x,{listenTo:function(){return[C.a,k.a]},getProps:function(){return{account:C.a.getState().currentAccount,viewSettings:k.a.getState().viewSettings}}})}});
//# sourceMappingURL=5.js.map