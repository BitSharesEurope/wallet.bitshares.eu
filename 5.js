webpackJsonp([5],{1128:function(e,t,n){"use strict";function a(e){function t(){l.add(e,"ps-focus")}function n(){l.remove(e,"ps-focus")}var a=this;a.settings=s.clone(c),a.containerWidth=null,a.containerHeight=null,a.contentWidth=null,a.contentHeight=null,a.isRtl="rtl"===u.css(e,"direction"),a.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),a.negativeScrollAdjustment=a.isNegativeScroll?e.scrollWidth-e.clientWidth:0,a.event=new p,a.ownerDocument=e.ownerDocument||document,a.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),e),a.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),a.scrollbarXRail),a.scrollbarX.setAttribute("tabindex",0),a.event.bind(a.scrollbarX,"focus",t),a.event.bind(a.scrollbarX,"blur",n),a.scrollbarXActive=null,a.scrollbarXWidth=null,a.scrollbarXLeft=null,a.scrollbarXBottom=s.toInt(u.css(a.scrollbarXRail,"bottom")),a.isScrollbarXUsingBottom=a.scrollbarXBottom===a.scrollbarXBottom,a.scrollbarXTop=a.isScrollbarXUsingBottom?null:s.toInt(u.css(a.scrollbarXRail,"top")),a.railBorderXWidth=s.toInt(u.css(a.scrollbarXRail,"borderLeftWidth"))+s.toInt(u.css(a.scrollbarXRail,"borderRightWidth")),u.css(a.scrollbarXRail,"display","block"),a.railXMarginWidth=s.toInt(u.css(a.scrollbarXRail,"marginLeft"))+s.toInt(u.css(a.scrollbarXRail,"marginRight")),u.css(a.scrollbarXRail,"display",""),a.railXWidth=null,a.railXRatio=null,a.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),e),a.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),a.scrollbarYRail),a.scrollbarY.setAttribute("tabindex",0),a.event.bind(a.scrollbarY,"focus",t),a.event.bind(a.scrollbarY,"blur",n),a.scrollbarYActive=null,a.scrollbarYHeight=null,a.scrollbarYTop=null,a.scrollbarYRight=s.toInt(u.css(a.scrollbarYRail,"right")),a.isScrollbarYUsingRight=a.scrollbarYRight===a.scrollbarYRight,a.scrollbarYLeft=a.isScrollbarYUsingRight?null:s.toInt(u.css(a.scrollbarYRail,"left")),a.scrollbarYOuterWidth=a.isRtl?s.outerWidth(a.scrollbarY):null,a.railBorderYWidth=s.toInt(u.css(a.scrollbarYRail,"borderTopWidth"))+s.toInt(u.css(a.scrollbarYRail,"borderBottomWidth")),u.css(a.scrollbarYRail,"display","block"),a.railYMarginHeight=s.toInt(u.css(a.scrollbarYRail,"marginTop"))+s.toInt(u.css(a.scrollbarYRail,"marginBottom")),u.css(a.scrollbarYRail,"display",""),a.railYHeight=null,a.railYRatio=null}function o(e){return e.getAttribute("data-ps-id")}function i(e,t){e.setAttribute("data-ps-id",t)}function r(e){e.removeAttribute("data-ps-id")}var s=n(1130),l=n(1134),c=n(1152),u=n(1133),p=n(1149),d=n(1150),m={};t.add=function(e){var t=d();return i(e,t),m[t]=new a(e),m[t]},t.remove=function(e){delete m[o(e)],r(e)},t.get=function(e){return m[o(e)]}},1130:function(e,t,n){"use strict";var a=n(1134),o=n(1133),i=t.toInt=function(e){return parseInt(e,10)||0},r=t.clone=function(e){if(e){if(e.constructor===Array)return e.map(r);if("object"==typeof e){var t={};for(var n in e)t[n]=r(e[n]);return t}return e}return null};t.extend=function(e,t){var n=r(e);for(var a in t)n[a]=r(t[a]);return n},t.isEditable=function(e){return o.matches(e,"input,[contenteditable]")||o.matches(e,"select,[contenteditable]")||o.matches(e,"textarea,[contenteditable]")||o.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=a.list(e),n=0;n<t.length;n++){var o=t[n];0===o.indexOf("ps-")&&a.remove(e,o)}},t.outerWidth=function(e){return i(o.css(e,"width"))+i(o.css(e,"paddingLeft"))+i(o.css(e,"paddingRight"))+i(o.css(e,"borderLeftWidth"))+i(o.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){a.add(e,"ps-in-scrolling"),"undefined"!=typeof t?a.add(e,"ps-"+t):(a.add(e,"ps-x"),a.add(e,"ps-y"))},t.stopScrolling=function(e,t){a.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?a.remove(e,"ps-"+t):(a.remove(e,"ps-x"),a.remove(e,"ps-y"))},t.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},1131:function(e,t,n){"use strict";function a(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function o(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,s.css(t.scrollbarXRail,n);var a={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?a.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:a.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?a.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:a.left=t.scrollbarYLeft+e.scrollLeft,s.css(t.scrollbarYRail,a),s.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),s.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var i=n(1130),r=n(1134),s=n(1133),l=n(1128),c=n(1132);e.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=s.queryChildren(e,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(e){s.remove(e)}),s.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=s.queryChildren(e,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(e){s.remove(e)}),s.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=a(t,i.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=i.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=a(t,i.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=i.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),o(e,t),t.scrollbarXActive?r.add(e,"ps-active-x"):(r.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,c(e,"left",0)),t.scrollbarYActive?r.add(e,"ps-active-y"):(r.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,c(e,"top",0))}},1132:function(e,t,n){"use strict";var a,o,i=n(1128),r=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(r("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(r("ps-x-reach-start")));var s=i.get(e);"top"===t&&n>=s.contentHeight-s.containerHeight&&(n=s.contentHeight-s.containerHeight,n-e.scrollTop<=1?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(r("ps-y-reach-end"))),"left"===t&&n>=s.contentWidth-s.containerWidth&&(n=s.contentWidth-s.containerWidth,n-e.scrollLeft<=1?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(r("ps-x-reach-end"))),a||(a=e.scrollTop),o||(o=e.scrollLeft),"top"===t&&n<a&&e.dispatchEvent(r("ps-scroll-up")),"top"===t&&n>a&&e.dispatchEvent(r("ps-scroll-down")),"left"===t&&n<o&&e.dispatchEvent(r("ps-scroll-left")),"left"===t&&n>o&&e.dispatchEvent(r("ps-scroll-right")),"top"===t&&(e.scrollTop=a=n,e.dispatchEvent(r("ps-scroll-y"))),"left"===t&&(e.scrollLeft=o=n,e.dispatchEvent(r("ps-scroll-x")))}},1133:function(e,t,n){"use strict";function a(e,t){return window.getComputedStyle(e)[t]}function o(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function i(e,t){for(var n in t){var a=t[n];"number"==typeof a&&(a=a.toString()+"px"),e.style[n]=a}return e}var r={};r.e=function(e,t){var n=document.createElement(e);return n.className=t,n},r.appendTo=function(e,t){return t.appendChild(e),e},r.css=function(e,t,n){return"object"==typeof t?i(e,t):"undefined"==typeof n?a(e,t):o(e,t,n)},r.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},r.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},r.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return r.matches(e,t)})},e.exports=r},1134:function(e,t,n){"use strict";function a(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function o(e,t){var n=e.className.split(" "),a=n.indexOf(t);a>=0&&n.splice(a,1),e.className=n.join(" ")}t.add=function(e,t){e.classList?e.classList.add(t):a(e,t)},t.remove=function(e,t){e.classList?e.classList.remove(t):o(e,t)},t.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},1139:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(127),c=n(60),u=n(59),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),p(t,[{key:"render",value:function(){var e=Number(this.props.balance.get("balance")),t=this.props.balance.get("asset_type");return s.a.createElement(l.a,{amount:e,asset:t,asPercentage:this.props.asPercentage,assetInfo:this.props.assetInfo})}}]),t}(s.a.Component);d.propTypes={balance:c.a.ChainObject.isRequired,assetInfo:s.a.PropTypes.node},t.a=n.i(u.a)(d,{keep_updating:!0})},1142:function(e,t,n){"use strict";e.exports=n(1151)},1145:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(23),c=n.n(l),u=n(7),p=n(60),d=n(59),m=n(127),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),h(t,[{key:"render",value:function(){var e=this.props.asset?this.props.asset.get("symbol"):this.props.asset_id;return s.a.createElement("option",{value:this.props.asset_id},e)}}]),t}(s.a.Component);_.propTypes={asset:p.a.ChainObject,asset_id:s.a.PropTypes.string},_=n.i(d.a)(_);var f=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected:e.value||e.assets[0]},n}return i(t,e),h(t,[{key:"onChange",value:function(e){var t=u.b.getAsset(e.target.value);this.props.onChange(t),this.setState({selected:t?t.get("id"):"1.3.0"})}},{key:"render",value:function(){if(0===this.props.assets.length)return null;var e=this.props.assets.map(function(e){return s.a.createElement(_,{key:e,asset:e,asset_id:e})});return 1==this.props.assets.length?s.a.createElement(m.a,{asset:this.props.assets[0],amount:0,hide_amount:!0}):s.a.createElement("select",{value:this.state.selected,className:"form-control",onChange:this.onChange.bind(this)},e)}}]),t}(s.a.Component);f.propTypes={value:s.a.PropTypes.string,assets:s.a.PropTypes.array,onChange:s.a.PropTypes.func};var y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),h(t,[{key:"componentDidMount",value:function(){this.onAssetChange(this.props.asset)}},{key:"formatAmount",value:function(e){e||(e=""),"number"==typeof e&&(e=e.toString());for(var t=e.trim().replace(/,/g,"");"00"==t.substring(0,2);)t=t.substring(1);if("."===t[0])t="0"+t;else if(t.length){var n=Number(t);if(isNaN(n)&&(t=parseFloat(t),isNaN(t)))return"";var a=(t+"").split(".");t=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),a.length>1&&(t+="."+a[1])}return t}},{key:"_onChange",value:function(e){var t=e.target.value;this.setState({amount:t}),this.props.onChange({amount:t,asset:this.props.asset})}},{key:"onAssetChange",value:function(e){this.setState({selected_asset:e}),this.props.onChange({amount:this.props.amount,asset:e})}},{key:"render",value:function(){var e=this.formatAmount(this.props.amount);return s.a.createElement("div",{className:"amount-selector",style:this.props.style},s.a.createElement("div",{className:"float-right"},this.props.display_balance),s.a.createElement(c.a,{component:"label",content:this.props.label}),s.a.createElement("div",{className:"inline-label"},s.a.createElement("input",{disabled:this.props.disabled,type:"text",value:e||"",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex}),s.a.createElement("span",{className:"form-label select"},s.a.createElement(f,{ref:this.props.refCallback,value:this.props.asset.get("id"),assets:this.props.assets,onChange:this.onAssetChange.bind(this)}))))}}]),t}(s.a.Component);y.propTypes={label:s.a.PropTypes.string,asset:p.a.ChainAsset.isRequired,assets:s.a.PropTypes.array,amount:s.a.PropTypes.any,placeholder:s.a.PropTypes.string,onChange:s.a.PropTypes.func.isRequired,tabIndex:s.a.PropTypes.number},y.defaultProps={disabled:!1},y=n.i(d.a)(y),t.a=y},1148:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(1167),c=n.n(l),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?s.a.createElement(c.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):s.a.createElement(this.props.component)}}]),t}(s.a.Component);p.defaultProps={component:"span",enterTimeout:2e3},t.a=p},1149:function(e,t,n){"use strict";var a=function(e){this.element=e,this.events={}};a.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},a.prototype.unbind=function(e,t){var n="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(a){return!(!n||a===t)||(this.element.removeEventListener(e,a,!1),!1)},this)},a.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new a(e),this.eventElements.push(t)),t},o.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},o.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},o.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},o.prototype.once=function(e,t,n){var a=this.eventElement(e),o=function(e){a.unbind(t,o),n(e)};a.bind(t,o)},e.exports=o},1150:function(e,t,n){"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},1151:function(e,t,n){"use strict";var a=n(1153),o=n(1161),i=n(1162);e.exports={initialize:o,update:i,destroy:a}},1152:function(e,t,n){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},1153:function(e,t,n){"use strict";var a=n(1130),o=n(1133),i=n(1128);e.exports=function(e){var t=i.get(e);t&&(t.event.unbindAll(),o.remove(t.scrollbarX),o.remove(t.scrollbarY),o.remove(t.scrollbarXRail),o.remove(t.scrollbarYRail),a.removePsClasses(e),i.remove(e))}},1154:function(e,t,n){"use strict";function a(e,t){function n(e){return e.getBoundingClientRect()}var a=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",a),t.event.bind(t.scrollbarYRail,"click",function(a){var o=a.pageY-window.pageYOffset-n(t.scrollbarYRail).top,s=o>t.scrollbarYTop?1:-1;r(e,"top",e.scrollTop+s*t.containerHeight),i(e),a.stopPropagation()}),t.event.bind(t.scrollbarX,"click",a),t.event.bind(t.scrollbarXRail,"click",function(a){var o=a.pageX-window.pageXOffset-n(t.scrollbarXRail).left,s=o>t.scrollbarXLeft?1:-1;r(e,"left",e.scrollLeft+s*t.containerWidth),i(e),a.stopPropagation()})}var o=n(1128),i=n(1131),r=n(1132);e.exports=function(e){var t=o.get(e);a(e,t)}},1155:function(e,t,n){"use strict";function a(e,t){function n(n){var o=a+n*t.railXRatio,r=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);o<0?t.scrollbarXLeft=0:o>r?t.scrollbarXLeft=r:t.scrollbarXLeft=o;var s=i.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;c(e,"left",s)}var a=null,o=null,s=function(t){n(t.pageX-o),l(e),t.stopPropagation(),t.preventDefault()},u=function(){i.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarX,"mousedown",function(n){o=n.pageX,a=i.toInt(r.css(t.scrollbarX,"left"))*t.railXRatio,i.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function o(e,t){function n(n){var o=a+n*t.railYRatio,r=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);o<0?t.scrollbarYTop=0:o>r?t.scrollbarYTop=r:t.scrollbarYTop=o;var s=i.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));c(e,"top",s)}var a=null,o=null,s=function(t){n(t.pageY-o),l(e),t.stopPropagation(),t.preventDefault()},u=function(){i.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarY,"mousedown",function(n){o=n.pageY,a=i.toInt(r.css(t.scrollbarY,"top"))*t.railYRatio,i.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var i=n(1130),r=n(1133),s=n(1128),l=n(1131),c=n(1132);e.exports=function(e){var t=s.get(e);a(e,t),o(e,t)}},1156:function(e,t,n){"use strict";function a(e,t){function n(n,a){var o=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===o&&a>0||o>=t.contentHeight-t.containerHeight&&a<0)return!t.settings.wheelPropagation}var i=e.scrollLeft;if(0===a){if(!t.scrollbarXActive)return!1;if(0===i&&n<0||i>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var a=!1;t.event.bind(e,"mouseenter",function(){a=!0}),t.event.bind(e,"mouseleave",function(){a=!1});var r=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var u=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(a||u){var p=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(p){if("IFRAME"===p.tagName)p=p.contentDocument.activeElement;else for(;p.shadowRoot;)p=p.shadowRoot.activeElement;if(o.isEditable(p))return}var d=0,m=0;switch(c.which){case 37:d=c.metaKey?-t.contentWidth:c.altKey?-t.containerWidth:-30;break;case 38:m=c.metaKey?t.contentHeight:c.altKey?t.containerHeight:30;break;case 39:d=c.metaKey?t.contentWidth:c.altKey?t.containerWidth:30;break;case 40:m=c.metaKey?-t.contentHeight:c.altKey?-t.containerHeight:-30;break;case 33:m=90;break;case 32:m=c.shiftKey?90:-90;break;case 34:m=-90;break;case 35:m=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:m=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-m),l(e,"left",e.scrollLeft+d),s(e),r=n(d,m),r&&c.preventDefault()}}})}var o=n(1130),i=n(1133),r=n(1128),s=n(1131),l=n(1132);e.exports=function(e){var t=r.get(e);a(e,t)}},1157:function(e,t,n){"use strict";function a(e,t){function n(n,a){var o=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===o&&a>0||o>=t.contentHeight-t.containerHeight&&a<0)return!t.settings.wheelPropagation}var i=e.scrollLeft;if(0===a){if(!t.scrollbarXActive)return!1;if(0===i&&n<0||i>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function a(e){var t=e.deltaX,n=-1*e.deltaY;return"undefined"!=typeof t&&"undefined"!=typeof n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}function o(t,n){var a=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(a){if(a.className.match(/ps-must-propagate/))return!0;if(!window.getComputedStyle(a).overflow.match(/(scroll|auto)/))return!1;var o=a.scrollHeight-a.clientHeight;if(o>0&&!(0===a.scrollTop&&n>0||a.scrollTop===o&&n<0))return!0;var i=a.scrollLeft-a.clientWidth;if(i>0&&!(0===a.scrollLeft&&t<0||a.scrollLeft===i&&t>0))return!0}return!1}function s(s){var c=a(s),u=c[0],p=c[1];o(u,p)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(p?r(e,"top",e.scrollTop-p*t.settings.wheelSpeed):r(e,"top",e.scrollTop+u*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?r(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):r(e,"left",e.scrollLeft-p*t.settings.wheelSpeed),l=!0):(r(e,"top",e.scrollTop-p*t.settings.wheelSpeed),r(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),i(e),l=l||n(u,p),l&&(s.stopPropagation(),s.preventDefault()))}var l=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",s):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",s)}var o=n(1128),i=n(1131),r=n(1132);e.exports=function(e){var t=o.get(e);a(e,t)}},1158:function(e,t,n){"use strict";function a(e,t){t.event.bind(e,"scroll",function(){i(e)})}var o=n(1128),i=n(1131);e.exports=function(e){var t=o.get(e);a(e,t)}},1159:function(e,t,n){"use strict";function a(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function a(){c||(c=setInterval(function(){return i.get(e)?(s(e,"top",e.scrollTop+u.top),s(e,"left",e.scrollLeft+u.left),void r(e)):void clearInterval(c)},50))}function l(){c&&(clearInterval(c),c=null),o.stopScrolling(e)}var c=null,u={top:0,left:0},p=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?p=!0:(p=!1,l())}),t.event.bind(window,"mouseup",function(){p&&(p=!1,l())}),t.event.bind(window,"keyup",function(){p&&(p=!1,l())}),t.event.bind(window,"mousemove",function(t){if(p){var n={x:t.pageX,y:t.pageY},i={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<i.left+3?(u.left=-5,o.startScrolling(e,"x")):n.x>i.right-3?(u.left=5,o.startScrolling(e,"x")):u.left=0,n.y<i.top+3?(i.top+3-n.y<5?u.top=-5:u.top=-20,o.startScrolling(e,"y")):n.y>i.bottom-3?(n.y-i.bottom+3<5?u.top=5:u.top=20,o.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?l():a()}})}var o=n(1130),i=n(1128),r=n(1131),s=n(1132);e.exports=function(e){var t=i.get(e);a(e,t)}},1160:function(e,t,n){"use strict";function a(e,t,n,a){function o(n,a){var o=e.scrollTop,i=e.scrollLeft,r=Math.abs(n),s=Math.abs(a);if(s>r){if(a<0&&o===t.contentHeight-t.containerHeight||a>0&&0===o)return!t.settings.swipePropagation}else if(r>s&&(n<0&&i===t.contentWidth-t.containerWidth||n>0&&0===i))return!t.settings.swipePropagation;return!0}function l(t,n){s(e,"top",e.scrollTop-n),s(e,"left",e.scrollLeft-t),r(e)}function c(){g=!0}function u(){g=!1}function p(e){return e.targetTouches?e.targetTouches[0]:e}function d(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function m(e){if(d(e)){w=!0;var t=p(e);f.pageX=t.pageX,f.pageY=t.pageY,y=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function h(e){if(!w&&t.settings.swipePropagation&&m(e),!g&&w&&d(e)){var n=p(e),a={pageX:n.pageX,pageY:n.pageY},i=a.pageX-f.pageX,r=a.pageY-f.pageY;l(i,r),f=a;var s=(new Date).getTime(),c=s-y;c>0&&(v.x=i/c,v.y=r/c,y=s),o(i,r)&&(e.stopPropagation(),e.preventDefault())}}function _(){!g&&w&&(w=!1,clearInterval(b),b=setInterval(function(){return i.get(e)&&(v.x||v.y)?Math.abs(v.x)<.01&&Math.abs(v.y)<.01?void clearInterval(b):(l(30*v.x,30*v.y),v.x*=.8,void(v.y*=.8)):void clearInterval(b)},10))}var f={},y=0,v={},b=null,g=!1,w=!1;n?(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",m),t.event.bind(e,"touchmove",h),t.event.bind(e,"touchend",_)):a&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",m),t.event.bind(e,"pointermove",h),t.event.bind(e,"pointerup",_)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",m),t.event.bind(e,"MSPointerMove",h),t.event.bind(e,"MSPointerUp",_)))}var o=n(1130),i=n(1128),r=n(1131),s=n(1132);e.exports=function(e){if(o.env.supportsTouch||o.env.supportsIePointer){var t=i.get(e);a(e,t,o.env.supportsTouch,o.env.supportsIePointer)}}},1161:function(e,t,n){"use strict";var a=n(1130),o=n(1134),i=n(1128),r=n(1131),s={"click-rail":n(1154),"drag-scrollbar":n(1155),keyboard:n(1156),wheel:n(1157),touch:n(1160),selection:n(1159)},l=n(1158);e.exports=function(e,t){t="object"==typeof t?t:{},o.add(e,"ps-container");var n=i.add(e);n.settings=a.extend(n.settings,t),o.add(e,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(t){s[t](e)}),l(e),r(e)}},1162:function(e,t,n){"use strict";var a=n(1130),o=n(1133),i=n(1128),r=n(1131),s=n(1132);e.exports=function(e){var t=i.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,o.css(t.scrollbarXRail,"display","block"),o.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=a.toInt(o.css(t.scrollbarXRail,"marginLeft"))+a.toInt(o.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=a.toInt(o.css(t.scrollbarYRail,"marginTop"))+a.toInt(o.css(t.scrollbarYRail,"marginBottom")),o.css(t.scrollbarXRail,"display","none"),o.css(t.scrollbarYRail,"display","none"),r(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),o.css(t.scrollbarXRail,"display",""),o.css(t.scrollbarYRail,"display",""))}},1166:function(e,t,n){var a,o=o||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},a=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in a,i=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},r=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",u=4e4,p=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,u)},d=function(e,t,n){t=[].concat(t);for(var a=t.length;a--;){var o=e["on"+t[a]];if("function"==typeof o)try{o.call(e,n||e)}catch(e){l(e)}}},m=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},h=function(t,l,u){u||(t=m(t));var h,_=this,f=t.type,y=f===c,v=function(){d(_,"writestart progress write writeend".split(" "))},b=function(){if((s||y&&r)&&e.FileReader){var a=new FileReader;return a.onloadend=function(){var t=s?a.result:a.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank");n||(e.location.href=t),t=void 0,_.readyState=_.DONE,v()},a.readAsDataURL(t),void(_.readyState=_.INIT)}if(h||(h=n().createObjectURL(t)),y)e.location.href=h;else{var o=e.open(h,"_blank");o||(e.location.href=h)}_.readyState=_.DONE,v(),p(h)};return _.readyState=_.INIT,o?(h=n().createObjectURL(t),void setTimeout(function(){a.href=h,a.download=l,i(a),v(),p(h),_.readyState=_.DONE})):void b()},_=h.prototype,f=function(e,t,n){return new h(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=m(e)),navigator.msSaveOrOpenBlob(e,t)}:(_.abort=function(){},_.readyState=_.INIT=0,_.WRITING=1,_.DONE=2,_.error=_.onwritestart=_.onprogress=_.onwrite=_.onabort=_.onerror=_.onwriteend=null,f)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof e&&e.exports?e.exports.saveAs=o:null!==n(1175)&&null!==n(1176)&&(a=function(){return o}.call(t,n,t,e),!(void 0!==a&&(e.exports=a)));
},1167:function(e,t,n){e.exports=n(1169)},1168:function(e,t,n){"use strict";var a=n(383);t.getReactDOM=function(){return a}},1169:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}}}var s=n(10),l=n(89),c=n(1172),u=n(1170),p=function(e){function t(){var n,i,r;a(this,t);for(var s=arguments.length,c=Array(s),p=0;p<s;p++)c[p]=arguments[p];return n=i=o(this,e.call.apply(e,[this].concat(c))),i._wrapChild=function(e){return l.createElement(u,{name:i.props.transitionName,appear:i.props.transitionAppear,enter:i.props.transitionEnter,leave:i.props.transitionLeave,appearTimeout:i.props.transitionAppearTimeout,enterTimeout:i.props.transitionEnterTimeout,leaveTimeout:i.props.transitionLeaveTimeout},e)},r=n,o(i,r)}return i(t,e),t.prototype.render=function(){return l.createElement(c,s({},this.props,{childFactory:this._wrapChild}))},t}(l.Component);p.displayName="ReactCSSTransitionGroup",p.propTypes={transitionName:u.propTypes.name,transitionAppear:l.PropTypes.bool,transitionEnter:l.PropTypes.bool,transitionLeave:l.PropTypes.bool,transitionAppearTimeout:r("Appear"),transitionEnterTimeout:r("Enter"),transitionLeaveTimeout:r("Leave")},p.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},e.exports=p},1170:function(e,t,n){"use strict";var a=n(89),o=n(1168),i=n(1174),r=n(385),s=n(386),l=17,c=a.createClass({displayName:"ReactCSSTransitionGroupChild",propTypes:{name:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.shape({enter:a.PropTypes.string,leave:a.PropTypes.string,active:a.PropTypes.string}),a.PropTypes.shape({enter:a.PropTypes.string,enterActive:a.PropTypes.string,leave:a.PropTypes.string,leaveActive:a.PropTypes.string,appear:a.PropTypes.string,appearActive:a.PropTypes.string})]).isRequired,appear:a.PropTypes.bool,enter:a.PropTypes.bool,leave:a.PropTypes.bool,appearTimeout:a.PropTypes.number,enterTimeout:a.PropTypes.number,leaveTimeout:a.PropTypes.number},transition:function(e,t,n){var a=o.getReactDOM().findDOMNode(this);if(!a)return void(t&&t());var s=this.props.name[e]||this.props.name+"-"+e,l=this.props.name[e+"Active"]||s+"-active",c=null,u=function(e){e&&e.target!==a||(clearTimeout(c),i.removeClass(a,s),i.removeClass(a,l),r.removeEndEventListener(a,u),t&&t())};i.addClass(a,s),this.queueClassAndNode(l,a),n?(c=setTimeout(u,n),this.transitionTimeouts.push(c)):r.addEndEventListener(a,u)},queueClassAndNode:function(e,t){this.classNameAndNodeQueue.push({className:e,node:t}),this.timeout||(this.timeout=setTimeout(this.flushClassNameAndNodeQueue,l))},flushClassNameAndNodeQueue:function(){this.isMounted()&&this.classNameAndNodeQueue.forEach(function(e){i.addClass(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},componentWillAppear:function(e){this.props.appear?this.transition("appear",e,this.props.appearTimeout):e()},componentWillEnter:function(e){this.props.enter?this.transition("enter",e,this.props.enterTimeout):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e,this.props.leaveTimeout):e()},render:function(){return s(this.props.children)}});e.exports=c},1171:function(e,t,n){"use strict";var a=n(1173),o={getChildMapping:function(e,t){return e?a(e):e},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var a={},o=[];for(var i in e)t.hasOwnProperty(i)?o.length&&(a[i]=o,o=[]):o.push(i);var r,s={};for(var l in t){if(a.hasOwnProperty(l))for(r=0;r<a[l].length;r++){var c=a[l][r];s[a[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}};e.exports=o},1172:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(10),s=n(89),l=n(1171),c=n(165),u=function(e){function t(){var n,i,s;a(this,t);for(var c=arguments.length,u=Array(c),p=0;p<c;p++)u[p]=arguments[p];return n=i=o(this,e.call.apply(e,[this].concat(u))),i.state={children:l.getChildMapping(i.props.children)},i.performAppear=function(e){i.currentlyTransitioningKeys[e]=!0;var t=i.refs[e];t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e)):i._handleDoneAppearing(e)},i._handleDoneAppearing=function(e){var t=i.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=l.getChildMapping(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e)},i.performEnter=function(e){i.currentlyTransitioningKeys[e]=!0;var t=i.refs[e];t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e)):i._handleDoneEntering(e)},i._handleDoneEntering=function(e){var t=i.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=l.getChildMapping(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e)},i.performLeave=function(e){i.currentlyTransitioningKeys[e]=!0;var t=i.refs[e];t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e)):i._handleDoneLeaving(e)},i._handleDoneLeaving=function(e){var t=i.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=l.getChildMapping(i.props.children);n&&n.hasOwnProperty(e)?i.performEnter(e):i.setState(function(t){var n=r({},t.children);return delete n[e],{children:n}})},s=n,o(i,s)}return i(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},t.prototype.componentWillReceiveProps=function(e){var t=l.getChildMapping(e.children),n=this.state.children;this.setState({children:l.mergeChildMappings(n,t)});var a;for(a in t){var o=n&&n.hasOwnProperty(a);!t[a]||o||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(a in n){var i=t&&t.hasOwnProperty(a);!n[a]||i||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},t.prototype.componentDidUpdate=function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},t.prototype.render=function(){var e=[];for(var t in this.state.children){var n=this.state.children[t];n&&e.push(s.cloneElement(this.props.childFactory(n),{ref:t,key:t}))}var a=r({},this.props);return delete a.transitionLeave,delete a.transitionName,delete a.transitionAppear,delete a.transitionEnter,delete a.childFactory,delete a.transitionLeaveTimeout,delete a.transitionEnterTimeout,delete a.transitionAppearTimeout,delete a.component,s.createElement(this.props.component,a,e)},t}(s.Component);u.displayName="ReactTransitionGroup",u.propTypes={component:s.PropTypes.any,childFactory:s.PropTypes.func},u.defaultProps={component:"span",childFactory:c.thatReturnsArgument},e.exports=u},1173:function(e,t,n){"use strict";(function(t){function a(e,t,n,a){if(e&&"object"==typeof e){var o=e,i=void 0===o[n];i&&null!=t&&(o[n]=t)}}function o(e,t){if(null==e)return e;var n={};return i(e,a,n),n}var i=(n(384),n(387));n(65);"undefined"!=typeof t&&n.i({NODE_ENV:"production"}),1,e.exports=o}).call(t,n(38))},1174:function(e,t,n){"use strict";function a(e,t){for(var n=e;n.parentNode;)n=n.parentNode;var a=n.querySelectorAll(t);return Array.prototype.indexOf.call(a,e)!==-1}var o=n(92),i={addClass:function(e,t){return/\s/.test(t)?o(!1):void 0,t&&(e.classList?e.classList.add(t):i.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return/\s/.test(t)?o(!1):void 0,t&&(e.classList?e.classList.remove(t):i.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?i.addClass:i.removeClass)(e,t)},hasClass:function(e,t){return/\s/.test(t)?o(!1):void 0,e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1},matchesSelector:function(e,t){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(t){return a(e,t)};return n.call(e,t)}};e.exports=i},1175:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1176:function(e,t){(function(t){e.exports=t}).call(t,{})},1178:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(59),c=n(60),u=n(257),p=n(19),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={time:null},n}return i(t,e),d(t,[{key:"componentDidMount",value:function(){this.calcTime(this.props.block_number)}},{key:"calcTime",value:function(e){this.setState({time:p.a.calc_block_time(e,this.props.globalObject,this.props.dynGlobalObject)})}},{key:"componentWillReceiveProps",value:function(e){e.block_number!==this.props.block_number&&this.calcTime(e.block_number)}},{key:"render",value:function(){return s.a.createElement("span",{className:"time",key:this.props.block_number},this.state.time?s.a.createElement(u.a,{time:this.state.time}):null)}}]),t}(s.a.Component);m.propTypes={block_number:s.a.PropTypes.number.isRequired,globalObject:c.a.ChainObject.isRequired,dynGlobalObject:c.a.ChainObject.isRequired},m.defaultProps={globalObject:"2.0.0",dynGlobalObject:"2.1.0"},m=n.i(l.a)(m,{keep_updating:!0}),t.a=m},1179:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(127),c=n(43),u=n(61),p=n.n(u),d=n(23),m=n.n(d),h=n(36),_=n.n(h),f=n(163),y=n(19),v=n(1178),b=n(160),g=n(166),w=n(59),E=n(60),k=n(390),T=n(7),C=n(260),O=n.n(C),A=n(388),S=n(380),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),P=T.a.operations;n(262);var j=Object.keys(P),x=O.a.account_listing,R=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),N(t,[{key:"shouldComponentUpdate",value:function(e){return e.color!==this.props.color||e.type!==this.props.type}},{key:"render",value:function(){var e=_.a.translate("transaction.trxTypes"),t=p()("label",this.props.color||"info");return s.a.createElement("span",{className:t},e[j[this.props.type]])}}]),t}(s.a.Component),L=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),N(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.block,a=t.dynGlobalObject,o=a.get("last_irreversible_block_num");return e.dynGlobalObject!==this.props.dynGlobalObject&&n>o}},{key:"render",value:function(){var e=this.props,t=e.block,n=e.fee,a=e.color,o=e.type,i=e.hideOpLabel,r=this.props.dynGlobalObject.get("last_irreversible_block_num"),u=null;return t>r&&(u=s.a.createElement("span",null,"(",s.a.createElement(m.a,{content:"operation.pending",blocks:t-r}),")")),n.amount=parseInt(n.amount,10),s.a.createElement("tr",null,i?null:s.a.createElement("td",{style:{width:"20%"},className:"left-td column-hide-tiny"},s.a.createElement(c.f,{className:"inline-block","data-place":"bottom","data-tip":_.a.translate("tooltip.show_block",{block:y.a.format_number(this.props.block,0)}),to:"/block/"+this.props.block},s.a.createElement(R,{color:a,type:o}))),s.a.createElement("td",{style:{padding:"8px 5px"}},s.a.createElement("div",null,s.a.createElement("span",null,this.props.info)),s.a.createElement("div",{style:{fontSize:14,paddingTop:5}},s.a.createElement(v.a,{block_number:t}),s.a.createElement("span",{className:"facolor-fee"}," - ",s.a.createElement(l.a,{amount:n.amount,asset:n.asset_id})),u?s.a.createElement("span",null," - ",u):null)))}}]),t}(s.a.Component);L.contextTypes={router:s.a.PropTypes.object.isRequired},L.propTypes={dynGlobalObject:E.a.ChainObject.isRequired},L.defaultProps={dynGlobalObject:"2.1.0"},L=n.i(w.a)(L,{keep_updating:!0});var I=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),N(t,[{key:"linkToAccount",value:function(e){return e?y.a.is_object_id(e)?s.a.createElement(b.a,{account:e}):s.a.createElement(c.f,{to:"/account/"+e+"/overview"},e):s.a.createElement("span",null,"-")}},{key:"linkToAsset",value:function(e){return e?y.a.is_object_id(e)?s.a.createElement(g.a,{asset:e}):s.a.createElement(c.f,{to:"/asset/"+e},e):s.a.createElement("span",null,"-")}},{key:"shouldComponentUpdate",value:function(e){return!(!this.props.op||!e.op)&&!y.a.are_equal_shallow(e.op[1],this.props.op[1])}},{key:"render",value:function(){var e=this.props,t=e.op,n=e.current,a=e.block,o=null,i=null,r="info",u=null;switch(j[t[0]]){case"transfer":t[1].memo&&(u=s.a.createElement(A.a,{memo:t[1].memo})),r="success",t[1].amount.amount=parseFloat(t[1].amount.amount),i=s.a.createElement("span",{className:"right-td"},s.a.createElement(k.a,{string:"operation.transfer",keys:[{type:"account",value:t[1].from,arg:"from"},{type:"amount",value:t[1].amount,arg:"amount",decimalOffset:"1.3.0"===t[1].amount.asset_id?5:null},{type:"account",value:t[1].to,arg:"to"}]}),u);break;case"limit_order_create":r="warning";var p=t[1],d=f.a.isAskOp(t[1]);i=s.a.createElement("span",null,s.a.createElement(k.a,{string:d?"operation.limit_order_sell":"operation.limit_order_buy",keys:[{type:"account",value:t[1].seller,arg:"account"},{type:"amount",value:d?t[1].amount_to_sell:t[1].min_to_receive,arg:"amount"},{type:"price",value:{base:d?t[1].min_to_receive:t[1].amount_to_sell,quote:d?t[1].amount_to_sell:t[1].min_to_receive},arg:"price"}]}));break;case"limit_order_cancel":r="cancel",i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.limit_order_cancel",keys:[{type:"account",value:t[1].fee_paying_account,arg:"account"}],params:{order:t[1].order.substring(4)}}));break;case"call_order_update":r="warning",i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.call_order_update",keys:[{type:"account",value:t[1].funding_account,arg:"account"},{type:"asset",value:t[1].delta_debt.asset_id,arg:"debtSymbol"},{type:"amount",value:t[1].delta_debt,arg:"debt"},{type:"amount",value:t[1].delta_collateral,arg:"collateral"}]}));break;case"key_create":i=s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.create_key"}));break;case"account_create":i=s.a.createElement(k.a,{string:"operation.reg_account",keys:[{type:"account",value:t[1].registrar,arg:"registrar"},{type:"account",value:t[1].name,arg:"new_account"}]});break;case"account_update":i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.update_account",keys:[{type:"account",value:t[1].account,arg:"account"}]}));break;case"account_whitelist":var h=t[1].new_listing===x.no_listing?"unlisted_by":t[1].new_listing===x.white_listed?"whitelisted_by":"blacklisted_by";i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation."+h,keys:[{type:"account",value:t[1].authorizing_account,arg:"lister"},{type:"account",value:t[1].account_to_list,arg:"listee"}]}));break;case"account_upgrade":i=s.a.createElement("span",null,s.a.createElement(k.a,{string:t[1].upgrade_to_lifetime_member?"operation.lifetime_upgrade_account":"operation.annual_upgrade_account",keys:[{type:"account",value:t[1].account_to_upgrade,arg:"account"}]}));break;case"account_transfer":i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.account_transfer",keys:[{type:"account",value:t[1].account_id,arg:"account"},{type:"account",value:t[1].new_owner,arg:"to"}]}));break;case"asset_create":r="warning",i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.asset_create",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"asset",value:t[1].symbol,arg:"asset"}]}));break;case"asset_update":case"asset_update_bitasset":r="warning",i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.asset_update",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"asset",value:t[1].asset_to_update,arg:"asset"}]}));break;case"asset_update_feed_producers":r="warning",i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.asset_update_feed_producers",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"asset",value:t[1].asset_to_update,arg:"asset"}]}));break;case"asset_issue":r="warning",t[1].memo&&(u=s.a.createElement(A.a,{memo:t[1].memo})),t[1].asset_to_issue.amount=parseInt(t[1].asset_to_issue.amount,10),i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.asset_issue",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"amount",value:t[1].asset_to_issue,arg:"amount"},{type:"account",value:t[1].issue_to_account,arg:"to"}]}),u);break;case"asset_fund_fee_pool":r="warning",i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.asset_fund_fee_pool",keys:[{type:"account",value:t[1].from_account,arg:"account"},{type:"asset",value:t[1].asset_id,arg:"asset"},{type:"amount",value:{amount:t[1].amount,asset_id:"1.3.0"},arg:"amount"}]}));break;case"asset_settle":r="warning",i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.asset_settle",keys:[{type:"account",value:t[1].account,arg:"account"},{type:"amount",value:t[1].amount,arg:"amount"}]}));break;case"asset_global_settle":r="warning",i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.asset_global_settle",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"asset",value:t[1].asset_to_settle,arg:"asset"},{type:"price",value:t[1].settle_price,arg:"price"}]}));break;case"asset_publish_feed":r="warning",i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.publish_feed",keys:[{type:"account",value:t[1].publisher,arg:"account"},{type:"price",value:t[1].feed.settlement_price,arg:"price"}]}));break;case"witness_create":i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.witness_create",keys:[{type:"account",value:t[1].witness_account,arg:"account"}]}));break;case"witness_update":i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.witness_update",keys:[{type:"account",value:t[1].witness_account,arg:"account"}]}));break;case"witness_withdraw_pay":console.log("witness_withdraw_pay:",t[1].witness_account),i=n===t[1].witness_account?s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.witness_pay"})," ",s.a.createElement(l.a,{amount:t[1].amount,asset:"1.3.0"}),s.a.createElement(m.a,{component:"span",content:"transaction.to"})," ",this.linkToAccount(t[1].witness_account)):s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.received"})," ",s.a.createElement(l.a,{amount:t[1].amount,asset:"1.3.0"}),s.a.createElement(m.a,{component:"span",content:"transaction.from"})," ",this.linkToAccount(t[1].witness_account));break;case"proposal_create":i=s.a.createElement("div",{className:"inline-block"},s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.proposal_create",keys:[{type:"account",value:t[1].fee_paying_account,arg:"account"}]}),":"),s.a.createElement("div",null,t[1].proposed_ops.map(function(e,t){return s.a.createElement(S.a,{op:e.op,key:t,index:t,inverted:!1,hideFee:!0,hideOpLabel:!0,hideDate:!0,proposal:!0})})));break;case"proposal_update":i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.proposal_update",keys:[{type:"account",value:t[1].fee_paying_account,arg:"account"}]}));break;case"proposal_delete":i=s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.proposal_delete"}));break;case"withdraw_permission_create":i=s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.withdraw_permission_create"})," ",this.linkToAccount(t[1].withdraw_from_account),s.a.createElement(m.a,{component:"span",content:"transaction.to"})," ",this.linkToAccount(t[1].authorized_account));break;case"withdraw_permission_update":i=s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.withdraw_permission_update"})," ",this.linkToAccount(t[1].withdraw_from_account),s.a.createElement(m.a,{component:"span",content:"transaction.to"})," ",this.linkToAccount(t[1].authorized_account));break;case"withdraw_permission_claim":i=s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.withdraw_permission_claim"})," ",this.linkToAccount(t[1].withdraw_from_account),s.a.createElement(m.a,{component:"span",content:"transaction.to"})," ",this.linkToAccount(t[1].withdraw_to_account));break;case"withdraw_permission_delete":i=s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.withdraw_permission_delete"})," ",this.linkToAccount(t[1].withdraw_from_account),s.a.createElement(m.a,{component:"span",content:"transaction.to"})," ",this.linkToAccount(t[1].authorized_account));break;case"fill_order":r="success",p=t[1];var _=p.fee.asset_id===p.receives.asset_id?p.receives.amount-p.fee.amount:p.receives.amount;i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.fill_order",keys:[{type:"account",value:t[1].account_id,arg:"account"},{type:"amount",value:{amount:_,asset_id:t[1].receives.asset_id},arg:"received",decimalOffset:"1.3.0"===t[1].receives.asset_id?3:null},{type:"price",value:{base:p.pays,quote:p.receives},arg:"price"}]}));break;case"global_parameters_update":i=s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.global_parameters_update"}));break;case"vesting_balance_create":i=s.a.createElement("span",null," ",this.linkToAccount(t[1].creator),s.a.createElement(m.a,{component:"span",content:"transaction.vesting_balance_create"})," ",s.a.createElement(l.a,{amount:t[1].amount.amount,asset:t[1].amount.asset_id})," ",this.linkToAccount(t[1].owner));break;case"vesting_balance_withdraw":i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.vesting_balance_withdraw",keys:[{type:"account",value:t[1].owner,arg:"account"},{type:"amount",value:t[1].amount,arg:"amount"}]}));break;case"worker_create":i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.worker_create",keys:[{type:"account",value:t[1].owner,arg:"account"},{type:"amount",value:{amount:t[1].daily_pay,asset_id:"1.3.0"},arg:"pay"}],params:{name:t[1].name}}));break;case"balance_claim":r="success",t[1].total_claimed.amount=parseInt(t[1].total_claimed.amount,10),i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.balance_claim",keys:[{type:"account",value:t[1].deposit_to_account,arg:"account"},{type:"amount",value:t[1].total_claimed,arg:"amount"}]}));break;case"committee_member_create":i=s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.committee_member_create"})," ",this.linkToAccount(t[1].committee_member_account));break;case"transfer_to_blind":i=s.a.createElement("span",null,this.linkToAccount(t[1].from)," ",s.a.createElement(m.a,{component:"span",content:"transaction.sent"})," ",s.a.createElement(l.a,{amount:t[1].amount.amount,asset:t[1].amount.asset_id}));break;case"transfer_from_blind":i=s.a.createElement("span",null,this.linkToAccount(t[1].to)," ",s.a.createElement(m.a,{component:"span",content:"transaction.received"})," ",s.a.createElement(l.a,{amount:t[1].amount.amount,asset:t[1].amount.asset_id}));break;case"asset_claim_fees":r="success",t[1].amount_to_claim.amount=parseInt(t[1].amount_to_claim.amount,10),i=s.a.createElement("span",null,this.linkToAccount(t[1].issuer)," ",s.a.createElement(w.a.Wrapper,{asset:t[1].amount_to_claim.asset_id},function(e){var n=e.asset;return s.a.createElement(m.a,{component:"span",content:"transaction.asset_claim_fees",balance_amount:y.a.format_asset(t[1].amount_to_claim.amount,n),asset:n.get("symbol")})}));break;case"custom":i=s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transaction.custom"}));break;case"asset_reserve":i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.asset_reserve",keys:[{type:"account",value:t[1].payer,arg:"account"},{type:"amount",value:t[1].amount_to_reserve,arg:"amount"}]}));break;case"committee_member_update_global_parameters":console.log("committee_member_update_global_parameters op:",t),i=s.a.createElement("span",null,s.a.createElement(k.a,{string:"operation.committee_member_update_global_parameters",keys:[{type:"account",value:"1.2.0",arg:"account"}]}));break;case"override_transfer":i=s.a.createElement(k.a,{string:"operation.override_transfer",keys:[{type:"account",value:t[1].issuer,arg:"issuer"},{type:"account",value:t[1].from,arg:"from"},{type:"account",value:t[1].to,arg:"to"},{type:"amount",value:t[1].amount,arg:"amount"}]});break;default:console.log("unimplemented op:",t),i=s.a.createElement("span",null,s.a.createElement(c.f,{to:"/block/"+a},"#",a))}if(this.props.csvExportMode){var v=T.b.getObject("2.0.0"),b=T.b.getObject("2.1.0"),g=y.a.calc_block_time(a,v,b);return s.a.createElement("div",null,s.a.createElement("div",null,g?g.toLocaleString():""),s.a.createElement("div",null,j[t[0]]),s.a.createElement("div",null,i),s.a.createElement("div",null,s.a.createElement(l.a,{amount:parseInt(t[1].fee.amount,10),asset:t[1].fee.asset_id})))}return o=i?s.a.createElement(L,{block:a,type:t[0],color:r,fee:t[1].fee,hideOpLabel:this.props.hideOpLabel,info:i}):null,o?o:s.a.createElement("tr",null)}}]),t}(s.a.Component);I.defaultProps={op:[],current:"",block:null,hideOpLabel:!1,csvExportMode:!1},I.propTypes={op:s.a.PropTypes.array.isRequired,current:s.a.PropTypes.string,block:s.a.PropTypes.number,csvExportMode:s.a.PropTypes.bool},t.a=I},1185:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function s(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}var l=n(1),c=n.n(l),u=n(23),p=n.n(u),d=n(1166),m=(n.n(d),n(1179)),h=n(60),_=n(59),f=n(19),y=n(7),v=n(1148),b=n(1142),g=n.n(b),w=n(36),E=n.n(w);n.d(t,"b",function(){return C}),n.d(t,"a",function(){return O});var k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),T=y.a.operations,C=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={limit:e.limit||20,csvExport:!1,headerHeight:85,filter:"all"},n}return i(t,e),k(t,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;g.a.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!f.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!f.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!f.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var n=0;n<e.accountsList.length;++n){var a=e.accountsList[n],o=this.props.accountsList[n];if(a&&o&&a.get("history")!==o.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container"),t=e.childNodes,a="",o=!0,i=!1,r=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value,p=u.childNodes;""!==a&&(a+="\n"),a+=[s(p[0]),s(p[1]),s(p[2]),s(p[3])].join(",")}}catch(e){i=!0,r=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw r}}var m=new Blob([a],{type:"text/csv;charset=utf-8"}),h=new Date;n.i(d.saveAs)(m,"btshist-"+h.getFullYear()+"-"+h.getMonth()+"-"+h.getDate()+".csv")}if(!this.props.fullHeight){var _=this.refs.transactions;g.a.update(_),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,n){var a=[],o=new Set,i=!0,r=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){
var u=l.value;if(u){var p=u.get("history");p&&(a=a.concat(p.toJS().filter(function(e){return!o.has(e.id)&&o.add(e.id)})))}}}catch(e){r=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(r)throw s}}return t&&(a=a.filter(function(e){return e.op[0]===T[t]})),n&&(a=a.filter(function(e){var t=n.fields.reduce(function(t,a){switch(a){case"asset_id":return t&&e.op[1].amount[a]===n.values[a];default:return t&&e.op[1][a]===n.values[a]}},!0);return t})),a}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.accountsList,n=e.compactView,a=e.filter,o=e.customFilter,i=e.style,s=e.maxHeight,l=this.state,u=l.limit,d=l.headerHeight,h=1===t.length&&t[0]?t[0].get("id"):null,_=this._getHistory(t,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:a,o).sort(r),f=_.length;i=i?i:{},i.width="100%",i.height="100%";var y=null;y=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"].map(function(e){return c.a.createElement("option",{value:e,key:e},E.a.translate("transaction.trxTypes."+e))});var b=_.length?_.slice(0,u).map(function(e){return c.a.createElement(m.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,current:h,hideFee:!0,inverted:!1,hideOpLabel:n})}):c.a.createElement("tr",null,c.a.createElement("td",{colSpan:n?"2":"3"},c.a.createElement(p.a,{content:"operation.no_recent"})));return c.a.createElement("div",{className:"recent-transactions no-overflow",style:i},c.a.createElement("div",{className:"generic-bordered-box"},c.a.createElement("div",{ref:"header"},c.a.createElement("div",{className:"block-content-header"},c.a.createElement("span",null,this.props.title?this.props.title:c.a.createElement(p.a,{content:"account.recent"})),f>0?c.a.createElement("span",{style:{fontSize:"60%",textTransform:"lowercase"}}," (",c.a.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":E.a.translate("transaction.csv_tip"),"data-place":"bottom"},c.a.createElement(p.a,{content:"transaction.csv"})),")"):null,this.props.showFilters?c.a.createElement("div",{className:"float-right"},c.a.createElement("select",{"data-place":"left","data-tip":E.a.translate("tooltip.filter_ops"),style:{paddingTop:0},className:"bts-select",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},y)):null),c.a.createElement("table",{className:"table"+(n?" compact":"")},c.a.createElement("thead",null,c.a.createElement("tr",null,n?null:c.a.createElement("th",{className:"column-hide-tiny",style:{width:"20%"}},c.a.createElement(p.a,{content:"explorer.block.op"})),c.a.createElement("th",null,c.a.createElement(p.a,{content:"account.votes.info"})))))),c.a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:s-d},ref:"transactions"},c.a.createElement("table",{className:"table"+(n?" compact":"")},c.a.createElement(v.a,{component:"tbody",transitionName:"newrow"},b))),f>0&&this.state.csvExport&&c.a.createElement("div",{id:"csv_export_container",style:{display:"none"}},c.a.createElement("div",null,c.a.createElement("div",null,"DATE"),c.a.createElement("div",null,"OPERATION"),c.a.createElement("div",null,"MEMO"),c.a.createElement("div",null,"AMOUNT")),_.map(function(e){return c.a.createElement(m.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))),this.props.showMore&&f>this.props.limit||u<f?c.a.createElement("div",{className:"account-info more-button"},c.a.createElement("button",{className:"button outline small",onClick:this._onIncreaseLimit.bind(this)},c.a.createElement(p.a,{content:"account.more"}))):null)}}]),t}(c.a.Component);C.propTypes={accountsList:h.a.ChainAccountsList.isRequired,compactView:c.a.PropTypes.bool,limit:c.a.PropTypes.number,maxHeight:c.a.PropTypes.number,fullHeight:c.a.PropTypes.bool,showFilters:c.a.PropTypes.bool},C.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},C=n.i(_.a)(C,{keep_updating:!0});var O=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),k(t,[{key:"render",value:function(){return c.a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}(c.a.Component);O.propTypes={asset:h.a.ChainAsset.isRequired,to:h.a.ChainAccount.isRequired,fromAccount:h.a.ChainAccount.isRequired},O.defaultProps={asset:"1.3.0"},O=n.i(_.a)(O)},1202:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://blocktrades.us/api/v2/coins";return fetch(e).then(function(e){return e.json().then(function(e){return e})}).catch(function(t){console.log("error fetching blocktrades list of coins",t,e)})}function o(e){var t=e.inputCoinType,n=e.outputCoinType,a=e.outputAddress,o=e.url,i=e.stateCallback,r={inputCoinType:t,outputCoinType:n,outputAddress:a},s=JSON.stringify(r);fetch(o+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:s}).then(function(e){e.json().then(function(e){var t={address:e.inputAddress||"unknown",memo:e.inputMemo,error:e.error||null};i&&i(t)},function(e){i&&i({address:"unknown",memo:null})})},function(e){i&&i({address:"unknown",memo:null})}).catch(function(e){console.log("fetch error:",e)})}function i(e){var t=e.allCoins,n=e.backer,a={};t.forEach(function(e){return a[e.coinType]=e});var o=[];return t.forEach(function(e){e.walletSymbol.startsWith(n+".")&&e.backingCoinType&&a[e.backingCoinType]&&o.push({name:a[e.backingCoinType].name,walletType:a[e.backingCoinType].walletType,backingCoinType:a[e.backingCoinType].walletSymbol,symbol:e.walletSymbol,supportsMemos:a[e.backingCoinType].supportsOutputMemos})}),o}function r(e){var t=e.url,n=void 0===t?"https://bitshares.openledger.info/depositwithdraw/api/v2":t,a=e.walletType,o=e.newAddress;return o?fetch(n+"/wallets/"+a+"/address-validator?address="+encodeURIComponent(o),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e.isValid})}).catch(function(e){console.log("validate error:",e)}):new Promise(function(e){return e()})}function s(e){return m.has("history_address_"+e)}function l(e){var t=e.wallet,n=e.addresses;m.set("history_address_"+t,n)}function c(e){return m.get("history_address_"+e,[])}function u(e){var t=e.wallet,n=e.address;m.set("history_address_last_"+t,n)}function p(e){return m.get("history_address_last_"+e,"")}var d=n(110);t.a=a,t.c=o,t.b=i,t.e=r,n.d(t,"d",function(){return h});var m=new d.a(""),h={has:s,set:l,get:c,setLast:u,getLast:p}},1206:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(253),c=n(60),u=n(59),p=n(1139),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),d(t,[{key:"render",value:function(){var e=this.props.asset.get("id"),t=this.props.account.getIn(["balances",e]);return t?s.a.createElement(p.a,{balance:t}):s.a.createElement("span",null,"0 ",s.a.createElement(l.a,{name:this.props.asset.get("symbol")}))}}]),t}(s.a.Component);m.propTypes={account:c.a.ChainAccount.isRequired,asset:c.a.ChainAsset.isRequired},t.a=n.i(u.a)(m,{keep_updating:!0})},1226:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(32),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){a(this,e),this.current_blocktrades_address_cache_version_string="1"}return i(e,[{key:"getIndexForDepositKeyInExchange",value:function(e,t,n){var a=[this.current_blocktrades_address_cache_version_string,e,t,n];return a.reduce(function(e,t){return e.concat("[",t,"]")},"")}},{key:"getCachedInputAddress",value:function(e,t,n,a){var i=o.a.getWallet();i.deposit_keys=i.deposit_keys||{},i.deposit_keys[e]=i.deposit_keys[e]||{};var r=this.getIndexForDepositKeyInExchange(t,n,a);i.deposit_keys[e][r]=i.deposit_keys[e][r]||[];var s=i.deposit_keys[e][r].length;return s?i.deposit_keys[e][r][s-1]:null}},{key:"cacheInputAddress",value:function(e,t,n,a,i,r){var s=o.a.getWallet();s.deposit_keys=s.deposit_keys||{},s.deposit_keys[e]=s.deposit_keys[e]||{};var l=this.getIndexForDepositKeyInExchange(t,n,a);s.deposit_keys[e][l]=s.deposit_keys[e][l]||[],s.deposit_keys[e][l].push({address:i,memo:r}),o.a._updateWallet()}}]),e}();t.a=r},1282:function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(128),c=n.n(l),u=n(23),p=n.n(u),d=n(60),m=n(59),h=n(19),_=n(1139),f=n(36),y=n.n(f),v=n(1145),b=n(161),g=n(129),w=n.n(g),E=n(37),k=n.n(E),T=n(1202),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),O=function(t){function r(e){a(this,r);var t=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={withdraw_amount:t.props.amount_to_withdraw,withdraw_address:T.d.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:T.d.getLast(e.output_wallet_type),memo:"",withdraw_address_first:!0},t._validateAddress(t.state.withdraw_address,e),t}return i(r,t),C(r,[{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value})}},{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;e.asset;this.setState({withdraw_amount:t})}},{key:"onSelectChanged",value:function(e,t){var n=T.d.get(this.props.output_wallet_type)[e];T.d.setLast({wallet:this.props.output_wallet_type,address:n}),this.setState({withdraw_address_selected:n,options_is_valid:!1,withdraw_address:n,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null}),this._validateAddress(n)}},{key:"onWithdrawAddressChanged",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null}),this._validateAddress(t)}},{key:"_validateAddress",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;n.i(T.e)({url:a.url,walletType:a.output_wallet_type,newAddress:e}).then(function(n){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:n})})}},{key:"onSubmit",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid){if(T.d.has(this.props.output_wallet_type)){var t=T.d.get(this.props.output_wallet_type);t.indexOf(this.state.withdraw_address)==-1&&(t.push(this.state.withdraw_address),T.d.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var n=[];n.push(this.state.withdraw_address),T.d.set({wallet:this.props.output_wallet_type,addresses:n})}T.d.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,o=h.a.get_asset_precision(a.get("precision")),i=this.state.withdraw_amount.replace(/,/g,"");console.log("withdraw_amount: ",i),b.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),parseInt(i*o,10),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""))}else k.a.publish(this.getWithdrawModalId(),"open")}},{key:"onSubmitConfirmation",value:function(){if(k.a.publish(this.getWithdrawModalId(),"close"),T.d.has(this.props.output_wallet_type)){var t=T.d.get(this.props.output_wallet_type);t.indexOf(this.state.withdraw_address)==-1&&(t.push(this.state.withdraw_address),T.d.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var n=[];n.push(this.state.withdraw_address),T.d.set({wallet:this.props.output_wallet_type,addresses:n})}T.d.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,o=h.a.get_asset_precision(a.get("precision")),i=this.state.withdraw_amount.replace(/,/g,"");console.log("withdraw_amount: ",i),b.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),parseInt(i*o,10),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""))}},{key:"onDropDownList",value:function(){T.d.has(this.props.output_wallet_type)&&(this.state.options_is_valid===!1&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),this.state.options_is_valid===!0&&this.setState({options_is_valid:!1}))}},{key:"getWithdrawModalId",value:function(){return"confirmation"}},{key:"onAccountBalance",value:function(){Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))&&this.setState({withdraw_amount:this.props.balance.get("balance")/h.a.get_asset_precision(this.props.asset.get("precision"))})}},{key:"render",value:function(){var e=this.state,t=e.withdraw_address_selected,n=e.memo,a=T.d.get(this.props.output_wallet_type),o=null,i=this.props.account.get("balances").toJS(),r=Object.keys(i);if(r.length>0){var l=this.props.asset.get("id");o=l?s.a.createElement("span",null,s.a.createElement(p.a,{component:"span",content:"transfer.available"}),": ",s.a.createElement("span",{className:"set-cursor",onClick:this.onAccountBalance.bind(this)},s.a.createElement(_.a,{balance:i[l]}))):"No funds"}else o="No funds";var u=this.getWithdrawModalId(),d=null,m=null,h=null;this.state.options_is_valid&&(m=s.a.createElement("div",{className:a.length?"blocktrades-options":"blocktrades-disabled-options"},a.map(function(e,t){return s.a.createElement("a",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(d=s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},s.a.createElement(p.a,{content:"gateway.valid_address",coin_type:this.props.output_coin_type})),h=s.a.createElement(w.a,{id:u,overlay:!0},s.a.createElement(c.a,{close:u},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("label",null,s.a.createElement(p.a,{content:"modal.confirmation.title"})),s.a.createElement("br",null),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitConfirmation.bind(this),value:y.a.translate("modal.confirmation.accept")}),s.a.createElement(c.a,{close:u},s.a.createElement("a",{href:!0,className:"secondary button"},s.a.createElement(p.a,{content:"modal.confirmation.cancel"})))))));var f=1,b=null;return this.props.output_supports_memos&&(b=s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(p.a,{component:"span",content:"transfer.memo"})),s.a.createElement("textarea",{rows:"1",value:n,tabIndex:f++,onChange:this.onMemoChanged.bind(this)}))),s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,s.a.createElement(p.a,{content:"gateway.withdraw_coin",coin:this.props.output_coin_name,symbol:this.props.output_coin_symbol}))),s.a.createElement("div",{className:"content-block"},s.a.createElement(v.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.asset.get("id"),assets:[this.props.asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:o})),s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(p.a,{component:"span",content:"modal.withdraw.address"})),s.a.createElement("div",{className:"blocktrades-select-dropdown"},s.a.createElement("div",{className:"inline-label"},s.a.createElement("input",{type:"text",value:t,tabIndex:"4",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:"off"}),s.a.createElement("span",{onClick:this.onDropDownList.bind(this)},"▼"))),s.a.createElement("div",{className:"blocktrades-position-options"},m),d),b,s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmit.bind(this),value:y.a.translate("modal.withdraw.submit")}),s.a.createElement(c.a,{close:this.props.modal_id},s.a.createElement("a",{href:!0,className:"secondary button"},s.a.createElement(p.a,{content:"account.perm.cancel"})))),h))}}]),r}(s.a.Component);O.propTypes={account:d.a.ChainAccount.isRequired,issuer:d.a.ChainAccount.isRequired,asset:d.a.ChainAsset.isRequired,output_coin_name:s.a.PropTypes.string.isRequired,output_coin_symbol:s.a.PropTypes.string.isRequired,output_coin_type:s.a.PropTypes.string.isRequired,url:s.a.PropTypes.string,output_wallet_type:s.a.PropTypes.string,output_supports_memos:s.a.PropTypes.bool.isRequired,amount_to_withdraw:s.a.PropTypes.string,balance:d.a.ChainObject},t.a=n.i(m.a)(O,{keep_updating:!0})}).call(t,n(2).Buffer)},1364:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(1366),c=n(23),u=n.n(c),p=n(62),d=(n.n(p),n(44)),m=n(63),h=n(1185),_=n(24),f=n.n(_),y=n(61),v=n.n(y),b=n(130),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),w=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={activeCoin:n._getActiveCoin(e,{action:"deposit"}),action:"deposit"},n}return i(t,e),g(t,[{key:"_getActiveCoin",value:function(e,t){var n=e.viewSettings.get("activeCoin_"+e.provider+"_"+t.action,null),a=null;"blocktrades"==e.provider&&"deposit"==t.action&&(a="BTC"),"openledger"==e.provider&&"deposit"==t.action&&(a="BTC"),"blocktrades"==e.provider&&"withdraw"==t.action&&(a="TRADE.BTC"),"openledger"==e.provider&&"withdraw"==t.action&&(a="OPEN.BTC");var o=n?n:a;return o}},{key:"componentWillReceiveProps",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e,this.state.action)})}},{key:"onSelectCoin",value:function(e){this.setState({activeCoin:e.target.value});var t={};t["activeCoin_"+this.props.provider+"_"+this.state.action]=e.target.value,m.a.changeViewSetting(t)}},{key:"changeAction",value:function(e){var t=this._getActiveCoin(this.props,{action:e});this.setState({action:e,activeCoin:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.coins,a=t.account,o=t.provider,i=this.state,r=i.activeCoin,c=i.action;if(!n.length)return s.a.createElement(b.a,null);var p=n.filter(function(e){return!(!e||!e.symbol)}),d=p.map(function(e){var t="deposit"===c?e.backingCoinType.toUpperCase():e.symbol;return s.a.createElement("option",{value:t,key:e.symbol},t)}).filter(function(e){return null!==e}),m=p.filter(function(e){return"deposit"===c?e.backingCoinType.toUpperCase()===r:e.symbol===r})[0],_={blocktrades:{name:"blocktrades",id:"1.2.32567",support:"support@blocktrades.us"},openledger:{name:"openledger-wallet",id:"1.2.96397",support:"opensupport@blocktrades.us"}},y=_[o],g="deposit"===this.state.action;return s.a.createElement("div",{style:this.props.style},s.a.createElement("div",{style:{paddingBottom:15}},s.a.createElement(u.a,{component:"h5",content:"gateway.gateway_text"})),s.a.createElement("div",{style:{paddingBottom:15}},s.a.createElement("div",{style:{marginRight:10},onClick:this.changeAction.bind(this,"deposit"),className:v()("button","deposit"===c?"active":"outline")},s.a.createElement(u.a,{content:"gateway.deposit"})),s.a.createElement("div",{onClick:this.changeAction.bind(this,"withdraw"),className:v()("button","withdraw"===c?"active":"outline")},s.a.createElement(u.a,{content:"gateway.withdraw"}))),m?s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("span",null,s.a.createElement(u.a,{content:"gateway.choose_"+c}),": "),s.a.createElement("select",{style:{marginLeft:5,display:"inline",maxWidth:"15rem"},className:"external-coin-types bts-select",onChange:this.onSelectCoin.bind(this),value:r},d)),s.a.createElement("div",{style:{marginBottom:15}},s.a.createElement(l.a,{key:o+"."+m.symbol,gateway:o,issuer_account:y.name,account:a,deposit_asset:m.backingCoinType.toUpperCase(),deposit_asset_name:m.name,deposit_coin_type:m.backingCoinType.toLowerCase(),deposit_account:m.depositAccount,deposit_wallet_type:m.walletType,receive_asset:m.symbol,receive_coin_type:m.symbol.toLowerCase(),supports_output_memos:m.supportsMemos,action:this.state.action}),s.a.createElement("div",{style:{padding:15}},s.a.createElement(u.a,{content:"gateway.support_block"})," ",s.a.createElement("a",{href:"mailto:"+y.support},y.support))),m&&m.symbol?s.a.createElement(h.a,{asset:m.symbol,fromAccount:g?y.id:this.props.account.get("id"),to:g?this.props.account.get("id"):y.id},function(t){var n=t.asset,a=t.to,o=t.fromAccount;return s.a.createElement(h.b,{accountsList:f.a.List([e.props.account.get("id")]),limit:10,compactView:!0,fullHeight:!0,filter:"transfer",title:s.a.createElement(u.a,{content:"gateway.recent_"+e.state.action}),customFilter:{fields:["to","from","asset_id"],values:{to:a.get("id"),from:o.get("id"),asset_id:n.get("id")}}})}):null):s.a.createElement(b.a,null))}}]),t}(s.a.Component);t.a=n.i(p.connect)(w,{listenTo:function(){return[d.a]},getProps:function(){return{viewSettings:d.a.getState().viewSettings}}})},1365:function(e,t,n){"use strict";(function(e){function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),l=n.n(s),c=n(23),u=n.n(c),p=n(60),d=n(59),m=n(129),h=n.n(m),_=n(128),f=n.n(_),y=n(37),v=n.n(y),b=n(1206),g=n(1282),w=n(1226),E=n(19),k=n(161),T=n(266),C=function(){function e(e,t){var n=[],a=!0,o=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){o=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),A=function(t){function n(e){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={error:null,conversion_memo:null},t}return r(n,t),O(n,[{key:"onTrxIncluded",value:function(e){e.included&&e.broadcasted_transaction?(T.a.unlisten(this.onTrxIncluded),T.a.reset()):e.closed&&(T.a.unlisten(this.onTrxIncluded),T.a.reset())}},{key:"onConvert",value:function(){var t=this,n=this.props.input_coin_type,a=this.props.output_coin_type,o=JSON.stringify({inputCoinType:n,outputCoinType:a,outputAddress:this.props.account_name,inputMemo:"blocktrades conversion: "+n+"to"+a});fetch(this.props.url+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:o}).then(function(o){o.json().then(function(o){if(o.inputCoinType!=n||o.outputCoinType!=a)throw Error("unexpected reply from initiate-trade");if(n==o.inputCoinType&&a==o.outputCoinType&&!isNaN(t.props.amount)){t.setState({conversion_memo:o.inputMemo}),t.setState({error:null});var i=E.a.get_asset_precision(t.props.asset.get("precision")),r=t.props.amount.replace(/,/g,"");k.a.transfer(t.props.account_id,"1.2.32567",parseInt(r*i,10),t.props.asset.get("id"),t.state.conversion_memo?new e(t.state.conversion_memo,"utf-8"):t.state.conversion_memo,null,"1.3.0").then(function(){T.a.unlisten(t.onTrxIncluded),T.a.listen(t.onTrxIncluded)}).catch(function(e){var n=e.message?e.message.split("\n")[1]:null;console.log("error: ",e,n),t.setState({error:n})})}},function(e){t.setState({conversion_memo:null})})},function(e){t.setState({conversion_memo:null})})}},{key:"render",value:function(){var e="button disabled";return Object.keys(this.props.account_balances.toJS()).includes(this.props.asset.get("id"))&&!(this.props.amount.indexOf(" ")>=0)&&!isNaN(this.props.amount)&&this.props.amount>0&&this.props.amount<=this.props.balance.toJS().balance/E.a.get_asset_precision(this.props.asset.get("precision"))&&(e="button"),l.a.createElement("span",null,l.a.createElement("button",{className:e,onClick:this.onConvert.bind(this)},l.a.createElement(u.a,{content:""}),l.a.createElement(u.a,{content:"gateway.convert_now"})," "))}}]),n}(l.a.Component);A.propTypes={balance:p.a.ChainObject,asset:p.a.ChainAsset.isRequired,input_coin_type:l.a.PropTypes.string.isRequired,output_coin_type:l.a.PropTypes.string.isRequired,account_name:l.a.PropTypes.string.isRequired,account_id:l.a.PropTypes.string.isRequired,url:l.a.PropTypes.string.isRequired},A=n.i(d.a)(A);var S=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),O(t,[{key:"render",value:function(){var e=l.a.createElement(A,{asset:this.props.asset.get("id"),input_coin_type:this.props.input_coin_type,output_coin_type:this.props.output_coin_type,account_name:this.props.account_name,amount:this.props.amount,account_id:this.props.account_id,account_balances:this.props.account_balances,url:this.props.url,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]});return l.a.createElement("span",null,e)}}]),t}(l.a.Component);S.propTypes={account:p.a.ChainAccount.isRequired,asset:p.a.ChainAsset.isRequired,input_coin_type:l.a.PropTypes.string.isRequired,output_coin_type:l.a.PropTypes.string.isRequired,account_name:l.a.PropTypes.string.isRequired,account_id:l.a.PropTypes.string.isRequired,url:l.a.PropTypes.string.isRequired},S=n.i(d.a)(S);var N=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),O(t,[{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.gateway+"_bridge"}},{key:"onWithdraw",value:function(){v.a.publish(this.getWithdrawModalId(),"open")}},{key:"render",value:function(){var e=this.getWithdrawModalId(),t="button disabled";return Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))&&!(this.props.amount_to_withdraw.indexOf(" ")>=0)&&!isNaN(this.props.amount_to_withdraw)&&this.props.amount_to_withdraw>0&&this.props.amount_to_withdraw<=this.props.balance.toJS().balance/E.a.get_asset_precision(this.props.asset.get("precision"))&&(t="button"),l.a.createElement("span",null,l.a.createElement("span",null,l.a.createElement("button",{className:t,onClick:this.onWithdraw.bind(this)},l.a.createElement(u.a,{content:""}),l.a.createElement(u.a,{content:"gateway.withdraw_now"})," ")),l.a.createElement(h.a,{id:e,overlay:!0},l.a.createElement(f.a,{close:e},l.a.createElement("a",{href:"#",className:"close-button"},"×")),l.a.createElement("br",null),l.a.createElement("div",{className:"grid-block vertical"},l.a.createElement(g.a,{key:""+this.props.key,account:this.props.account.get("name"),issuer:this.props.issuer,asset:this.props.asset.get("id"),output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,modal_id:e,url:this.props.url,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]}))))}}]),t}(l.a.Component);N.propTypes={account:p.a.ChainAccount.isRequired,asset:p.a.ChainAsset.isRequired,balance:p.a.ChainObject,url:l.a.PropTypes.string.isRequired},N=n.i(d.a)(N);var P=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),O(t,[{key:"render",value:function(){var e=l.a.createElement(N,{key:this.props.key,account:this.props.account.get("name"),issuer:this.props.issuer,asset:this.props.asset.get("id"),output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,url:this.props.url,gateway:this.props.gateway,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]});return l.a.createElement("span",null,e)}}]),t}(l.a.Component);P.propTypes={account:p.a.ChainAccount.isRequired,asset:p.a.ChainAsset.isRequired,output_coin_type:l.a.PropTypes.string.isRequired,url:l.a.PropTypes.string.isRequired},P=n.i(d.a)(P);var j=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refresh_interval=12e4,n.deposit_address_cache=new w.a,
n.coin_info_request_states={request_in_progress:0,request_complete:1,request_failed:2},n.estimation_directions={output_from_input:0,input_from_output:1},n.state={coin_symbol:"btc",key_for_withdrawal_dialog:"btc",supports_output_memos:"",url:"https://api.blocktrades.us/v2",error:null,deposit_input_coin_type:null,deposit_output_coin_type:null,input_address_and_memo:null,deposit_estimated_input_amount:n.props.initial_deposit_estimated_input_amount||"1.0",deposit_estimated_output_amount:null,deposit_limit:null,deposit_error:null,failed_calculate_deposit:null,withdraw_input_coin_type:null,withdraw_output_coin_type:null,withdraw_estimated_input_amount:n.props.initial_withdraw_estimated_input_amount||"1.0",withdraw_estimated_output_amount:null,withdraw_limit:null,withdraw_error:null,failed_calculate_withdraw:null,conversion_input_coin_type:null,conversion_output_coin_type:null,conversion_estimated_input_amount:n.props.initial_conversion_estimated_input_amount||"1.0",conversion_estimated_output_amount:null,conversion_limit:null,conversion_error:null,failed_calculate_conversion:null,coin_info_request_state:n.coin_info_request_states.request_in_progress,input_address_requests_in_progress:{},deposit_estimate_direction:n.estimation_directions.output_from_input,deposit_limit_cache:{},deposit_limit_requests_in_progress:{},coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null,conversion_memo:null},n}return r(t,e),O(t,[{key:"urlConnection",value:function(e,t){var n=this;this.setState({url:e});var a=e+"/coins",o=fetch(a,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),i=e+"/wallets",r=fetch(i,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),s=e+"/trading-pairs",l=fetch(s,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),c=e+"/active-wallets",u=fetch(c,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});Promise.all([o,r,l,u]).then(function(e){var t=C(e,4),a=t[0],o=(t[1],t[2]),i=t[3],r={};a.forEach(function(e){return r[e.coinType]=e});var s={},l={},c={};o.forEach(function(e){var t=r[e.inputCoinType],n=r[e.outputCoinType];t.backingCoinType!=e.outputCoinType&&n.backingCoinType!=e.inputCoinType&&0==t.restricted&&0==n.restricted&&i.indexOf(t.walletType)!=-1&&i.indexOf(n.walletType)!=-1&&("bitshares2"!=t.walletType&&"bitshares2"==n.walletType?(s[e.inputCoinType]=s[e.inputCoinType]||[],s[e.inputCoinType].push(e.outputCoinType)):"bitshares2"==t.walletType&&"bitshares2"!=n.walletType?(l[e.inputCoinType]=l[e.inputCoinType]||[],l[e.inputCoinType].push(e.outputCoinType)):"bitshares2"==t.walletType&&"bitshares2"==n.walletType&&(c[e.inputCoinType]=c[e.inputCoinType]||[],c[e.inputCoinType].push(e.outputCoinType)))});var u=null,p=null,d=Object.keys(s);if(d.forEach(function(e){s[e].sort()}),d.length){u=n.props.initial_deposit_input_coin_type&&n.props.initial_deposit_input_coin_type in s?n.props.initial_deposit_input_coin_type:d[0];var m=s[u];p=n.props.initial_deposit_output_coin_type&&m.indexOf(n.props.initial_deposit_output_coin_type)!=-1?n.props.initial_deposit_output_coin_type:m[0]}var h=null,_=null,f=null,y=null,v=Object.keys(l);if(v.forEach(function(e){l[e].sort()}),v.length){h=n.props.initial_withdraw_input_coin_type&&n.props.initial_withdraw_input_coin_type in l?n.props.initial_withdraw_input_coin_type:v[0];var b=l[h];_=n.props.initial_withdraw_output_coin_type&&b.indexOf(n.props.initial_withdraw_output_coin_type)!=-1?n.props.initial_withdraw_output_coin_type:b[0]}var g=Object.keys(c);if(g.forEach(function(e){c[e].sort()}),g.length){f=n.props.initial_conversion_input_coin_type&&n.props.initial_conversion_input_coin_type in c?n.props.initial_conversion_input_coin_type:g[0];var w=c[f];y=n.props.initial_conversion_output_coin_type&&w.indexOf(n.props.initial_conversion_output_coin_type)!=-1?n.props.initial_conversion_output_coin_type:w[0]}var E=n.getCachedOrGeneratedInputAddress(u,p),k=n.getCachedOrFreshDepositLimit("deposit",u,p),T=n.getAndUpdateOutputEstimate("deposit",u,p,n.state.deposit_estimated_input_amount),O=n.getAndUpdateOutputEstimate("withdraw",h,_,n.state.withdraw_estimated_input_amount),A=n.getCachedOrFreshDepositLimit("withdraw",h,_),S=n.getAndUpdateOutputEstimate("conversion",f,y,n.state.conversion_estimated_input_amount),N=n.getCachedOrFreshDepositLimit("conversion",f,y);n.setState({coin_info_request_state:n.coin_info_request_states.request_complete,coins_by_type:r,allowed_mappings_for_deposit:s,allowed_mappings_for_withdraw:l,allowed_mappings_for_conversion:c,deposit_input_coin_type:u,deposit_output_coin_type:p,input_address_and_memo:E,deposit_limit:k,deposit_estimated_output_amount:T,deposit_estimate_direction:n.estimation_directions.output_from_input,withdraw_input_coin_type:h,withdraw_output_coin_type:_,withdraw_limit:A,withdraw_estimated_output_amount:O,conversion_input_coin_type:f,conversion_output_coin_type:y,conversion_limit:N,conversion_estimated_output_amount:S,withdraw_estimate_direction:n.estimation_directions.output_from_input,conversion_estimate_direction:n.estimation_directions.output_from_input,supports_output_memos:r.btc.supportsOutputMemos})}).catch(function(e){n.setState({coin_info_request_state:t,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:"updateEstimates",value:function(){if(this.state.deposit_input_coin_type&&this.state.deposit_output_coin_type){var e=this.getCachedOrGeneratedInputAddress(this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),t=this.getCachedOrFreshDepositLimit("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),n=this.state.deposit_estimated_input_amount,a=this.state.deposit_estimated_output_amount;this.state.deposit_estimate_direction==this.estimation_directions.output_from_input?a=this.getAndUpdateOutputEstimate("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,n):n=this.getAndUpdateInputEstimate("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,a);var o=this.getCachedOrFreshDepositLimit("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type),i=this.state.withdraw_estimated_input_amount,r=this.state.withdraw_estimated_output_amount;this.state.withdraw_estimate_direction==this.estimation_directions.output_from_input?r=this.getAndUpdateOutputEstimate("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,i):i=this.getAndUpdateinputEstimate("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,r);var s=this.getCachedOrFreshDepositLimit("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type),l=this.state.conversion_estimated_input_amount,c=this.state.conversion_estimated_output_amount;this.state.conversion_estimate_direction==this.estimation_directions.output_from_input?c=this.getAndUpdateOutputEstimate("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,l):l=this.getAndUpdateinputEstimate("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,c),this.setState({input_address_and_memo:e,deposit_limit:t,deposit_estimated_input_amount:n,deposit_estimated_output_amount:a,withdraw_limit:o,withdraw_estimated_input_amount:i,withdraw_estimated_output_amount:r,conversion_limit:s,conversion_estimated_input_amount:l,conversion_estimated_output_amount:c,key_for_withdrawal_dialog:i})}}},{key:"componentWillMount",value:function(){var e=this,t="https://api.blocktrades.us/v2";this.urlConnection(t,0);var n=fetch(t+"/coins",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),a=fetch(t+"/trading-pairs",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),o=fetch(t+"/active-wallets",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});Promise.all([n,a,o]).then(function(e){var t=C(e,3),n=t[0],a=t[1],o=t[2],i={};n.forEach(function(e){return i[e.coinType]=e}),a.forEach(function(e){var t=i[e.inputCoinType],n=i[e.outputCoinType];t.backingCoinType!=e.outputCoinType&&n.backingCoinType!=e.inputCoinType&&o.indexOf(t.walletType)!=-1&&o.indexOf(n.walletType)!=-1})}).catch(function(t){e.urlConnection("https://api.blocktrades.info/v2",2),e.setState({coin_info_request_state:0,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:"componentDidMount",value:function(){this.update_timer=setInterval(this.updateEstimates.bind(this),this.refresh_interval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.update_timer)}},{key:"getCachedInputAddress",value:function(e,t,n){var a=this.props.account.get("name");return this.deposit_address_cache.getCachedInputAddress(this.props.gateway,a,e,t)}},{key:"cacheInputAddress",value:function(e,t,n,a){var o=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,o,e,t,n)}},{key:"getCachedOrGeneratedInputAddress",value:function(e,t){var n=this,a=this.getCachedInputAddress(e,t);if(a)return a;if(this.state.input_address_requests_in_progress[e]=this.state.input_address_requests_in_progress[e]||{},this.state.input_address_requests_in_progress[e][t])return null;var o=JSON.stringify({inputCoinType:e,outputCoinType:t,outputAddress:this.props.account.get("name")});return this.state.input_address_requests_in_progress[e][t]=!0,fetch(this.state.url+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:o}).then(function(a){a.json().then(function(a){if(console.assert(a.inputCoinType==e,"unexpected reply from initiate-trade"),console.assert(a.outputCoinType==t,"unexpected reply from initiate-trade"),a.inputCoinType!=e||a.outputCoinType!=t)throw Error("unexpected reply from initiate-trade");n.cacheInputAddress(a.inputCoinType,a.outputCoinType,a.inputAddress,a.inputMemo),delete n.state.input_address_requests_in_progress[e][t],n.state.deposit_input_coin_type==a.inputCoinType&&n.state.deposit_output_coin_type==a.outputCoinType&&n.setState({input_address_and_memo:{address:a.inputAddress,memo:a.inputMemo}})},function(a){delete n.state.input_address_requests_in_progress[e][t],n.state.deposit_input_coin_type==e&&n.state.deposit_output_coin_type==t&&n.setState({input_address_and_memo:{address:"error generating address",memo:null}})})},function(a){delete n.state.input_address_requests_in_progress[e][t],n.state.deposit_input_coin_type==e&&n.state.deposit_output_coin_type==t&&n.setState({input_address_and_memo:{address:"error generating address",memo:null}})}),null}},{key:"getCachedDepositLimit",value:function(e,t){if(this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]){var n=this.state.deposit_limit_cache[e][t],a=new Date-n.timestamp;if(a<this.refresh_interval)return n;delete this.state.deposit_limit_cache[e][t]}return null}},{key:"cacheDepositLimit",value:function(e,t,n){n.timestamp=new Date,this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]=n}},{key:"getCachedOrFreshDepositLimit",value:function(e,t,n){var o=this,i=this.getCachedDepositLimit(t,n);if(i)return i;this.state.deposit_limit_requests_in_progress[t]=this.state.input_address_requests_in_progress[t]||{},this.state.deposit_limit_requests_in_progress[t][n]=!0;var r=this.state.url+"/deposit-limits?inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),s=fetch(r,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});return s.then(function(i){if(console.assert(i.inputCoinType==t&&i.outputCoinType==n,"unexpected reply from deposit-limits"),i.inputCoinType!=t||i.outputCoinType!=n)throw Error("unexpected reply from deposit-limits");var r={timestamp:new Date,limit:i.depositLimit};o.cacheDepositLimit(t,n,r),delete o.state.deposit_limit_requests_in_progress[t][n],o.state[e+"_input_coin_type"]==t&&o.state[e+"_output_coin_type"]==n&&o.setState(a({},e+"_limit",r))},function(e){delete o.state.deposit_limit_requests_in_progress[t][n]}),null}},{key:"getAndUpdateOutputEstimate",value:function(e,t,n,o){var i=this;"deposit"==e&&this.setState({failed_calculate_deposit:null}),"withdraw"==e&&this.setState({failed_calculate_withdraw:null}),"conversion"==e&&this.setState({failed_calculate_conversion:null});var r=this.state.url+"/estimate-output-amount?inputAmount="+encodeURIComponent(o)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),s=fetch(r,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});return s.then(function(r){if(r.error){if(i.state[e+"_input_coin_type"]==t&&i.state[e+"_output_coin_type"]==n&&i.state[e+"_estimated_input_amount"]==o&&i.state[e+"_estimate_direction"]==i.estimation_directions.output_from_input){var s=r.error.message;"deposit"==e&&i.setState({failed_calculate_deposit:"Failed to calculate"}),"withdraw"==e&&i.setState({failed_calculate_withdraw:"Failed to calculate"}),"conversion"==e&&i.setState({failed_calculate_conversion:"Failed to calculate"});var l="Internal Server Error: ";s.startsWith(l)&&(s=s.substr(l.length)),i.setState(a({},e+"_error",s))}}else{var c;if(console.assert(r.inputCoinType==t&&r.outputCoinType==n&&r.inputAmount==o,"unexpected reply from estimate-output-amount"),r.inputCoinType!=t||r.outputCoinType!=n||r.inputAmount!=o)throw Error("unexpected reply from estimate-output-amount");i.state[e+"_input_coin_type"]==t&&i.state[e+"_output_coin_type"]==n&&i.state[e+"_estimated_input_amount"]==o&&i.state[e+"_estimate_direction"]==i.estimation_directions.output_from_input&&i.setState((c={},a(c,e+"_estimated_output_amount",r.outputAmount),a(c,e+"_error",null),c))}},function(e){}),null}},{key:"getAndUpdateInputEstimate",value:function(e,t,n,o){var i=this;"deposit"==e&&this.setState({failed_calculate_deposit:null}),"withdraw"==e&&this.setState({failed_calculate_withdraw:null}),"conversion"==e&&this.setState({failed_calculate_conversion:null});var r=this.state.url+"/estimate-input-amount?outputAmount="+encodeURIComponent(o)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),s=fetch(r,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});return s.then(function(r){var s;console.assert(r.inputCoinType==t&&r.outputCoinType==n&&r.outputAmount==o,"unexpected reply from estimate-input-amount"),r.inputCoinType==t&&r.outputCoinType==n&&r.outputAmount==o||("deposit"==e&&i.setState({failed_calculate_deposit:"Failed to calculate"}),"withdraw"==e&&i.setState({failed_calculate_withdraw:"Failed to calculate"}),"conversion"==e&&i.setState({failed_calculate_conversion:"Failed to calculate"})),i.state[e+"_input_coin_type"]==t&&i.state[e+"_output_coin_type"]==n&&i.state[e+"_estimated_output_amount"]==o&&i.state[e+"_estimate_direction"]==i.estimation_directions.input_from_output&&i.setState((s={},a(s,e+"_estimated_input_amount",r.inputAmount),a(s,"key_for_withdrawal_dialog",r.inputAmount),s))},function(e){}),null}},{key:"onInputAmountChanged",value:function(e,t){var n,o=t.target.value;""==o&&(o="0");var i=this.getAndUpdateOutputEstimate(e,this.state[e+"_input_coin_type"],this.state[e+"_output_coin_type"],o);this.setState((n={},a(n,e+"_estimated_input_amount",o),a(n,e+"_estimated_output_amount",i),a(n,e+"_estimate_direction",this.estimation_directions.output_from_input),a(n,"key_for_withdrawal_dialog",o),n))}},{key:"onOutputAmountChanged",value:function(e,t){var n,o=t.target.value;""==o&&(o="0");var i=this.getAndUpdateInputEstimate(e,this.state[e+"_input_coin_type"],this.state[e+"_output_coin_type"],o);this.setState((n={},a(n,e+"_estimated_output_amount",o),a(n,e+"_estimated_input_amount",i),a(n,e+"_estimate_direction",this.estimation_directions.input_from_output),n))}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.gateway+"_bridge"}},{key:"onWithdraw",value:function(){v.a.publish(this.getWithdrawModalId(),"open")}},{key:"onInputCoinTypeChanged",value:function(e,t){var n,o=this,i=null,r="_estimated_output_amount",s=t.target.value,l=this.state["allowed_mappings_for_"+e][s],c=l[0];l.indexOf(this.state[e+"_output_coin_type"])!=-1&&(c=this.state[e+"_output_coin_type"]);var u=this.state.input_address_and_memo;"deposit"==e&&(u=this.getCachedOrGeneratedInputAddress(s,c));var p=this.getCachedOrFreshDepositLimit(e,s,c);this.state[e+"_estimated_input_amount"]?i=this.getAndUpdateOutputEstimate(e,s,c,this.state[e+"_estimated_input_amount"]):(i=this.getAndUpdateInputEstimate(e,s,c,this.state[e+"_estimated_output_amount"]),r="_estimated_input_amount"),"withdraw"==e&&l.forEach(function(e){c===e&&o.setState({coin_symbol:s+"input",supports_output_memos:o.state.coins_by_type[e].supportsOutputMemos})}),this.setState((n={},a(n,e+"_input_coin_type",s),a(n,e+"_output_coin_type",c),a(n,"input_address_and_memo",u),a(n,e+"_limit",p),a(n,e+r,i),a(n,e+"_estimate_direction",this.estimation_directions.output_from_input),n))}},{key:"onOutputCoinTypeChanged",value:function(e,t){var n,o=this,i=null,r="_estimated_output_amount",s=t.target.value,l=this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type];"withdraw"==e&&l.forEach(function(e){s===e&&o.setState({coin_symbol:s+"output",supports_output_memos:o.state.coins_by_type[e].supportsOutputMemos,key_for_withdrawal_dialog:s})});var c=this.state.input_address_and_memo;"deposit"==e&&(c=this.getCachedOrGeneratedInputAddress(this.state[e+"_input_coin_type"],s));var u=this.getCachedOrFreshDepositLimit(e,this.state[e+"_input_coin_type"],s);this.state[e+"_estimated_input_amount"]?i=this.getAndUpdateOutputEstimate(e,this.state[e+"_input_coin_type"],s,this.state[e+"_estimated_input_amount"]):(i=this.getAndUpdateInputEstimate(e,this.state[e+"_input_coin_type"],s,this.state[e+"_estimated_output_amount"]),r="_estimated_input_amount"),this.setState((n={},a(n,e+"_output_coin_type",s),a(n,"input_address_and_memo",c),a(n,e+"_limit",u),a(n,e+r,i),a(n,e+"_estimate_direction",this.estimation_directions.output_from_input),n))}},{key:"render",value:function(){var e=this;if(!this.props.account||!this.props.issuer_account||!this.props.gateway)return l.a.createElement("div",null);var t=void 0,n=void 0,a=void 0,o=void 0,i=void 0,r=void 0,s=void 0;if(this.state.coin_info_request_state==this.coin_info_request_states.request_failed)return l.a.createElement("div",null,l.a.createElement("p",null,"Error connecting to blocktrades.us, please try again later"));if(this.state.coin_info_request_state==this.coin_info_request_states.never_requested||this.state.coin_info_request_state==this.coin_info_request_states.request_in_progress)return l.a.createElement("div",null,l.a.createElement("p",null,"Retrieving current trade data from blocktrades.us"));var c=null,p=l.a.createElement(u.a,{content:"gateway.calc"});null!=this.state.failed_calculate_deposit&&(p=this.state.failed_calculate_deposit);var d=l.a.createElement(u.a,{content:"gateway.calc"});null!=this.state.failed_calculate_withdraw&&(d=this.state.failed_calculate_withdraw);var m=l.a.createElement(u.a,{content:"gateway.calc"});if(null!=this.state.failed_calculate_conversion&&(m=this.state.failed_calculate_conversion),Object.getOwnPropertyNames(this.state.allowed_mappings_for_deposit).length>0){var h=[];Object.keys(this.state.allowed_mappings_for_deposit).sort().forEach(function(t){h.push(l.a.createElement("option",{key:t,value:t||""},e.state.coins_by_type[t].symbol))});var _=l.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.deposit_input_coin_type||"",onChange:this.onInputCoinTypeChanged.bind(this,"deposit")},h),f=[],y=this.state.allowed_mappings_for_deposit[this.state.deposit_input_coin_type];y.forEach(function(t){f.push(l.a.createElement("option",{key:t,value:t||""},e.state.coins_by_type[t].walletSymbol))});var v=l.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.deposit_output_coin_type||"",onChange:this.onOutputCoinTypeChanged.bind(this,"deposit")},f),g=this.state.input_address_and_memo?this.state.input_address_and_memo:{address:"unknown",memo:null},w=this.state.deposit_estimated_input_amount,k=this.state.deposit_estimated_output_amount,T=w?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:w||"",onChange:this.onInputAmountChanged.bind(this,"deposit")}):p,C=k?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:k||"",onChange:this.onOutputAmountChanged.bind(this,"deposit")}):p,O=l.a.createElement("span",null,"updating");this.state.deposit_limit&&(O=this.state.deposit_limit.limit?l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},l.a.createElement(u.a,{content:"gateway.limit",amount:E.a.format_number(this.state.deposit_limit.limit,8),symbol:this.state.coins_by_type[this.state.deposit_input_coin_type].walletSymbol}))):null);var A=null;this.state.deposit_error&&(A=l.a.createElement("div",null,this.state.deposit_error)),n=l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.deposit"})),l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.balance"})),l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.deposit_to"})))),t=l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,_),l.a.createElement("div",null,T)),"→",l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,v),l.a.createElement("div",null,C)),l.a.createElement("div",null,A))),l.a.createElement("td",null,l.a.createElement(b.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.deposit_output_coin_type].walletSymbol})),l.a.createElement("td",null,g.address,l.a.createElement("br",null),O)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_withdraw).length>0){s=this.getWithdrawModalId();this.state.coins_by_type[this.state.withdraw_input_coin_type].symbol;c=this.state.withdraw_estimated_input_amount;var N=[];Object.keys(this.state.allowed_mappings_for_withdraw).sort().forEach(function(t){N.push(l.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var j=l.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.withdraw_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,"withdraw")},N),x=[],R=this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type];R.forEach(function(t){x.push(l.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].symbol))});var L=l.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.withdraw_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,"withdraw")},x),I=this.state.withdraw_estimated_input_amount,W=I?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:I||"",onChange:this.onInputAmountChanged.bind(this,"withdraw")}):d,D=this.state.withdraw_estimated_output_amount,q=D?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:D||"",onChange:this.onOutputAmountChanged.bind(this,"withdraw")}):d,M=l.a.createElement(P,{key:this.state.key_for_withdrawal_dialog,account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol,output_coin_name:this.state.coins_by_type[this.state.withdraw_output_coin_type].name,output_coin_symbol:this.state.coins_by_type[this.state.withdraw_output_coin_type].symbol,output_coin_type:this.state.withdraw_output_coin_type,output_supports_memos:this.state.supports_output_memos,amount_to_withdraw:c,url:this.state.url,gateway:this.props.gateway,output_wallet_type:this.state.coins_by_type[this.state.withdraw_output_coin_type].walletType}),Y=null;this.state.withdraw_error&&(Y=l.a.createElement("div",null,this.state.withdraw_error));var H=l.a.createElement("span",null,"...");this.state.withdraw_limit&&(H=this.state.withdraw_limit.limit?l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},l.a.createElement(u.a,{content:"gateway.limit",amount:E.a.format_number(this.state.withdraw_limit.limit,8),symbol:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol}))):l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},"no limit"))),o=l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.withdraw"})),l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.balance"})),l.a.createElement("th",null))),a=l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,j),l.a.createElement("div",null,W)),"→",l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,L),l.a.createElement("div",null,q)),l.a.createElement("div",null,Y))),l.a.createElement("td",null,l.a.createElement(b.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol})),l.a.createElement("td",null,M,l.a.createElement("br",null),H)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_conversion).length>0){var X=[];Object.keys(this.state.allowed_mappings_for_conversion).sort().forEach(function(t){X.push(l.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var U=l.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.conversion_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,"conversion")},X),F=[],B=this.state.allowed_mappings_for_conversion[this.state.conversion_input_coin_type];B.forEach(function(t){F.push(l.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].symbol))});var K=l.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.conversion_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,"conversion")},F),J=this.state.conversion_estimated_input_amount,G=J?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:J||"",onChange:this.onInputAmountChanged.bind(this,"conversion")}):m,z=this.state.conversion_estimated_output_amount,V=z?l.a.createElement("input",{style:{width:"11rem"},type:"text",value:z||"",onChange:this.onOutputAmountChanged.bind(this,"conversion")}):m,Q=l.a.createElement(S,{asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol,account:this.props.account.get("id"),input_coin_type:this.state.conversion_input_coin_type,output_coin_type:this.state.conversion_output_coin_type,account_name:this.props.account.get("name"),amount:this.state.conversion_estimated_input_amount,account_id:this.props.account.get("id"),account_balances:this.props.account.get("balances"),url:this.state.url}),$=null;this.state.conversion_error&&($=l.a.createElement("div",null,this.state.conversion_error));var Z=l.a.createElement("span",null,"...");this.state.conversion_limit&&(Z=this.state.conversion_limit.limit?l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},l.a.createElement(u.a,{content:"gateway.limit",amount:E.a.format_number(this.state.conversion_limit.limit,8),symbol:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol}))):l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("span",{className:"deposit-limit"},"no limit"))),r=l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.convert"})),l.a.createElement("th",null,l.a.createElement(u.a,{content:"gateway.balance"})),l.a.createElement("th",null))),i=l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"blocktrades-bridge"},l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,U),l.a.createElement("div",null,G)),"→",l.a.createElement("div",{className:"inline-block"},l.a.createElement("div",null,K),l.a.createElement("div",null,V)),l.a.createElement("div",null,$))),l.a.createElement("td",null,l.a.createElement(b.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol})),l.a.createElement("td",null,Q,l.a.createElement("br",null),Z)))}return l.a.createElement("div",null,l.a.createElement("div",{style:{paddingBottom:15}},l.a.createElement(u.a,{component:"h5",content:"gateway.bridge_text"})),l.a.createElement("table",{className:"table"},n,t,o,a,r,i))}}]),t}(l.a.Component);j.propTypes={url:l.a.PropTypes.string,gateway:l.a.PropTypes.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,initial_deposit_input_coin_type:l.a.PropTypes.string,initial_deposit_output_coin_type:l.a.PropTypes.string,initial_deposit_estimated_input_amount:l.a.PropTypes.string,initial_withdraw_input_coin_type:l.a.PropTypes.string,initial_withdraw_output_coin_type:l.a.PropTypes.string,initial_withdraw_estimated_input_amount:l.a.PropTypes.string,initial_conversion_input_coin_type:l.a.PropTypes.string,initial_conversion_output_coin_type:l.a.PropTypes.string,initial_conversion_estimated_input_amount:l.a.PropTypes.string},t.a=n.i(d.a)(j,{keep_updating:!0})}).call(t,n(2).Buffer)},1366:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(23),c=n.n(l),u=n(7),p=n(60),d=n(59),m=n(1282),h=n(129),_=n.n(h),f=n(128),y=n.n(f),v=n(37),b=n.n(v),g=n(1206),w=n(1226),E=n(253),k=n(160),T=n(1202),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),O=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.deposit_address_cache=new w.a;var i={blocktrades:"https://api.blocktrades.us/v2",openledger:"https://api.blocktrades.us/ol/v2"};return n.state={receive_address:null,url:e.url||i[e.gateway]},n.addDepositAddress=n.addDepositAddress.bind(n),n._copy=n._copy.bind(n),document.addEventListener("copy",n._copy),n}return i(t,e),C(t,[{key:"_copy",value:function(e){try{e.clipboardData.setData("text/plain",this.state.clipboardText),e.preventDefault()}catch(e){console.error(e)}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get("name"),url:this.state.url,stateCallback:this.addDepositAddress
}}},{key:"componentWillMount",value:function(){var e=this.props.account.get("name"),t=this.deposit_address_cache.getCachedInputAddress(this.props.gateway,e,this.props.deposit_coin_type,this.props.receive_coin_type);t||n.i(T.c)(this._getDepositObject())}},{key:"addDepositAddress",value:function(e){var t=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,t,this.props.deposit_coin_type,this.props.receive_coin_type,e.address,e.memo),this.setState({receive_address:e})}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.issuer_account.get("name")+"_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){b.a.publish(this.getWithdrawModalId(),"open")}},{key:"toClipboard",value:function(e){try{this.setState({clipboardText:e},function(){document.execCommand("copy")})}catch(e){console.error(e)}}},{key:"render",value:function(){var e=s.a.createElement("div",{style:{display:"none",minHeight:150}});if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return e;var t=this.props.account.get("balances");"0 "+this.props.receive_asset.get("symbol");if(this.props.deprecated_in_favor_of){var a=!1,o=t.get(this.props.receive_asset.get("id"));if(o){var i=u.b.getObject(o);if(i){var r=i.get("balance");0!=r&&(a=!0)}}if(!a)return e}var l=this.state.receive_address;if(!l){var p=this.props.account.get("name");l=this.deposit_address_cache.getCachedInputAddress(this.props.gateway,p,this.props.deposit_coin_type,this.props.receive_coin_type)}if(!l)return n.i(T.c)(this._getDepositObject()),e;var d=this.getWithdrawModalId(),h=null,f=null,v="",b=void 0;if(this.props.deposit_account){h=s.a.createElement("span",null,this.props.deposit_account),v=this.props.receive_coin_type+":"+this.props.account.get("name"),f=s.a.createElement("span",null,v);var w=this.props.deposit_coin_type+":"}else{l.memo?(b=l.memo,v=l.address,h=s.a.createElement("span",null,l.address),f=s.a.createElement("span",null,l.memo)):(v=l.address,h=s.a.createElement("span",null,l.address));var w=""}return"deposit"===this.props.action?s.a.createElement("div",{className:"grid-block no-padding no-margin test"},s.a.createElement("div",{style:{paddingRight:40,paddingBottom:20}},s.a.createElement(c.a,{component:"h4",content:"gateway.deposit_summary"}),s.a.createElement("table",{style:{width:"inherit"},className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.asset_to_deposit"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.asset_to_receive"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(E.a,{name:this.props.receive_asset.get("symbol")}))),s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.intermediate"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(k.a,{account:this.props.issuer_account.get("id")}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(c.a,{content:"gateway.balance"}),":"),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(g.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol")})))))),s.a.createElement("div",null,s.a.createElement(c.a,{component:"h4",content:"gateway.deposit_inst"}),s.a.createElement("span",null,s.a.createElement(c.a,{content:"gateway.deposit_to",asset:this.props.deposit_asset}),":"),s.a.createElement("div",{style:{padding:"10px 0",fontSize:"1.1rem",fontWeight:"bold"}},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,h)),f?s.a.createElement("tr",null,s.a.createElement("td",null,"memo: ",f)):null)),s.a.createElement("div",{className:"button-group",style:{paddingTop:10}},h?s.a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,v)},"Copy address"):null,b?s.a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,b)},"Copy memo"):null,s.a.createElement("button",{className:"button",onClick:T.c.bind(null,this._getDepositObject())},s.a.createElement(c.a,{content:"gateway.generate_new"})))))):s.a.createElement("div",{className:"grid-block no-padding no-margin"},s.a.createElement("div",{style:{paddingRight:40,paddingBottom:20}},s.a.createElement(c.a,{component:"h4",content:"gateway.withdraw_summary"}),s.a.createElement("table",{style:{width:"inherit"},className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.asset_to_withdraw"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(E.a,{name:this.props.receive_asset.get("symbol")}))),s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.asset_to_receive"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),s.a.createElement("tr",null,s.a.createElement(c.a,{component:"td",content:"gateway.intermediate"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(k.a,{account:this.props.issuer_account.get("id")}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(c.a,{content:"gateway.balance"}),":"),s.a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},s.a.createElement(g.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol")})))))),s.a.createElement("div",null,s.a.createElement(c.a,{component:"h4",content:"gateway.withdraw_inst"}),s.a.createElement("span",null,s.a.createElement(c.a,{content:"gateway.withdraw_to",asset:this.props.deposit_asset}),":"),s.a.createElement("div",{style:{padding:"10px 0",fontSize:"1.1rem",fontWeight:"bold"}},s.a.createElement("div",{style:{paddingTop:10}},s.a.createElement("button",{className:"button success",style:{width:"100%"},onClick:this.onWithdraw.bind(this)},s.a.createElement(c.a,{content:"gateway.withdraw_now"})," ")))),s.a.createElement(_.a,{id:d,overlay:!0},s.a.createElement(y.a,{close:d},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(m.a,{account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.props.receive_asset.get("symbol"),url:this.state.url,output_coin_name:this.props.deposit_asset_name,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:w,modal_id:d,balance:this.props.account.get("balances").toJS()[this.props.receive_asset.get("id")]}))))}}]),t}(s.a.Component);O.propTypes={url:s.a.PropTypes.string,gateway:s.a.PropTypes.string,deposit_coin_type:s.a.PropTypes.string,deposit_asset_name:s.a.PropTypes.string,deposit_account:s.a.PropTypes.string,receive_coin_type:s.a.PropTypes.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,deposit_asset:s.a.PropTypes.string,deposit_wallet_type:s.a.PropTypes.string,receive_asset:p.a.ChainAsset,deprecated_in_favor_of:p.a.ChainAsset,deprecated_message:s.a.PropTypes.string,action:s.a.PropTypes.string,supports_output_memos:s.a.PropTypes.bool.isRequired},t.a=n.i(d.a)(O,{keep_updating:!0})},1367:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(60),c=n(59),u=n(19),p=n(36),d=n.n(p),m=n(1145),h=n(37),_=n.n(h),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),y=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={deposit_amount:null,deposit_info:null,deposit_error:null},n}return i(t,e),f(t,[{key:"onDepositAmountChange",value:function(e){var t=e.amount;e.asset;this.setState({deposit_amount:t})}},{key:"onSubmitDeposit",value:function(){var e=this,t=this.props.receive_asset,n=(u.a.get_asset_precision(t.get("precision")),this.state.deposit_amount.replace(/,/g,""));console.log("deposit_amount: ",n);var a={jsonrpc:"2.0",method:"getDepositAccount",params:{bitsharesAccountName:this.props.account.get("name"),currency:this.props.deposit_asset,amount:n},id:1},o=fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(a))}).then(function(e){return e.json()});o.then(function(t){"result"in t?e.setState({deposit_info:t.result}):"error"in json_reponse&&"message"in t.error?e.setState({deposit_error:t.error.message}):e.setState({deposit_error:"Unable to approve deposit, please contact OpenLedger or try again later"})}).catch(function(t){e.setState({deposit_error:"Unable to approve deposit, please contact OpenLedger or try again later"})})}},{key:"onClose",value:function(){this.setState({deposit_amount:null,deposit_info:null,deposit_error:null}),_.a.publish(this.props.modal_id,"close")}},{key:"onOpenLink",value:function(){window.open(this.state.deposit_info.link,"_blank")}},{key:"render",value:function(){if(this.state.deposit_error)return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit Error")),s.a.createElement("div",{className:"content-block"},s.a.createElement("p",null,this.state.deposit_error)),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:"Close"}))));if(this.state.deposit_info){if("link"in this.state.deposit_info)return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit Information")),s.a.createElement("div",{className:"content-block"},s.a.createElement("p",null,"Click ",s.a.createElement("a",{onClick:this.onOpenLink.bind(this)},"here")," for deposit instructions")),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:"Close"}))));var e=[];for(var t in this.state.deposit_info)this.state.deposit_info.hasOwnProperty(t)&&e.push(s.a.createElement("tr",null,s.a.createElement("td",null,t),s.a.createElement("td",null,this.state.deposit_info[t])));return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit Information")),s.a.createElement("div",{className:"content-block"},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,e))),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:d.a.translate("account.perm.cancel")}))))}return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit ",this.props.deposit_asset)),s.a.createElement("div",{className:"content-block"},s.a.createElement(m.a,{label:"modal.deposit.amount",amount:this.state.deposit_amount,asset:this.props.receive_asset.get("id"),assets:[this.props.receive_asset.get("id")],placeholder:"0.0",onChange:this.onDepositAmountChange.bind(this),display_balance:null})),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitDeposit.bind(this),value:d.a.translate("modal.deposit.submit")}),s.a.createElement("input",{type:"submit",className:" button",onClick:this.onClose.bind(this),value:d.a.translate("account.perm.cancel")}))))}}]),t}(s.a.Component);y.propTypes={account:l.a.ChainAccount.isRequired,issuer_account:l.a.ChainAccount.isRequired,deposit_asset:s.a.PropTypes.string,receive_asset:l.a.ChainAsset.isRequired,rpc_url:s.a.PropTypes.string},t.a=n.i(c.a)(y,{keep_updating:!0})},1368:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(23),c=n.n(l),u=n(60),p=n(59),d=n(32),m=n(129),h=n.n(m),_=n(128),f=n.n(_),y=n(37),v=n.n(y),b=n(1206),g=n(1139),w=n(1367),E=n(1370),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),T=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return i(t,e),k(t,[{key:"getWithdrawModalId",value:function(){return"withdraw_fiat_openledger_"+this.props.receive_asset.get("symbol")}},{key:"getDepositModalId",value:function(){return"deposit_fiat_openledger_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){v.a.publish(this.getWithdrawModalId(),"open")}},{key:"onDeposit",value:function(){v.a.publish(this.getDepositModalId(),"open")}},{key:"render",value:function(){if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return s.a.createElement("tr",{style:{display:"none"}},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null));var e=(d.a.getWallet(),this.props.account.get("balances")),t="0 "+this.props.receive_asset.get("symbol"),n=e.toJS(),a=Object.keys(n);if(a.length>0){var o=this.props.receive_asset.get("id");o&&(t=s.a.createElement("span",null,s.a.createElement(c.a,{component:"span",content:"transfer.available"}),": ",s.a.createElement(g.a,{balance:n[o]})))}var i=this.getDepositModalId(),r=this.getWithdrawModalId(),l=null;l=this.props.deposit_allowed?s.a.createElement("td",null,s.a.createElement("button",{className:"button outline",onClick:this.onDeposit.bind(this)}," ",s.a.createElement(c.a,{content:"gateway.deposit"})," "),s.a.createElement(h.a,{id:i,overlay:!0},s.a.createElement(f.a,{close:i},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(w.a,{account:this.props.account.get("name"),issuer_account:this.props.issuer_account.get("name"),receive_asset:this.props.receive_asset.get("symbol"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:i})))):s.a.createElement("td",null,"Click ",s.a.createElement("a",{href:"https://openledger.info/v/",target:"_blank"},"here")," to register for deposits");var u=null;return u=this.props.withdraw_allowed?s.a.createElement("td",null,s.a.createElement("button",{className:"button outline",onClick:this.onWithdraw.bind(this)}," ",s.a.createElement(c.a,{content:"gateway.withdraw"})," "),s.a.createElement(h.a,{id:r,overlay:!0},s.a.createElement(f.a,{close:r},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(E.a,{account:this.props.account.get("name"),issuer_account:this.props.issuer_account.get("name"),receive_asset:this.props.receive_asset.get("symbol"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:r})))):s.a.createElement("td",null,"Click ",s.a.createElement("a",{href:"https://openledger.info/v/"},"here")," to register for withdrawals"),s.a.createElement("tr",null,s.a.createElement("td",null,this.props.deposit_asset),l,s.a.createElement("td",null,s.a.createElement(b.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol")})),u)}}]),t}(s.a.Component);T.propTypes={url:s.a.PropTypes.string,gateway:s.a.PropTypes.string,deposit_coin_type:s.a.PropTypes.string,deposit_asset_name:s.a.PropTypes.string,deposit_account:s.a.PropTypes.string,receive_coin_type:s.a.PropTypes.string,account:u.a.ChainAccount,issuer_account:u.a.ChainAccount,deposit_asset:s.a.PropTypes.string,receive_asset:u.a.ChainAsset,deposit_allowed:s.a.PropTypes.bool,withdraw_allowed:s.a.PropTypes.bool},T=n.i(p.a)(T,{keep_updating:!0});var C=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={allowedFiatCurrencies:{deposit:[],withdraw:[]}};var i={jsonrpc:"2.0",id:1,method:"isValidatedForFiat",params:{bitsharesAccountName:n.props.account.get("name")}},r=fetch(n.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(i))}).then(function(e){return e.json()});return r.then(function(e){"result"in e&&n.setState({allowedFiatCurrencies:e.result})}).catch(function(e){n.setState({allowedFiatCurrencies:{deposit:[],withdraw:[]}})}),n}return i(t,e),k(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.update_timer)}},{key:"render",value:function(){return this.props.account&&this.props.issuer_account?s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(c.a,{content:"gateway.symbol"})),s.a.createElement("th",null,s.a.createElement(c.a,{content:"gateway.deposit_to"})),s.a.createElement("th",null,s.a.createElement(c.a,{content:"gateway.balance"})),s.a.createElement("th",null,s.a.createElement(c.a,{content:"gateway.withdraw"})))),s.a.createElement("tbody",null,s.a.createElement(T,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"USD",receive_asset:"OPEN.USD",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("USD")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("USD")>-1}),s.a.createElement(T,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"EUR",receive_asset:"OPEN.EUR",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("EUR")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("EUR")>-1}),s.a.createElement(T,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"CNY",receive_asset:"OPEN.CNY",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("CNY")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("CNY")>-1}))):s.a.createElement("div",null)}}]),t}(s.a.Component);C.propTypes={rpc_url:s.a.PropTypes.string,account:u.a.ChainAccount,issuer_account:u.a.ChainAccount},C=n.i(p.a)(C,{keep_updating:!0}),t.a=C},1369:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(60),c=n(59),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={current_status:"never_loaded",withdrawals:null,deposits:null,error:null},n}return i(t,e),u(t,[{key:"onShowOpenLedgerTransactionHistory",value:function(){var e=this,t={jsonrpc:"2.0",method:"getRequestsList",params:{bitsharesAccountName:this.props.account.get("name")},id:1},n=fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(t))}).then(function(e){return e.json()});n.then(function(t){if(!("result"in t))throw"error"in t&&"message"in t.error?json_repsonse.error.message:"Unexpected response";e.setState({current_status:"loaded",withdrawals:t.result.withdrawals,deposits:t.result.deposits,error:null})}).catch(function(t){e.setState({current_status:"error",withdrawals:null,deposits:null,error:"Error getting transaction history: "+t})})}},{key:"render",value:function(){if(!this.props.account)return null;var e=null;if("loaded"===this.state.current_status){var t=[];if(this.state.withdrawals.length){for(var n=0;n<this.state.withdrawals.length;++n)t.push(s.a.createElement("tr",null,s.a.createElement("td",null,this.state.withdrawals[n].amount," ",this.state.withdrawals[n].currency),s.a.createElement("td",null,this.state.withdrawals[n].status)));e=s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Withdrawal Amount"),s.a.createElement("th",null,"Status"))),s.a.createElement("tbody",null,t))}else e=s.a.createElement("p",null,"No withdrawals")}var a=null;if("loaded"===this.state.current_status)if(this.state.deposits.length){for(var o=[],n=0;n<this.state.deposits.length;++n)o.push(s.a.createElement("tr",null,s.a.createElement("td",null,this.state.deposits[n].amount," ",this.state.deposits[n].currency),s.a.createElement("td",null,s.a.createElement("a",{href:this.state.deposits[n].link,target:"_blank"},"link")),s.a.createElement("td",null,this.state.deposits[n].status)));a=s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Deposit Amount"),s.a.createElement("th",null,"Details"),s.a.createElement("th",null,"Status"))),s.a.createElement("tbody",null,o))}else a=s.a.createElement("p",null,"No deposits");var i=null;if("error"===this.state.current_status)i=s.a.createElement("div",{className:"content-block"},s.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)}," Retry "),s.a.createElement("p",null,this.state.error));else if("loading"===this.state.current_status)i=s.a.createElement("div",{className:"content-block"},s.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this),disabled:"true"}," Show Transaction History "),s.a.createElement("p",null,"Loading..."));else{var r="never_loaded"===this.state.current_status?"Show Transaction History":"Refresh";i=s.a.createElement("div",{className:"content-block"},s.a.createElement("br",null),s.a.createElement("h4",null,"Transaction History"),s.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)}," ",r," "),e,a)}return i}}]),t}(s.a.Component);p.propTypes={rpc_url:s.a.PropTypes.string,account:l.a.ChainAccount},t.a=n.i(c.a)(p,{keep_updating:!0})},1370:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(128),c=n.n(l),u=n(23),p=n.n(u),d=n(60),m=n(59),h=n(19),_=n(1139),f=n(36),y=n.n(f),v=n(1145),b=n(161),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),w=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={withdraw_amount:null},n}return i(t,e),g(t,[{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;e.asset;this.setState({withdraw_amount:t})}},{key:"onSubmit",value:function(){var e=this,t=this.props.receive_asset,n=h.a.get_asset_precision(t.get("precision")),a=this.state.withdraw_amount.replace(/,/g,""),o={jsonrpc:"2.0",method:"getMemoForFiatWithdrawal",params:{bitsharesAccountName:this.props.account.get("name"),currency:this.props.deposit_asset,amount:a},id:1},i=fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(o))}).then(function(e){return e.json()});i.then(function(o){if(!("result"in o))throw"error"in o&&"message"in o.error?json_repsonse.error.message:"Unable to approve withdrawal, please contact OpenLedger or try again later";b.a.transfer(e.props.account.get("id"),e.props.issuer_account.get("id"),parseInt(a*n,10),t.get("id"),o.result)}).catch(function(e){alert(e)})}},{key:"render",value:function(){var e=null,t=this.props.account.get("balances").toJS(),n=Object.keys(t);if(n.length>0){var a=this.props.receive_asset.get("id");e=a?s.a.createElement("span",null,s.a.createElement(p.a,{component:"span",content:"transfer.available"}),": ",s.a.createElement(_.a,{balance:t[a]})):"No funds"}else e="No funds";return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Withdraw ",this.props.deposit_asset)),s.a.createElement("div",{className:"content-block"},s.a.createElement(v.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.receive_asset.get("id"),assets:[this.props.receive_asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:e})),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmit.bind(this),value:y.a.translate("modal.withdraw.submit")}),s.a.createElement(c.a,{close:this.props.modal_id},s.a.createElement("div",{className:"button"},s.a.createElement(p.a,{content:"account.perm.cancel"}))))))}}]),t}(s.a.Component);w.propTypes={account:d.a.ChainAccount.isRequired,issuer_account:d.a.ChainAccount.isRequired,deposit_asset:s.a.PropTypes.string,receive_asset:d.a.ChainAsset.isRequired,rpc_url:s.a.PropTypes.string},t.a=n.i(m.a)(w,{keep_updating:!0})},1371:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(128),c=n.n(l),u=n(23),p=n.n(u),d=n(60),m=n(59),h=n(1206),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),_(t,[{key:"gotoShop",value:function(){window.open(this.props.depositUrl)}},{key:"render",value:function(){return s.a.createElement("div",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,s.a.createElement(p.a,{content:"gateway.transwiser.deposit_title",asset:this.props.inventoryAsset.get("symbol")}))),s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(p.a,{content:"gateway.inventory"})),s.a.createElement(h.a,{account:this.props.issuerAccount.get("name"),asset:this.props.inventoryAsset.get("symbol")})),s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(p.a,{content:"gateway.transwiser.visit_weidian"})),s.a.createElement("a",{onClick:this.gotoShop.bind(this),href:this.props.depositUrl,target:"_blank"},this.props.depositUrl)),s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(p.a,{content:"gateway.scan_qr"})),s.a.createElement("img",{src:this.props.qr})),s.a.createElement("div",{className:"content-block"},s.a.createElement(c.a,{close:this.props.modalId},s.a.createElement("div",{className:"button"},s.a.createElement(p.a,{content:"modal.ok"}))))))}}]),t}(s.a.Component);f.propTypes={issuerAccount:d.a.ChainAccount.isRequired,depositUrl:s.a.PropTypes.string.isRequired,qr:s.a.PropTypes.string.isRequired,fee:s.a.PropTypes.number.isRequired,modalId:s.a.PropTypes.string.isRequired,inventoryAsset:d.a.ChainAsset.isRequired},t.a=n.i(m.a)(f,{keep_updating:!0})},1372:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(23),c=n.n(l),u=n(60),p=n(59),d=n(129),m=n.n(d),h=n(128),_=n.n(h),f=n(37),y=n.n(f),v=n(1206),b=n(1371),g=n(1373),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){
return n&&e(t.prototype,n),a&&e(t,a),t}}(),E=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={depositUrl:null,qr:null,deposit_fee:null,withdraw_fee:null},n.depositCoin="rmb",n.apiUrl="https://bitshares.dacplay.org/transwiser/setting.json",n}return i(t,e),w(t,[{key:"requestDepositUrl",value:function(){var e=this,t=this.depositCoin.toLocaleLowerCase()+":"+this.props.receiveAsset.get("symbol").toLocaleLowerCase();fetch(this.apiUrl,{method:"get",headers:new Headers({Accept:"application/json","Content-Type":"application/json"})}).then(function(n){n.json().then(function(n){var a=n[t];a&&e.setState({depositUrl:a.depositURL,qr:a.qr,deposit_fee:a.fee.deposit,withdraw_fee:a.fee.withdraw})},function(e){console.log("error: ",e)})},function(e){console.log("error: ",e)})}},{key:"getWithdrawModalId",value:function(){return"withdraw"+this.getModalId()}},{key:"getDepositModalId",value:function(){return"deposit"+this.getModalId()}},{key:"getModalId",value:function(){return"_asset_"+this.props.issuerAccount.get("name")+"_"+this.props.receiveAsset.get("symbol")}},{key:"onWithdraw",value:function(){y.a.publish(this.getWithdrawModalId(),"open")}},{key:"onDeposit",value:function(){y.a.publish(this.getDepositModalId(),"open")}},{key:"render",value:function(){var e=s.a.createElement("tr",{style:{display:"block"}},s.a.createElement("td",null,"loading"),s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null));if(!this.props.account||!this.props.issuerAccount||!this.props.receiveAsset)return e;if(!this.state.depositUrl)return this.requestDepositUrl(),e;var t=this.getWithdrawModalId(),n=this.getDepositModalId();return s.a.createElement("tr",null,s.a.createElement("td",null,this.props.receiveAsset.get("symbol")," "),s.a.createElement("td",null,s.a.createElement("button",{className:"button outline",onClick:this.onDeposit.bind(this)}," ",s.a.createElement(c.a,{content:"gateway.deposit"})," "),s.a.createElement(m.a,{id:n,overlay:!0},s.a.createElement(_.a,{close:n},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(b.a,{issuerAccount:this.props.issuerAccount.get("name"),depositUrl:this.state.depositUrl,qr:this.state.qr,fee:this.state.deposit_fee,inventoryAsset:this.props.receiveAsset.get("symbol"),modalId:n})))),s.a.createElement("td",null," ",s.a.createElement(v.a,{account:this.props.account.get("name"),asset:this.props.receiveAsset.get("symbol")})," "),s.a.createElement("td",null,s.a.createElement("button",{className:"button outline",onClick:this.onWithdraw.bind(this)}," ",s.a.createElement(c.a,{content:"gateway.withdraw"})," "),s.a.createElement(m.a,{id:t,overlay:!0},s.a.createElement(_.a,{close:t},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(g.a,{account:this.props.account.get("name"),issuerAccount:this.props.issuerAccount.get("name"),sellAsset:this.props.receiveAsset.get("symbol"),fee:this.state.withdraw_fee,modalId:t})))))}}]),t}(s.a.Component);E.propTypes={issuerAccount:u.a.ChainAccount,account:u.a.ChainAccount,receiveAsset:u.a.ChainAsset},t.a=n.i(p.a)(E,{keep_updating:!0})},1373:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(1),s=n.n(r),l=n(128),c=n.n(l),u=n(23),p=n.n(u),d=n(60),m=n(7),h=n(59),_=n(19),f=n(1139),y=n(36),v=n.n(y),b=n(1145),g=n(161),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),E=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={withdraw_amount:null,withdraw_address:null,withdraw_amount_after_fee:null,balance_error:!1};return n}return i(t,e),w(t,[{key:"onWithdrawAmountChange",value:function(e){var t=e.amount,n=e.asset;if(this.balanceAmount&&0!=this.balanceAmount&&t&&n){var a=parseInt(t.replace(/,/g,""));a-=a*this.props.fee,a=Math.floor(100*a)/100,this.setState({withdraw_amount:t,withdraw_amount_after_fee:a,balance_error:t>this.balanceAmount})}else this.setState({withdraw_amount:0,withdraw_amount_after_fee:0,balance_error:!0})}},{key:"onWithdrawAddressChanged",value:function(e){this.setState({withdraw_address:e.target.value})}},{key:"onSubmit",value:function(){var e=this.props.sellAsset,t=_.a.get_asset_precision(e.get("precision")),n=this.state.withdraw_amount.replace(/,/g,"");g.a.transfer(this.props.account.get("id"),this.props.issuerAccount.get("id"),parseInt(n*t,10),e.get("id"),(this.props.memo_prefix||"")+this.state.withdraw_address)}},{key:"displayFee",value:function(){return 100*this.props.fee+"%"}},{key:"render",value:function(){var e=null,t=this.props.account.get("balances").toJS(),n=Object.keys(t);if(n.length>0){var a=this.props.sellAsset.get("id");a?(e=s.a.createElement("span",null,s.a.createElement(p.a,{component:"span",content:"transfer.available"}),": ",s.a.createElement(f.a,{balance:t[a]})),t[a]&&(this.balanceAmount=parseInt(m.b.getObject(t[a]).get("balance"))/Math.pow(10,parseInt(this.props.sellAsset.get("precision"))))):(e="No funds",this.balanceAmount=0)}else e="No funds",this.balanceAmount=0;return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,s.a.createElement(p.a,{content:"gateway.transwiser.withdraw_title",asset:this.props.sellAsset.get("symbol")}))),s.a.createElement("div",{className:"content-block"},s.a.createElement("p",null,s.a.createElement(p.a,{content:"gateway.transwiser.withdraw_note"}))),s.a.createElement("div",{className:"content-block"},s.a.createElement(b.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.sellAsset.get("id"),assets:[this.props.sellAsset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:e}),this.state.balance_error?s.a.createElement("div",{className:"has-error"},s.a.createElement(p.a,{content:"transfer.errors.insufficient"})):null,s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block"},s.a.createElement(p.a,{content:"transfer.fee"}),": ",this.displayFee(),this.state.withdraw_amount_after_fee>0?s.a.createElement("span",null," (",s.a.createElement(p.a,{content:"gateway.transwiser.you_will_receive",amount:this.state.withdraw_amount_after_fee}),")"):null)),s.a.createElement("div",{className:"content-block full-width-content"},s.a.createElement("label",null,s.a.createElement(p.a,{component:"span",content:"gateway.transwiser.alipay"})),s.a.createElement("input",{type:"text",value:this.state.withdraw_address||"",tabIndex:"4",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:"off"})),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmit.bind(this),value:v.a.translate("modal.withdraw.submit")}),s.a.createElement(c.a,{close:this.props.modalId},s.a.createElement("div",{className:"button"},s.a.createElement(p.a,{content:"account.perm.cancel"}))))))}}]),t}(s.a.Component);E.propTypes={account:d.a.ChainAccount.isRequired,issuerAccount:d.a.ChainAccount.isRequired,sellAsset:d.a.ChainAsset.isRequired,fee:s.a.PropTypes.number.isRequired,memo_prefix:s.a.PropTypes.string},t.a=n.i(h.a)(E,{keep_updating:!0})},398:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=n.n(r),l=n(62),c=(n.n(l),n(265)),u=n(19),p=n(23),d=n.n(p),m=n(60),h=n(59),_=n(1372),f=n(1365),y=n(1364),v=n(1368),b=n(1369),g=n(376),w=n(61),E=n.n(w),k=n(90),T=n(44),C=n(63),O=n(1202),A=n(12),S=(n.n(A),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),N=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={blockTradesCoins:[],blockTradesBackedCoins:[],openLedgerCoins:[],openLedgerBackedCoins:[],olService:e.viewSettings.get("olService","gateway"),btService:e.viewSettings.get("btService","bridge"),metaService:e.viewSettings.get("metaService","bridge"),activeService:e.viewSettings.get("activeService",0),services:["Openledger (OPEN.X)","BlockTrades (TRADE.X)","Transwiser"]},n}return i(t,e),S(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e.account===this.props.account&&u.a.are_equal_shallow(t.blockTradesCoins,this.state.blockTradesCoins)&&u.a.are_equal_shallow(t.blockTradesBackedCoins,this.state.blockTradesBackedCoins)&&u.a.are_equal_shallow(t.openLedgerCoins,this.state.openLedgerCoins)&&u.a.are_equal_shallow(t.openLedgerBackedCoins,this.state.openLedgerBackedCoins)&&t.olService===this.state.olService&&t.btService===this.state.btService&&t.metaService===this.state.metaService&&t.activeService===this.state.activeService)}},{key:"componentWillMount",value:function(){var e=this;c.a.getFinalFeeAsset(this.props.account,"transfer"),"4018d784"===A.Apis.instance().chain_id.substr(0,8)&&(n.i(O.a)("https://blocktrades.us/api/v2/coins").then(function(t){e.setState({blockTradesCoins:t,blockTradesBackedCoins:n.i(O.b)({allCoins:t,backer:"TRADE"})})}),n.i(O.a)().then(function(t){e.setState({openLedgerCoins:t,openLedgerBackedCoins:n.i(O.b)({allCoins:t,backer:"OPEN"})})}))}},{key:"toggleOLService",value:function(e){this.setState({olService:e}),C.a.changeViewSetting({olService:e})}},{key:"toggleBTService",value:function(e){this.setState({btService:e}),C.a.changeViewSetting({btService:e})}},{key:"toggleMetaService",value:function(e){this.setState({metaService:e}),C.a.changeViewSetting({metaService:e})}},{key:"onSetService",value:function(e){var t=this.state.services.indexOf(e.target.value);this.setState({activeService:t}),C.a.changeViewSetting({activeService:t})}},{key:"render",value:function(){var e=this.props.account,t=this.state,n=t.olService,a=t.btService,o=(t.metaService,t.depositWithdrawDefaultActiveTab,t.services),i=t.activeService,r=this.state.blockTradesBackedCoins.filter(function(e){return"muse"!==e.backingCoinType&&e.symbol.toUpperCase().indexOf("TRADE")!==-1}).map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),l=this.state.openLedgerBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),c=o.map(function(e){return s.a.createElement("option",{key:e,value:e},e)});return s.a.createElement("div",{className:this.props.contained?"grid-content":"grid-container"},s.a.createElement("div",{className:this.props.contained?"":"grid-content"},s.a.createElement("div",{style:{borderBottom:"2px solid #444"}},s.a.createElement(g.a,{path:"components/DepositWithdraw",section:"receive",account:e.get("name")}),s.a.createElement(g.a,{path:"components/DepositWithdraw",section:"deposit-short"})),s.a.createElement("div",{style:{paddingTop:30,paddingLeft:8,paddingBottom:10,fontSize:14}},s.a.createElement(d.a,{content:"gateway.service"})),s.a.createElement("select",{onChange:this.onSetService.bind(this),className:"bts-select",value:o[i]},c),s.a.createElement("div",{className:"grid-content no-padding",style:{paddingTop:15}},i===o.indexOf("BlockTrades (TRADE.X)")?s.a.createElement("div",null,s.a.createElement("div",{className:"content-block"},s.a.createElement("div",{className:"float-right"},s.a.createElement("a",{href:"https://blocktrades.us",target:"__blank"},s.a.createElement(d.a,{content:"gateway.website"}))),s.a.createElement("div",{className:"button-group"},s.a.createElement("div",{onClick:this.toggleBTService.bind(this,"bridge"),className:E()("button","bridge"===a?"active":"outline")},s.a.createElement(d.a,{content:"gateway.bridge"})),s.a.createElement("div",{onClick:this.toggleBTService.bind(this,"gateway"),className:E()("button","gateway"===a?"active":"outline")},s.a.createElement(d.a,{content:"gateway.gateway"}))),"bridge"===a?s.a.createElement(f.a,{gateway:"blocktrades",url:"https://api.blocktrades.us/v2",issuer_account:"blocktrades",account:e,initial_deposit_input_coin_type:"btc",initial_deposit_output_coin_type:"bts",initial_deposit_estimated_input_amount:"1.0",initial_withdraw_input_coin_type:"bts",initial_withdraw_output_coin_type:"btc",initial_withdraw_estimated_input_amount:"100000",initial_conversion_input_coin_type:"bts",initial_conversion_output_coin_type:"bitbtc",initial_conversion_estimated_input_amount:"1000"}):null,"gateway"===a&&r.length?s.a.createElement(y.a,{account:e,coins:r,provider:"blocktrades"}):null),s.a.createElement("div",{className:"content-block"})):null,i===o.indexOf("Openledger (OPEN.X)")?s.a.createElement("div",null,s.a.createElement("div",{className:"content-block"},s.a.createElement("div",{className:"float-right"},s.a.createElement("a",{href:"https://www.ccedk.com/",target:"__blank"},s.a.createElement(d.a,{content:"gateway.website"}))),s.a.createElement("div",{className:"button-group",style:{marginBottom:0}},s.a.createElement("div",{onClick:this.toggleOLService.bind(this,"gateway"),className:E()("button","gateway"===n?"active":"outline")},s.a.createElement(d.a,{content:"gateway.gateway"})),s.a.createElement("div",{onClick:this.toggleOLService.bind(this,"fiat"),className:E()("button","fiat"===n?"active":"outline")},"Fiat")),"gateway"===n&&l.length?s.a.createElement(y.a,{account:e,coins:l,provider:"openledger"}):null,"fiat"===n?s.a.createElement("div",null,s.a.createElement("div",{style:{paddingBottom:15}},s.a.createElement(d.a,{component:"h5",content:"gateway.fiat_text"})),s.a.createElement(v.a,{rpc_url:"https://openledger.info/api/",account:e,issuer_account:"openledger-fiat"}),s.a.createElement(b.a,{rpc_url:"https://openledger.info/api/",account:e})):null)):null,i===o.indexOf("Transwiser")?s.a.createElement("div",null,s.a.createElement("div",{className:"float-right"},s.a.createElement("a",{href:"http://www.transwiser.com",target:"_blank"},s.a.createElement(d.a,{content:"gateway.website"}))),s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(d.a,{content:"gateway.symbol"})),s.a.createElement("th",null,s.a.createElement(d.a,{content:"gateway.deposit_to"})),s.a.createElement("th",null,s.a.createElement(d.a,{content:"gateway.balance"})),s.a.createElement("th",null,s.a.createElement(d.a,{content:"gateway.withdraw"})))),s.a.createElement("tbody",null,s.a.createElement(_.a,{issuerAccount:"transwiser-wallet",account:e.get("name"),receiveAsset:"TCNY"}),s.a.createElement(_.a,{issuerAccount:"transwiser-wallet",account:e.get("name"),receiveAsset:"CNY"})))):null)))}}]),t}(s.a.Component);N.propTypes={account:m.a.ChainAccount.isRequired,contained:s.a.PropTypes.bool},N.defaultProps={contained:!1},N=n.i(h.a)(N);var P=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),S(t,[{key:"render",value:function(){return s.a.createElement(N,this.props)}}]),t}(s.a.Component);t.default=n.i(l.connect)(P,{listenTo:function(){return[k.a,T.a]},getProps:function(){return{account:k.a.getState().currentAccount,viewSettings:T.a.getState().viewSettings}}})}});
//# sourceMappingURL=5.js.map