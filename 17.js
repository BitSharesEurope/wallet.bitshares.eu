webpackJsonp([17,0,2,3,7,10,29,35],{112:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(1),m=n.n(p),_=n(66),d=n(27),h=n.n(d),v=n(49),b=n.n(v),y=n(95),g=n(105),w=n(96),E=n(111),k=n(384),P=n(385),S=n(94),O=n(20),C=n.n(O),B=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),j=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),B(t,[{key:"componentWillReceiveProps",value:function(e){e.claim_account_name&&this.onClaimAccount(e.claim_account_name,e.checked)}},{key:"render",value:function(){var e=this;if(void 0===this.props.balances||!this.props.total_by_account_asset.size)return m.a.createElement("div",null);var t=-1;return m.a.createElement("div",null,m.a.createElement("table",{className:"table"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null),m.a.createElement("th",{style:{textAlign:"center"}},m.a.createElement(C.a,{content:"wallet.unclaimed"})),m.a.createElement("th",{style:{textAlign:"center"}},m.a.createElement(C.a,{content:"wallet.unclaimed_vesting"})),m.a.createElement("th",{style:{textAlign:"center"}},m.a.createElement(C.a,{content:"account.name"})))),m.a.createElement("tbody",null,this.props.total_by_account_asset.map(function(n,a){return m.a.createElement("tr",{key:++t},m.a.createElement("td",null,m.a.createElement("input",{type:"checkbox",checked:!!e.props.checked.get(t),onChange:e.onCheckbox.bind(e,t,n.balances)})),m.a.createElement("td",{style:{textAlign:"right"}},n.unclaimed?m.a.createElement(S.a,{color:"info",amount:n.unclaimed,asset:a.get(1)}):null),m.a.createElement("td",{style:{textAlign:"right"}},n.vesting.unclaimed?m.a.createElement("div",null,m.a.createElement(S.a,{color:"info",amount:n.vesting.unclaimed,hide_asset:!0,asset:a.get(1)}),m.a.createElement("span",null," of "),m.a.createElement(S.a,{color:"info",amount:n.vesting.total,asset:a.get(1)})):null),m.a.createElement("td",null," ",a.get(0)," "))}).toArray())))}},{key:"onCheckbox",value:function(e,t){var n=this.props.checked;n=n.get(e)?n.delete(e):n.set(e,t),P.a.setSelectedBalanceClaims(n)}},{key:"onClaimAccount",value:function(e,t){if(!t.size){var n=-1;this.props.total_by_account_asset.forEach(function(a,r){n++,r.get(0)===e&&(a.unclaimed||a.vesting.unclaimed)&&(t=t.set(n,a.balances))}),t.size&&P.a.setSelectedBalanceClaims(t)}}}]),t}(p.Component);j=Object(_.connect)(j,{listenTo:function(){return[k.a]},getProps:function(){var e=k.a.getState(),t=e.balances,n=e.address_to_pubkey,a=w.a.getState().keys,r=h.a.Map().asMutable(),o=function(e,t){var n=r.get(e);return n||(n=h.a.Set().asMutable(),r.set(e,n)),n.add(t),n.size};return t&&(e.total_by_account_asset=t.groupBy(function(e){var t="",r=n.get(e.owner),i=a.get(r);i&&i.import_account_names&&(t=i.import_account_names.join(", "));var s=Math.ceil(o(h.a.List([t,e.balance.asset_id]),e.owner)/60);return h.a.List([t,e.balance.asset_id,s])}).map(function(e){return e.reduce(function(e,t){return t.public_key_string=n.get(t.owner),e.balances=e.balances.add(t),void 0!=t.vested_balance?(e.vesting.unclaimed+=Number(t.vested_balance.amount),e.vesting.total+=Number(t.balance.amount)):e.unclaimed+=Number(t.balance.amount),e},{unclaimed:0,vesting:{unclaimed:0,total:0},balances:h.a.Set()})}).sortBy(function(e){return e})),e}});var N=j,R=n(104),x=n(76),M=n(41),D=n(388),L=n(42),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),A=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),T(t,[{key:"render",value:function(){var e=this.props.accounts.filter(function(e){return!!e}).filter(function(e){return x.a.isMyAccount(e)}).map(function(e){return e.get("name")}).sort();return m.a.createElement("span",null,m.a.createElement(D.a,{onChange:this.onAccountSelect.bind(this),account_names:e,center:!0}))}},{key:"onAccountSelect",value:function(e){this.props.onChange(e)}}]),t}(p.Component);A.propTypes={accounts:M.a.ChainAccountsList.isRequired,onChange:m.a.PropTypes.func.isRequired};var z=Object(L.a)(A,{keep_updating:!0}),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),F=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),I(t,[{key:"componentWillMount",value:function(){var e=w.a.getState().keys,t=e.keySeq();P.a.setPubkeys(t),this.existing_keys=t}},{key:"componentWillReceiveProps",value:function(e){var t=w.a.getState().keys,n=t.keySeq();n.equals(this.existing_keys)||(this.existing_keys=n,P.a.setPubkeys(n))}},{key:"render",value:function(){if(!this.props.account_refs.size)return m.a.createElement("div",null,m.a.createElement("h5",null,m.a.createElement(C.a,{content:"wallet.no_balance"})));if(this.props.loading)return m.a.createElement("div",null,m.a.createElement("br",null),m.a.createElement("h5",null,m.a.createElement(C.a,{content:"wallet.loading_balances"}),"â€¦"),m.a.createElement("br",null),m.a.createElement(g.a,{type:"three-bounce"}));if(!this.props.balances||!this.props.balances.size)return m.a.createElement("div",null,m.a.createElement("br",null),m.a.createElement("h5",null,m.a.createElement(C.a,{content:"wallet.no_balance"})));var e=this.props.selected_balances.size&&this.props.claim_account_name,t=e?" ("+this.props.claim_account_name+")":null;return m.a.createElement("div",null,m.a.createElement("div",{className:"content-block center-content"},m.a.createElement("h3",{className:"no-border-bottom"},m.a.createElement(C.a,{content:"wallet.claim_balances"}))),m.a.createElement("div",{className:"grid-block vertical"},m.a.createElement("div",{className:"grid-content",style:{overflowY:"hidden !important"}},m.a.createElement("div",{className:"full-width-content center-content"},m.a.createElement(z,{key:this.props.balances,accounts:h.a.List(this.props.account_refs),onChange:this.onClaimAccountChange.bind(this)})),m.a.createElement("br",null)),m.a.createElement("br",null),m.a.createElement(N,null)),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("div",{className:b()("button success",{disabled:!e}),onClick:this.onClaimBalance.bind(this)},m.a.createElement(C.a,{content:"wallet.claim_balance"}),t),m.a.createElement("div",{className:"button cancel",onClick:this.onBack.bind(this)},m.a.createElement(C.a,{content:"wallet.cancel"})))}},{key:"onBack",value:function(e){e.preventDefault(),window.history.back()}},{key:"onClaimAccountChange",value:function(e){P.a.claimAccountChange(e)}},{key:"onClaimBalance",value:function(){R.a.importBalance(this.props.claim_account_name,this.props.selected_balances,!0).catch(function(e){console.error("claimBalance",e);var t=e;try{t=e.data.message}catch(e){}throw y.a.error("Error claiming balance: "+t),e})}}]),t}(p.Component);F=Object(_.connect)(F,{listenTo:function(){return[k.a,E.a,w.a]},getProps:function(){var e=k.a.getState();return e.account_refs=E.a.getState().account_refs,e}});t.default=F},1190:function(e,t,n){var a,r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},a=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in a,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),c=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},u=function(e,t,n){t=[].concat(t);for(var a=t.length;a--;){var r=e["on"+t[a]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){c(e)}}},f=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},p=function(t,c,p){p||(t=f(t));var m,_=this,d=t.type,h="application/octet-stream"===d,v=function(){u(_,"writestart progress write writeend".split(" "))};if(_.readyState=_.INIT,r)return m=n().createObjectURL(t),void setTimeout(function(){a.href=m,a.download=c,o(a),v(),l(m),_.readyState=_.DONE});!function(){if((s||h&&i)&&e.FileReader){var a=new FileReader;return a.onloadend=function(){var t=s?a.result:a.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,_.readyState=_.DONE,v()},a.readAsDataURL(t),void(_.readyState=_.INIT)}if(m||(m=n().createObjectURL(t)),h)e.location.href=m;else{e.open(m,"_blank")||(e.location.href=m)}_.readyState=_.DONE,v(),l(m)}()},m=p.prototype,_=function(e,t,n){return new p(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=f(e)),navigator.msSaveOrOpenBlob(e,t)}:(m.abort=function(){},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,_)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=r:null!==n(1191)&&null!==n(1192)&&void 0!==(a=function(){return r}.call(t,n,t,e))&&(e.exports=a)},1191:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1192:function(e,t){(function(t){e.exports=t}).call(t,{})},1208:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(1),s=n.n(i),c=n(20),l=n.n(c),u=n(27),f=n.n(u),p=n(49),m=n.n(p),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={password:"",confirm:"",errors:f.a.Map(),valid:!1},e}return o(t,e),_(t,[{key:"componentDidMount",value:function(){this.refs.firstPassword&&this.refs.firstPassword.focus()}},{key:"render",value:function(){var e=this.state,t=(e.password,e.confirm,e.valid,e.errors),n=this.props.newPassword,a=1;return s.a.createElement("div",{className:m()({"has-error":t.size})},s.a.createElement(l.a,{component:"label",content:n?"wallet.new_password":"wallet.password"}),s.a.createElement("section",null,s.a.createElement("input",{type:"password",id:"password",ref:"firstPassword",onChange:this.formChange.bind(this),value:this.state.password,tabIndex:a++})),s.a.createElement(l.a,{component:"label",content:n?"wallet.new_confirm":"wallet.confirm"}),s.a.createElement("section",null,s.a.createElement("input",{type:"password",id:"confirm",onChange:this.formChange.bind(this),value:this.state.confirm,tabIndex:a++})),s.a.createElement("div",{style:{paddingBottom:10}},t.get("password_match")||t.get("password_length")),this.props.children,s.a.createElement("br",null))}},{key:"formChange",value:function(e){var t=this.state;t[e.target.id]=e.target.value,this.setState(t),this.validate(t)}},{key:"validate",value:function(e){var t=e.password,n=e.confirm;n=n.trim(),t=t.trim();var a=f.a.Map();0!==t.length&&t.length<8&&(a=a.set("password_length","Password must be 8 characters or more")),""!==t&&""!==n&&t!==n&&(a=a.set("password_match","Passwords do not match"));var r=t.length>=8&&t===n;this.setState({errors:a,valid:r}),this.props.onValid(r?t:null)}}]),t}(i.Component);d.propTypes={onValid:i.PropTypes.func.isRequired},t.a=d},1209:function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return new Promise(function(t){t(o().then(function(t){return i(e,t,1)}))})}function o(){return l.a.backup()}function i(t,n,a,r){return new Promise(function(o){var i=f.i.fromPublicKeyString(t),s=f.n.get_random_key(r),c=JSON.stringify(n,null,0);Object(u.compress)(c,a,function(t){var n=f.a.encrypt_with_checksum(s,i,null,t),a=s.toPublicKey(),r=e.concat([a.toBuffer(),n]);o(r)})})}function s(t,n){return new Promise(function(a,r){e.isBuffer(n)||(n=new e(n,"binary"));var o=f.h.fromWif(t),i=void 0;try{i=f.i.fromBuffer(n.slice(0,33))}catch(e){throw console.error(e,e.stack),new Error("Invalid backup file")}n=n.slice(33);try{n=f.a.decrypt_with_checksum(o,i,null,n)}catch(e){return console.error("Error decrypting wallet",e,e.stack),void r("invalid_decryption_key")}try{Object(u.decompress)(n,function(e){try{var t=JSON.parse(e);a(t)}catch(t){e||(e=""),console.error("Error parsing wallet json",e.substring(0,10)+"..."),r("Error parsing wallet json")}})}catch(e){return console.error("Error decompressing wallet",e,e.stack),void r("Error decompressing wallet")}})}t.a=r,t.b=s;var c=n(10),l=n(70),u=n(1213),f=(n.n(u),n(7)),p=(n(104),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),m=function(){function t(){a(this,t)}return p(t,[{key:"incommingWebFile",value:function(t){return function(n){var a=new FileReader;a.onload=function(a){var r=new e(a.target.result,"binary"),o=t.name,i=t.lastModifiedDate.toString();n({name:o,contents:r,last_modified:i})},a.readAsBinaryString(t)}}},{key:"incommingBuffer",value:function(e){return e}},{key:"reset",value:function(){return!0}}]),t}(),_=c.a.createActions(m);t.c=_}).call(t,n(3).Buffer)},1212:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s=n(1),c=n.n(s),l=n(49),u=n.n(l),f=n(7),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={brnkey:"",loading:!0},e}return o(t,e),p(t,[{key:"componentWillMount",value:function(){var e=this;fetch("/dictionary.json").then(function(t){return t.json().then(function(t){i=new Set(t.en.split(",")),e.setState({loading:!1})})}).catch(function(e){console.log("fetch dictionary error:",e)})}},{key:"_checkBrainKey",value:function(){var e=this.state.brnkey.split(" "),t=[];e.forEach(function(e,n){if(""!==e){var a=e.toLowerCase();a=a.match(/[a-z]+/),null===a||i.has(a[0])?t.push(c.a.createElement("span",{key:n,style:{padding:"1px",margin:"1px"}},e)):t.push(c.a.createElement(_,{key:n},e))}});var n=void 0,a=!0,r=!0;return t.length>0&&(this.state.brnkey.length<50?(n=this.state.brnkey.length+" characters (50 minimum)",r=!1):t.length<16?n=t.length+" words (16 recommended)":(n=t.length+" words",a=!1)),{warn:a,valid:r,word_count_label:n,checked_words:t}}},{key:"render",value:function(){if(this.state.loading||!i)return c.a.createElement("div",{style:{padding:20}},"Fetching dictionary....");var e=this._checkBrainKey(),t=e.warn,n=e.word_count_label,a=e.checked_words;return c.a.createElement("span",{className:""},c.a.createElement("div",null,c.a.createElement("textarea",{tabIndex:this.props.tabIndex||1,onChange:this.formChange.bind(this),value:this.state.brnkey,id:"brnkey",style:{height:100,minWidth:450}}),c.a.createElement("div",{style:{textAlign:"left"},className:"grid-content no-padding no-overflow"},a),this.state.check_digits&&!this.props.hideCheckDigits?c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement("pre",{className:"no-overflow"},this.state.check_digits," * Check Digits"),c.a.createElement("br",null)):null,c.a.createElement("p",null,c.a.createElement("i",{className:u()({error:t})},n))))}},{key:"formChange",value:function(e){var t=e.target,n=t.id,a=t.value,r=this._checkBrainKey(),o=r.valid,i={};if(i[n]=a,"brnkey"===n){var s=f.n.normalize_brainKey(a);this.props.onChange(s.length<50?null:s),i.check_digits=s.length<50?null:f.m.sha1(s).toString("hex").substring(0,4)}this.setState(i),this.props.errorCallback&&this.props.errorCallback(o)}}]),t}(s.Component);m.propTypes={onChange:s.PropTypes.func.isRequired},t.a=m;var _=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"render",value:function(){return c.a.createElement("span",{style:{borderBottom:"1px dotted #ff0000",padding:"1px",margin:"1px"}},c.a.createElement("span",{style:{borderBottom:"1px dotted #ff0000"}},this.props.children))}}]),t}(s.Component)},1213:function(e,t,n){
//! Â© 2015 Nathan Rugg <nmrugg@gmail.com> | MIT
var a;a=function(){var e=n(1214);return n(1215)("."+e.sep+"src"+e.sep+"lzma_worker.js").LZMA_WORKER}(),e.exports.LZMA=function(){return a},e.exports.compress=a.compress,e.exports.decompress=a.decompress},1214:function(e,t,n){(function(e){function n(e,t){for(var n=0,a=e.length-1;a>=0;a--){var r=e[a];"."===r?e.splice(a,1):".."===r?(e.splice(a,1),n++):n&&(e.splice(a,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function a(e,t){if(e.filter)return e.filter(t);for(var n=[],a=0;a<e.length;a++)t(e[a],a,e)&&n.push(e[a]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return r.exec(e).slice(1)};t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var i=o>=0?arguments[o]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,r="/"===i.charAt(0))}return t=n(a(t.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),o="/"===i(e,-1);return e=n(a(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&o&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(a(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function a(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=a(e.split("/")),o=a(n.split("/")),i=Math.min(r.length,o.length),s=i,c=0;c<i;c++)if(r[c]!==o[c]){s=c;break}for(var l=[],c=s;c<r.length;c++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],a=t[1];return n||a?(a&&(a=a.substr(0,a.length-1)),n+a):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(58))},1215:function(e,t,n){function a(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./src/lzma_worker.js":1216};a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=1215},1216:function(e,t,n){(function(e){var t=function(){"use strict";function n(e,t){postMessage({action:At,cbn:t,result:e})}function a(e){var t=[];return t[e-1]=void 0,t}function r(e,t){return s(e[0]+t[0],e[1]+t[1])}function o(e,t){return f(~~Math.max(Math.min(e[1]/It,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/It,2147483647),-2147483648),u(e)&u(t))}function i(e,t){var n,a;return e[0]==t[0]&&e[1]==t[1]?0:(n=e[1]<0,a=t[1]<0,n&&!a?-1:!n&&a?1:h(e,t)[1]<0?-1:1)}function s(e,t){var n,a;for(t%=0x10000000000000000,e%=0x10000000000000000,n=t%It,a=Math.floor(e/It)*It,t=t-n+a,e=e-a+n;e<0;)e+=It,t-=It;for(;e>4294967295;)e-=It,t+=It;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function c(e,t){return e[0]==t[0]&&e[1]==t[1]}function l(e){return e>=0?[e,0]:[e+It,-It]}function u(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-It,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function f(e,t){var n,a;return n=e*It,a=t,t<0&&(a+=It),[a,n]}function p(e){return e<=30?1<<e:p(30)*p(e-30)}function m(e,t){var n,a,r,o;if(t&=63,c(e,Wt))return t?Ht:e;if(e[1]<0)throw new Error("Neg");return o=p(t),a=e[1]*o%0x10000000000000000,r=e[0]*o,n=r-r%It,a+=n,r-=n,a>=0x8000000000000000&&(a-=0x10000000000000000),[r,a]}function _(e,t){var n;return t&=63,n=p(t),s(Math.floor(e[0]/n),e[1]/n)}function d(e,t){var n;return t&=63,n=_(e,t),e[1]<0&&(n=r(n,m([2,0],63-t))),n}function h(e,t){return s(e[0]-t[0],e[1]-t[1])}function v(e,t){return e.buf=t,e.pos=0,e.count=t.length,e}function b(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function y(e,t,n,a){return e.pos>=e.count?-1:(a=Math.min(a,e.count-e.pos),S(e.buf,e.pos,t,n,a),e.pos+=a,a)}function g(e){return e.buf=a(32),e.count=0,e}function w(e){var t=e.buf;return t.length=e.count,t}function E(e,t){e.buf[e.count++]=t<<24>>24}function k(e,t,n,a){S(t,n,e.buf,e.count,a),e.count+=a}function P(e,t,n,a,r){var o;for(o=t;o<n;++o)a[r++]=e.charCodeAt(o)}function S(e,t,n,a,r){for(var o=0;o<r;++o)n[a+o]=e[t+o]}function O(e,t){Ie(t,1<<e.s),t._numFastBytes=e.f,Fe(t,e.m),t._numLiteralPosStateBits=0,t._numLiteralContextBits=3,t._posStateBits=2,t._posStateMask=3}function C(e,t,n,a,r){var o,s;if(i(a,Ft)<0)throw new Error("invalid length "+a);for(e.length_0=a,o=Oe({}),O(r,o),o._writeEndMark=1,We(o,n),s=0;s<64;s+=8)E(n,255&u(_(a,s)));e.chunker=(o._needReleaseMFStream=0,o._inStream=t,o._finished=0,Se(o),o._rangeEncoder.Stream=n,De(o),Be(o),Ce(o),o._lenEncoder._tableSize=o._numFastBytes+1-2,Xe(o._lenEncoder,1<<o._posStateBits),o._repMatchLenEncoder._tableSize=o._numFastBytes+1-2,Xe(o._repMatchLenEncoder,1<<o._posStateBits),o.nowPos64=Ht,ee({},o))}function B(e,t,n){return e.output=g({}),C(e,v({},t),e.output,l(t.length),n),e}function j(e,t,n){var a,r,o,i,s="",c=[];for(r=0;r<5;++r){if(-1==(o=b(t)))throw new Error("truncated input");c[r]=o<<24>>24}if(a=se({}),!le(a,c))throw new Error("corrupted input");for(r=0;r<64;r+=8){if(-1==(o=b(t)))throw new Error("truncated input");o=o.toString(16),1==o.length&&(o="0"+o),s=o+""+s}/^0+$|^f+$/i.test(s)?e.length_0=Ft:(i=parseInt(s,16),e.length_0=i>4294967295?Ft:l(i)),e.chunker=oe(a,t,n,e.length_0)}function N(e,t){return e.output=g({}),j(e,v({},t),e.output),e}function R(e,t,n,r){var o;e._keepSizeBefore=t,e._keepSizeAfter=n,o=t+n+r,null!=e._bufferBase&&e._blockSize==o||(e._bufferBase=null,e._blockSize=o,e._bufferBase=a(e._blockSize)),e._pointerToLastSafePosition=e._blockSize-n}function x(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function M(e,t,n,a){var r,o;for(e._streamEndWasReached&&e._pos+t+a>e._streamPos&&(a=e._streamPos-(e._pos+t)),++n,o=e._bufferOffset+e._pos+t,r=0;r<a&&e._bufferBase[o+r]==e._bufferBase[o+r-n];++r);return r}function D(e){return e._streamPos-e._pos}function L(e){var t,n,a;for(a=e._bufferOffset+e._pos-e._keepSizeBefore,a>0&&--a,n=e._bufferOffset+e._streamPos-a,t=0;t<n;++t)e._bufferBase[t]=e._bufferBase[a+t];e._bufferOffset-=a}function T(e){var t;++e._pos>e._posLimit&&(t=e._bufferOffset+e._pos,t>e._pointerToLastSafePosition&&L(e),A(e))}function A(e){var t,n,a;if(!e._streamEndWasReached)for(;;){if(!(a=-e._bufferOffset+e._blockSize-e._streamPos))return;if(-1==(t=y(e._stream,e._bufferBase,e._bufferOffset+e._streamPos,a)))return e._posLimit=e._streamPos,n=e._bufferOffset+e._posLimit,n>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=1);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function z(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}function I(e,t,n,r,o){var i,s,c;t<1073741567&&(e._cutValue=16+(r>>1),c=256+~~((t+n+r+o)/2),R(e,t+n,r+o,c),e._matchMaxLen=r,i=t+1,e._cyclicBufferSize!=i&&(e._son=a(2*(e._cyclicBufferSize=i))),s=65536,e.HASH_ARRAY&&(s=t-1,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s>>=1,s|=65535,s>16777216&&(s>>=1),e._hashMask=s,++s,s+=e.kFixHashSize),s!=e._hashSizeSum&&(e._hash=a(e._hashSizeSum=s)))}function F(e,t){var n,a,r,o,i,s,c,l,u,f,p,m,_,d,h,v,b,y,g,w,E;if(e._pos+e._matchMaxLen<=e._streamPos)d=e._matchMaxLen;else if((d=e._streamPos-e._pos)<e.kMinMatchCheck)return H(e),0;for(b=0,h=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,a=e._bufferOffset+e._pos,v=1,l=0,u=0,e.HASH_ARRAY?(E=Kt[255&e._bufferBase[a]]^255&e._bufferBase[a+1],l=1023&E,E^=(255&e._bufferBase[a+2])<<8,u=65535&E,f=(E^Kt[255&e._bufferBase[a+3]]<<5)&e._hashMask):f=255&e._bufferBase[a]^(255&e._bufferBase[a+1])<<8,r=e._hash[e.kFixHashSize+f]||0,e.HASH_ARRAY&&(o=e._hash[l]||0,i=e._hash[1024+u]||0,e._hash[l]=e._pos,e._hash[1024+u]=e._pos,o>h&&e._bufferBase[e._bufferOffset+o]==e._bufferBase[a]&&(t[b++]=v=2,t[b++]=e._pos-o-1),i>h&&e._bufferBase[e._bufferOffset+i]==e._bufferBase[a]&&(i==o&&(b-=2),t[b++]=v=3,t[b++]=e._pos-i-1,o=i),0!=b&&o==r&&(b-=2,v=1)),e._hash[e.kFixHashSize+f]=e._pos,g=1+(e._cyclicBufferPos<<1),w=e._cyclicBufferPos<<1,m=_=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&r>h&&e._bufferBase[e._bufferOffset+r+e.kNumHashDirectBytes]!=e._bufferBase[a+e.kNumHashDirectBytes]&&(t[b++]=v=e.kNumHashDirectBytes,t[b++]=e._pos-r-1),n=e._cutValue;;){if(r<=h||0==n--){e._son[g]=e._son[w]=0;break}if(c=e._pos-r,s=(c<=e._cyclicBufferPos?e._cyclicBufferPos-c:e._cyclicBufferPos-c+e._cyclicBufferSize)<<1,y=e._bufferOffset+r,p=m<_?m:_,e._bufferBase[y+p]==e._bufferBase[a+p]){for(;++p!=d&&e._bufferBase[y+p]==e._bufferBase[a+p];);if(v<p&&(t[b++]=v=p,t[b++]=c-1,p==d)){e._son[w]=e._son[s],e._son[g]=e._son[s+1];break}}(255&e._bufferBase[y+p])<(255&e._bufferBase[a+p])?(e._son[w]=r,w=s+1,r=e._son[w],_=p):(e._son[g]=r,g=s,r=e._son[g],m=p)}return H(e),b}function W(e){e._bufferOffset=0,e._pos=0,e._streamPos=0,e._streamEndWasReached=0,A(e),e._cyclicBufferPos=0,z(e,-1)}function H(e){var t;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),T(e),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,G(e._son,2*e._cyclicBufferSize,t),G(e._hash,e._hashSizeSum,t),z(e,t))}function G(e,t,n){var a,r;for(a=0;a<t;++a)r=e[a]||0,r<=n?r=0:r-=n,e[a]=r}function K(e,t){e.HASH_ARRAY=t>2,e.HASH_ARRAY?(e.kNumHashDirectBytes=0,e.kMinMatchCheck=4,e.kFixHashSize=66560):(e.kNumHashDirectBytes=2,e.kMinMatchCheck=3,e.kFixHashSize=0)}function q(e,t){var n,a,r,o,i,s,c,l,u,f,p,m,_,d,h,v,b;do{if(e._pos+e._matchMaxLen<=e._streamPos)m=e._matchMaxLen;else if((m=e._streamPos-e._pos)<e.kMinMatchCheck){H(e);continue}for(_=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,a=e._bufferOffset+e._pos,e.HASH_ARRAY?(b=Kt[255&e._bufferBase[a]]^255&e._bufferBase[a+1],s=1023&b,e._hash[s]=e._pos,b^=(255&e._bufferBase[a+2])<<8,c=65535&b,e._hash[1024+c]=e._pos,l=(b^Kt[255&e._bufferBase[a+3]]<<5)&e._hashMask):l=255&e._bufferBase[a]^(255&e._bufferBase[a+1])<<8,r=e._hash[e.kFixHashSize+l],e._hash[e.kFixHashSize+l]=e._pos,h=1+(e._cyclicBufferPos<<1),v=e._cyclicBufferPos<<1,f=p=e.kNumHashDirectBytes,n=e._cutValue;;){if(r<=_||0==n--){e._son[h]=e._son[v]=0;break}if(i=e._pos-r,o=(i<=e._cyclicBufferPos?e._cyclicBufferPos-i:e._cyclicBufferPos-i+e._cyclicBufferSize)<<1,d=e._bufferOffset+r,u=f<p?f:p,e._bufferBase[d+u]==e._bufferBase[a+u]){for(;++u!=m&&e._bufferBase[d+u]==e._bufferBase[a+u];);if(u==m){e._son[v]=e._son[o],e._son[h]=e._son[o+1];break}}(255&e._bufferBase[d+u])<(255&e._bufferBase[a+u])?(e._son[v]=r,v=o+1,r=e._son[v],p=u):(e._son[h]=r,h=o,r=e._son[h],f=u)}H(e)}while(0!=--t)}function U(e,t,n){var a=e._pos-t-1;for(a<0&&(a+=e._windowSize);0!=n;--n)a>=e._windowSize&&(a=0),e._buffer[e._pos++]=e._buffer[a++],e._pos>=e._windowSize&&Y(e)}function V(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=a(t)),e._windowSize=t,e._pos=0,e._streamPos=0}function Y(e){var t=e._pos-e._streamPos;t&&(k(e._stream,e._buffer,e._streamPos,t),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function J(e,t){var n=e._pos-t-1;return n<0&&(n+=e._windowSize),e._buffer[n]}function Z(e,t){e._buffer[e._pos++]=t,e._pos>=e._windowSize&&Y(e)}function $(e){Y(e),e._stream=null}function X(e){return e-=2,e<4?e:3}function Q(e){return e<4?0:e<10?e-3:e-6}function ee(e,t){return e.encoder=t,e.decoder=null,e.alive=1,e}function te(e,t){return e.decoder=t,e.encoder=null,e.alive=1,e}function ne(e){if(!e.alive)throw new Error("bad state");return e.encoder?re(e):ae(e),e.alive}function ae(e){var t=ie(e.decoder);if(-1==t)throw new Error("corrupted input");e.inBytesProcessed=Ft,e.outBytesProcessed=e.decoder.nowPos64,(t||i(e.decoder.outSize,Ht)>=0&&i(e.decoder.nowPos64,e.decoder.outSize)>=0)&&(Y(e.decoder.m_OutWindow),$(e.decoder.m_OutWindow),e.decoder.m_RangeDecoder.Stream=null,e.alive=0)}function re(e){Pe(e.encoder,e.encoder.processedInSize,e.encoder.processedOutSize,e.encoder.finished),e.inBytesProcessed=e.encoder.processedInSize[0],e.encoder.finished[0]&&(ze(e.encoder),e.alive=0)}function oe(e,t,n,a){return e.m_RangeDecoder.Stream=t,$(e.m_OutWindow),e.m_OutWindow._stream=n,ce(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=a,e.nowPos64=Ht,e.prevByte=0,te({},e)}function ie(e){var t,n,a,o,s,c;if(c=u(e.nowPos64)&e.m_PosStateMask,yt(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+c)){if(yt(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))a=0,yt(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?(yt(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?(yt(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?(n=e.rep3,e.rep3=e.rep2):n=e.rep2,e.rep2=e.rep1):n=e.rep1,e.rep1=e.rep0,e.rep0=n):yt(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+c)||(e.state=e.state<7?9:11,a=1),a||(a=me(e.m_RepLenDecoder,e.m_RangeDecoder,c)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,a=2+me(e.m_LenDecoder,e.m_RangeDecoder,c),e.state=e.state<7?7:10,(s=lt(e.m_PosSlotDecoder[X(a)],e.m_RangeDecoder))>=4){if(o=(s>>1)-1,e.rep0=(2|1&s)<<o,s<14)e.rep0+=ft(e.m_PosDecoders,e.rep0-s-1,e.m_RangeDecoder,o);else if(e.rep0+=gt(e.m_RangeDecoder,o-4)<<4,e.rep0+=ut(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=s;if(i(l(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;U(e.m_OutWindow,e.rep0,a),e.nowPos64=r(e.nowPos64,l(a)),e.prevByte=J(e.m_OutWindow,0)}else t=ve(e.m_LiteralDecoder,u(e.nowPos64),e.prevByte),e.state<7?e.prevByte=ye(t,e.m_RangeDecoder):e.prevByte=ge(t,e.m_RangeDecoder,J(e.m_OutWindow,e.rep0)),Z(e.m_OutWindow,e.prevByte),e.state=Q(e.state),e.nowPos64=r(e.nowPos64,Gt);return 0}function se(e){e.m_OutWindow={},e.m_RangeDecoder={},e.m_IsMatchDecoders=a(192),e.m_IsRepDecoders=a(12),e.m_IsRepG0Decoders=a(12),e.m_IsRepG1Decoders=a(12),e.m_IsRepG2Decoders=a(12),e.m_IsRep0LongDecoders=a(192),e.m_PosSlotDecoder=a(4),e.m_PosDecoders=a(114),e.m_PosAlignDecoder=ct({},4),e.m_LenDecoder=_e({}),e.m_RepLenDecoder=_e({}),e.m_LiteralDecoder={};for(var t=0;t<4;++t)e.m_PosSlotDecoder[t]=ct({},6);return e}function ce(e){e.m_OutWindow._streamPos=0,e.m_OutWindow._pos=0,Et(e.m_IsMatchDecoders),Et(e.m_IsRep0LongDecoders),Et(e.m_IsRepDecoders),Et(e.m_IsRepG0Decoders),Et(e.m_IsRepG1Decoders),Et(e.m_IsRepG2Decoders),Et(e.m_PosDecoders),be(e.m_LiteralDecoder);for(var t=0;t<4;++t)Et(e.m_PosSlotDecoder[t].Models);de(e.m_LenDecoder),de(e.m_RepLenDecoder),Et(e.m_PosAlignDecoder.Models),wt(e.m_RangeDecoder)}function le(e,t){var n,a,r,o,i,s,c;if(t.length<5)return 0;for(c=255&t[0],r=c%9,s=~~(c/9),o=s%5,i=~~(s/5),n=0,a=0;a<4;++a)n+=(255&t[1+a])<<8*a;return n>99999999||!fe(e,r,o,i)?0:ue(e,n)}function ue(e,t){return t<0?0:(e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=Math.max(e.m_DictionarySize,1),V(e.m_OutWindow,Math.max(e.m_DictionarySizeCheck,4096))),1)}function fe(e,t,n,a){if(t>8||n>4||a>4)return 0;he(e.m_LiteralDecoder,n,t);var r=1<<a;return pe(e.m_LenDecoder,r),pe(e.m_RepLenDecoder,r),e.m_PosStateMask=r-1,1}function pe(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=ct({},3),e.m_MidCoder[e.m_NumPosStates]=ct({},3)}function me(e,t,n){if(!yt(t,e.m_Choice,0))return lt(e.m_LowCoder[n],t);var a=8;return yt(t,e.m_Choice,1)?a+=8+lt(e.m_HighCoder,t):a+=lt(e.m_MidCoder[n],t),a}function _e(e){return e.m_Choice=a(2),e.m_LowCoder=a(16),e.m_MidCoder=a(16),e.m_HighCoder=ct({},8),e.m_NumPosStates=0,e}function de(e){Et(e.m_Choice);for(var t=0;t<e.m_NumPosStates;++t)Et(e.m_LowCoder[t].Models),Et(e.m_MidCoder[t].Models);Et(e.m_HighCoder.Models)}function he(e,t,n){var r,o;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,o=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=a(o),r=0;r<o;++r)e.m_Coders[r]=we({})}function ve(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}function be(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)Et(e.m_Coders[t].m_Decoders)}function ye(e,t){var n=1;do{n=n<<1|yt(t,e.m_Decoders,n)}while(n<256);return n<<24>>24}function ge(e,t,n){var a,r,o=1;do{if(r=n>>7&1,n<<=1,a=yt(t,e.m_Decoders,(1+r<<8)+o),o=o<<1|a,r!=a){for(;o<256;)o=o<<1|yt(t,e.m_Decoders,o);break}}while(o<256);return o<<24>>24}function we(e){return e.m_Decoders=a(768),e}function Ee(e,t){var n,a,r,o;e._optimumEndIndex=t,r=e._optimum[t].PosPrev,a=e._optimum[t].BackPrev;do{e._optimum[t].Prev1IsChar&&(it(e._optimum[r]),e._optimum[r].PosPrev=r-1,e._optimum[t].Prev2&&(e._optimum[r-1].Prev1IsChar=0,e._optimum[r-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[r-1].BackPrev=e._optimum[t].BackPrev2)),o=r,n=a,a=e._optimum[o].BackPrev,r=e._optimum[o].PosPrev,e._optimum[o].BackPrev=n,e._optimum[o].PosPrev=t,t=o}while(t>0);return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function ke(e){e._state=0,e._previousByte=0;for(var t=0;t<4;++t)e._repDistances[t]=0}function Pe(e,t,n,a){var o,s,f,p,m,_,d,v,b,y,g,w,E,k,P;if(t[0]=Ht,n[0]=Ht,a[0]=1,e._inStream&&(e._matchFinder._stream=e._inStream,W(e._matchFinder),e._needReleaseMFStream=1,e._inStream=null),!e._finished){if(e._finished=1,k=e.nowPos64,c(e.nowPos64,Ht)){if(!D(e._matchFinder))return void je(e,u(e.nowPos64));Te(e),E=u(e.nowPos64)&e._posStateMask,kt(e._rangeEncoder,e._isMatch,(e._state<<4)+E,0),e._state=Q(e._state),f=x(e._matchFinder,-e._additionalOffset),nt(et(e._literalEncoder,u(e.nowPos64),e._previousByte),e._rangeEncoder,f),e._previousByte=f,--e._additionalOffset,e.nowPos64=r(e.nowPos64,Gt)}if(!D(e._matchFinder))return void je(e,u(e.nowPos64));for(;;){if(d=Ne(e,u(e.nowPos64)),y=e.backRes,E=u(e.nowPos64)&e._posStateMask,s=(e._state<<4)+E,1==d&&-1==y)kt(e._rangeEncoder,e._isMatch,s,0),f=x(e._matchFinder,-e._additionalOffset),P=et(e._literalEncoder,u(e.nowPos64),e._previousByte),e._state<7?nt(P,e._rangeEncoder,f):(b=x(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),at(P,e._rangeEncoder,b,f)),e._previousByte=f,e._state=Q(e._state);else{if(kt(e._rangeEncoder,e._isMatch,s,1),y<4){if(kt(e._rangeEncoder,e._isRep,e._state,1),y?(kt(e._rangeEncoder,e._isRepG0,e._state,1),1==y?kt(e._rangeEncoder,e._isRepG1,e._state,0):(kt(e._rangeEncoder,e._isRepG1,e._state,1),kt(e._rangeEncoder,e._isRepG2,e._state,y-2))):(kt(e._rangeEncoder,e._isRepG0,e._state,0),1==d?kt(e._rangeEncoder,e._isRep0Long,s,0):kt(e._rangeEncoder,e._isRep0Long,s,1)),1==d?e._state=e._state<7?9:11:(Je(e._repMatchLenEncoder,e._rangeEncoder,d-2,E),e._state=e._state<7?8:11),p=e._repDistances[y],0!=y){for(_=y;_>=1;--_)e._repDistances[_]=e._repDistances[_-1];e._repDistances[0]=p}}else{for(kt(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,Je(e._lenEncoder,e._rangeEncoder,d-2,E),y-=4,w=Ge(y),v=X(d),mt(e._posSlotEncoder[v],e._rangeEncoder,w),w>=4&&(m=(w>>1)-1,o=(2|1&w)<<m,g=y-o,w<14?vt(e._posEncoders,o-w-1,e._rangeEncoder,m,g):(Pt(e._rangeEncoder,g>>4,m-4),dt(e._posAlignEncoder,e._rangeEncoder,15&g),++e._alignPriceCount)),p=y,_=3;_>=1;--_)e._repDistances[_]=e._repDistances[_-1];e._repDistances[0]=p,++e._matchPriceCount}e._previousByte=x(e._matchFinder,d-1-e._additionalOffset)}if(e._additionalOffset-=d,e.nowPos64=r(e.nowPos64,l(d)),!e._additionalOffset){if(e._matchPriceCount>=128&&Be(e),e._alignPriceCount>=16&&Ce(e),t[0]=e.nowPos64,n[0]=Ot(e._rangeEncoder),!D(e._matchFinder))return void je(e,u(e.nowPos64));if(i(h(e.nowPos64,k),[4096,0])>=0)return e._finished=0,void(a[0]=0)}}}}function Se(e){var t,n;e._matchFinder||(t={},n=4,e._matchFinderType||(n=2),K(t,n),e._matchFinder=t),Qe(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),e._dictionarySize==e._dictionarySizePrev&&e._numFastBytesPrev==e._numFastBytes||(I(e._matchFinder,e._dictionarySize,4096,e._numFastBytes,274),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes)}function Oe(e){var t;for(e._repDistances=a(4),e._optimum=[],e._rangeEncoder={},e._isMatch=a(192),e._isRep=a(12),e._isRepG0=a(12),e._isRepG1=a(12),e._isRepG2=a(12),e._isRep0Long=a(192),e._posSlotEncoder=[],e._posEncoders=a(114),e._posAlignEncoder=pt({},4),e._lenEncoder=Ze({}),e._repMatchLenEncoder=Ze({}),e._literalEncoder={},e._matchDistances=[],e._posSlotPrices=[],e._distancesPrices=[],e._alignPrices=a(16),e.reps=a(4),e.repLens=a(4),e.processedInSize=[Ht],e.processedOutSize=[Ht],e.finished=[0],e.properties=a(5),e.tempPrices=a(128),e._longestMatchLength=0,e._matchFinderType=1,e._numDistancePairs=0,e._numFastBytesPrev=-1,e.backRes=0,t=0;t<4096;++t)e._optimum[t]={};for(t=0;t<4;++t)e._posSlotEncoder[t]=pt({},6);return e}function Ce(e){for(var t=0;t<16;++t)e._alignPrices[t]=ht(e._posAlignEncoder,t);e._alignPriceCount=0}function Be(e){var t,n,a,r,o,i,s,c;for(r=4;r<128;++r)i=Ge(r),a=(i>>1)-1,t=(2|1&i)<<a,e.tempPrices[r]=bt(e._posEncoders,t-i-1,a,r-t);for(o=0;o<4;++o){for(n=e._posSlotEncoder[o],s=o<<6,i=0;i<e._distTableSize;++i)e._posSlotPrices[s+i]=_t(n,i);for(i=14;i<e._distTableSize;++i)e._posSlotPrices[s+i]+=(i>>1)-1-4<<6;for(c=128*o,r=0;r<4;++r)e._distancesPrices[c+r]=e._posSlotPrices[s+r];for(;r<128;++r)e._distancesPrices[c+r]=e._posSlotPrices[s+Ge(r)]+e.tempPrices[r]}e._matchPriceCount=0}function je(e,t){Ae(e),He(e,t&e._posStateMask),St(e._rangeEncoder)}function Ne(e,t){var n,a,r,o,i,s,c,l,u,f,p,m,_,d,h,v,b,y,g,w,E,k,P,S,O,C,B,j,N,R,L,T,A,z,I,F,W,H,G,K,q,U,V,Y,J;if(e._optimumEndIndex!=e._optimumCurrentIndex)return _=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,_;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(m=e._longestMatchLength,e._longestMatchWasFound=0):m=Te(e),B=e._numDistancePairs,(O=D(e._matchFinder)+1)<2)return e.backRes=-1,1;for(O>273&&(O=273),K=0,u=0;u<4;++u)e.reps[u]=e._repDistances[u],e.repLens[u]=M(e._matchFinder,-1,e.reps[u],273),e.repLens[u]>e.repLens[K]&&(K=u);if(e.repLens[K]>=e._numFastBytes)return e.backRes=K,_=e.repLens[K],Le(e,_-1),_;if(m>=e._numFastBytes)return e.backRes=e._matchDistances[B-1]+4,Le(e,m-1),m;if(c=x(e._matchFinder,-1),b=x(e._matchFinder,-e._repDistances[0]-1-1),m<2&&c!=b&&e.repLens[K]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,z=t&e._posStateMask,e._optimum[1].Price=Ut[e._isMatch[(e._state<<4)+z]>>>2]+ot(et(e._literalEncoder,t,e._previousByte),e._state>=7,b,c),it(e._optimum[1]),y=Ut[2048-e._isMatch[(e._state<<4)+z]>>>2],G=y+Ut[2048-e._isRep[e._state]>>>2],b==c&&(q=G+Me(e,e._state,z))<e._optimum[1].Price&&(e._optimum[1].Price=q,st(e._optimum[1])),(p=m>=e.repLens[K]?m:e.repLens[K])<2)return e.backRes=e._optimum[1].BackPrev,1;e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],f=p;do{e._optimum[f--].Price=268435455}while(f>=2);for(u=0;u<4;++u)if(!((H=e.repLens[u])<2)){F=G+xe(e,u,e._state,z);do{o=F+$e(e._repMatchLenEncoder,H-2,z),L=e._optimum[H],o<L.Price&&(L.Price=o,L.PosPrev=0,L.BackPrev=u,L.Prev1IsChar=0)}while(--H>=2)}if(S=y+Ut[e._isRep[e._state]>>>2],(f=e.repLens[0]>=2?e.repLens[0]+1:2)<=m){for(j=0;f>e._matchDistances[j];)j+=2;for(;l=e._matchDistances[j+1],o=S+Re(e,l,f,z),L=e._optimum[f],o<L.Price&&(L.Price=o,L.PosPrev=0,L.BackPrev=l+4,L.Prev1IsChar=0),f!=e._matchDistances[j]||(j+=2)!=B;++f);}for(n=0;;){if(++n==p)return Ee(e,n);if(g=Te(e),B=e._numDistancePairs,g>=e._numFastBytes)return e._longestMatchLength=g,e._longestMatchWasFound=1,Ee(e,n);if(++t,A=e._optimum[n].PosPrev,e._optimum[n].Prev1IsChar?(--A,e._optimum[n].Prev2?(V=e._optimum[e._optimum[n].PosPrev2].State,V=e._optimum[n].BackPrev2<4?V<7?8:11:V<7?7:10):V=e._optimum[A].State,V=Q(V)):V=e._optimum[A].State,A==n-1?V=e._optimum[n].BackPrev?Q(V):V<7?9:11:(e._optimum[n].Prev1IsChar&&e._optimum[n].Prev2?(A=e._optimum[n].PosPrev2,T=e._optimum[n].BackPrev2,V=V<7?8:11):(T=e._optimum[n].BackPrev,V=T<4?V<7?8:11:V<7?7:10),R=e._optimum[A],T<4?T?1==T?(e.reps[0]=R.Backs1,e.reps[1]=R.Backs0,e.reps[2]=R.Backs2,e.reps[3]=R.Backs3):2==T?(e.reps[0]=R.Backs2,e.reps[1]=R.Backs0,e.reps[2]=R.Backs1,e.reps[3]=R.Backs3):(e.reps[0]=R.Backs3,e.reps[1]=R.Backs0,e.reps[2]=R.Backs1,e.reps[3]=R.Backs2):(e.reps[0]=R.Backs0,e.reps[1]=R.Backs1,e.reps[2]=R.Backs2,e.reps[3]=R.Backs3):(e.reps[0]=T-4,e.reps[1]=R.Backs0,e.reps[2]=R.Backs1,e.reps[3]=R.Backs2)),e._optimum[n].State=V,e._optimum[n].Backs0=e.reps[0],e._optimum[n].Backs1=e.reps[1],e._optimum[n].Backs2=e.reps[2],e._optimum[n].Backs3=e.reps[3],s=e._optimum[n].Price,c=x(e._matchFinder,-1),b=x(e._matchFinder,-e.reps[0]-1-1),z=t&e._posStateMask,a=s+Ut[e._isMatch[(V<<4)+z]>>>2]+ot(et(e._literalEncoder,t,x(e._matchFinder,-2)),V>=7,b,c),k=e._optimum[n+1],w=0,a<k.Price&&(k.Price=a,k.PosPrev=n,k.BackPrev=-1,k.Prev1IsChar=0,w=1),y=s+Ut[2048-e._isMatch[(V<<4)+z]>>>2],G=y+Ut[2048-e._isRep[V]>>>2],b!=c||k.PosPrev<n&&!k.BackPrev||(q=G+(Ut[e._isRepG0[V]>>>2]+Ut[e._isRep0Long[(V<<4)+z]>>>2]))<=k.Price&&(k.Price=q,k.PosPrev=n,k.BackPrev=0,k.Prev1IsChar=0,w=1),C=D(e._matchFinder)+1,C=4095-n<C?4095-n:C,!((O=C)<2)){if(O>e._numFastBytes&&(O=e._numFastBytes),!w&&b!=c&&(J=Math.min(C-1,e._numFastBytes),(h=M(e._matchFinder,0,e.reps[0],J))>=2)){for(Y=Q(V),I=t+1&e._posStateMask,P=a+Ut[2048-e._isMatch[(Y<<4)+I]>>>2]+Ut[2048-e._isRep[Y]>>>2],N=n+1+h;p<N;)e._optimum[++p].Price=268435455;o=P+($e(e._repMatchLenEncoder,h-2,I)+xe(e,0,Y,I)),L=e._optimum[N],o<L.Price&&(L.Price=o,L.PosPrev=n+1,L.BackPrev=0,L.Prev1IsChar=1,L.Prev2=0)}for(U=2,W=0;W<4;++W)if(!((d=M(e._matchFinder,-1,e.reps[W],O))<2)){v=d;do{for(;p<n+d;)e._optimum[++p].Price=268435455;o=G+($e(e._repMatchLenEncoder,d-2,z)+xe(e,W,V,z)),L=e._optimum[n+d],o<L.Price&&(L.Price=o,L.PosPrev=n,L.BackPrev=W,L.Prev1IsChar=0)}while(--d>=2);if(d=v,W||(U=d+1),d<C&&(J=Math.min(C-1-d,e._numFastBytes),(h=M(e._matchFinder,d,e.reps[W],J))>=2)){for(Y=V<7?8:11,I=t+d&e._posStateMask,r=G+($e(e._repMatchLenEncoder,d-2,z)+xe(e,W,V,z))+Ut[e._isMatch[(Y<<4)+I]>>>2]+ot(et(e._literalEncoder,t+d,x(e._matchFinder,d-1-1)),1,x(e._matchFinder,d-1-(e.reps[W]+1)),x(e._matchFinder,d-1)),Y=Q(Y),I=t+d+1&e._posStateMask,E=r+Ut[2048-e._isMatch[(Y<<4)+I]>>>2],P=E+Ut[2048-e._isRep[Y]>>>2],N=d+1+h;p<n+N;)e._optimum[++p].Price=268435455;o=P+($e(e._repMatchLenEncoder,h-2,I)+xe(e,0,Y,I)),L=e._optimum[n+N],o<L.Price&&(L.Price=o,L.PosPrev=n+d+1,L.BackPrev=0,L.Prev1IsChar=1,L.Prev2=1,L.PosPrev2=n,L.BackPrev2=W)}}if(g>O){for(g=O,B=0;g>e._matchDistances[B];B+=2);e._matchDistances[B]=g,B+=2}if(g>=U){for(S=y+Ut[e._isRep[V]>>>2];p<n+g;)e._optimum[++p].Price=268435455;for(j=0;U>e._matchDistances[j];)j+=2;for(d=U;;++d)if(i=e._matchDistances[j+1],o=S+Re(e,i,d,z),L=e._optimum[n+d],o<L.Price&&(L.Price=o,L.PosPrev=n,L.BackPrev=i+4,L.Prev1IsChar=0),d==e._matchDistances[j]){if(d<C&&(J=Math.min(C-1-d,e._numFastBytes),(h=M(e._matchFinder,d,i,J))>=2)){for(Y=V<7?7:10,I=t+d&e._posStateMask,r=o+Ut[e._isMatch[(Y<<4)+I]>>>2]+ot(et(e._literalEncoder,t+d,x(e._matchFinder,d-1-1)),1,x(e._matchFinder,d-(i+1)-1),x(e._matchFinder,d-1)),Y=Q(Y),I=t+d+1&e._posStateMask,E=r+Ut[2048-e._isMatch[(Y<<4)+I]>>>2],P=E+Ut[2048-e._isRep[Y]>>>2],N=d+1+h;p<n+N;)e._optimum[++p].Price=268435455;o=P+($e(e._repMatchLenEncoder,h-2,I)+xe(e,0,Y,I)),L=e._optimum[n+N],o<L.Price&&(L.Price=o,L.PosPrev=n+d+1,L.BackPrev=0,L.Prev1IsChar=1,L.Prev2=1,L.PosPrev2=n,L.BackPrev2=i+4)}if((j+=2)==B)break}}}}}function Re(e,t,n,a){var r=X(n);return(t<128?e._distancesPrices[128*r+t]:e._posSlotPrices[(r<<6)+Ke(t)]+e._alignPrices[15&t])+$e(e._lenEncoder,n-2,a)}function xe(e,t,n,a){var r;return t?(r=Ut[2048-e._isRepG0[n]>>>2],1==t?r+=Ut[e._isRepG1[n]>>>2]:(r+=Ut[2048-e._isRepG1[n]>>>2],r+=jt(e._isRepG2[n],t-2))):(r=Ut[e._isRepG0[n]>>>2],r+=Ut[2048-e._isRep0Long[(n<<4)+a]>>>2]),r}function Me(e,t,n){return Ut[e._isRepG0[t]>>>2]+Ut[e._isRep0Long[(t<<4)+n]>>>2]}function De(e){ke(e),Ct(e._rangeEncoder),Et(e._isMatch),Et(e._isRep0Long),Et(e._isRep),Et(e._isRepG0),Et(e._isRepG1),Et(e._isRepG2),Et(e._posEncoders),tt(e._literalEncoder);for(var t=0;t<4;++t)Et(e._posSlotEncoder[t].Models);Ve(e._lenEncoder,1<<e._posStateBits),Ve(e._repMatchLenEncoder,1<<e._posStateBits),Et(e._posAlignEncoder.Models),e._longestMatchWasFound=0,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}function Le(e,t){t>0&&(q(e._matchFinder,t),e._additionalOffset+=t)}function Te(e){var t=0;return e._numDistancePairs=F(e._matchFinder,e._matchDistances),e._numDistancePairs>0&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=M(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function Ae(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=0)}function ze(e){Ae(e),e._rangeEncoder.Stream=null}function Ie(e,t){e._dictionarySize=t;for(var n=0;t>1<<n;++n);e._distTableSize=2*n}function Fe(e,t){var n=e._matchFinderType;e._matchFinderType=t,e._matchFinder&&n!=e._matchFinderType&&(e._dictionarySizePrev=-1,e._matchFinder=null)}function We(e,t){e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24;for(var n=0;n<4;++n)e.properties[1+n]=e._dictionarySize>>8*n<<24>>24;k(t,e.properties,0,5)}function He(e,t){if(e._writeEndMark){kt(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),kt(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,Je(e._lenEncoder,e._rangeEncoder,0,t);var n=X(2);mt(e._posSlotEncoder[n],e._rangeEncoder,63),Pt(e._rangeEncoder,67108863,26),dt(e._posAlignEncoder,e._rangeEncoder,15)}}function Ge(e){return e<2048?qt[e]:e<2097152?qt[e>>10]+20:qt[e>>20]+40}function Ke(e){return e<131072?qt[e>>6]+12:e<134217728?qt[e>>16]+32:qt[e>>26]+52}function qe(e,t,n,a){n<8?(kt(t,e._choice,0,0),mt(e._lowCoder[a],t,n)):(n-=8,kt(t,e._choice,0,1),n<8?(kt(t,e._choice,1,0),mt(e._midCoder[a],t,n)):(kt(t,e._choice,1,1),mt(e._highCoder,t,n-8)))}function Ue(e){e._choice=a(2),e._lowCoder=a(16),e._midCoder=a(16),e._highCoder=pt({},8);for(var t=0;t<16;++t)e._lowCoder[t]=pt({},3),e._midCoder[t]=pt({},3);return e}function Ve(e,t){Et(e._choice);for(var n=0;n<t;++n)Et(e._lowCoder[n].Models),Et(e._midCoder[n].Models);Et(e._highCoder.Models)}function Ye(e,t,n,a,r){var o,i,s,c,l;for(o=Ut[e._choice[0]>>>2],i=Ut[2048-e._choice[0]>>>2],s=i+Ut[e._choice[1]>>>2],c=i+Ut[2048-e._choice[1]>>>2],l=0,l=0;l<8;++l){if(l>=n)return;a[r+l]=o+_t(e._lowCoder[t],l)}for(;l<16;++l){if(l>=n)return;a[r+l]=s+_t(e._midCoder[t],l-8)}for(;l<n;++l)a[r+l]=c+_t(e._highCoder,l-8-8)}function Je(e,t,n,a){qe(e,t,n,a),0==--e._counters[a]&&(Ye(e,a,e._tableSize,e._prices,272*a),e._counters[a]=e._tableSize)}function Ze(e){return Ue(e),e._prices=[],e._counters=[],e}function $e(e,t,n){return e._prices[272*n+t]}function Xe(e,t){for(var n=0;n<t;++n)Ye(e,n,e._tableSize,e._prices,272*n),e._counters[n]=e._tableSize}function Qe(e,t,n){var r,o;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,o=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=a(o),r=0;r<o;++r)e.m_Coders[r]=rt({})}function et(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}function tt(e){var t,n=1<<e.m_NumPrevBits+e.m_NumPosBits;for(t=0;t<n;++t)Et(e.m_Coders[t].m_Encoders)}function nt(e,t,n){var a,r,o=1;for(r=7;r>=0;--r)a=n>>r&1,kt(t,e.m_Encoders,o,a),o=o<<1|a}function at(e,t,n,a){var r,o,i,s,c=1,l=1;for(o=7;o>=0;--o)r=a>>o&1,s=l,c&&(i=n>>o&1,s+=1+i<<8,c=i==r),kt(t,e.m_Encoders,s,r),l=l<<1|r}function rt(e){return e.m_Encoders=a(768),e}function ot(e,t,n,a){var r,o,i=1,s=7,c=0;if(t)for(;s>=0;--s)if(o=n>>s&1,r=a>>s&1,c+=jt(e.m_Encoders[(1+o<<8)+i],r),i=i<<1|r,o!=r){--s;break}for(;s>=0;--s)r=a>>s&1,c+=jt(e.m_Encoders[i],r),i=i<<1|r;return c}function it(e){e.BackPrev=-1,e.Prev1IsChar=0}function st(e){e.BackPrev=0,e.Prev1IsChar=0}function ct(e,t){return e.NumBitLevels=t,e.Models=a(1<<t),e}function lt(e,t){var n,a=1;for(n=e.NumBitLevels;0!=n;--n)a=(a<<1)+yt(t,e.Models,a);return a-(1<<e.NumBitLevels)}function ut(e,t){var n,a,r=1,o=0;for(a=0;a<e.NumBitLevels;++a)n=yt(t,e.Models,r),r<<=1,r+=n,o|=n<<a;return o}function ft(e,t,n,a){var r,o,i=1,s=0;for(o=0;o<a;++o)r=yt(n,e,t+i),i<<=1,i+=r,s|=r<<o;return s}function pt(e,t){return e.NumBitLevels=t,e.Models=a(1<<t),e}function mt(e,t,n){var a,r,o=1;for(r=e.NumBitLevels;0!=r;)--r,a=n>>>r&1,kt(t,e.Models,o,a),o=o<<1|a}function _t(e,t){var n,a,r=1,o=0;for(a=e.NumBitLevels;0!=a;)--a,n=t>>>a&1,o+=jt(e.Models[r],n),r=(r<<1)+n;return o}function dt(e,t,n){var a,r,o=1;for(r=0;r<e.NumBitLevels;++r)a=1&n,kt(t,e.Models,o,a),o=o<<1|a,n>>=1}function ht(e,t){var n,a,r=1,o=0;for(a=e.NumBitLevels;0!=a;--a)n=1&t,t>>>=1,o+=jt(e.Models[r],n),r=r<<1|n;return o}function vt(e,t,n,a,r){var o,i,s=1;for(i=0;i<a;++i)o=1&r,kt(n,e,t+s,o),s=s<<1|o,r>>=1}function bt(e,t,n,a){var r,o,i=1,s=0;for(o=n;0!=o;--o)r=1&a,a>>>=1,s+=Ut[(2047&(e[t+i]-r^-r))>>>2],i=i<<1|r;return s}function yt(e,t,n){var a,r=t[n];return a=(e.Range>>>11)*r,(-2147483648^e.Code)<(-2147483648^a)?(e.Range=a,t[n]=r+(2048-r>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|b(e.Stream),e.Range<<=8),0):(e.Range-=a,e.Code-=a,t[n]=r-(r>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|b(e.Stream),e.Range<<=8),1)}function gt(e,t){var n,a,r=0;for(n=t;0!=n;--n)e.Range>>>=1,a=e.Code-e.Range>>>31,e.Code-=e.Range&a-1,r=r<<1|1-a,-16777216&e.Range||(e.Code=e.Code<<8|b(e.Stream),e.Range<<=8);return r}function wt(e){e.Code=0,e.Range=-1;for(var t=0;t<5;++t)e.Code=e.Code<<8|b(e.Stream)}function Et(e){for(var t=e.length-1;t>=0;--t)e[t]=1024}function kt(e,t,n,a){var i,s=t[n];i=(e.Range>>>11)*s,a?(e.Low=r(e.Low,o(l(i),[4294967295,0])),e.Range-=i,t[n]=s-(s>>>5)<<16>>16):(e.Range=i,t[n]=s+(2048-s>>>5)<<16>>16),-16777216&e.Range||(e.Range<<=8,Bt(e))}function Pt(e,t,n){for(var a=n-1;a>=0;--a)e.Range>>>=1,1==(t>>>a&1)&&(e.Low=r(e.Low,l(e.Range))),-16777216&e.Range||(e.Range<<=8,Bt(e))}function St(e){for(var t=0;t<5;++t)Bt(e)}function Ot(e){return r(r(l(e._cacheSize),e._position),[4,0])}function Ct(e){e._position=Ht,e.Low=Ht,e.Range=-1,e._cacheSize=1,e._cache=0}function Bt(e){var t,n=u(d(e.Low,32));if(0!=n||i(e.Low,[4278190080,0])<0){e._position=r(e._position,l(e._cacheSize)),t=e._cache;do{E(e.Stream,t+n),t=255}while(0!=--e._cacheSize);e._cache=u(e.Low)>>>24}++e._cacheSize,e.Low=m(o(e.Low,[16777215,0]),8)}function jt(e,t){return Ut[(2047&(e-t^-t))>>>2]}function Nt(e){var t,n,a,r,o="",i=e.length;for(t=0;t<i;++t)if(128&(n=255&e[t]))if(192==(224&n)){if(t+1>=e.length)return e;if(128!=(192&(a=255&e[++t])))return e;o+=String.fromCharCode((31&n)<<6&65535|63&a)}else{if(224!=(240&n))return e;if(t+2>=e.length)return e;if(128!=(192&(a=255&e[++t])))return e;if(128!=(192&(r=255&e[++t])))return e;o+=String.fromCharCode(65535&((15&n)<<12|(63&a)<<6|63&r))}else{if(!n)return e;o+=String.fromCharCode(65535&n)}return o}function Rt(e){var t,n,a,r=[],o=0,i=e.length;if("object"==typeof e)return e;for(P(e,0,i,r,0),a=0;a<i;++a)t=r[a],t>=1&&t<=127?++o:o+=!t||t>=128&&t<=2047?2:3;for(n=[],o=0,a=0;a<i;++a)t=r[a],t>=1&&t<=127?n[o++]=t<<24>>24:!t||t>=128&&t<=2047?(n[o++]=(192|t>>6&31)<<24>>24,n[o++]=(128|63&t)<<24>>24):(n[o++]=(224|t>>12&15)<<24>>24,n[o++]=(128|t>>6&63)<<24>>24,n[o++]=(128|63&t)<<24>>24);return n}function xt(e){return e[1]+e[0]}function Mt(e,t,a,r){function o(){for(var e,t=(new Date).getTime();ne(c.c.chunker);)if(i=xt(c.c.chunker.inBytesProcessed)/xt(c.c.length_0),(new Date).getTime()-t>200)return r?r(i):void 0!==s&&n(i,s),zt(o,0),0;r?r(1):void 0!==s&&n(1,s),e=w(c.c.output),a?a(e):void 0!==s&&postMessage({action:Lt,cbn:s,result:e})}var i,s,c={};"function"!=typeof a&&(s=a,a=r=0),c.c=B({},Rt(e),Vt(t)),r?r(0):void 0!==s&&n(0,s),zt(o,0)}function Dt(e,t,a){function r(){for(var e,u=0,f=(new Date).getTime();ne(l.d.chunker);)if(++u%1e3==0&&(new Date).getTime()-f>200)return s&&(o=xt(l.d.chunker.decoder.nowPos64)/c,a?a(o):void 0!==i&&n(o,i)),zt(r,0),0;s&&(a?a(1):void 0!==i&&n(1,i)),e=Nt(w(l.d.output)),t?t(e):void 0!==i&&postMessage({action:Tt,cbn:i,result:e})}var o,i,s,c,l={};"function"!=typeof t&&(i=t,t=a=0),l.d=N({},e),c=xt(l.d.length_0),s=c>-1,a?a(s?0:-1):void 0!==i&&n(s?0:-1,i),zt(r,0)}var Lt=1,Tt=2,At=3,zt="function"==typeof e?e:setTimeout,It=4294967296,Ft=[4294967295,-It],Wt=[0,-0x8000000000000000],Ht=[0,0],Gt=[1,0],Kt=function(){var e,t,n,a=[];for(e=0;e<256;++e){for(n=e,t=0;t<8;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;a[e]=n}return a}(),qt=function(){var e,t,n,a=2,r=[0,1];for(n=2;n<22;++n)for(t=1<<(n>>1)-1,e=0;e<t;++e,++a)r[a]=n<<24>>24;return r}(),Ut=function(){var e,t,n,a,r=[];for(t=8;t>=0;--t)for(a=1<<9-t-1,e=1<<9-t,n=a;n<e;++n)r[n]=(t<<6)+(e-n<<6>>>9-t-1);return r}(),Vt=function(){var e=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];return function(t){return e[t-1]||e[6]}}();return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||function(){onmessage=function(e){e&&e.data&&(e.data.action==Tt?t.decompress(e.data.data,e.data.cbn):e.data.action==Lt&&t.compress(e.data.data,e.data.mode,e.data.cbn))}}(),{compress:Mt,decompress:Dt}}();this.LZMA=this.LZMA_WORKER=t}).call(t,n(392).setImmediate)},1226:function(t,n,a){"use strict";(function(t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=a(7),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=void 0;try{var c=a(1227);if(-1===c.indexOf("3cee441"))throw new Error("Incorrect hash: bts_genesiskeys_bloom.dat");s=c}catch(e){console.log("WARN: Will be unable to filter BTS 1.0 wallet imports, did not find assets/bts_genesiskeys_bloom.dat",e)}var l=function(){function n(e){r(this,n),e&&(this.bloom_buffer=e,this.bits_in_filter=8*e.length)}return i(n,[{key:"isAvailable",value:function(){return void 0!==s}},{key:"init",value:function(n){var a=this;if(this.bloom_buffer)return void n();if(!this.isAvailable())throw new Error("Genesis bloom file was not deployed");var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){if(404!==r.status){var e=new FileReader;e.onload=function(e){var r=new t(e.target.result,"binary");if(1048576!==r.length)throw new Error("Wrong length");a.bits_in_filter=8*r.length,a.bloom_buffer=r,n()},e.readAsBinaryString(r.response)}},r.onerror=function(){console.error("xhr.onerror",e)},r.open("GET",s),r.send()}},{key:"inGenesis",value:function(e){if(!this.bloom_buffer)throw new Error("Call init() first");for(var t=0;t<3;t++){var n=o.m.sha256(t+":"+e),a=parseInt(n.slice(-3).toString("hex"),16)%this.bits_in_filter,r=a>>3,i=1<<(7&a);if(0==(this.bloom_buffer[r]&i))return!1}return!0}},{key:"filter",value:function(e,t){var n=this;if(!this.isAvailable())return console.log("WARN: Missing bloom filter for BTS 0.9.x wallets"),void t({error:"missing_bloom"});var a=!0;t({initalizing:a}),this.init(function(){try{a=!1,t({initalizing:a});for(var r=1,i=0;i<e.length;i++){var s=0,c=0,l=e[i],u=l.encrypted_private_keys.length;t({importing:!0,account_name:l.account_name,count:c,total:u});for(var f=l.encrypted_private_keys.length-1;f>=0;f--){if(c++,c%r==0&&(r=47,t({importing:!0,account_name:l.account_name,count:c,total:u})),!l.public_keys)return void t({error:"missing_public_keys"});var p=l.public_keys[f];if(/^GPH/.test(p)&&(p="BTS"+p.substring(3)),!n.inGenesis(p)){for(var m=o.n.addresses(p,"BTS"),_=!1,d=0;d<m.length;d++)if(n.inGenesis(m[d])){_=!0;break}_||(delete l.encrypted_private_keys[f],delete l.public_keys[f],s++)}}for(var h=[],v=[],f=l.encrypted_private_keys.length-1;f>=0;f--)l.encrypted_private_keys[f]&&(h.push(l.encrypted_private_keys[f]),v.push(l.public_keys[f]));l.encrypted_private_keys=h,t({importing:!1,account_name:l.account_name,count:c-s,total:u}),l.public_keys=v}t({success:!0})}finally{a&&(a=!1,t({initalizing:a}))}})}}]),n}();n.a=l}).call(n,a(3).Buffer)},1227:function(e,t,n){e.exports=n.p+"bts_genesiskeys_bloom_3cee441.dat"},1228:function(e,t,n){var a=n(1229);"string"==typeof a&&(a=[[e.i,a,""]]);n(1159)(a,{});a.locals&&(e.exports=a.locals)},1229:function(e,t,n){t=e.exports=n(1158)(),t.push([e.i,"div>div.asset-list:first-child{padding-top:.25rem}div>div.asset-list{padding-bottom:.25rem}",""])},1275:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var C=n(1),B=n.n(C),j=n(50),N=n(398),R=n(106),x=n.n(R),M=n(21),D=n.n(M),L=n(140),T=n(20),A=n.n(T),z=n(43),I=n(395),F=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),W=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={message:null},e}return o(t,e),F(t,[{key:"_setMessage",value:function(e){var t=this;this.setState({message:D.a.translate(e)}),this.timer=setTimeout(function(){t.setState({message:null})},4e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this,t=this.props,n=t.defaults,a=t.setting,r=t.settings,o=(t.apiServer,void 0),i=void 0,s=void 0,c=r.get(a),l=!1;switch(a){case"locale":i=c,o=n.map(function(e){var t="languages."+e,n=D.a.translate(t);return B.a.createElement("option",{key:e,value:e},n)});break;case"themes":i=c,o=n.map(function(e){var t="settings."+e,n=D.a.translate(t);return B.a.createElement("option",{key:e,value:e},n)});break;case"defaultMarkets":o=null,i=null;break;case"walletLockTimeout":i=c,s=B.a.createElement("input",{type:"text",value:c,onChange:this.props.onChange.bind(this,a)});break;case"reset":i=!0,s=B.a.createElement("div",{style:{height:60,width:"100%",paddingTop:20},className:"button",onClick:function(){z.a.clearSettings().then(function(){e._setMessage("settings.restore_default_success")})}},D.a.translate("settings.reset")),l=!0;break;default:"number"==typeof c?i=n[c]:"boolean"==typeof c?i=c?n[0]:n[1]:"string"==typeof c&&(i=c),n?o=n.map(function(e,t){var n=e.translate?D.a.translate("settings."+e.translate):e,a=e.translate?e.translate:e;return B.a.createElement("option",{value:e.translate?e.translate:e,key:a},n)}):s=B.a.createElement("input",{type:"text",defaultValue:i,onBlur:this.props.onChange.bind(this,a)})}return"number"==typeof i||i||o?(i&&i.translate&&(i=i.translate),B.a.createElement("section",{className:"block-list"},l?null:B.a.createElement("header",null,B.a.createElement(A.a,{component:"span",content:"settings."+a})),o?B.a.createElement("ul",null,B.a.createElement("li",{className:"with-dropdown"},void 0,B.a.createElement("select",{value:i,onChange:this.props.onChange.bind(this,a)},o),void 0)):null,s?B.a.createElement("ul",null,B.a.createElement("li",null,s)):null,B.a.createElement("div",{className:"facolor-success"},this.state.message))):null}}]),t}(B.a.Component),H=W,G=n(35),K=n(76),q=n(98),U=n(66),V=n(19),Y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),J=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),Y(t,[{key:"shouldComponentUpdate",value:function(e){return!V.a.are_equal_shallow(e.myAccounts,this.props.myAccounts)||e.ignoredAccounts!==this.props.ignoredAccounts}},{key:"onLinkAccount",value:function(e,t){t.preventDefault(),q.a.linkAccount(e)}},{key:"onUnlinkAccount",value:function(e,t){t.preventDefault(),q.a.unlinkAccount(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.myAccounts,a=t.ignoredAccounts,r=a.toArray().concat(n).sort();return r.length?B.a.createElement("table",{className:"table"},B.a.createElement("tbody",null,r.map(function(t){var n=a.has(t),r=B.a.createElement("a",{href:!0,onClick:n?e.onLinkAccount.bind(e,t):e.onUnlinkAccount.bind(e,t)},B.a.createElement(A.a,{content:"account."+(n?"unignore":"ignore")}));return B.a.createElement("tr",{key:t},B.a.createElement("td",null,t),B.a.createElement("td",null,B.a.createElement(G.b,{to:"/account/"+t+"/permissions"},B.a.createElement(A.a,{content:"settings.view_keys"}))),B.a.createElement("td",null,r))}))):B.a.createElement("div",null,B.a.createElement(A.a,{content:"settings.no_accounts"}))}}]),t}(B.a.Component);J=Object(U.connect)(J,{listenTo:function(){return[K.a]},getProps:function(){return{myAccounts:K.a.getMyAccounts(),ignoredAccounts:K.a.getState().myIgnoredAccounts}}});var Z=J,$=n(405),X=n(112),Q=n(34),ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),te=function(e){function t(){l(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={lookupActive:!1,resetMessage:null},e}return f(t,e),ee(t,[{key:"onLookup",value:function(){this.setState({lookupActive:!0})}},{key:"onResetBrainkeySequence",value:function(){Q.a.resetBrainKeySequence(),this.setState({resetMessage:D.a.translate("wallet.brainkey_reset_success")})}},{key:"render",value:function(){var e=this.state.lookupActive;return B.a.createElement("div",null,B.a.createElement($.ChangeActiveWallet,null),B.a.createElement($.WalletDelete,null),B.a.createElement("section",{style:{padding:"15px 0"},className:"block-list"},B.a.createElement("header",null,B.a.createElement(A.a,{content:"wallet.balance_claims"}),":")),B.a.createElement("div",{style:{paddingBottom:10}},B.a.createElement(A.a,{content:"settings.lookup_text"}),":"),B.a.createElement("div",{className:"button outline",onClick:this.onLookup.bind(this)},B.a.createElement(A.a,{content:"wallet.balance_claim_lookup"})),e?B.a.createElement(X.default,null):null,B.a.createElement("section",{style:{padding:"15px 0"},className:"block-list"},B.a.createElement("header",null,B.a.createElement(A.a,{content:"wallet.brainkey_seq_reset"}),":")),B.a.createElement("div",{style:{paddingBottom:10}},B.a.createElement("p",null,B.a.createElement(A.a,{unsafe:!0,content:"wallet.brainkey_seq_reset_text"})),B.a.createElement("div",{className:"button outline",onClick:this.onResetBrainkeySequence.bind(this)},B.a.createElement(A.a,{content:"wallet.brainkey_seq_reset_button"})),this.state.resetMessage?B.a.createElement("p",{style:{paddingTop:10},className:"facolor-success"},this.state.resetMessage):null))}}]),t}(B.a.Component),ne=te,ae=n(406),re=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),oe=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,e),re(t,[{key:"render",value:function(){return B.a.createElement(ae.default,null)}}]),t}(B.a.Component),ie=oe,se=n(142),ce=n(407),le=n(141),ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),fe=function(e){function t(){d(this,t);var e=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={restoreType:0,types:["backup","key","legacy","brainkey"]},e}return v(t,e),ue(t,[{key:"_setWalletMode",value:function(){z.a.changeSetting({setting:"passwordLogin",value:!1})}},{key:"_changeType",value:function(e){this.setState({restoreType:this.state.types.indexOf(e.target.value)})}},{key:"render",value:function(){if(this.props.passwordLogin)return B.a.createElement("div",null,B.a.createElement(A.a,{content:"settings.wallet_required",component:"h4"}),B.a.createElement("p",null,B.a.createElement(A.a,{content:"settings.wallet_required_text"}),":"),B.a.createElement("button",{className:"button",onClick:this._setWalletMode},B.a.createElement(A.a,{content:"settings.enable_wallet"})));var e=this.state,t=e.types,n=e.restoreType,a=t.map(function(e){return B.a.createElement("option",{key:e,value:e},D.a.translate("settings.backup_"+e)," ")}),r=void 0;switch(t[n]){case"backup":r=B.a.createElement("div",null,B.a.createElement(se.BackupRestore,null));break;case"brainkey":r=B.a.createElement("div",null,B.a.createElement("p",{style:{maxWidth:"40rem",paddingBottom:10}},B.a.createElement(A.a,{content:"settings.restore_brainkey_text"})),B.a.createElement(le.CreateWalletFromBrainkey,{nested:!0}));break;default:r=B.a.createElement(ce.default,{privateKey:1===n})}return B.a.createElement("div",null,B.a.createElement("select",{onChange:this._changeType.bind(this),className:"bts-select",value:t[n]},a),r)}}]),t}(B.a.Component),pe=fe,me=n(408),_e=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),de=function(e){function t(){b(this,t);var e=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={restoreType:0,types:["backup","brainkey"]},e}return g(t,e),_e(t,[{key:"_changeType",value:function(e){this.setState({restoreType:this.state.types.indexOf(e.target.value)})}},{key:"render",value:function(){var e=this.state,t=e.types,n=e.restoreType,a=t.map(function(e){return B.a.createElement("option",{key:e,value:e},D.a.translate("settings.backupcreate_"+e)," ")}),r=void 0;switch(t[n]){case"backup":r=B.a.createElement(se.BackupCreate,null);break;case"brainkey":r=B.a.createElement(me.default,null)}return B.a.createElement("div",null,B.a.createElement("select",{onChange:this._changeType.bind(this),className:"bts-select",value:t[n]},a),r)}}]),t}(B.a.Component),he=de,ve=n(400),be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ye=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ge=function(e){function t(e){w(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=n._getMenuEntries(e),r=e.viewSettings.get("activeSetting",0);return r>a.length-1&&(r=0),n.state={apiServer:e.settings.get("apiServer"),activeSetting:r,menuEntries:a,settingEntries:{general:["locale","unit","showSettles","walletLockTimeout","themes","showAssetPercent","passwordLogin","reset"],access:["apiServer","faucet_address"]}},n}return k(t,e),ye(t,[{key:"componentWillReceiveProps",value:function(e){if(e.settings.get("passwordLogin")!==this.props.settings.get("passwordLogin")){var t=this._getMenuEntries(this.props),n=this._getMenuEntries(e);t.length<n.length&&this.setState({activeSetting:this.state.activeSetting+(n.length-t.length)}),this.setState({menuEntries:n}),this.state.activeSetting>n.length-1&&this.setState({activeSetting:0})}}},{key:"_getMenuEntries",value:function(e){var t=["general","wallet","accounts","password","backup","restore","access","faucet_address"];return e.settings.get("passwordLogin")&&(t.splice(4,1),t.splice(3,1),t.splice(1,1)),t}},{key:"triggerModal",value:function(e){for(var t,n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];(t=this.refs.ws_modal).show.apply(t,[e].concat(a))}},{key:"_onChangeSetting",value:function(e,t){function n(e,t){if(!t)return e;if(!t[0].translate)return t.indexOf(e);for(var n=0;n<t.length;n++)if(D.a.translate("settings."+t[n].translate)===e)return n}t.preventDefault();var a=this.props.defaults,r=null;switch(e){case"locale":var o=D.a.getLocale();t.target.value!==o&&(L.a.switchLocale(t.target.value),z.a.changeSetting({setting:"locale",value:t.target.value}));break;case"themes":z.a.changeSetting({setting:"themes",value:t.target.value});break;case"defaultMarkets":break;case"walletLockTimeout":var i=parseInt(t.target.value,10);isNaN(i)&&(i=0),isNaN(i)||"number"!=typeof i||z.a.changeSetting({setting:"walletLockTimeout",value:i});break;case"inverseMarket":case"confirmMarketOrder":r=0===n(t.target.value,a[e]);break;case"apiServer":z.a.changeSetting({setting:"apiServer",value:t.target.value}),this.setState({apiServer:t.target.value});break;case"disableChat":case"showSettles":case"showAssetPercent":case"passwordLogin":z.a.changeSetting({setting:e,value:"yes"===t.target.value});break;case"unit":var s=n(t.target.value,a[e]);z.a.changeSetting({setting:e,value:a[e][s]});break;default:r=n(t.target.value,a[e])}null!==r&&z.a.changeSetting({setting:e,value:r})}},{key:"onReset",value:function(){z.a.clearSettings()}},{key:"_onChangeMenu",value:function(e){var t=this.state.menuEntries.indexOf(e);this.setState({activeSetting:t}),z.a.changeViewSetting({activeSetting:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.settings,a=t.defaults,r=this.state,o=r.menuEntries,i=r.activeSetting,s=r.settingEntries,c=void 0,l=o[i]||o[0];switch(l){case"accounts":c=B.a.createElement(Z,null);break;case"wallet":c=B.a.createElement(ne,null);break;case"password":c=B.a.createElement(ie,null);break;case"backup":c=B.a.createElement(he,null);break;case"restore":c=B.a.createElement(pe,{passwordLogin:this.props.settings.get("passwordLogin")});break;case"access":c=B.a.createElement(ve.a,{faucet:n.get("faucet_address"),nodes:a.apiServer,onChange:this._onChangeSetting.bind(this),triggerModal:this.triggerModal.bind(this)});break;case"faucet_address":c=B.a.createElement("input",{type:"text",defaultValue:n.get("faucet_address"),onChange:this._onChangeSetting.bind(this,"faucet_address")});break;default:c=s[l].map(function(t){return B.a.createElement(H,be({key:t,setting:t,settings:n,defaults:a[t],onChange:e._onChangeSetting.bind(e),locales:e.props.localesObject},e.state))})}return B.a.createElement("div",{className:"grid-block page-layout"},B.a.createElement("div",{className:"grid-block main-content wrap"},B.a.createElement("div",{className:"grid-content large-offset-2 shrink",style:{paddingRight:"4rem"}},B.a.createElement(A.a,{style:{paddingBottom:20},className:"bottom-border",component:"h4",content:"header.settings"}),B.a.createElement("ul",{className:"settings-menu"},o.map(function(t,n){return B.a.createElement("li",{className:n===i?"active":"",onClick:e._onChangeMenu.bind(e,t),key:t},B.a.createElement(A.a,{content:"settings."+t}))}))),B.a.createElement("div",{className:"grid-content",style:{paddingLeft:"1rem",paddingRight:"1rem",maxWidth:1e3}},B.a.createElement("div",{className:"grid-block small-12 medium-10 no-margin vertical"},B.a.createElement(A.a,{component:"h3",content:"settings."+o[i]}),"access"!=l&&B.a.createElement(A.a,{unsafe:!0,style:{paddingTop:10,paddingBottom:20,marginBottom:30},className:"bottom-border",content:"settings."+o[i]+"_text"}),c))),B.a.createElement(I.a,{ref:"ws_modal",apis:a.apiServer,api:a.apiServer.filter(function(t){return t.url===e.state.apiServer}).reduce(function(e,t){return t&&t.url},null),changeConnection:function(t){e.setState({apiServer:t})}}))}}]),t}(B.a.Component),we=ge,Ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ke=function(e){function t(){return P(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),Ee(t,[{key:"render",value:function(){return B.a.createElement(x.a,{stores:[j.a],inject:{settings:function(){return j.a.getState().settings},viewSettings:function(){return j.a.getState().viewSettings},defaults:function(){return j.a.getState().defaults},localesObject:function(){return N.a.getState().localesObject},apiLatencies:function(){return j.a.getState().apiLatencies}}},B.a.createElement(we,null))}}]),t}(B.a.Component);t.default=ke},141:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"WalletCreate",function(){return E}),n.d(t,"CreateWalletFromBrainkey",function(){return k});var i=n(1),s=n.n(i),c=n(35),l=n(20),u=n.n(l),f=n(1212),p=n(1208),m=n(34),_=n(107),d=n(104),h=n(66),v=(n.n(h),n(49)),b=n.n(v),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),w=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={wallet_public_name:"default",valid_password:null,errors:{validBrainkey:!1},isValid:!1,create_submitted:!1,custom_brainkey:e.restoreBrainkey||!1,brnkey:null},n.validate=n.validate.bind(n),n}return o(t,e),g(t,[{key:"onBack",value:function(e){e.preventDefault(),window.history.back()}},{key:"onPassword",value:function(e){this.state.valid_password=e,this.setState({valid_password:e},this.validate)}},{key:"onCustomBrainkey",value:function(){this.setState({custom_brainkey:!0})}},{key:"onBrainkey",value:function(e){this.state.brnkey=e,this.setState({brnkey:e},this.validate)}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.wallet_public_name,a=t.valid_password,r=t.custom_brainkey,o=t.errors;!a||o.wallet_public_name||r&&!o.validBrainkey||(d.a.setWallet(n,a,this.state.brnkey),this.setState({create_submitted:!0}))}},{key:"formChange",value:function(e){var t=e.target.id,n=e.target.value;"wallet_public_name"===t&&(n=n.toLowerCase(),/[^a-z0-9_-]/.test(n))||(this.state[t]=n,this.setState(this.state),this.validate())}},{key:"validate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.errors,n=this.props.wallet_names;t.wallet_public_name=n.has(e.wallet_public_name)?"Wallet "+e.wallet_public_name.toUpperCase()+" exists, please change the name":null;var a=null===t.wallet_public_name&&null!==e.valid_password;e.custom_brainkey&&a&&(a=null!==e.brnkey),this.setState({isValid:a,errors:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.errors,a=!!this.props.current_wallet;return this.state.create_submitted&&this.state.wallet_public_name===this.props.current_wallet?s.a.createElement("div",null,s.a.createElement("h4",null,s.a.createElement(u.a,{content:"wallet.wallet_created"})),s.a.createElement(c.b,{to:"/dashboard"},s.a.createElement("div",{className:"button success"},s.a.createElement(u.a,{content:"wallet.done"})))):s.a.createElement("div",null,s.a.createElement("form",{style:{maxWidth:"40rem"},onSubmit:this.onSubmit.bind(this),onChange:this.formChange.bind(this),noValidate:!0},s.a.createElement("div",{className:"grid-content",style:{textAlign:"left"}},this.props.restoreBrainkey?null:s.a.createElement(u.a,{component:"p",content:"wallet.create_importkeys_text"}),this.props.restoreBrainkey?null:s.a.createElement(u.a,{component:"p",content:"wallet.create_text"})),s.a.createElement(p.a,{onValid:this.onPassword.bind(this)}),a?s.a.createElement("div",{className:"no-overflow"},s.a.createElement("br",null),s.a.createElement("section",null,s.a.createElement("label",null,s.a.createElement(u.a,{content:"wallet.name"})),s.a.createElement("input",{tabIndex:3,type:"text",id:"wallet_public_name",defaultValue:this.state.wallet_public_name})),s.a.createElement("div",{className:"has-error"},n.wallet_public_name),s.a.createElement("br",null)):null,s.a.createElement("div",{className:"no-overflow"},this.state.custom_brainkey?s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement(u.a,{content:"wallet.brainkey"})),s.a.createElement(f.a,{tabIndex:4,onChange:this.onBrainkey.bind(this),errorCallback:function(t){var n=e.state.errors;n.validBrainkey=t,e.setState({errors:n})}})):null,s.a.createElement("button",{className:b()("button",{disabled:!this.state.isValid})},s.a.createElement(u.a,{content:"wallet.create_wallet"})),s.a.createElement("button",{className:"button secondary",onClick:this.onBack.bind(this)},s.a.createElement(u.a,{content:"wallet.cancel"}))),this.state.custom_brainkey?null:s.a.createElement("div",{style:{paddingTop:20}},s.a.createElement("label",null,s.a.createElement("a",{onClick:this.onCustomBrainkey.bind(this)},s.a.createElement(u.a,{content:"wallet.custom_brainkey"}))))))}}]),t}(i.Component);w.propTypes={hideTitle:s.a.PropTypes.bool},w=Object(h.connect)(w,{listenTo:function(){return[_.a]},getProps:function(){return _.a.getState()}});var E=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),g(t,[{key:"render",value:function(){return m.a.getWallet()&&this.props.children?s.a.createElement("div",null,this.props.children):s.a.createElement(w,this.props)}}]),t}(i.Component),k=function(e){return e.nested?s.a.createElement(E,y({restoreBrainkey:!0},e)):s.a.createElement("div",{className:"grid-container",style:{paddingTop:30}},s.a.createElement(u.a,{content:"settings.backup_brainkey",component:"h3"}),s.a.createElement(u.a,{content:"settings.restore_brainkey_text",component:"p",style:{maxWidth:"40rem",paddingBottom:10}}),s.a.createElement(E,y({restoreBrainkey:!0},e)))}},142:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){try{return g.i.fromBuffer(e.slice(0,33))}catch(e){console.error(e,e.stack)}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),f=n.n(u),p=n(35),m=n(93),_=n(66),d=n(104),h=n(107),v=n(10),b=n(1209),y=n(67),g=n(7),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),E=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e.bindListeners({onIncommingFile:b.c.incommingWebFile,onIncommingBuffer:b.c.incommingBuffer,onReset:b.c.reset}),e._export("setWalletObjct"),e}return o(t,e),w(t,[{key:"_getInitialState",value:function(){return{name:null,contents:null,sha1:null,size:null,last_modified:null,public_key:null,wallet_object:null}}},{key:"setWalletObjct",value:function(e){this.setState({wallet_object:e})}},{key:"onReset",value:function(){this.setState(this._getInitialState())}},{key:"onIncommingFile",value:function(e){var t=e.name,n=e.contents,a=e.last_modified,r=g.m.sha1(n).toString("hex"),o=n.length,s=i(n);this.setState({name:t,contents:n,sha1:r,size:o,last_modified:a,public_key:s})}},{key:"onIncommingBuffer",value:function(e){var t=e.name,n=e.contents,a=e.public_key;this.onReset();var r=g.m.sha1(n).toString("hex"),o=n.length;a||(a=i(n)),this.setState({name:t,contents:n,sha1:r,size:o,public_key:a})}}]),t}(y.a),k=v.a.createStore(E,"BackupStore"),P=k,S=n(34),O=n(95),C=n(1190),B=n(49),j=n.n(B),N=n(20),R=n.n(N),x=n(12);n.d(t,"BackupCreate",function(){return L}),n.d(t,"BackupVerify",function(){return T}),n.d(t,"BackupRestore",function(){return A}),n.d(t,"Restore",function(){return z}),n.d(t,"NewWalletName",function(){return I}),n.d(t,"Download",function(){return F}),n.d(t,"Create",function(){return W}),n.d(t,"Upload",function(){return G}),n.d(t,"NameSizeModified",function(){return K}),n.d(t,"DecryptBackup",function(){return q}),n.d(t,"Sha1",function(){return U});var M=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),D={listenTo:function(){return[h.a,P]},getProps:function(){return{wallet:h.a.getState(),backup:P.getState()}}},L=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),M(t,[{key:"render",value:function(){return f.a.createElement("div",{style:{maxWidth:"40rem"}},f.a.createElement(W,{noText:this.props.noText,newAccount:this.props.location?this.props.location.query.newAccount:null},f.a.createElement(K,null),this.props.noText?null:f.a.createElement(U,null),f.a.createElement(F,{downloadCb:this.props.downloadCb})))}}]),t}(u.Component);L=Object(_.connect)(L,D);var T=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),M(t,[{key:"render",value:function(){return f.a.createElement("div",{style:{maxWidth:"40rem"}},f.a.createElement("h3",null,f.a.createElement(R.a,{content:"wallet.verify_prior_backup"})),f.a.createElement(G,null,f.a.createElement(K,null),f.a.createElement(q,{saveWalletObject:!0},f.a.createElement("h4",null,f.a.createElement(R.a,{content:"wallet.verified"}))),f.a.createElement(V,null)))}}]),t}(u.Component);T=Object(_.connect)(T,D);var A=function(e){function t(){s(this,t);var e=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={newWalletName:null},e}return l(t,e),M(t,[{key:"componentWillMount",value:function(){b.c.reset()}},{key:"render",value:function(){var e=this.props.wallet.new_wallet;this.props.wallet.wallet_names.has(e);return f.a.createElement("div",null,f.a.createElement(R.a,{style:{textAlign:"left",maxWidth:"30rem"},component:"p",content:"wallet.import_backup_choose"}),(new FileReader).readAsBinaryString?null:f.a.createElement("p",{className:"error"},"Warning! You browser doesn't support some some file operations required to restore backup, we recommend you to use Chrome or Firefox browsers to restore your backup."),f.a.createElement(G,null,f.a.createElement(K,null),f.a.createElement(q,{saveWalletObject:!0},f.a.createElement(I,null,f.a.createElement(z,null)))))}}]),t}(u.Component);A=Object(_.connect)(A,D);var z=function(e){function t(){s(this,t);var e=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return l(t,e),M(t,[{key:"isRestored",value:function(){var e=this.props.wallet.new_wallet;return this.props.wallet.wallet_names.has(e)}},{key:"render",value:function(){var e=this.props.wallet.new_wallet;return this.isRestored()?f.a.createElement("span",null,f.a.createElement("h5",null,f.a.createElement(R.a,{content:"wallet.restore_success",name:e.toUpperCase()})),f.a.createElement(p.b,{to:"dashboard"},f.a.createElement("div",{className:"button outline"},f.a.createElement(R.a,{component:"span",content:"header.dashboard"}))),f.a.createElement("div",null,this.props.children)):f.a.createElement("span",null,f.a.createElement("h3",null,f.a.createElement(R.a,{content:"wallet.ready_to_restore"})),f.a.createElement("div",{className:"button outline",onClick:this.onRestore.bind(this)},f.a.createElement(R.a,{content:"wallet.restore_wallet_of",name:e})))}},{key:"onRestore",value:function(){d.a.restore(this.props.wallet.new_wallet,this.props.backup.wallet_object)}}]),t}(u.Component);z=Object(_.connect)(z,D);var I=function(e){function t(){s(this,t);var e=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={new_wallet:null,accept:!1},e}return l(t,e),M(t,[{key:"componentWillMount",value:function(){var e=!!this.props.wallet.current_wallet;if(!e){var t="default";this.props.backup.name&&(t=this.props.backup.name.match(/[a-z0-9_-]*/)[0]),h.a.setNewWallet(t),this.setState({accept:!0})}if(e&&this.props.backup.name&&!this.state.new_wallet){var n=this.props.backup.name.match(/[a-z0-9_-]*/)[0];n&&this.setState({new_wallet:n})}}},{key:"render",value:function(){if(this.state.accept)return f.a.createElement("span",null,this.props.children);var e=!!this.state.new_wallet,t=!!e&&this.props.wallet.wallet_names.has(this.state.new_wallet),n=!t&&e;return f.a.createElement("form",{onSubmit:this.onAccept.bind(this)},f.a.createElement("h5",null,f.a.createElement(R.a,{content:"wallet.new_wallet_name"})),f.a.createElement("input",{type:"text",id:"new_wallet",onChange:this.formChange.bind(this),value:this.state.new_wallet}),f.a.createElement("p",null,t?f.a.createElement(R.a,{content:"wallet.wallet_exist"}):null),f.a.createElement("div",{onClick:this.onAccept.bind(this),type:"submit",className:j()("button outline",{disabled:!n})},f.a.createElement(R.a,{content:"wallet.accept"})))}},{key:"onAccept",value:function(e){e&&e.preventDefault(),this.setState({accept:!0}),h.a.setNewWallet(this.state.new_wallet)}},{key:"formChange",value:function(e){var t=e.target.id,n=e.target.value;if("new_wallet"!==t||(n=n.toLowerCase(),!/[^a-z0-9_-]/.test(n))){var a={};a[t]=n,this.setState(a)}}}]),t}(u.Component);I=Object(_.connect)(I,D);var F=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),M(t,[{key:"componentWillMount",value:function(){try{this.isFileSaverSupported=!!new Blob}catch(e){}}},{key:"componentDidMount",value:function(){this.isFileSaverSupported||O.a.error("File saving is not supported")}},{key:"render",value:function(){return f.a.createElement("div",{className:"button",onClick:this.onDownload.bind(this)},f.a.createElement(R.a,{content:"wallet.download"}))}},{key:"onDownload",value:function(){var e=new Blob([this.props.backup.contents],{type:"application/octet-stream; charset=us-ascii"});if(e.size!==this.props.backup.size)throw new Error("Invalid backup to download conversion");Object(C.saveAs)(e,this.props.backup.name),d.a.setBackupDate(),this.props.downloadCb&&this.props.downloadCb()}}]),t}(u.Component);F=Object(_.connect)(F,D);var W=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),M(t,[{key:"getBackupName",value:function(){var e=this.props.wallet.current_wallet,t=x.ChainConfig.address_prefix.toLowerCase();0!==e.indexOf(t)&&(e=t+"_"+e);var n=new Date,a=n.getMonth()+1,r=n.getDate();return e=e+"_"+n.getFullYear()+(a>=10?a:"0"+a)+(r>=10?r:"0"+r)+".bin"}},{key:"render",value:function(){if(!!this.props.backup.contents)return f.a.createElement("div",null,this.props.children);var e=null!=S.a.getWallet();return f.a.createElement("div",null,this.props.noText?null:f.a.createElement("div",{style:{textAlign:"left"}},this.props.newAccount?f.a.createElement(R.a,{component:"p",content:"wallet.backup_new_account"}):null,f.a.createElement(R.a,{component:"p",content:"wallet.backup_explain"})),f.a.createElement("div",{onClick:this.onCreateBackup.bind(this),className:j()("button",{disabled:!e}),style:{marginBottom:10}},f.a.createElement(R.a,{content:"wallet.create_backup_of",name:this.props.wallet.current_wallet})),f.a.createElement(H,null))}},{key:"onCreateBackup",value:function(){var e=this,t=S.a.getWallet().password_pubkey;Object(b.a)(t).then(function(t){var n=e.getBackupName();b.c.incommingBuffer({name:n,contents:t})})}}]),t}(u.Component);W=Object(_.connect)(W,D);var H=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),M(t,[{key:"render",value:function(){if(!S.a.getWallet())return null;var e=S.a.getWallet().backup_date,t=S.a.getWallet().last_modified,n=e?f.a.createElement("h4",null,f.a.createElement(R.a,{content:"wallet.last_backup"})," ",f.a.createElement(m.a,{value:e})):f.a.createElement(R.a,{style:{paddingTop:20},className:"facolor-error",component:"p",content:"wallet.never_backed_up"}),a=null;return e&&(a=t.getTime()>e.getTime()?f.a.createElement("h4",{className:"facolor-error"},f.a.createElement(R.a,{content:"wallet.need_backup"})):f.a.createElement("h4",{className:"success"},f.a.createElement(R.a,{content:"wallet.noneed_backup"}))),f.a.createElement("span",null,n,a)}}]),t}(u.Component),G=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),M(t,[{key:"reset",value:function(){b.c.reset()}},{key:"render",value:function(){var e=f.a.createElement("div",{style:{paddingTop:20}},f.a.createElement("div",{onClick:this.reset.bind(this),className:j()("button outline",{disabled:!this.props.backup.contents})},f.a.createElement(R.a,{content:"wallet.reset"})));if(this.props.backup.contents&&this.props.backup.public_key)return f.a.createElement("span",null,this.props.children,e);var t=this.props.backup.contents&&!this.props.backup.public_key;return f.a.createElement("div",null,f.a.createElement("input",{ref:"file_input",accept:".bin",type:"file",id:"backup_input_file",style:{border:"solid"},onChange:this.onFileUpload.bind(this)}),t?f.a.createElement("h5",null,f.a.createElement(R.a,{content:"wallet.invalid_format"})):null,e)}},{key:"onFileUpload",value:function(e){var t=e.target.files[0];b.c.incommingWebFile(t),this.forceUpdate()}}]),t}(u.Component);G=Object(_.connect)(G,D);var K=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),M(t,[{key:"render",value:function(){return f.a.createElement("span",null,f.a.createElement("h5",null,f.a.createElement("b",null,this.props.backup.name)," (",this.props.backup.size," bytes)"),this.props.backup.last_modified?f.a.createElement("div",null,this.props.backup.last_modified):null,f.a.createElement("br",null))}}]),t}(u.Component);K=Object(_.connect)(K,D);var q=function(e){function t(){s(this,t);var e=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e}return l(t,e),M(t,[{key:"_getInitialState",value:function(){return{backup_password:"",verified:!1}}},{key:"render",value:function(){return this.state.verified?f.a.createElement("span",null,this.props.children):f.a.createElement("form",{onSubmit:this.onPassword.bind(this)},f.a.createElement("label",null,f.a.createElement(R.a,{content:"wallet.enter_password"})),f.a.createElement("input",{type:"password",id:"backup_password",onChange:this.formChange.bind(this),value:this.state.backup_password}),f.a.createElement(U,null),f.a.createElement("div",{type:"submit",className:"button outline",onClick:this.onPassword.bind(this)},f.a.createElement(R.a,{content:"wallet.submit"})))}},{key:"onPassword",value:function(e){var t=this;e&&e.preventDefault();var n=g.h.fromSeed(this.state.backup_password||""),a=this.props.backup.contents;Object(b.b)(n.toWif(),a).then(function(e){t.setState({verified:!0}),t.props.saveWalletObject&&P.setWalletObjct(e)}).catch(function(e){console.error("Error verifying wallet "+t.props.backup.name,e,e.stack),"invalid_decryption_key"===e?O.a.error("Invalid Password"):O.a.error(""+e)})}},{key:"formChange",value:function(e){var t={};t[e.target.id]=e.target.value,this.setState(t)}}]),t}(u.Component);q.propTypes={saveWalletObject:u.PropTypes.bool},q=Object(_.connect)(q,D);var U=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),M(t,[{key:"render",value:function(){return f.a.createElement("div",null,f.a.createElement("pre",{className:"no-overflow"},this.props.backup.sha1," * SHA1"),f.a.createElement("br",null))}}]),t}(u.Component);U=Object(_.connect)(U,D);var V=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),M(t,[{key:"render",value:function(){var e=this.props.label||f.a.createElement(R.a,{content:"wallet.reset"});return f.a.createElement("span",{className:"button cancel",onClick:this.onReset.bind(this)},e)}},{key:"onReset",value:function(){b.c.reset(),window.history.back()}}]),t}(u.Component)},405:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"WalletManager",function(){return g}),n.d(t,"WalletOptions",function(){return w}),n.d(t,"ChangeActiveWallet",function(){return E}),n.d(t,"WalletDelete",function(){return k});var i=n(1),s=n.n(i),c=n(35),l=n(66),u=(n.n(l),n(104)),f=n(107),p=n(20),m=n.n(p),_=n(49),d=n.n(_),h=n(21),v=n.n(h),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),y={listenTo:function(){return[f.a]},getProps:function(){return f.a.getState()}},g=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),b(t,[{key:"getTitle",value:function(){switch(this.props.location.pathname){case"/wallet/create":return"wallet.create_wallet";case"/wallet/backup/create":return"wallet.create_backup";case"/wallet/backup/restore":return"wallet.restore_backup";case"/wallet/backup/brainkey":return"wallet.backup_brainkey";case"/wallet/delete":return"wallet.delete_wallet";case"/wallet/change-password":return"wallet.change_password";case"/wallet/import-keys":return"wallet.import_keys";default:return"wallet.console"}}},{key:"render",value:function(){return s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement("div",{className:"grid-container",style:{maxWidth:"40rem"}},s.a.createElement("div",{className:"content-block center-content"},s.a.createElement("div",{className:"page-header"},s.a.createElement(m.a,{component:"h3",content:this.getTitle()})),s.a.createElement("div",{className:"content-block"},this.props.children))))}}]),t}(i.Component);g=Object(l.connect)(g,y);var w=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),b(t,[{key:"render",value:function(){var e=!!this.props.current_wallet,t=this.props.wallet_names.size>1,n=this.props.current_wallet?this.props.current_wallet.toUpperCase():"";return s.a.createElement("span",null,s.a.createElement("div",{className:"grid-block"},s.a.createElement("div",{className:"grid-content"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("label",null,s.a.createElement(m.a,{content:"wallet.active_wallet"}),":"),s.a.createElement("div",null,n),s.a.createElement("br",null),t?s.a.createElement(c.b,{to:"/wallet/change"},s.a.createElement("div",{className:"button outline success"},s.a.createElement(m.a,{content:"wallet.change_wallet"}))):null))),s.a.createElement("div",{className:"grid-content"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("label",null,s.a.createElement(m.a,{content:"wallet.import_keys_tool"})),s.a.createElement("div",{style:{visibility:"hidden"}},"Dummy"),s.a.createElement("br",null),e?s.a.createElement(c.b,{to:"/wallet/import-keys"},s.a.createElement("div",{className:"button outline success"},s.a.createElement(m.a,{content:"wallet.import_keys"}))):null))),e?s.a.createElement("div",{className:"grid-content"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("label",null,s.a.createElement(m.a,{content:"wallet.balance_claims"})),s.a.createElement("div",{style:{visibility:"hidden"}},"Dummy"),s.a.createElement("br",null),s.a.createElement(c.b,{to:"wallet/balance-claims"},s.a.createElement("div",{className:"button outline success"},s.a.createElement(m.a,{content:"wallet.balance_claim_lookup"})))))):null),e?s.a.createElement(c.b,{to:"wallet/backup/create"},s.a.createElement("div",{className:"button outline success"},s.a.createElement(m.a,{content:"wallet.create_backup"}))):null,e?s.a.createElement(c.b,{to:"wallet/backup/brainkey"},s.a.createElement("div",{className:"button outline success"},s.a.createElement(m.a,{content:"wallet.backup_brainkey"}))):null,s.a.createElement(c.b,{to:"wallet/backup/restore"},s.a.createElement("div",{className:"button outline success"},s.a.createElement(m.a,{content:"wallet.restore_backup"}))),s.a.createElement("br",null),e?s.a.createElement("br",null):null,s.a.createElement(c.b,{to:"wallet/create"},s.a.createElement("div",{className:"button outline success"},s.a.createElement(m.a,{content:"wallet.new_wallet"}))),e?s.a.createElement(c.b,{to:"wallet/delete"},s.a.createElement("div",{className:"button outline success"},s.a.createElement(m.a,{content:"wallet.delete_wallet"}))):null,e?s.a.createElement(c.b,{to:"wallet/change-password"},s.a.createElement("div",{className:"button outline success"},s.a.createElement(m.a,{content:"wallet.change_password"}))):null)}}]),t}(i.Component);w=Object(l.connect)(w,y);var E=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return o(t,e),b(t,[{key:"componentWillMount",value:function(){var e=this.props.current_wallet;this.setState({current_wallet:e})}},{key:"componentWillReceiveProps",value:function(e){e.current_wallet!==this.state.current_wallet&&this.setState({current_wallet:e.current_wallet})}},{key:"render",value:function(){var e=f.a.getState(),t=[];e.wallet_names.forEach(function(e){t.push(s.a.createElement("option",{key:e,value:e},e.toLowerCase()))});var n=this.state.current_wallet!==this.props.current_wallet;return s.a.createElement("div",null,s.a.createElement("section",{className:"block-list"},s.a.createElement("header",null,s.a.createElement(m.a,{content:"wallet.active_wallet"}),":"),s.a.createElement("ul",null,s.a.createElement("li",{className:"with-dropdown"},e.wallet_names.count()<=1?s.a.createElement("div",{style:{paddingLeft:10}},this.state.current_wallet):s.a.createElement("select",{value:this.state.current_wallet,onChange:this.onChange.bind(this)},t)))),s.a.createElement(c.b,{to:"wallet/create"},s.a.createElement("div",{className:"button outline"},s.a.createElement(m.a,{content:"wallet.new_wallet"}))),n?s.a.createElement("div",{className:"button outline",onClick:this.onConfirm.bind(this)},s.a.createElement(m.a,{content:"wallet.change",name:this.state.current_wallet})):null)}},{key:"onConfirm",value:function(){u.a.setWallet(this.state.current_wallet)}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({current_wallet:t})}}]),t}(i.Component);E=Object(l.connect)(E,y);var k=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={selected_wallet:null,confirm:0},e}return o(t,e),b(t,[{key:"_onCancel",value:function(){this.setState({confirm:0,selected_wallet:null})}},{key:"render",value:function(){if(1===this.state.confirm)return s.a.createElement("div",{style:{paddingTop:20}},s.a.createElement("h4",null,s.a.createElement(m.a,{content:"wallet.delete_confirm_line1"})),s.a.createElement(m.a,{component:"p",content:"wallet.delete_confirm_line3"}),s.a.createElement("br",null),s.a.createElement("div",{className:"button outline",onClick:this.onConfirm2.bind(this)},s.a.createElement(m.a,{content:"wallet.delete_confirm_line4",name:this.state.selected_wallet})),s.a.createElement("div",{className:"button outline",onClick:this._onCancel.bind(this)},s.a.createElement(m.a,{content:"wallet.cancel"})));var e=s.a.createElement("option",{key:"placeholder",value:"",disabled:this.props.wallet_names.size>1}),t=[e];t.push(s.a.createElement("option",{key:"select_option",value:""},v.a.translate("settings.delete_select"),"â€¦")),this.props.wallet_names.forEach(function(e){t.push(s.a.createElement("option",{key:e,value:e},e.toLowerCase()))});var n=!!this.state.selected_wallet;return s.a.createElement("div",{style:{paddingTop:20}},s.a.createElement("section",{className:"block-list"},s.a.createElement("header",null,s.a.createElement(m.a,{content:"wallet.delete_wallet"})),s.a.createElement("ul",null,s.a.createElement("li",{className:"with-dropdown"},s.a.createElement("select",{value:this.state.selected_wallet||"",style:{margin:"0 auto"},onChange:this.onChange.bind(this)},t)))),s.a.createElement("div",{className:d()("button outline",{disabled:!n}),onClick:this.onConfirm.bind(this)},s.a.createElement(m.a,{content:this.state.selected_wallet?"wallet.delete_wallet_name":"wallet.delete_wallet",name:this.state.selected_wallet})))}},{key:"onConfirm",value:function(){this.setState({confirm:1})}},{key:"onConfirm2",value:function(){u.a.deleteWallet(this.state.selected_wallet),this._onCancel()}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({selected_wallet:t})}}]),t}(i.Component);k=Object(l.connect)(k,y)},406:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n.n(i),c=n(35),l=n(20),u=n.n(l),f=n(95),p=n(49),m=n.n(p),_=n(34),d=n(1208),h=n(21),v=n.n(h),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),y=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={success:!1},e}return o(t,e),b(t,[{key:"onAccept",value:function(e){var t=this;e.preventDefault();var n=this.state,a=n.old_password,r=n.new_password;_.a.changePassword(a,r,!0).then(function(){f.a.success("Password changed"),t.setState({success:!0})}).catch(function(e){console.error(e),f.a.error("Unable to change password: "+e)})}},{key:"onOldPassword",value:function(e){this.setState({old_password:e})}},{key:"onNewPassword",value:function(e){this.setState({new_password:e})}},{key:"_onCancel",value:function(){this.setState({old_password:""}),this.refs.pwd.cancel()}},{key:"render",value:function(){var e=!!this.state.new_password;return this.state.success?s.a.createElement("div",null,s.a.createElement(u.a,{component:"p",content:"wallet.change_success"}),s.a.createElement(u.a,{component:"p",content:"wallet.change_backup"}),s.a.createElement(c.b,{to:"/wallet/backup/create"},s.a.createElement("div",{className:"button outline"},s.a.createElement(u.a,{content:"wallet.create_backup"})))):s.a.createElement("span",null,s.a.createElement(g,{ref:"pwd",onValid:this.onOldPassword.bind(this)},s.a.createElement(d.a,{onSubmit:this.onAccept.bind(this),newPassword:!0,onValid:this.onNewPassword.bind(this)},s.a.createElement("button",{className:m()("button outline",{disabled:!e}),type:"submit",onClick:this.onAccept.bind(this)},s.a.createElement(u.a,{content:"wallet.accept"})),s.a.createElement("div",{className:"button outline",onClick:this._onCancel.bind(this)},s.a.createElement(u.a,{content:"wallet.cancel"})))))}}]),t}(i.Component);t.default=y;var g=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={password:"",verified:!1},e}return o(t,e),b(t,[{key:"cancel",value:function(){this.setState({verified:!1,password:""})}},{key:"onPassword",value:function(e){e.preventDefault(),_.a.validatePassword(this.state.password)?(this.setState({verified:!0}),this.props.onValid(this.state.password)):f.a.error("Invalid Password")}},{key:"formChange",value:function(e){var t={};t[e.target.id]=e.target.value,this.setState(t)}},{key:"render",value:function(){return this.state.verified?s.a.createElement("div",{className:"grid-content"},this.props.children):s.a.createElement("form",{onSubmit:this.onPassword.bind(this)},s.a.createElement("label",null,s.a.createElement(u.a,{content:"wallet.existing_password"})),s.a.createElement("section",null,s.a.createElement("input",{placeholder:v.a.translate("wallet.current_pass"),type:"password",id:"password",onChange:this.formChange.bind(this),value:this.state.password})),s.a.createElement("button",{className:"button outline"},s.a.createElement(u.a,{content:"wallet.submit"})))}}]),t}(i.Component);g.propTypes={onValid:s.a.PropTypes.func.isRequired};!function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o(t,e),b(t,[{key:"render",value:function(){var e=this.props.label||s.a.createElement(u.a,{content:"wallet.reset"});return s.a.createElement("span",{className:"button outline",onClick:this.onReset.bind(this)},e)}},{key:"onReset",value:function(){window.history.back()}}])}(i.Component)},407:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(1),m=n.n(p),_=n(66),d=n(49),h=n.n(d),v=n(95),b=n(7),y=n(12),g=n(96),w=n(69),E=n(141),k=n(105),P=n(20),S=n.n(P),O=n(21),C=n.n(O),B=n(112),j=n(385),N=n(384),R=n(94),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),M=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),x(t,[{key:"render",value:function(){if(void 0===this.props.balances)return m.a.createElement("div",null,m.a.createElement(S.a,{content:"wallet.loading_balances"}),"â€¦");var e=this.props.balances.groupBy(function(e){return e.balance.asset_id}).map(function(e){return e.reduce(function(e,t){return e+Number(t.balance.amount)},0)});return e.size?m.a.createElement("div",null,e.map(function(e,t){return m.a.createElement("div",{key:t},m.a.createElement(R.a,{color:"info",amount:e,asset:t}))}).toArray()):m.a.createElement("div",null,"None")}}]),t}(p.Component);M=Object(_.connect)(M,{listenTo:function(){return[N.a]},getProps:function(){return N.a.getState()}});var D=M,L=n(34),T=n(10),A=n(67),z=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),I=function(e){function t(){i(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e._export("importing"),e}return c(t,e),z(t,[{key:"_getInitialState",value:function(){return{importing:!1}}},{key:"importing",value:function(e){this.setState({importing:e})}}]),t}(A.a),F=T.a.createStore(I,"ImportKeysStore"),W=F,H=n(1226),G=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1228);var K=function(e){var t=e.key_count;return t?m.a.createElement("span",null,"Found ",t," private keys"):m.a.createElement("span",null)},q=function(e){function t(){l(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e._renderBalanceClaims=e._renderBalanceClaims.bind(e),e}return f(t,e),G(t,[{key:"_getInitialState",value:function(){return{keys_to_account:{},no_file:!0,account_keys:[],reset_file_name:arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.state.reset_file_name:Date.now(),reset_password:Date.now(),password_checksum:null,import_file_message:null,import_password_message:null,imported_keys_public:{},key_text_message:null,genesis_filtering:!1,genesis_filter_status:[],genesis_filter_finished:void 0,importSuccess:!1}}},{key:"reset",value:function(e,t){var n=this;e&&e.preventDefault();var a=this._getInitialState(t);this.setState(a,function(){return n.updateOnChange()})}},{key:"onWif",value:function(e){e.preventDefault();var t=this.refs.wifInput.value;this.addByPattern(t)}},{key:"onCancel",value:function(e){e&&e.preventDefault(),this.setState(this._getInitialState())}},{key:"updateOnChange",value:function(){j.a.setPubkeys(Object.keys(this.state.imported_keys_public))}},{key:"getImportAccountKeyCount",value:function(e){var t={},n=!1;for(var a in e){var r=!0,o=!1,i=void 0;try{for(var s,c=e[a].account_names[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;t[l]=(t[l]||0)+1,n=!0}}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}}return n?t:null}},{key:"upload",value:function(e){var t=this;this.reset(null,!0);var n=e.target.files[0],a=new FileReader;a.onload=function(e){var a=e.target.result;try{var r=void 0;try{r=JSON.parse(a),t._parseImportKeyUpload(r,n.name,function(e){t.setState(e,function(){e.genesis_filter_finished&&t._passwordCheck()})})}catch(e){try{r||n.name,t._parseWalletJson(r)}catch(e){if(!t.addByPattern(a))throw e}t._passwordCheck()}}catch(e){console.error("... ImportKeys upload error",e),t.setState({import_file_message:e})}},a.readAsText(n)}},{key:"_parseImportKeyUpload",value:function(e,t,n){var a=this,r=void 0,o=void 0;try{if(!(r=e.password_checksum))throw t+" is an unrecognized format";if(!Array.isArray(e.account_keys))throw t+" is an unrecognized format";o=e.account_keys}catch(e){throw e.message||e}var i=new H.a;if(!i.isAvailable())return void n({password_checksum:r,account_keys:o,genesis_filter_finished:!0,genesis_filtering:!1});this.setState({genesis_filter_initalizing:!0},function(){return i.init(function(){var e=a.state.genesis_filter_status,t=o;i.filter(t,function(a){if("missing_public_keys"===a.error)return console.error("un-released format, just for testing"),void n({password_checksum:r,account_keys:o,genesis_filter_finished:!0,genesis_filtering:!1});if(a.success)return void n({password_checksum:r,account_keys:t,genesis_filter_finished:!0,genesis_filtering:!1});if(void 0!==a.initalizing)return void n({genesis_filter_initalizing:a.initalizing,genesis_filtering:!0});if(void 0===a.importing)return void console.error("unknown status",a);if(e.length){e[e.length-1].account_name===a.account_name?e[e.length-1]=a:e.push(a)}else e.push(a);n({genesis_filter_status:e})})})})}},{key:"_parseWalletJson",value:function(e){var t=void 0,n=void 0,a={},r={},o=function(e,t){e=y.ChainConfig.address_prefix+e.substring(3);var n=b.i.fromPublicKeyString(e).toAddressString(),a=r[t]||[];n="BTS"+n.substring(3),a.push(n),r[t]=a};try{if(!Array.isArray(e))throw new Error("Invalid wallet format");var i=!0,s=!1,c=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var f=l.value;if("key_record_type"==f.type&&f.data.account_address&&f.data.encrypted_private_key){var p=f.data.account_address,m=a[p]||[];m.push(f.data.encrypted_private_key),a[p]=m}else if("account_record_type"!=f.type)if("property_record_type"!=f.type||"encrypted_brainkey"!=f.data.key){if("master_key_record_type"==f.type){if(!f.data)throw file.name+" invalid master_key_record record";if(!f.data.checksum)throw file.name+" is missing master_key_record checksum";t=f.data.checksum}}else n=f.data.value;else{var _=f.data.name;o(f.data.owner_key,_);var d=!0,h=!1,v=void 0;try{for(var g,w=f.data.active_key_history[Symbol.iterator]();!(d=(g=w.next()).done);d=!0){var E=g.value;o(E[1],_)}}catch(e){h=!0,v=e}finally{try{!d&&w.return&&w.return()}finally{if(h)throw v}}}}}catch(e){s=!0,c=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw c}}if(!n)throw"Please use a BTS 1.0 wallet_export_keys file instead";if(!t)throw file.name+" is missing password_checksum";if(!enckeys.length)throw file.name+" does not contain any private keys"}catch(e){throw e.message||e}var k=[];for(var P in r){var S=[],O=!0,C=!1,B=void 0;try{for(var j,N=r[P][Symbol.iterator]();!(O=(j=N.next()).done);O=!0){var R=j.value,x=a[R];if(x){var M=!0,D=!1,L=void 0;try{for(var T,A=x[Symbol.iterator]();!(M=(T=A.next()).done);M=!0){var z=T.value;S.push(z)}}catch(e){D=!0,L=e}finally{try{!M&&A.return&&A.return()}finally{if(D)throw L}}}}}catch(e){C=!0,B=e}finally{try{!O&&N.return&&N.return()}finally{if(C)throw B}}k.push({account_name:P,encrypted_private_keys:S})}this.setState({password_checksum:t,account_keys:k})}},{key:"_passwordCheck",value:function(e){var t=this;e&&"preventDefault"in e&&e.preventDefault();var n=this.refs.password,a=n?n.value:"";if(this.state.password_checksum!=b.m.sha512(b.m.sha512(a)).toString("hex"))return this.setState({no_file:!1,import_password_message:a.length?"Incorrect password":null});this.setState({no_file:!1,reset_password:Date.now(),import_password_message:C.a.translate("wallet.import_pass_match")},function(){return t._decryptPrivateKeys(a)})}},{key:"_decryptPrivateKeys",value:function(e){var t=this,n=b.a.fromSeed(e),a=!0,r=!0,o=!1,i=void 0;try{for(var s,c=this.state.account_keys[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;if(l.encrypted_private_keys)for(var u=l.account_name.trim(),f=new RegExp("^"+y.ChainConfig.address_prefix),p=0;p<l.encrypted_private_keys.length;p++){var m=l.encrypted_private_keys[p],_=l.public_keys?l.public_keys[p]:null;try{var d=n.decryptHex(m);if(_)f.test(_)||(_=y.ChainConfig.address_prefix+_.substring(3));else{var h=b.h.fromHex(d),g=h.toPublicKey();_=g.toPublicKeyString()}this.state.imported_keys_public[_]=!0;var w=this.state.keys_to_account[d]||{account_names:[]},E=w.account_names,k=!1,P=!0,S=!1,O=void 0;try{for(var C,B=E[Symbol.iterator]();!(P=(C=B.next()).done);P=!0){var j=C.value;j==u&&(k=!0)}}catch(e){S=!0,O=e}finally{try{!P&&B.return&&B.return()}finally{if(S)throw O}}if(k)continue;E.push(u),this.state.keys_to_account[d]={account_names:E,public_key_string:_}}catch(e){console.log(e,e.stack);var N=e.message||e;v.a.error("Account "+u+" had a private key import error: "+N)}}else{var R="Account "+l.account_name+" missing encrypted_private_keys";console.error(R),a&&(v.a.error(R),a=!1)}}}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}this.setState({import_file_message:null,import_password_message:null,password_checksum:null},function(){return t.updateOnChange()})}},{key:"_saveImport",value:function(e){var t=this;e.preventDefault();var n=g.a.getState().keys,a={};for(var r in this.state.imported_keys_public)n.has(r)&&(delete this.state.imported_keys_public[r],a[r]=!0);if(0===Object.keys(this.state.imported_keys_public).length)return void v.a.error("This wallet has already been imported");var o=this.state.keys_to_account,i=!0,s=!1,c=void 0;try{for(var l,u=Object.keys(o)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var f=l.value,p=o[f];p.account_names;a[p.public_key_string]&&delete o[f]}}catch(e){s=!0,c=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw c}}w.a.unlock().then(function(){W.importing(!0),setTimeout(function(){return t.saveImport()},200)})}},{key:"saveImport",value:function(){var e=this,t=this.state.keys_to_account,n=[],a=!0,r=!1,o=void 0;try{for(var i,s=Object.keys(t)[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=i.value,l=t[c],u=l.account_names,f=l.public_key_string;n.push({private_plainhex:c,import_account_names:u,public_key_string:f})}}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}this.reset(),L.a.importKeysWorker(n).then(function(t){W.importing(!1);var a=n.length;v.a.success(C.a.translate("wallet.import_key_success",{count:a})),e.setState({importSuccess:!0})}).catch(function(e){console.log("error:",e),W.importing(!1);var t=e;try{t=e.target.error.message}catch(e){}v.a.error("Key import error: "+t)})}},{key:"addByPattern",value:function(e){var t=this;if(!e)return!1;var n=0,a=0,r=/5[HJK][1-9A-Za-z]{49}/g,o=!0,i=!1,s=void 0;try{for(var c,l=(e.match(r)||[])[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;try{var f=b.h.fromWif(u),p=f.toBuffer().toString("hex"),m=f.toPublicKey(),_=m.toPublicKeyString();this.state.imported_keys_public[_]=!0,this.state.keys_to_account[p]={account_names:[],public_key_string:_},n++}catch(e){a++}}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return this.setState({key_text_message:"Found "+(n?n+" valid":"")+(a?" and "+a+" invalid":"")+" key"+(n>1||a>1?"s":"")+"."},function(){return t.updateOnChange()}),this.state.key_text_message=null,n}},{key:"_renderBalanceClaims",value:function(){return m.a.createElement("div",null,m.a.createElement(B.default,null),m.a.createElement("div",{style:{paddingTop:15}},m.a.createElement("div",{className:"button success",onClick:this.onCancel.bind(this)},m.a.createElement(S.a,{content:"wallet.done"}))))}},{key:"render",value:function(){var e=this,t=this.props.privateKey,n=this.state.keys_to_account,a=Object.keys(n).length,r=this.getImportAccountKeyCount(n);if(!L.a.getWallet())return m.a.createElement(E.WalletCreate,{importKeys:!0,hideTitle:!0});if(this.props.importing)return m.a.createElement("div",null,m.a.createElement("div",{className:"center-content"},m.a.createElement(k.a,{type:"circle"})));var o=this.state.genesis_filtering,i=(!!this.state.genesis_filter_status.length&&this.state.genesis_filter_finished,null);if(this.state.genesis_filter_status.length){i=[];var s=!0,c=!1,l=void 0;try{for(var u,f=this.state.genesis_filter_status[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var p=u.value;p.count&&p.total&&i.push(m.a.createElement("tr",{key:p.account_name},m.a.createElement("td",null,p.account_name),m.a.createElement("td",null,o?m.a.createElement("span",null,"Filtering ",Math.round(p.count/p.total*100)," % "):m.a.createElement("span",null,p.count))))}}catch(e){c=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(c)throw l}}}var _=0!==a,d=C.a.translate("wallet.import_password");if(_&&(d=""),!i&&r){i=[];for(var v in r)i.push(m.a.createElement("tr",{key:v},m.a.createElement("td",null,v),m.a.createElement("td",null,r[v])))}var b=m.a.createElement("div",{className:"button success",onClick:this.onCancel.bind(this)},m.a.createElement(S.a,{content:"wallet.cancel"})),y=1;return this.state.importSuccess?this._renderBalanceClaims():m.a.createElement("div",null,m.a.createElement("div",{style:{padding:"10px 0"}},m.a.createElement("span",null,this.state.key_text_message?this.state.key_text_message:m.a.createElement(K,{key_count:a})),_?m.a.createElement("span",null," (",m.a.createElement("a",{onClick:this.reset.bind(this)},m.a.createElement(S.a,{content:"wallet.reset"})),")"):null),i?m.a.createElement("div",null,i.length?m.a.createElement("div",null,m.a.createElement("table",{className:"table"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,m.a.createElement(S.a,{content:"explorer.account.title"})),m.a.createElement("th",null,m.a.createElement(S.a,{content:"settings.restore_key_count"})))),m.a.createElement("tbody",null,i)),m.a.createElement("br",null)):C.a.translate("wallet.no_accounts")):null,m.a.createElement("br",null),_||this.state.genesis_filter_initalizing?null:m.a.createElement("div",null,m.a.createElement("div",null,m.a.createElement("div",null,t?m.a.createElement("form",{onSubmit:this.onWif.bind(this)},m.a.createElement(S.a,{component:"label",content:"wallet.paste_private"}),m.a.createElement("input",{ref:"wifInput",type:"password",id:"wif",tabIndex:y++}),m.a.createElement("button",{className:"button",type:"submit"},m.a.createElement(S.a,{content:"wallet.submit"})),b):m.a.createElement("form",{onSubmit:this._passwordCheck.bind(this)},m.a.createElement("label",null,m.a.createElement(S.a,{content:"wallet.bts_09_export"}),this.state.no_file?null:m.a.createElement("span",null,"Â  (",m.a.createElement("a",{onClick:this.reset.bind(this)},"Reset"),")")),m.a.createElement("input",{type:"file",id:"file_input",accept:".json",style:{border:"solid",marginBottom:15},key:this.state.reset_file_name,onChange:this.upload.bind(this)}),m.a.createElement("div",null,this.state.import_file_message),this.state.no_file?null:m.a.createElement("div",null,m.a.createElement("input",{type:"password",ref:"password",key:this.state.reset_password,placeholder:d,onChange:function(){e.state.import_password_message&&e.state.import_password_message.length&&e.setState({import_password_message:null})}}),m.a.createElement("p",{className:"facolor-error"},this.state.import_password_message)),m.a.createElement("div",{className:"button-group"},m.a.createElement("button",{className:h()("button",{disabled:!!this.state.no_file}),type:"submit"},m.a.createElement(S.a,{content:"wallet.submit"})),b))),m.a.createElement("br",null),m.a.createElement("br",null))),this.state.genesis_filter_initalizing?m.a.createElement("div",null,m.a.createElement("div",{className:"center-content"},m.a.createElement(k.a,{type:"circle"}))):null,_?m.a.createElement("div",null,m.a.createElement("div",null,m.a.createElement("div",{className:"button-group"},m.a.createElement("div",{className:h()("button success",{disabled:!_}),onClick:this._saveImport.bind(this)},m.a.createElement(S.a,{content:"wallet.import_keys"})),m.a.createElement("div",{className:"button secondary",onClick:this.reset.bind(this)},m.a.createElement(S.a,{content:"wallet.cancel"})))),m.a.createElement("h4",null,m.a.createElement(S.a,{content:"wallet.unclaimed"})),m.a.createElement(S.a,{component:"p",content:"wallet.claim_later"}),m.a.createElement("div",{className:"grid-block"},m.a.createElement("div",{className:"grid-content no-overflow"},m.a.createElement(S.a,{component:"label",content:"wallet.totals"}),m.a.createElement(D,null))),m.a.createElement("br",null)):null)}}]),t}(p.Component);q.defaultProps={privateKey:!0},q=Object(_.connect)(q,{listenTo:function(){return[W]},getProps:function(){return{importing:W.getState().importing}}});t.default=q},408:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n.n(i),c=n(93),l=n(20),u=n.n(l),f=n(104),p=n(34),m=n(7),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e}return o(t,e),_(t,[{key:"_getInitialState",value:function(){return{password:null,brainkey:null,invalid_password:!1}}},{key:"render",value:function(){var e,t=p.a.getWallet().brainkey_backup_date,n=t?s.a.createElement("div",null,s.a.createElement(u.a,{content:"wallet.brainkey_backed_up"}),": ",s.a.createElement(c.a,{value:t})):s.a.createElement(u.a,{className:"facolor-error",component:"p",content:"wallet.brainkey_not_backed_up"});if(this.state.verified){var a=m.m.sha1(this.state.brainkey).toString("hex").substring(0,4);e=s.a.createElement("div",null,s.a.createElement("h3",null,s.a.createElement(u.a,{content:"wallet.brainkey"})),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("h5",null,this.state.brainkey))),s.a.createElement("br",null),s.a.createElement("pre",{className:"no-overflow"},"sha1 hash of the brainkey: ",a),s.a.createElement("br",null),n)}if(!e&&this.state.brainkey){var a=m.m.sha1(this.state.brainkey).toString("hex").substring(0,4);e=s.a.createElement("span",null,s.a.createElement("h3",null,s.a.createElement(u.a,{content:"wallet.brainkey"})),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("h5",null,this.state.brainkey))),s.a.createElement("div",{style:{padding:"10px 0"}},s.a.createElement("pre",{className:"no-overflow"},"sha1 hash of your brainkey: ",a)),s.a.createElement("hr",null),s.a.createElement("div",{style:{padding:"10px 0 20px 0"}},s.a.createElement(u.a,{content:"wallet.brainkey_w1"}),s.a.createElement("br",null),s.a.createElement(u.a,{content:"wallet.brainkey_w2"}),s.a.createElement("br",null),s.a.createElement(u.a,{content:"wallet.brainkey_w3"})),s.a.createElement("button",{className:"button success",onClick:this.onComplete.bind(this)},s.a.createElement(u.a,{content:"wallet.verify"})),s.a.createElement("button",{className:"button cancel",onClick:this.reset.bind(this)},s.a.createElement(u.a,{content:"wallet.cancel"})))}if(!e){this.state.password&&this.state.password;e=s.a.createElement("span",null,s.a.createElement("label",null,s.a.createElement(u.a,{content:"wallet.enter_password"})),s.a.createElement("form",{onSubmit:this.onSubmit.bind(this),className:"name-form",noValidate:!0},s.a.createElement("input",{type:"password",id:"password",onChange:this.onPassword.bind(this)}),s.a.createElement("p",null,this.state.invalid_password?s.a.createElement("span",{className:"error"},"Invalid password"):s.a.createElement("span",null,s.a.createElement(u.a,{content:"wallet.pwd4brainkey"}))),s.a.createElement("div",null,n,s.a.createElement("br",null)),s.a.createElement("button",{className:"button success"},s.a.createElement(u.a,{content:"wallet.show_brainkey"}))))}return s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement("div",{className:"grid-content no-overflow"},e))}},{key:"onComplete",value:function(e){this.setState({verified:!0}),f.a.setBrainkeyBackupDate()}},{key:"reset",value:function(e){e&&e.preventDefault(),this.setState(this._getInitialState())}},{key:"onBack",value:function(e){e.preventDefault(),window.history.back()}},{key:"onSubmit",value:function(e){e.preventDefault();var t=p.a.isLocked();if(p.a.validatePassword(this.state.password,!0)){var n=p.a.getBrainKey();t&&p.a.onLock(),this.setState({brainkey:n})}else this.setState({invalid_password:!0})}},{key:"onPassword",value:function(e){this.setState({password:e.target.value,invalid_password:!1})}}]),t}(i.Component);t.default=d}});
//# sourceMappingURL=17.js.map